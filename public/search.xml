<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>使用easyexcel读数据库写入到excel和读excel写入数据库</title>
      <link href="/2019/12/19/easy/"/>
      <url>/2019/12/19/easy/</url>
      
        <content type="html"><![CDATA[<!-- build time:Tue Dec 31 2019 09:54:11 GMT+0800 (CST) --><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">使用easyexcel读数据库写入到excel和读excel写入数据库</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="官方仓库"><a href="#官方仓库" class="headerlink" title="官方仓库"></a><a href="https://alibaba-easyexcel.github.io/index.html" target="_blank" rel="noopener">官方仓库</a></h2><h2 id="创建Spring-MyBatis项目"><a href="#创建Spring-MyBatis项目" class="headerlink" title="创建Spring + MyBatis项目"></a>创建Spring + MyBatis项目</h2><ul><li>pom依赖</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.lacknb<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>easy_excel_use<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">source</span>&gt;</span>6<span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">target</span>&gt;</span>6<span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">spring.version</span>&gt;</span>5.1.5.RELEASE<span class="tag">&lt;/<span class="name">spring.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mybatis.version</span>&gt;</span>3.4.5<span class="tag">&lt;/<span class="name">mybatis.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tomcat.version</span>&gt;</span>9.0.12<span class="tag">&lt;/<span class="name">tomcat.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mybatis-spring.version</span>&gt;</span>1.3.2<span class="tag">&lt;/<span class="name">mybatis-spring.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">com.alibaba</span>&gt;</span>1.1.10<span class="tag">&lt;/<span class="name">com.alibaba</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mysql-connector</span>&gt;</span>5.1.43<span class="tag">&lt;/<span class="name">mysql-connector</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>easyexcel<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>LATEST<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-core --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-beans --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-beans<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-context --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-expression<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--                        &lt;dependency&gt;--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--                            &lt;groupId&gt;org.springframework&lt;/groupId&gt;--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--                            &lt;artifactId&gt;spring-aop&lt;/artifactId&gt;--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--                            &lt;version&gt;$&#123;spring.version&#125;&lt;/version&gt;--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--                        &lt;/dependency&gt;--&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--                        &lt;dependency&gt;--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--                            &lt;groupId&gt;org.springframework&lt;/groupId&gt;--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--                            &lt;artifactId&gt;spring-tx&lt;/artifactId&gt;--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--                            &lt;version&gt;$&#123;spring.version&#125;&lt;/version&gt;--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--                        &lt;/dependency&gt;--&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;mybatis.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--    spring与mybatis整合包--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.mybatis/mybatis-spring --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;mybatis-spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--        Druid数据源--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--         https://mvnrepository.com/artifact/com.alibaba/druid --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;com.alibaba&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;mysql-connector&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.17<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.7.29<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-log4j12<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.7.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li><p>jdbc.properties</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">jdbc.driver=com.mysql.jdbc.Driver</span><br><span class="line"># allowMultiQueries=true 允许批量插入</span><br><span class="line">jdbc.url=jdbc:mysql:///one?allowMultiQueries=true&amp;useUnicode=true&amp;characterEncoding=utf8</span><br><span class="line">jdbc.username=root</span><br><span class="line">jdbc.password=123456</span><br></pre></td></tr></table></figure></li><li><p>log4j.properties</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">##define an appender named console</span><br><span class="line">log4j.appender.console=org.apache.log4j.ConsoleAppender</span><br><span class="line">#The Target value is System.out or System.err</span><br><span class="line">log4j.appender.console.Target=System.out</span><br><span class="line">#set the layout type of the apperder</span><br><span class="line">log4j.appender.console.layout=org.apache.log4j.PatternLayout</span><br><span class="line">#set the layout format pattern</span><br><span class="line">log4j.appender.console.layout.ConversionPattern=[%-5p] %m%n</span><br><span class="line"></span><br><span class="line">##define a logger</span><br><span class="line">#log4j.rootLogger=TRACE,console</span><br><span class="line">log4j.logger.cn.lacknb.listener.OneDataListener=debug,console</span><br><span class="line">log4j.logger.cn.lacknb.dao.OneDao=debug,console</span><br></pre></td></tr></table></figure></li><li><p>applicationContext.xml</p></li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"cn.lacknb"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">"classpath:jdbc.properties"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"dataSource"</span> <span class="attr">class</span>=<span class="string">"com.alibaba.druid.pool.DruidDataSource"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClassName"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.driver&#125;"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.url&#125;"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.username&#125;"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.password&#125;"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--配置mybatis工厂 同时指定数据源 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"sqlSessionFactory"</span> <span class="attr">class</span>=<span class="string">"org.mybatis.spring.SqlSessionFactoryBean"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;property name="configLocation" value="classpath:mybatis-config.xml"/&gt; mybatis的配置文件--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"mapperLocations"</span> <span class="attr">value</span>=<span class="string">"classpath:mapper/OneMapper.xml"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 配置一个可以批量执行的sqlSession --&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    &lt;bean id="sqlSession" class="org.mybatis.spring.SqlSessionTemplate"&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;constructor-arg name="sqlSessionFactory" ref="sqlSessionFactory" /&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;constructor-arg name="executorType" value="BATCH"/&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    &lt;/bean&gt;--&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.mybatis.spring.mapper.MapperScannerConfigurer"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"basePackage"</span> <span class="attr">value</span>=<span class="string">"cn.lacknb.dao"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"sqlSessionFactoryBeanName"</span> <span class="attr">value</span>=<span class="string">"sqlSessionFactory"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li><p>OneMapper.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE mapper</span></span><br><span class="line"><span class="meta">        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"</span></span><br><span class="line"><span class="meta">        "http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"cn.lacknb.dao.OneDao"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"oneMap"</span> <span class="attr">type</span>=<span class="string">"cn.lacknb.beans.OneBo"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">"id"</span> <span class="attr">column</span>=<span class="string">"id"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"title"</span> <span class="attr">property</span>=<span class="string">"title"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"words_info"</span> <span class="attr">property</span>=<span class="string">"wordInfo"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"text"</span> <span class="attr">property</span>=<span class="string">"text"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"img_url"</span> <span class="attr">property</span>=<span class="string">"imgUrl"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"pic_info"</span> <span class="attr">property</span>=<span class="string">"picInfo"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"post_date"</span> <span class="attr">property</span>=<span class="string">"postDate"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"share_url"</span> <span class="attr">property</span>=<span class="string">"shareUrl"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectAll"</span> <span class="attr">resultMap</span>=<span class="string">"oneMap"</span>&gt;</span></span><br><span class="line">        select * from t_one</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">"addOne"</span>&gt;</span></span><br><span class="line">        insert into t_one (id, title, words_info, text, pic_info, img_url, post_date, share_url) values</span><br><span class="line">         <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">"list"</span> <span class="attr">separator</span>=<span class="string">","</span> <span class="attr">item</span>=<span class="string">"item"</span>&gt;</span></span><br><span class="line">            (#&#123;item.id&#125;, #&#123;item.title&#125;, #&#123;item.wordInfo&#125;, #&#123;item.text&#125;, #&#123;item.picInfo&#125;,</span><br><span class="line">             #&#123;item.imgUrl&#125;, #&#123;item.postDate&#125;, #&#123;item.shareUrl&#125;)</span><br><span class="line">         <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>One.java, 这是读excel用到的, 根据名字匹配</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.beans;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.excel.annotation.ExcelProperty;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ClassName: One &lt;br/&gt;</span></span><br><span class="line"><span class="comment"> * Description: 读excel文件, 数据封装成这个类 &lt;br/&gt;</span></span><br><span class="line"><span class="comment"> * date: 2019年12月19日 16:40 &lt;br/&gt;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> nianshao &lt;br/&gt;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">One</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Description:  指定列的下标, 或列名.</span></span><br><span class="line"><span class="comment">     * 这里不建议 name和index同时使用</span></span><br><span class="line"><span class="comment">     * 用名字匹配的时候,这里需要注意, 如果名字重复, 会导致只有一个 字段读取到数据</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@ExcelProperty</span>(value = <span class="string">"序号"</span>)</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ExcelProperty</span>(value = <span class="string">"标题"</span>)</span><br><span class="line">    <span class="keyword">private</span> String title;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ExcelProperty</span>(value = <span class="string">"内容作者"</span>)</span><br><span class="line">    <span class="keyword">private</span> String wordInfo;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ExcelProperty</span>(value = <span class="string">"内容"</span>)</span><br><span class="line">    <span class="keyword">private</span> String text;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ExcelProperty</span>(value = <span class="string">"图片链接"</span>)</span><br><span class="line">    <span class="keyword">private</span> String imgUrl;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ExcelProperty</span>(value = <span class="string">"图片作者"</span>)</span><br><span class="line">    <span class="keyword">public</span> String picInfo;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ExcelProperty</span>(value = <span class="string">"发布日期"</span>)</span><br><span class="line">    <span class="keyword">private</span> String postDate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ExcelProperty</span>(value = <span class="string">"分享链接"</span>)</span><br><span class="line">    <span class="keyword">private</span> String shareUrl;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getShareUrl</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> shareUrl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setShareUrl</span><span class="params">(String shareUrl)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.shareUrl = shareUrl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getTitle</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> title;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setTitle</span><span class="params">(String title)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.title = title;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getWordInfo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> wordInfo;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setWordInfo</span><span class="params">(String wordInfo)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.wordInfo = wordInfo;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getText</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> text;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setText</span><span class="params">(String text)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.text = text;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getImgUrl</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> imgUrl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setImgUrl</span><span class="params">(String imgUrl)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.imgUrl = imgUrl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getPicInfo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> picInfo;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPicInfo</span><span class="params">(String picInfo)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.picInfo = picInfo;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getPostDate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> postDate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPostDate</span><span class="params">(String postDate)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.postDate = postDate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"One&#123;"</span> +</span><br><span class="line">                <span class="string">"id="</span> + id +</span><br><span class="line">                <span class="string">", title='"</span> + title + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", wordInfo='"</span> + wordInfo + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", text='"</span> + text + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", imgUrl='"</span> + imgUrl + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", picInfo='"</span> + picInfo + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", postDate='"</span> + postDate + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">'&#125;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>OneBo.java, 从数据库查询之后 封装这个类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.beans;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.excel.annotation.ExcelProperty;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.excel.metadata.BaseRowModel;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ClassName: OneBo &lt;br/&gt;</span></span><br><span class="line"><span class="comment"> * Description: 用来接收 从数据库查询的数据, 然后写入excel &lt;br/&gt;</span></span><br><span class="line"><span class="comment"> * date: 2019年12月19日 16:28 &lt;br/&gt;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> nianshao &lt;br/&gt;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OneBo</span> <span class="keyword">extends</span> <span class="title">BaseRowModel</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ExcelProperty</span>(value = <span class="string">"序号"</span>, index = <span class="number">0</span>)</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ExcelProperty</span>(value = <span class="string">"标题"</span>, index = <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">private</span> String title;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ExcelProperty</span>(value = <span class="string">"内容作者"</span>, index = <span class="number">2</span>)</span><br><span class="line">    <span class="keyword">private</span> String wordInfo;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ExcelProperty</span>(value = <span class="string">"内容"</span>, index = <span class="number">3</span>)</span><br><span class="line">    <span class="keyword">private</span> String text;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ExcelProperty</span>(value = <span class="string">"图片链接"</span>, index = <span class="number">4</span>)</span><br><span class="line">    <span class="keyword">private</span> String imgUrl;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ExcelProperty</span>(value = <span class="string">"图片作者"</span>, index = <span class="number">5</span>)</span><br><span class="line">    <span class="keyword">public</span> String picInfo;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ExcelProperty</span>(value = <span class="string">"发布日期"</span>, index = <span class="number">6</span>)</span><br><span class="line">    <span class="keyword">private</span> String postDate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ExcelProperty</span>(value = <span class="string">"分享链接"</span>, index = <span class="number">7</span>)</span><br><span class="line">    <span class="keyword">private</span> String shareUrl;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getShareUrl</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> shareUrl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setShareUrl</span><span class="params">(String shareUrl)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.shareUrl = shareUrl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getTitle</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> title;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setTitle</span><span class="params">(String title)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.title = title;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getWordInfo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> wordInfo;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setWordInfo</span><span class="params">(String wordInfo)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.wordInfo = wordInfo;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getText</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> text;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setText</span><span class="params">(String text)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.text = text;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getImgUrl</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> imgUrl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setImgUrl</span><span class="params">(String imgUrl)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.imgUrl = imgUrl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getPicInfo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> picInfo;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPicInfo</span><span class="params">(String picInfo)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.picInfo = picInfo;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getPostDate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> postDate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPostDate</span><span class="params">(String postDate)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.postDate = postDate;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>OneDao.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.lacknb.beans.One;</span><br><span class="line"><span class="keyword">import</span> cn.lacknb.beans.OneBo;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Param;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ClassName: OneDao &lt;br/&gt;</span></span><br><span class="line"><span class="comment"> * Description:  &lt;br/&gt;</span></span><br><span class="line"><span class="comment"> * date: 2019年12月19日 16:45 &lt;br/&gt;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> nianshao &lt;br/&gt;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">OneDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function">List&lt;OneBo&gt; <span class="title">selectAll</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">addOne</span><span class="params">(@Param(<span class="string">"list"</span>)</span> List&lt;One&gt; list)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>监听器</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.listener;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.lacknb.beans.One;</span><br><span class="line"><span class="keyword">import</span> cn.lacknb.dao.OneDao;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.excel.context.AnalysisContext;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.excel.event.AnalysisEventListener;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ClassName: OneDataLisenter &lt;br/&gt;</span></span><br><span class="line"><span class="comment"> * Description:  &lt;br/&gt;</span></span><br><span class="line"><span class="comment"> * date: 2019年12月19日 17:48 &lt;br/&gt;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> nianshao &lt;br/&gt;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">// 有个很重要的点 DemoDataListener 不能被spring管理，要每次读取excel都要new,然后里面用到spring可以构造方法传进去</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OneDataListener</span> <span class="keyword">extends</span> <span class="title">AnalysisEventListener</span>&lt;<span class="title">One</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Logger LOGGER = LoggerFactory.getLogger(OneDataListener.class);</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 每隔5条存储数据库，实际使用中可以3000条，然后清理list ，方便内存回收</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> BATCH_COUNT = <span class="number">5</span>;</span><br><span class="line">    List&lt;One&gt; list = <span class="keyword">new</span> ArrayList&lt;One&gt;();</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 假设这个是一个DAO，当然有业务逻辑这个也可以是一个service。当然如果不用存储这个对象没用。</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> OneDao oneDao;</span><br><span class="line"></span><br><span class="line"><span class="comment">//    public DemoDataListener() &#123;</span></span><br><span class="line"><span class="comment">//        // 这里是demo，所以随便new一个。实际使用如果到了spring,请使用下面的有参构造函数</span></span><br><span class="line"><span class="comment">//        demoDAO = new DemoDAO();</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 如果使用了spring,请使用这个构造方法。每次创建Listener的时候需要把spring管理的类传进来</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> oneDao</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">OneDataListener</span><span class="params">(OneDao oneDao)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.oneDao = oneDao;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 这个每一条数据解析都会来调用</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> data</span></span><br><span class="line"><span class="comment">     *            one row value. Is is same as &#123;<span class="doctag">@link</span> AnalysisContext#readRowHolder()&#125;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> context</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">invoke</span><span class="params">(One data, AnalysisContext context)</span> </span>&#123;</span><br><span class="line"><span class="comment">//        System.out.println(data);</span></span><br><span class="line">        LOGGER.info(<span class="string">"解析到一条数据:&#123;&#125;"</span>, data);</span><br><span class="line">        list.add(data);</span><br><span class="line">        <span class="comment">// 达到BATCH_COUNT了，需要去存储一次数据库，防止数据几万条数据在内存，容易OOM</span></span><br><span class="line">        <span class="keyword">if</span> (list.size() &gt;= BATCH_COUNT) &#123;</span><br><span class="line">            saveData();</span><br><span class="line">            <span class="comment">// 存储完成清理 list</span></span><br><span class="line">            list.clear();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 所有数据解析完成了 都会来调用</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> context</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doAfterAllAnalysed</span><span class="params">(AnalysisContext context)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 这里也要保存数据，确保最后遗留的数据也存储到数据库</span></span><br><span class="line">        <span class="keyword">if</span> (list.size() != <span class="number">0</span>)&#123;</span><br><span class="line">            saveData();</span><br><span class="line">        &#125;</span><br><span class="line">        LOGGER.info(<span class="string">"所有数据解析完成！"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 加上存储数据库</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">saveData</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        LOGGER.info(<span class="string">"&#123;&#125;条数据，开始存储数据库！"</span>, list.size());</span><br><span class="line">        oneDao.addOne(list);</span><br><span class="line">        LOGGER.info(<span class="string">"存储数据库成功！"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="从数据库中读取数据存到excel"><a href="#从数据库中读取数据存到excel" class="headerlink" title="从数据库中读取数据存到excel"></a>从数据库中读取数据存到excel</h2><ul><li><p>测试类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.lacknb.beans.One;</span><br><span class="line"><span class="keyword">import</span> cn.lacknb.beans.OneBo;</span><br><span class="line"><span class="keyword">import</span> cn.lacknb.dao.OneDao;</span><br><span class="line"><span class="keyword">import</span> cn.lacknb.listener.OneDataListener;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.excel.EasyExcel;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.excel.ExcelWriter;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.excel.metadata.Sheet;</span><br><span class="line"><span class="keyword">import</span> org.junit.Before;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> org.junit.runner.RunWith;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.ContextConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.junit4.SpringJUnit4ClassRunner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.FileNotFoundException;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStream;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> com.alibaba.excel.support.ExcelTypeEnum.XLSX;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ClassName: Example01 &lt;br/&gt;</span></span><br><span class="line"><span class="comment"> * Description:  &lt;br/&gt;</span></span><br><span class="line"><span class="comment"> * date: 2019年12月19日 12:49 &lt;br/&gt;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> nianshao &lt;br/&gt;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RunWith</span>(SpringJUnit4ClassRunner.class)</span><br><span class="line"><span class="meta">@ContextConfiguration</span>(locations = <span class="string">"classpath:applicationContext.xml"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Example01</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String PATH = <span class="string">"/media/nianshao/nie475/java项目/easy_excel_use/files"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> OneDao oneDao;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Before</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Description: 从数据库查询数据, 然后将数据写到excel中 &lt;br/&gt;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@date</span>: 19-12-19 下午5:08 &lt;br/&gt;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>: [] &lt;br/&gt;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>:void</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test01</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        OutputStream out = <span class="keyword">new</span> FileOutputStream(PATH + <span class="string">"/one.xlsx"</span>);</span><br><span class="line">        <span class="keyword">long</span> time1 = System.currentTimeMillis();</span><br><span class="line">        ExcelWriter writer = <span class="keyword">new</span> ExcelWriter(out, XLSX);</span><br><span class="line">        Sheet sheet = <span class="keyword">new</span> Sheet(<span class="number">1</span>, <span class="number">0</span>, OneBo.class, <span class="string">"sheet的名字"</span>, <span class="keyword">null</span>);</span><br><span class="line">        sheet.setAutoWidth(Boolean.TRUE);</span><br><span class="line">        List&lt;OneBo&gt; collect = oneDao.selectAll();</span><br><span class="line">        writer.write(collect, sheet);</span><br><span class="line">        writer.finish();</span><br><span class="line">        out.close();</span><br><span class="line">        <span class="keyword">long</span> time2 = System.currentTimeMillis();</span><br><span class="line">        System.out.println(<span class="string">"总耗时: "</span> + (time2 - time1) / <span class="number">1000</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="读取excel的数据，-存入数据库"><a href="#读取excel的数据，-存入数据库" class="headerlink" title="读取excel的数据，　存入数据库"></a>读取excel的数据，　存入数据库</h2><ul><li><p>测试类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.lacknb.beans.One;</span><br><span class="line"><span class="keyword">import</span> cn.lacknb.beans.OneBo;</span><br><span class="line"><span class="keyword">import</span> cn.lacknb.dao.OneDao;</span><br><span class="line"><span class="keyword">import</span> cn.lacknb.listener.OneDataListener;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.excel.EasyExcel;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.excel.ExcelWriter;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.excel.metadata.Sheet;</span><br><span class="line"><span class="keyword">import</span> org.junit.Before;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> org.junit.runner.RunWith;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.ContextConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.junit4.SpringJUnit4ClassRunner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.FileNotFoundException;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStream;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> com.alibaba.excel.support.ExcelTypeEnum.XLSX;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ClassName: Example01 &lt;br/&gt;</span></span><br><span class="line"><span class="comment"> * Description:  &lt;br/&gt;</span></span><br><span class="line"><span class="comment"> * date: 2019年12月19日 12:49 &lt;br/&gt;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> nianshao &lt;br/&gt;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RunWith</span>(SpringJUnit4ClassRunner.class)</span><br><span class="line"><span class="meta">@ContextConfiguration</span>(locations = <span class="string">"classpath:applicationContext.xml"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Example01</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String PATH = <span class="string">"/media/nianshao/nie475/java项目/easy_excel_use/files"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> OneDao oneDao;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Before</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Description:　读取excel文件, 封装成对象 &lt;br/&gt;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@date</span>: 19-12-19 下午5:28 &lt;br/&gt;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>: [] &lt;br/&gt;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>:void</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test02</span><span class="params">()</span> <span class="keyword">throws</span> FileNotFoundException </span>&#123;</span><br><span class="line">        <span class="keyword">long</span> time1 = System.currentTimeMillis();</span><br><span class="line"></span><br><span class="line">        EasyExcel.read(PATH + <span class="string">"/one.xlsx"</span>, One.class, <span class="keyword">new</span> OneDataListener(oneDao)).sheet().doRead();</span><br><span class="line">        <span class="keyword">long</span> time2 = System.currentTimeMillis();</span><br><span class="line">        System.out.println(<span class="string">"总耗时: "</span> + (time2 - time1) / <span class="number">1000</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p>这里的读和写, 用的两种不同的方法</p><p>官网上例子的两种方法</p><ul><li><p>简单的读, 这里的new DemoDataListener() 就是监听器</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 最简单的读</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;1. 创建excel对应的实体对象 参照&#123;<span class="doctag">@link</span> DemoData&#125;</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;2. 由于默认一行行的读取excel，所以需要创建excel一行一行的回调监听器，参照&#123;<span class="doctag">@link</span> DemoDataListener&#125;</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;3. 直接读即可</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">simpleRead</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 有个很重要的点 DemoDataListener 不能被spring管理，要每次读取excel都要new,然后里面用到spring可以构造方法传进去</span></span><br><span class="line">    <span class="comment">// 写法1：</span></span><br><span class="line">    String fileName = TestFileUtil.getPath() + <span class="string">"demo"</span> + File.separator + <span class="string">"demo.xlsx"</span>;</span><br><span class="line">    <span class="comment">// 这里 需要指定读用哪个class去读，然后读取第一个sheet 文件流会自动关闭</span></span><br><span class="line">    EasyExcel.read(fileName, DemoData.class, <span class="keyword">new</span> DemoDataListener()).sheet().doRead();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 写法2：</span></span><br><span class="line">    fileName = TestFileUtil.getPath() + <span class="string">"demo"</span> + File.separator + <span class="string">"demo.xlsx"</span>;</span><br><span class="line">    ExcelReader excelReader = EasyExcel.read(fileName, DemoData.class, <span class="keyword">new</span> DemoDataListener()).build();</span><br><span class="line">    ReadSheet readSheet = EasyExcel.readSheet(<span class="number">0</span>).build();</span><br><span class="line">    excelReader.read(readSheet);</span><br><span class="line">    <span class="comment">// 这里千万别忘记关闭，读的时候会创建临时文件，到时磁盘会崩的</span></span><br><span class="line">    excelReader.finish();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>简单的写</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 最简单的写</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;1. 创建excel对应的实体对象 参照&#123;<span class="doctag">@link</span> DemoData&#125;</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;2. 直接写即可</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">simpleWrite</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 写法1</span></span><br><span class="line">    String fileName = TestFileUtil.getPath() + <span class="string">"simpleWrite"</span> + System.currentTimeMillis() + <span class="string">".xlsx"</span>;</span><br><span class="line">    <span class="comment">// 这里 需要指定写用哪个class去写，然后写到第一个sheet，名字为模板 然后文件流会自动关闭</span></span><br><span class="line">    <span class="comment">// 如果这里想使用03 则 传入excelType参数即可</span></span><br><span class="line">    EasyExcel.write(fileName, DemoData.class).sheet(<span class="string">"模板"</span>).doWrite(data());</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 写法2</span></span><br><span class="line">    fileName = TestFileUtil.getPath() + <span class="string">"simpleWrite"</span> + System.currentTimeMillis() + <span class="string">".xlsx"</span>;</span><br><span class="line">    <span class="comment">// 这里 需要指定写用哪个class去写</span></span><br><span class="line">    ExcelWriter excelWriter = EasyExcel.write(fileName, DemoData.class).build();</span><br><span class="line">    WriteSheet writeSheet = EasyExcel.writerSheet(<span class="string">"模板"</span>).build();</span><br><span class="line">    excelWriter.write(data(), writeSheet);</span><br><span class="line">    <span class="comment">// 千万别忘记finish 会帮忙关闭流</span></span><br><span class="line">    excelWriter.finish();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>监听器的格式</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 有个很重要的点 DemoDataListener 不能被spring管理，要每次读取excel都要new,然后里面用到spring可以构造方法传进去</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoDataListener</span> <span class="keyword">extends</span> <span class="title">AnalysisEventListener</span>&lt;<span class="title">DemoData</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Logger LOGGER = LoggerFactory.getLogger(DemoDataListener.class);</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 每隔5条存储数据库，实际使用中可以3000条，然后清理list ，方便内存回收</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> BATCH_COUNT = <span class="number">5</span>;</span><br><span class="line">    List&lt;DemoData&gt; list = <span class="keyword">new</span> ArrayList&lt;DemoData&gt;();</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 假设这个是一个DAO，当然有业务逻辑这个也可以是一个service。当然如果不用存储这个对象没用。</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> DemoDAO demoDAO;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DemoDataListener</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 这里是demo，所以随便new一个。实际使用如果到了spring,请使用下面的有参构造函数</span></span><br><span class="line">        demoDAO = <span class="keyword">new</span> DemoDAO();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 如果使用了spring,请使用这个构造方法。每次创建Listener的时候需要把spring管理的类传进来</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> demoDAO</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DemoDataListener</span><span class="params">(DemoDAO demoDAO)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.demoDAO = demoDAO;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 这个每一条数据解析都会来调用</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> data</span></span><br><span class="line"><span class="comment">     *            one row value. Is is same as &#123;<span class="doctag">@link</span> AnalysisContext#readRowHolder()&#125;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> context</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">invoke</span><span class="params">(DemoData data, AnalysisContext context)</span> </span>&#123;</span><br><span class="line">        LOGGER.info(<span class="string">"解析到一条数据:&#123;&#125;"</span>, JSON.toJSONString(data));</span><br><span class="line">        list.add(data);</span><br><span class="line">        <span class="comment">// 达到BATCH_COUNT了，需要去存储一次数据库，防止数据几万条数据在内存，容易OOM</span></span><br><span class="line">        <span class="keyword">if</span> (list.size() &gt;= BATCH_COUNT) &#123;</span><br><span class="line">            saveData();</span><br><span class="line">            <span class="comment">// 存储完成清理 list</span></span><br><span class="line">            list.clear();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 所有数据解析完成了 都会来调用</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> context</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doAfterAllAnalysed</span><span class="params">(AnalysisContext context)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 这里也要保存数据，确保最后遗留的数据也存储到数据库</span></span><br><span class="line">        saveData();</span><br><span class="line">        LOGGER.info(<span class="string">"所有数据解析完成！"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 加上存储数据库</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">saveData</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        LOGGER.info(<span class="string">"&#123;&#125;条数据，开始存储数据库！"</span>, list.size());</span><br><span class="line">        demoDAO.save(list);</span><br><span class="line">        LOGGER.info(<span class="string">"存储数据库成功！"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p>2630条数据</p><p>从数据库中提取, 写入到excel中</p><p>总耗时7秒</p><p>从excel文件中获取数据, 存到数据库中</p><p>总耗时 14秒</p><h2 id="遇到的坑"><a href="#遇到的坑" class="headerlink" title="遇到的坑"></a>遇到的坑</h2><p>往数据库中存数据的时候, 数据库的链接一定要加utf8, 否则会乱码.</p><p>在applicationContext.xml中, 导入mybatis的配置文件的时候, 一定要记住mapperLocation与configLocation的区别</p><p>configLocation 是导入的mybatis的配置文件</p><p>mapperLocations是导入mybatis的mapper映射文件</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--        &lt;property name="configLocation" value="classpath:mybatis-config.xml"/&gt; mybatis的配置文件--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"mapperLocations"</span> <span class="attr">value</span>=<span class="string">"classpath:mapper/OneMapper.xml"</span>/&gt;</span></span><br></pre></td></tr></table></figure><!-- rebuild by neat -->]]></content>
      
      
      <categories>
          
          <category> spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> easyexcel </tag>
            
            <tag> excel </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Github搜索技巧和Cron表达式</title>
      <link href="/2019/12/17/Github%E6%90%9C%E7%B4%A2%E6%8A%80%E5%B7%A7%E5%92%8CCron%E8%A1%A8%E8%BE%BE%E5%BC%8F/"/>
      <url>/2019/12/17/Github%E6%90%9C%E7%B4%A2%E6%8A%80%E5%B7%A7%E5%92%8CCron%E8%A1%A8%E8%BE%BE%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<!-- build time:Tue Dec 31 2019 09:54:11 GMT+0800 (CST) --><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">小技巧, 定时任务表达式</span><br></pre></td></tr></table></figure><a id="more"></a><h1 id="github上的搜索技巧"><a href="#github上的搜索技巧" class="headerlink" title="github上的搜索技巧"></a>github上的搜索技巧</h1><h2 id="通过仓库名字进行检索-并且stars和forks都在1000以上，"><a href="#通过仓库名字进行检索-并且stars和forks都在1000以上，" class="headerlink" title="通过仓库名字进行检索, 并且stars和forks都在1000以上，"></a>通过仓库名字进行检索, 并且stars和forks都在1000以上，</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">in:name springboot stars:&gt;1000 forks:&gt;1000</span><br></pre></td></tr></table></figure><h2 id="通过readme的内容进行检索-最近更新的时间大于2019-05-02"><a href="#通过readme的内容进行检索-最近更新的时间大于2019-05-02" class="headerlink" title="通过readme的内容进行检索, 最近更新的时间大于2019-05-02"></a>通过readme的内容进行检索, 最近更新的时间大于2019-05-02</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">in:readme 爬虫 stars:&gt;1000 forks:&gt;1000 pushed:&gt;2019-05-02</span><br></pre></td></tr></table></figure><h2 id="通过描述的内容进行检索，-并指定使用的语言"><a href="#通过描述的内容进行检索，-并指定使用的语言" class="headerlink" title="通过描述的内容进行检索， 并指定使用的语言"></a>通过描述的内容进行检索， 并指定使用的语言</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">in:description 微服务 language:java pushed:&gt;2019-05-30</span><br></pre></td></tr></table></figure><h1 id="cron表达式详解"><a href="#cron表达式详解" class="headerlink" title="cron表达式详解"></a>cron表达式详解</h1><p>*<em>原文链接: *</em><a href="https://www.cnblogs.com/javahr/p/8318728.html" target="_blank" rel="noopener">https://www.cnblogs.com/javahr/p/8318728.html</a></p><p>cron表达式是一个字符串, 字符串以5或6个空格隔开. 分为6或7个域, 每一个域代表一个含义, cron有如下两种语法格式</p><ol><li><p>seconds(秒) minutes(分钟) hours(小时) dayofmonth(日期) month(月份) dayofweek(星期) year(年)</p></li><li><p>seconds(秒) minutes(分钟) hours(小时) dayofmonth(日期) month(月份) dayofweek(星期)</p></li><li><p><strong>一、结构</strong></p><p>corn从左到右（用空格隔开）：秒 分 小时 月份中的日期 月份 星期中的日期 年份</p><p><strong>二、各字段的含义</strong></p></li></ol><table><thead><tr><th>字段</th><th>允许值</th><th>允许的特殊字符</th></tr></thead><tbody><tr><td>秒（Seconds）</td><td>0~59的整数</td><td>, - * / 四个字符</td></tr><tr><td>分（<em>Minutes</em>）</td><td>0~59的整数</td><td>, - * / 四个字符</td></tr><tr><td>小时（<em>Hours</em>）</td><td>0~23的整数</td><td>, - * / 四个字符</td></tr><tr><td>日期（<em>DayofMonth</em>）</td><td>1~31的整数（但是你需要考虑你月的天数）</td><td>,- * ? / L W C 八个字符</td></tr><tr><td>月份（<em>Month</em>）</td><td>1~12的整数或者 JAN-DEC</td><td>, - * / 四个字符</td></tr><tr><td>星期（<em>DayofWeek</em>）</td><td>1~7的整数或者 SUN-SAT （1=SUN）</td><td>, - * ? / L C # 八个字符</td></tr><tr><td>年(可选，留空)（<em>Year</em>）</td><td>1970~2099</td><td>, - * / 四个字符</td></tr></tbody></table><p>​</p><p><strong>注意事项：</strong></p><p>每一个域都使用数字，但还可以出现如下特殊字符，它们的含义是：</p><p>（1）<em>：表示匹配该域的任意值。假如在Minutes域使用</em>, 即表示每分钟都会触发事件。</p><p>（2）?：只能用在DayofMonth和DayofWeek两个域。它也匹配域的任意值，但实际不会。因为DayofMonth和DayofWeek会相互影响。例如想在每月的20日触发调度，不管20日到底是星期几，则只能使用如下写法： 13 13 15 20 * ?, 其中最后一位只能用？，而不能使用<em>，如果使用</em>表示不管星期几都会触发，实际上并不是这样。</p><p>（3）-：表示范围。例如在Minutes域使用5-20，表示从5分到20分钟每分钟触发一次</p><p>（4）/：表示起始时间开始触发，然后每隔固定时间触发一次。例如在Minutes域使用5/20,则意味着5分钟触发一次，而25，45等分别触发一次.</p><p>（5）,：表示列出枚举值。例如：在Minutes域使用5,20，则意味着在5和20分每分钟触发一次。</p><p>（6）L：表示最后，只能出现在DayofWeek和DayofMonth域。如果在DayofWeek域使用5L,意味着在最后的一个星期四触发。</p><p>（7）W:表示有效工作日(周一到周五),只能出现在DayofMonth域，系统将在离指定日期的最近的有效工作日触发事件。例如：在 DayofMonth使用5W，如果5日是星期六，则将在最近的工作日：星期五，即4日触发。如果5日是星期天，则在6日(周一)触发；如果5日在星期一到星期五中的一天，则就在5日触发。另外一点，W的最近寻找不会跨过月份 。</p><p>（8）LW:这两个字符可以连用，表示在某个月最后一个工作日，即最后一个星期五。</p><p>（9）#:用于确定每个月第几个星期几，只能出现在DayofMonth域。例如在4#2，表示某月的第二个星期三。</p><p><strong>三、常用表达式例子</strong></p><p>（1）<strong>0 0 2 1 * ? *</strong> 表示在每月的1日的凌晨2点调整任务</p><p>（2）<strong>0 15 10 ? * MON-FRI</strong> 表示周一到周五每天上午10:15执行作业</p><p>（3）<strong>0 15 10 ? 6L 2002-2006</strong> 表示2002-2006年的每个月的最后一个星期五上午10:15执行作</p><p>（4）<strong>0 0 10,14,16 * * ?</strong> 每天上午10点，下午2点，4点</p><p>（5）<strong>0 0/30 9-17 * * ?</strong> 朝九晚五工作时间内每半小时</p><p>（6）<strong>0 0 12 ? * WED</strong> 表示每个星期三中午12点</p><p>（7）<strong>0 0 12 * * ?</strong> 每天中午12点触发</p><p>（8）<strong>0 15 10 ? * *</strong> 每天上午10:15触发</p><p>（9）<strong>0 15 10 * * ?</strong> 每天上午10:15触发</p><p>（10）<strong>0 15 10 * * ? *</strong> 每天上午10:15触发</p><p>（11）<strong>0 15 10 * * ? 2005</strong> 2005年的每天上午10:15触发</p><p>（12）<strong>0 * 14 * * ?</strong> 在每天下午2点到下午2:59期间的每1分钟触发</p><p>（13）<strong>0 0/5 14 * * ?</strong> 在每天下午2点到下午2:55期间的每5分钟触发</p><p>（14）<strong>0 0/5 14,18 * * ?</strong> 在每天下午2点到2:55期间和下午6点到6:55期间的每5分钟触发</p><p>（15）<strong>0 0-5 14 * * ?</strong> 在每天下午2点到下午2:05期间的每1分钟触发</p><p>（16）<strong>0 10,44 14 ? 3 WED</strong> 每年三月的星期三的下午2:10和2:44触发</p><p>（17）<strong>0 15 10 ? * MON-FRI</strong> 周一至周五的上午10:15触发</p><p>（18）<strong>0 15 10 15 * ?</strong> 每月15日上午10:15触发</p><p>（19）<strong>0 15 10 L * ?</strong> 每月最后一日的上午10:15触发</p><p>（20）<strong>0 15 10 ? * 6L</strong> 每月的最后一个星期五上午10:15触发</p><p>（21）<strong>0 15 10 ? * 6L 2002-2005</strong> 2002年至2005年的每月的最后一个星期五上午10:15触发</p><p>（22）<strong>0 15 10 ? * 6#3</strong> 每月的第三个星期五上午10:15触发</p><p></p><p><strong>注：</strong></p><p>（1）有些子表达式能包含一些范围或列表</p><p>例如：子表达式（天（星期））可以为 “MON-FRI”，“MON，WED，FRI”，“MON-WED,SAT”</p><p>“*”字符代表所有可能的值</p><p>因此，“<em>”在子表达式（月）里表示每个月的含义，“</em>”在子表达式（天（星期））表示星期的每一天</p><p>“/”字符用来指定数值的增量<br>例如：在子表达式（分钟）里的“0/15”表示从第0分钟开始，每15分钟<br>在子表达式（分钟）里的“3/20”表示从第3分钟开始，每20分钟（它和“3，23，43”）的含义一样</p><p>“？”字符仅被用于天（月）和天（星期）两个子表达式，表示不指定值<br>当2个子表达式其中之一被指定了值以后，为了避免冲突，需要将另一个子表达式的值设为“？”</p><p>“L” 字符仅被用于天（月）和天（星期）两个子表达式，它是单词“last”的缩写<br>但是它在两个子表达式里的含义是不同的。<br>在天（月）子表达式中，“L”表示一个月的最后一天<br>在天（星期）自表达式中，“L”表示一个星期的最后一天，也就是SAT</p><p>如果在“L”前有具体的内容，它就具有其他的含义了</p><p>例如：“6L”表示这个月的倒数第６天，“FRIL”表示这个月的最一个星期五<br>注意：在使用“L”参数时，不要指定列表或范围，因为这会导致问题</p><!-- rebuild by neat -->]]></content>
      
      
      <categories>
          
          <category> github </category>
          
      </categories>
      
      
        <tags>
            
            <tag> github </tag>
            
            <tag> cron </tag>
            
            <tag> 小技巧 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBoot相关知识</title>
      <link href="/2019/11/26/SpringBoot%E7%9B%B8%E5%85%B3%E7%9F%A5%E8%AF%86/"/>
      <url>/2019/11/26/SpringBoot%E7%9B%B8%E5%85%B3%E7%9F%A5%E8%AF%86/</url>
      
        <content type="html"><![CDATA[<!-- build time:Tue Dec 31 2019 09:54:11 GMT+0800 (CST) --><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SpringBoot相关知识</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="Spring常用注解"><a href="#Spring常用注解" class="headerlink" title="Spring常用注解"></a>Spring常用注解</h2><p>springboot的启动类的@SpringBootApplication, 控制器的@Controller, @RestController, 还有与配置相关的一系列注解.</p><p>&emsp;&emsp; 查找XML文档与配置&lt;bean&gt;元素这两个工作同样可以使用注解来完成. 使用@Component, @Service, 或者@Configuration注解来修饰一个java类, 这些java类会被Spring自动检测并注册到容器中. 在类里面使用@Bean注解修饰的方法, 会被作为一个bean存放到Spring容器中.</p><h3 id="Autowired-Primary-Resource"><a href="#Autowired-Primary-Resource" class="headerlink" title="@Autowired, @Primary, @Resource"></a>@Autowired, @Primary, @Resource</h3><p>@Autowired默认按类型注入, 找不到就按名称注入.</p><p>​ 还可以使用构造器注入</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">InjectBean myBean;</span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">InjectApp</span><span class="params">(InjectBean myBean2)</span></span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.myBean = myBean2;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>@Resource默认按名称注入, 找不到就按类型注入</p><p>​ 不能修饰构造器</p><p>@Primary注解 注入</p><p>​ 如果容器中配置两个相同类型的bean, 我们在想要用的Bean上添加@Primary注解, 我们再使用@Autowired自动注入, 就不会报错了, 就会自动注入带@Primary的bean 了. 如果有多个bean都带了@Primary, 就会报异常.</p><ul><li><p>例子</p><ul><li><p>User.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.beans;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">(String username)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.username = username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getUsername</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUsername</span><span class="params">(String username)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.username = username;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>BeanConfig.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.beans;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Primary;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BeanConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">getUser</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> User(<span class="string">"ccc"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@Primary</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">getUser2</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> User(<span class="string">"bbb"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>测试类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> User user;</span><br><span class="line">    </span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test03</span><span class="params">()</span></span>&#123;</span><br><span class="line">    System.out.println(user.getUsername());  </span><br><span class="line">  <span class="comment">// 这里会输出 bbb</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li></ul><h3 id="Scope注解"><a href="#Scope注解" class="headerlink" title="Scope注解"></a>Scope注解</h3><p>&emsp;&emsp; 在配置Bean的时候, 可以指定bean的作用域, 一般的bean可以配置爱为单例(singleton)或非单例(prototype). 配置为singleton的话, Spring的bean工厂都会只返回同一个bean实例, 而配置prototype, 则每次都会创建一个新的实例</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.config.ConfigurableBeanFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Scope;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="comment">//@Scope(value = ConfigurableBeanFactory.SCOPE_PROTOTYPE)</span></span><br><span class="line"><span class="meta">@Scope</span>(value = ConfigurableBeanFactory.SCOPE_SINGLETON)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServiceTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Hello</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Hello world !!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="AOP注解"><a href="#AOP注解" class="headerlink" title="AOP注解"></a>AOP注解</h3><p>加入依赖</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.aspectj<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aspectjweaver<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>AopService.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.aop;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AopService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">saleService</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"要代理的销售业务方法"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ProxyService.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.aop;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.After;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Aspect;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Before;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProxyService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Before</span>(<span class="string">"execution(* cn.lacknb.aop.AopService.saleService(..))"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">before</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"业务方法调用前"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@After</span>(<span class="string">"execution(* cn.lacknb.aop.AopService.saleService(..))"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">after</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"业务方法调用后"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> AopService aopService;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test02</span><span class="params">()</span></span>&#123;</span><br><span class="line">    System.out.println(aopService.getClass());</span><br><span class="line">    aopService.saleService();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>根据结果可知, 我们的业务方法已经被代理, 因此在方法调用前和调用后, 都会执行通知到的方法, 输出的代理类为经过cglib处理的类. 在springboot2.0中, 默认情况下, 不管是代理接口还是类, 都使用cglib代理. 我们将spring.aop.proxy-target-class配置为false, 这样在代理接口时, 会使用jdk 动态代理. *<em>据本人测试, 无论false或者true, 输出的都是cglib处理的类. *</em></p><h3 id="ComponentScan注解"><a href="#ComponentScan注解" class="headerlink" title="ComponentScan注解"></a>ComponentScan注解</h3><p>ComponentScan注解主要用于检测使用@Component装饰的组件, 并把它们注册到Spring容器中. 除了使用@Component修饰的组件外, 还有间接使用@Component的组件(如@Service, @Repository, @Controller, 或自定义注解), 都会被检测到,. 在使用Springboot时, 我们一般很少接触@ComponentScan注解, 但实际上每个应用都使用它, 它只是被放到@SpringBootApplication里面了. 在使用ComponentScan注解时, <strong>要注意过滤器</strong>.</p><h2 id="高级Spring注解"><a href="#高级Spring注解" class="headerlink" title="高级Spring注解"></a>高级Spring注解</h2><h3 id="限定注解"><a href="#限定注解" class="headerlink" title="限定注解"></a>限定注解</h3><p>＠Primary注解, 当存在多个同类型的bean时, 可以指定优先注入的bean, 如果想对bean的注入选择做进一步的控制, 则可以使用限定注解. 限定注解可以与特定的参数关联起来, 缩小类型的匹配范围, 最后一个选择符合条件的bean来注入.</p><p>例子:</p><ul><li><p>需要到上面的user类</p></li><li><p>QuaConfig.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.beans;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">QuaConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">quaBeanA</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> User(<span class="string">"quaBeanA"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">quaBeanB</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> User(<span class="string">"quaBeanB"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>创建测试类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="meta">@Qualifier</span>(<span class="string">"quaBeanB"</span>)</span><br><span class="line"><span class="keyword">private</span> User user;</span><br><span class="line">  </span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 测试 限定注解</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line">  </span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test04</span><span class="params">()</span></span>&#123;</span><br><span class="line">    System.out.println(user.getUsername()); <span class="comment">// 输出quaBeanB</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="自定义限定注解"><a href="#自定义限定注解" class="headerlink" title="自定义限定注解"></a>自定义限定注解</h3><p>当存在两个相同类型的注解时, 可以根据bean的名称来指定注入的bean, 如果需要根据特定的属性来指定注入的bean, 则可以自定义限定注解.</p><p>例子:</p><ul><li><p>使用上面的User实体类</p></li><li><p>创建自定义注解TestQualifer.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.beans;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Qualifier;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.ElementType;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.Retention;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.RetentionPolicy;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.Target;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Target</span>(&#123;ElementType.FIELD, ElementType.METHOD&#125;)</span><br><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="meta">@Qualifier</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> TestQualifer &#123;</span><br><span class="line"></span><br><span class="line">    <span class="function">String <span class="title">type</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>创建CustomConfig.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.beans;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 首先先定义一个TestQualifer注解, 该注解使用了@Qualifer修饰, 并且需要设置type属性</span></span><br><span class="line"><span class="comment"> *  在配置bean的时候, 需要为相应的bean设置不同的类型</span></span><br><span class="line"><span class="comment"> * spring容器提供了不同类型的user bean, 并使用@TestQualifer为它们进行了标识.</span></span><br><span class="line"><span class="comment"> * 在使用这些bean时, 同样使用@TestQualifer并指定type属性, 就可以拿回相应的bean</span></span><br><span class="line"><span class="comment"> * */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@TestQualifer</span>(type = <span class="string">"jerry"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">userBean</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> User(<span class="string">"and dog"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@TestQualifer</span>(type = <span class="string">"tom"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">catBean</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> User(<span class="string">"cat"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>创建测试类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 测试自定义限定注解</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line">  </span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="meta">@TestQualifer</span>(type = <span class="string">"jerry"</span>)</span><br><span class="line"><span class="keyword">private</span> User user;</span><br><span class="line">  </span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test05</span><span class="params">()</span></span>&#123;</span><br><span class="line">    System.out.println(user.getUsername()); <span class="comment">// 输出 and dog.</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="自定义bean的生命周期"><a href="#自定义bean的生命周期" class="headerlink" title="自定义bean的生命周期"></a>自定义bean的生命周期</h3><p>前面介绍了, Scope注解主要用于配置爱bean在容器中的生命周期, 常被配置为singleton, 和 prototype (多态)的, 在web环境下, 还可以配置为request, session等值. 表示Spring容器会为一次请求或一个会话分配一个bean的实例. 如果对bean的生命周期有特殊的需求, 则可以考虑使用自定义的scope, 自己写代码来定义bean的生命周期.</p><p>需求: 一个bean需要被使用4次之后, 就需要获取新的bean实例, 针对这样的需求, 可编写一个自定义的scope</p><ul><li><p>创建MyScope.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.ObjectFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.config.Scope;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyScope</span> <span class="keyword">implements</span> <span class="title">Scope</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        记录使用bean的使用次数</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Map&lt;String, Integer&gt; beanCounts = <span class="keyword">new</span> HashMap&lt;String, Integer&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    * 保存实例</span></span><br><span class="line"><span class="comment">    * */</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Map&lt;String, Object&gt; beans = <span class="keyword">new</span> HashMap&lt;String, Object&gt;();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">get</span><span class="params">(String s, ObjectFactory&lt;?&gt; objectFactory)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (beanCounts.get(s) == <span class="keyword">null</span>)&#123;</span><br><span class="line">            beanCounts.put(s, <span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 第一次使用, 放到实例的Map中</span></span><br><span class="line">        Integer beancount = beanCounts.get(s);</span><br><span class="line">        <span class="keyword">if</span> (beancount == <span class="number">0</span>)&#123;</span><br><span class="line">            Object newObject = objectFactory.getObject();</span><br><span class="line">            beans.put(s, newObject);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 获取对象</span></span><br><span class="line">        Object bean = beans.get(s);</span><br><span class="line">        <span class="comment">// 计数器加1</span></span><br><span class="line">        Integer newBeanCount = beancount + <span class="number">1</span>;</span><br><span class="line">        <span class="comment">// 使用次数超过4次了, 设置为0</span></span><br><span class="line">        <span class="keyword">if</span> (newBeanCount &gt;= <span class="number">4</span>)&#123;</span><br><span class="line">            newBeanCount = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//设置新的次数</span></span><br><span class="line">        beanCounts.put(s, newBeanCount);</span><br><span class="line">        <span class="comment">// 返回实例</span></span><br><span class="line">        <span class="keyword">return</span> bean;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">remove</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">registerDestructionCallback</span><span class="params">(String s, Runnable runnable)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">resolveContextualObject</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getConversationId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>创建ScopeConfig.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.BeanFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.config.ConfigurableListableBeanFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.config.CustomScopeConfigurer;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Scope;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.annotation.PostConstruct;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ScopeConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    * @PostConstruct注解 用于在依赖关系注入完成之后需要执行的方法上</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * */</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    BeanFactory factory;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostConstruct</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">customScopeConfigurer</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">// ScopeConfig初始化后执行本方法, 创建MyScope的实例</span></span><br><span class="line">        CustomScopeConfigurer configurer = <span class="keyword">new</span> CustomScopeConfigurer();</span><br><span class="line">        configurer.addScope(<span class="string">"four"</span>, <span class="keyword">new</span> MyScope());</span><br><span class="line">        configurer.postProcessBeanFactory((ConfigurableListableBeanFactory) factory);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@Scope</span>(scopeName = <span class="string">"four"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ScopeBean <span class="title">beanA</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ScopeBean();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这里的@PostConstruct注解 用于在<strong>依赖关系注入完成之后</strong>需要执行的方法上, 以执行任何初始化. 此方法必须在将类放入服务之前调用, 支持依赖关系注入的所有类都必须支持此注释. 即使类中没有请求注入任何资源, 用PostConstruct注释的方法也必须被调用. 只有一个方法可以用此进行注释. 应用PostConstruct注释的方法必须遵守以下所有标准:</p><ul><li>该方法不得有任何参数, 除非是在EJB拦截器的情况下, 根据EJB规范的定义, 在这种情况下它将带有一个invocationContext对象</li><li>该方法的返回类型必须为void</li><li>该方法不得抛出已检查异常</li><li>应用PostConstruct的方法可以是Public, protected, package private或private</li><li>除了应用程序之外, 该方法不能是static, 该方法可以是final</li><li>如果该方法抛出未检查异常, 那么不得将次类放入服务中, 除非是能够处理异常并可从中恢复的EJB .</li></ul></li><li><p>ScopeBean.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ScopeBean</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ScopeBean</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"ScopeBean初始化...."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>测试类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 测试一个bean实例使用4次</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line">  </span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line">ApplicationContext context;</span><br><span class="line">  </span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test06</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">7</span>; i++) &#123;</span><br><span class="line">        System.out.println(context.getBean(<span class="string">"beanA"</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>输出结果</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ScopeBean初始化....</span><br><span class="line">cn.lacknb.util.ScopeBean@3af4e0bf</span><br><span class="line">cn.lacknb.util.ScopeBean@3af4e0bf</span><br><span class="line">cn.lacknb.util.ScopeBean@3af4e0bf</span><br><span class="line">cn.lacknb.util.ScopeBean@3af4e0bf</span><br><span class="line">ScopeBean初始化....</span><br><span class="line">cn.lacknb.util.ScopeBean@245a26e1</span><br><span class="line">cn.lacknb.util.ScopeBean@245a26e1</span><br><span class="line">cn.lacknb.util.ScopeBean@245a26e1</span><br></pre></td></tr></table></figure></li></ul><h2 id="Spring-MVC常用注解"><a href="#Spring-MVC常用注解" class="headerlink" title="Spring MVC常用注解"></a>Spring MVC常用注解</h2><p>@ Controller, @RequestMapping, @GetMapping等.</p><h3 id="RestController"><a href="#RestController" class="headerlink" title="@RestController"></a>@RestController</h3><p>@RestController注解的目的是为了让我们更加简便地使用@Controller和@ResponseBody这两个注解, 查看@RestController源码就可以知道, 这个注解本身就使用了@Controller与@ResponseBody来修饰. ResponseBody注解可以修饰控制方法, 方法的返回值将会被写到HTTP响应体中, 所返回的内容, 将不会放到模型中, 也不会被解释为视图的名称.</p><p>@RequestAttribute, @SessionAttribute, @SessionAttributes等注解也较为常用.</p><h3 id="MatrixVariable注解"><a href="#MatrixVariable注解" class="headerlink" title="@MatrixVariable注解"></a>@MatrixVariable注解</h3><p>前面的@PathVariable注解主要是用来获取单一的URI参数, 如果通过URI来传输一些复杂的参数, 则可以考虑使用@MatrixVariable注解. 使用时需要遵守一定的规范, 参数的名称与值使用key-value形式, 多个参数之间使用(;)号隔开, 如果一个参数拥有多个值, 则值与值之间用逗号隔开. 这种URI的参数表现形式, 成为矩阵变量.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/car/&#123;id&#125;;color=red;year=2019</span><br></pre></td></tr></table></figure><p>该URI传入了id参数, 并且传入了color与year参数, 值分别为red与2019. 对于上面的URI, 如何获取呢? 例子:</p><ol><li><p>首先开启矩阵变量的支持</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.WebMvcConfigurationSupport;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebConfig</span> <span class="keyword">extends</span> <span class="title">WebMvcConfigurationSupport</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> RequestMappingHandlerMapping <span class="title">requestMappingHandlerMapping</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> RequestMappingHandlerMapping requestMappingHandlerMapping = <span class="keyword">super</span>.requestMappingHandlerMapping();</span><br><span class="line"></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        * 将 RequestMappingHandlerMapping的RemoveSemicolonContent的属性设置为false, 即可开启对矩阵变量的支持</span></span><br><span class="line"><span class="comment">        * */</span></span><br><span class="line"></span><br><span class="line">        requestMappingHandlerMapping.setRemoveSemicolonContent(<span class="keyword">false</span>);</span><br><span class="line">        <span class="keyword">return</span> requestMappingHandlerMapping;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>控制器</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/car/&#123;id&#125;"</span>)</span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">test03</span><span class="params">(@PathVariable Integer id, @MatrixVariable String color, @MatrixVariable String year)</span></span>&#123;</span><br><span class="line">   </span><br><span class="line">    System.out.println(id);</span><br><span class="line">    System.out.println(color);</span><br><span class="line">    System.out.println(year);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"test"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>测试</p><p>url为: <code>http://localhost:8080/car/11;color=red;year=2019</code></p><p>控制台输出id color和year的值.</p></li></ol><h3 id="文件上传"><a href="#文件上传" class="headerlink" title="文件上传"></a>文件上传</h3><p>fileUpload.html</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-4.dtd"&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">xmlns</span>=<span class="string">"http://www.w3.org/1999/xhtml"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">xmlns:th</span>=<span class="string">"http://www.thymeleaf.org"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"http://localhost:8080/file/upload"</span> <span class="attr">method</span>=<span class="string">"post"</span> <span class="attr">enctype</span>=<span class="string">"multipart/form-data"</span>&gt;</span></span><br><span class="line">    上传文件: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"file"</span> <span class="attr">name</span>=<span class="string">"file"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"上传"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>application.yml</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  thymeleaf:</span></span><br><span class="line"><span class="attr">    cache:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">    mode:</span> <span class="string">HTML</span></span><br><span class="line"><span class="attr">  servlet:</span></span><br><span class="line"><span class="attr">    multipart:</span></span><br><span class="line">      <span class="comment"># 上传文件总的最大值</span></span><br><span class="line"><span class="attr">      max-file-size:</span> <span class="number">10</span><span class="string">MB</span></span><br><span class="line">      <span class="comment"># 单个文件的最大值</span></span><br><span class="line"><span class="attr">      max-request-size:</span> <span class="number">10</span><span class="string">MB</span></span><br></pre></td></tr></table></figure><p>控制器</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/file/upload"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">test04</span><span class="params">(@RequestParam(<span class="string">"file"</span>)</span> MultipartFile file, Model model) <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    String fileName = UUID.randomUUID() + file.getOriginalFilename();</span><br><span class="line">    String path = <span class="string">"/media/nianshao/nie475/java项目/files"</span>;</span><br><span class="line">    File filePath = <span class="keyword">new</span> File(path);</span><br><span class="line">    <span class="keyword">if</span> (!file.isEmpty()) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!filePath.exists()) &#123;</span><br><span class="line">            filePath.mkdirs();</span><br><span class="line">        &#125;</span><br><span class="line">        File targetFile = <span class="keyword">new</span> File(path, fileName);</span><br><span class="line">        file.transferTo(targetFile);</span><br><span class="line">        model.addAttribute(<span class="string">"aaa"</span>, <span class="string">"上传成功"</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        model.addAttribute(<span class="string">"aaa"</span>, <span class="string">"文件为空, 重新上传"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"test01"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="多文件上传"><a href="#多文件上传" class="headerlink" title="多文件上传"></a>多文件上传</h3><ol><li><p>创建实体类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.beans;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.web.multipart.MultipartFile;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyFile</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> List&lt;MultipartFile&gt; files;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;MultipartFile&gt; <span class="title">getFiles</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> files;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setFiles</span><span class="params">(List&lt;MultipartFile&gt; files)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.files = files;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>upload.html</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-4.dtd"&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">xmlns</span>=<span class="string">"http://www.w3.org/1999/xhtml"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">xmlns:th</span>=<span class="string">"http://www.thymeleaf.org"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"http://localhost:8080/files/many"</span> <span class="attr">method</span>=<span class="string">"post"</span> <span class="attr">enctype</span>=<span class="string">"multipart/form-data"</span>&gt;</span></span><br><span class="line">    上传文件: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"file"</span> <span class="attr">name</span>=<span class="string">"files"</span> /&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    上传文件: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"file"</span> <span class="attr">name</span>=<span class="string">"files"</span> /&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    上传文件: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"file"</span> <span class="attr">name</span>=<span class="string">"files"</span> /&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    上传文件: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"file"</span> <span class="attr">name</span>=<span class="string">"files"</span> /&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    上传文件: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"file"</span> <span class="attr">name</span>=<span class="string">"files"</span> /&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    上传文件: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"file"</span> <span class="attr">name</span>=<span class="string">"files"</span> /&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"上传"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>控制器</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">   * 多文件上传</span></span><br><span class="line"><span class="comment">   * */</span></span><br><span class="line">   </span><br><span class="line">   <span class="meta">@RequestMapping</span>(<span class="string">"/files/many"</span>)</span><br><span class="line">   <span class="function"><span class="keyword">public</span> String <span class="title">test05</span><span class="params">(@ModelAttribute MyFile files, Model model)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">       String path = <span class="string">"/media/nianshao/nie475/java项目/files"</span>;</span><br><span class="line">       File filePath = <span class="keyword">new</span> File(path);</span><br><span class="line">       <span class="keyword">if</span> (!filePath.exists())&#123;</span><br><span class="line">           filePath.mkdirs();</span><br><span class="line">       &#125;</span><br><span class="line">       List&lt;MultipartFile&gt; files11 = files.getFiles();</span><br><span class="line">       <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">       <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; files11.size(); i++) &#123;</span><br><span class="line">           <span class="keyword">if</span> (!files11.get(i).isEmpty()) &#123;</span><br><span class="line">               String fileName = UUID.randomUUID() + files11.get(i).getOriginalFilename();</span><br><span class="line">               File targetFile = <span class="keyword">new</span> File(filePath, fileName);</span><br><span class="line">               files11.get(i).transferTo(targetFile);</span><br><span class="line">               count++;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       model.addAttribute(<span class="string">"aaa"</span>, <span class="string">"成功上传"</span> + count + <span class="string">"个文件"</span>);</span><br><span class="line">       <span class="keyword">if</span> (count == <span class="number">0</span>)&#123;</span><br><span class="line">           model.addAttribute(<span class="string">"aaa"</span>, <span class="string">"上传的文件为空"</span>);</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span> <span class="string">"test01"</span>;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></li></ol><h3 id="SpringBoot的条件注解"><a href="#SpringBoot的条件注解" class="headerlink" title="SpringBoot的条件注解"></a>SpringBoot的条件注解</h3><p>&emsp;&emsp; SpringBoot提供了自动配置, 一些内置的或者常用的组件Spring已经帮我们配置好了, 我们在使用这些组件的时候, 加入相关依赖就可以了, 并不需要额外进行配置, 从而减少了搭建项目的工作量. 自动配置是否执行, 取决于条件注解.</p><h3 id="类条件注解"><a href="#类条件注解" class="headerlink" title="类条件注解"></a>类条件注解</h3><p>&emsp;&emsp; 当类路径中存在或不存在某个类时, 再决定是否执行自动配置. 存在该类则使用@ConditionalOnClass, 不存在则使用@ConditionalOnMissingClass, 它们都可以修饰类或者方法. 这两个注解通过配置value属性来指定一个类, 这个类有可能并不存在于实际的运行环境中, 也可以使用name属性来指定权限定类名. 假设项目中存在MySQL的驱动类, 则会启用某个配置类, 此时则可以使用@ConditionalOnClass.</p><ol><li><p>MyBean.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.bean;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyBean</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>OnClassConfig.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.lacknb.bean.MyBean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.condition.ConditionalOnClass;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="meta">@ConditionalOnClass</span>(name = <span class="string">"com.mysql.jdbc.Driver"</span>)</span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OnClassConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> MyBean <span class="title">myBean</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> MyBean();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>当项目有mysql的依赖时, 就会创建 MyBean的实例</strong></p></li><li><p>测试类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.contoller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.lacknb.bean.MyBean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OnClassController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    ApplicationContext context;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/bean"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getBean</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Map&lt;String, MyBean&gt; beans = context.getBeansOfType(MyBean.class);</span><br><span class="line">        System.out.println(beans.size());</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>代码中的getBean方法会到容器中获取MyBean类型的bean, 并以Map形式返回, 最后输出Map的size. 在pom.xml文件中, 加入MySql依赖, 测试运行, 控制台输出为1, 将mysql的依赖注释掉, 则输出为0. 使用@ConditionalOnMissingClass则有相反的效果.</p></li></ol><h2 id="发布和调用REST服务"><a href="#发布和调用REST服务" class="headerlink" title="发布和调用REST服务"></a>发布和调用REST服务</h2><p>REST是英文 Representational State Transfer 的缩写, 一般翻译为 “表述性状态转移”. REST本身只是分布式系统中的一种架构风格, 并不是某种标准或者规范. 而是一种 轻量级的基于HTTP协议的Web Service风格.</p><h3 id="发布REST服务"><a href="#发布REST服务" class="headerlink" title="发布REST服务"></a>发布REST服务</h3><p>加入spring-boot-starter-web依赖,</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.REST;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.http.MediaType;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.PathVariable;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 发布与调用REST服务</span></span><br><span class="line"><span class="comment">* 一定要加@RestController注解</span></span><br><span class="line"><span class="comment">* 浏览器输入 http://localhost:8080/person/name 返回json数据</span></span><br><span class="line"><span class="comment">* 如果不使用springboot, 估计你还要为寻找依赖包而疲于奔命</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RESTexample</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(RESTexample.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    * MediaType.APPLICATION_JSON_VALUE的值为 application/json 将生产数据的类型</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * */</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(value = <span class="string">"/person/&#123;name&#125;"</span>, produces = MediaType.APPLICATION_JSON_VALUE)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Person <span class="title">person</span><span class="params">(@PathVariable String name)</span></span>&#123;</span><br><span class="line">        Person person = <span class="keyword">new</span> Person();</span><br><span class="line">        person.setName(name);</span><br><span class="line">        person.setAge(<span class="number">23</span>);</span><br><span class="line">        <span class="keyword">return</span> person;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">        <span class="keyword">private</span> String name;</span><br><span class="line">        <span class="keyword">private</span> Integer age;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> name;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.name = name;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> Integer <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> age;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(Integer age)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.age = age;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="使用RestTemplate调用服务"><a href="#使用RestTemplate调用服务" class="headerlink" title="使用RestTemplate调用服务"></a>使用RestTemplate调用服务</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.REST;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.web.client.RestTemplateBuilder;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.client.RestTemplate;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RestTemplateBuilder restTemplateBuilder;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> RestTemplate <span class="title">restTemplate</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> restTemplateBuilder.rootUri(<span class="string">"http://localhost:8080"</span>).build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    * 使用RestTemplateBuilder创建template</span></span><br><span class="line"><span class="comment">    * */</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> RESTexample.<span class="function">Person <span class="title">useBuild</span><span class="params">()</span></span>&#123;</span><br><span class="line">        RESTexample.Person p = restTemplate().getForObject(<span class="string">"/person/aynu"</span>, RESTexample.Person.class);</span><br><span class="line">        <span class="keyword">return</span> p;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>测试类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.REST;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> org.junit.runner.RunWith;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.test.context.SpringBootTest;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.junit4.SpringRunner;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RunWith</span>(SpringRunner.class)</span><br><span class="line"><span class="meta">@SpringBootTest</span>(classes = RESTexample.class)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyServiceTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> MyService myService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">        RESTexample.Person person = myService.useBuild();</span><br><span class="line">        System.out.println(person.getName() + <span class="string">"==="</span> + person.getAge());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="使用feign调用服务"><a href="#使用feign调用服务" class="headerlink" title="使用feign调用服务"></a>使用feign调用服务</h2><p>Feign是github上的一个开源项目, 其目的就是为了简化web service客户端的开发. 加入依赖</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.github.openfeign<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>feign-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>LATEST<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.github.openfeign<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>feign-gson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.feign;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.lacknb.REST.RESTexample;</span><br><span class="line"><span class="keyword">import</span> feign.Param;</span><br><span class="line"><span class="keyword">import</span> feign.RequestLine;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 在接口中使用了@RequestLine和@Param注解, 这两个注解是Feign的注解. 使用注解修饰后</span></span><br><span class="line"><span class="comment">* getPerson方法被调用, 然后使用HTTP的get方法向 /person/name, 服务发送请求</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">PersonClient</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestLine</span>(<span class="string">"GET /person/&#123;name&#125;"</span>)</span><br><span class="line">    RESTexample.<span class="function">Person <span class="title">getPerson</span><span class="params">(@Param(<span class="string">"name"</span>)</span> String name)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.feign;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.lacknb.REST.RESTexample;</span><br><span class="line"><span class="keyword">import</span> feign.Feign;</span><br><span class="line"><span class="keyword">import</span> feign.gson.GsonDecoder;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FeignMain</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 调用接口</span></span><br><span class="line">        PersonClient personClient = Feign.builder().decoder(<span class="keyword">new</span> GsonDecoder()).target(PersonClient.class, <span class="string">"http:"</span> +</span><br><span class="line">                <span class="string">"//localhost:8080/"</span>);</span><br><span class="line">        RESTexample.Person p = personClient.getPerson(<span class="string">"aynu"</span>);</span><br><span class="line">        System.out.println(p.getName() + <span class="string">"****"</span> + p.getAge());</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="SpringBoot与Servlet"><a href="#SpringBoot与Servlet" class="headerlink" title="SpringBoot与Servlet"></a>SpringBoot与Servlet</h2><p>无论是创建servlet, listener 还是filter, Springboot启动类都需要加 注解@ServletComponentScan(“需要扫描的包”)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.web.servlet.ServletComponentScan;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span>(scanBasePackages = <span class="string">"cn.lacknb"</span>)</span><br><span class="line"><span class="meta">@ServletComponentScan</span>(<span class="string">"cn.lacknb.servlet"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(Main.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="创建Servlet"><a href="#创建Servlet" class="headerlink" title="创建Servlet"></a>创建Servlet</h3><p>这里使用注解@WebServlet(“/tets”)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/test"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">TestServlet</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"servlet初始化"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"servlet中的service方法被调用"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>浏览器访问 <a href="http://localhost:8080/test" target="_blank" rel="noopener">http://localhost:8080/test</a></p><h3 id="创建监听器"><a href="#创建监听器" class="headerlink" title="创建监听器"></a>创建监听器</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletContextEvent;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletContextListener;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebListener;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebListener</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestListener</span>  <span class="keyword">implements</span> <span class="title">ServletContextListener</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">contextInitialized</span><span class="params">(ServletContextEvent servletContextEvent)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"ServletContext初始化"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">contextDestroyed</span><span class="params">(ServletContextEvent servletContextEvent)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"ServletContext销毁..."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="创建过滤器"><a href="#创建过滤器" class="headerlink" title="创建过滤器"></a>创建过滤器</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebFilter;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebFilter</span>(<span class="string">"/filter/*"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestLisnter</span> <span class="keyword">implements</span> <span class="title">Filter</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"过滤器初始化"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doFilter</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="keyword">throws</span> IOException, ServletException </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"dofilter 方法执行"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"destroy "</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="使用Springboot构建可部署的war包"><a href="#使用Springboot构建可部署的war包" class="headerlink" title="使用Springboot构建可部署的war包"></a>使用Springboot构建可部署的war包</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.6.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.lacknb.war<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>Springboot-war<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">packaging</span>&gt;</span>war<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">finalName</span>&gt;</span>test-war<span class="tag">&lt;/<span class="name">finalName</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-tomcat<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.main;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.builder.SpringApplicationBuilder;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.web.servlet.support.SpringBootServletInitializer;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ResponseBody;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 启动类继承SpringBootServletInitializer类 这里需要实现重写父类的configure方法</span></span><br><span class="line"><span class="comment">* SpringBootServletInitializer类将会调用configure方法来得到一个SpringApplicationBuilder</span></span><br><span class="line"><span class="comment">* 实例, 根据名称所知, 这个SpringApplicationBuilder会帮我们创建上下文, 实际上它会帮我们创建</span></span><br><span class="line"><span class="comment">* WebApplicationContext实例, 其在创建Spring上下文的过程中, 会查找使用了@Configuration注解的</span></span><br><span class="line"><span class="comment">* 配置类, 然后对它们进行初始化</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WarApp</span> <span class="keyword">extends</span> <span class="title">SpringBootServletInitializer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> SpringApplicationBuilder <span class="title">configure</span><span class="params">(SpringApplicationBuilder builder)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> builder.sources(WarApp.class);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(WarApp.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/hello"</span>)</span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">hello</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"hello, war .....package......"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>启动类继承SpringBootServletInitializer类 这里需要实现重写父类的configure方法</p><p>SpringBootServletInitializer类将会调用configure方法来得到一个SpringApplicationBuilder</p><p>实例, 根据名称所知, 这个SpringApplicationBuilder会帮我们创建上下文, 实际上它会帮我们创建</p><p>WebApplicationContext实例, 其在创建Spring上下文的过程中, 会查找使用了@Configuration注解的</p><p>配置类, 然后对它们进行初始化</p><p>– 对于启动类, 我们可以这样理解: 在eclipse运行main方法时, 会使用原来的方式(执行jar包的方式)来启动web应用(含服务器), 如果将项目打包成一个war包放到web服务器上运行, 就会创建WebApplicationContext, 在创建的过程中, 会调用configure方法. 另外, 父类调用一个方法来实现部分工作, 但该方法需要由继承的子类实现, 这种模式是GoF设计模式的一种: 模板方法.</p><p><strong>将war包放在tomcat的webapp目录下, 然后直接启动tomcat, 在浏览器地址栏输入: localhost:8080/test-war/hello</strong></p><h2 id="使用其他服务器"><a href="#使用其他服务器" class="headerlink" title="使用其他服务器"></a>使用其他服务器</h2><h3 id="使用jetty"><a href="#使用jetty" class="headerlink" title="使用jetty"></a>使用jetty</h3><p>首先先排除依赖tomcat, 这个是springboot默认使用的.</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-tomcat<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>添加jetty服务器</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--使用jetty服务器--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-jetty<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://s2.ax1x.com/2019/11/21/MIU3z6.png" alt="MIU3z6.png"></p><h3 id="使用Undertow"><a href="#使用Undertow" class="headerlink" title="使用Undertow"></a>使用Undertow</h3><p>方法和上面一样</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-undertow<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://s2.ax1x.com/2019/11/21/MIap6K.png" alt="MIap6K.png"></p><h2 id="服务器访问日志"><a href="#服务器访问日志" class="headerlink" title="服务器访问日志"></a>服务器访问日志</h2><p>服务器访问日志与服务器日志不是同一个概念, 我们一般在tomcat控制台中看到的日志, 是服务器日志, 而服务器访问日志, 则会记录服务处理的消息, 默认情况下, tomcat并不会记录fangwen 日志. 创建一个maven项目, 将application.yml文件 添加如下信息.</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line"><span class="attr">  tomcat:</span></span><br><span class="line"><span class="attr">    basedir:</span> <span class="string">my-tomcat</span></span><br><span class="line"><span class="attr">    accesslog:</span></span><br><span class="line"><span class="attr">      pattern:</span> <span class="string">'ip: %A, response code: %s, time: %t'</span></span><br><span class="line"><span class="attr">      enabled:</span> <span class="literal">true</span>  <span class="comment"># 用于开启日志记录</span></span><br><span class="line"><span class="attr">      directory:</span> <span class="string">my-logs</span></span><br><span class="line"><span class="attr">      buffered:</span> <span class="literal">false</span>  <span class="comment"># 表示不进行缓冲, 直接将日志记录到文件中</span></span><br></pre></td></tr></table></figure><p>日志显示格式为:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ip: 127.0.1.1, response code: 200, time: [21/Nov/2019:18:01:50 +0800]</span><br><span class="line">ip: 127.0.1.1, response code: 200, time: [21/Nov/2019:18:01:50 +0800]</span><br><span class="line">ip: 127.0.1.1, response code: 200, time: [21/Nov/2019:18:01:51 +0800]</span><br></pre></td></tr></table></figure><h2 id="banner配置-自定义显示图案"><a href="#banner配置-自定义显示图案" class="headerlink" title="banner配置 (自定义显示图案)"></a>banner配置 (自定义显示图案)</h2><ol><li><p>在根目录创建banner.txt</p><p>将ASCII图案放在这里</p></li><li><p>除了文本外, 还可以提供图片文件用于显示, 图片格式可以为jpg, png或gif, Springboot会将图片转换为ASCII, 以文本的方式将图片显示到控制台中.</p></li></ol><p>application.yml如下</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  banner:</span></span><br><span class="line"><span class="attr">    charset:</span> <span class="string">utf-8</span></span><br><span class="line"><span class="attr">    image:</span></span><br><span class="line"><span class="attr">      location:</span> <span class="attr">classpath:banner.jpg</span></span><br><span class="line"><span class="attr">      invert:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><p>在springboot中配置banner, 可以在Application.yml中配置一下属性:</p><ul><li>spring.banner.charset: 如果banner的文本文件中有utf-8以外的编码, 则需要配置该项</li><li>spring.banner.image.location: 指定banner图片的位置</li><li>spring.banner.image.width: banner图片经转换后的字符长度, 默认为76</li><li>spring.banner.image.height: 图片经转换后的字符高度</li><li>spring.banner.image.margin: 设置图片的显示边距 默认为2</li><li>spring.banner.image.invert: 配置为true 则将图片进行转换显示, 以适应深色的终端风格</li></ul><!-- rebuild by neat -->]]></content>
      
      
      <categories>
          
          <category> springboot </category>
          
      </categories>
      
      
        <tags>
            
            <tag> springboot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>在servlet中使用thymeleaf</title>
      <link href="/2019/11/26/%E5%9C%A8servlet%E4%B8%AD%E4%BD%BF%E7%94%A8thymeleaf/"/>
      <url>/2019/11/26/%E5%9C%A8servlet%E4%B8%AD%E4%BD%BF%E7%94%A8thymeleaf/</url>
      
        <content type="html"><![CDATA[<!-- build time:Tue Dec 31 2019 09:54:11 GMT+0800 (CST) --><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在servlet中使用thymeleaf</span><br></pre></td></tr></table></figure><a id="more"></a><h3 id="引入依赖"><a href="#引入依赖" class="headerlink" title="引入依赖"></a>引入依赖</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.thymeleaf<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>thymeleaf<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.11.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="配置模板引擎"><a href="#配置模板引擎" class="headerlink" title="配置模板引擎"></a>配置模板引擎</h3><p>对于一个应用, 只需要配置一次Thymeleaf就可以了, 每次请求都可以使用同一个TemplateEngine实例. 可以使用单例模式.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.thymeleaf;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.thymeleaf.TemplateEngine;</span><br><span class="line"><span class="keyword">import</span> org.thymeleaf.templatemode.TemplateMode;</span><br><span class="line"><span class="keyword">import</span> org.thymeleaf.templateresolver.ServletContextTemplateResolver;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletContext;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">*  对于一个应用, 只需要配置一次Thymeleaf就可以了. 每次请求</span></span><br><span class="line"><span class="comment">*  都可以使用同一个TemplateEngine实例. 可以使用单例模式</span></span><br><span class="line"><span class="comment">*  代码如下:</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> TemplateEngine templateEngine;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> WebApplication webApplication;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    * 私有构造器</span></span><br><span class="line"><span class="comment">    * */</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">WebApplication</span><span class="params">(ServletContext servletContext)</span></span>&#123;</span><br><span class="line">        <span class="comment">// 创建模板解析器</span></span><br><span class="line">        ServletContextTemplateResolver templateResolver = <span class="keyword">new</span> ServletContextTemplateResolver(servletContext);</span><br><span class="line">        <span class="comment">// 设置模板模式为HTML</span></span><br><span class="line">        templateResolver.setTemplateMode(TemplateMode.HTML);</span><br><span class="line">        <span class="comment">// 设置前缀与后缀</span></span><br><span class="line">        templateResolver.setPrefix(<span class="string">"/WEB-INF/templates/"</span>);</span><br><span class="line">        templateResolver.setSuffix(<span class="string">".html"</span>);</span><br><span class="line">        templateResolver.setCharacterEncoding(<span class="string">"UTF-8"</span>);</span><br><span class="line">        <span class="keyword">this</span>.templateEngine = <span class="keyword">new</span> TemplateEngine();</span><br><span class="line">        <span class="keyword">this</span>.templateEngine.setTemplateResolver(templateResolver);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> WebApplication <span class="title">getInstance</span><span class="params">(ServletContext servletContext)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (webApplication == <span class="keyword">null</span>)&#123;</span><br><span class="line">            webApplication = <span class="keyword">new</span> WebApplication(servletContext);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> webApplication;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> TemplateEngine <span class="title">getTemplateEngine</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.templateEngine;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在WebApplication类的构造器中, 对TemplateEngine进行了配置, 并使用ServletContextTemplateResolver作为模板解析器, 分别配置了模板模式, 处理时的前缀与后缀. 在Servlet中, 只需要调用WebApplication的getTemplateEngine方法就可以获得TemplateEngine的实例.</p><p>注意: WebApplication使用单例模式, 在单例模式下, 需要提供一个私有的构造器, 一个返回自己实例的方法.</p><h3 id="创建Servlet"><a href="#创建Servlet" class="headerlink" title="创建Servlet"></a>创建Servlet</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.lacknb.beans.User;</span><br><span class="line"><span class="keyword">import</span> cn.lacknb.thymeleaf.WebApplication;</span><br><span class="line"><span class="keyword">import</span> org.thymeleaf.TemplateEngine;</span><br><span class="line"><span class="keyword">import</span> org.thymeleaf.context.Context;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        WebApplication webapp = WebApplication.getInstance(<span class="keyword">this</span>.getServletContext());</span><br><span class="line">        <span class="comment">// 设置用户数据</span></span><br><span class="line">        <span class="comment">// thymeleaf中context</span></span><br><span class="line">        Context context = <span class="keyword">new</span> Context();</span><br><span class="line">        context.setVariable(<span class="string">"users"</span>, getUsers());</span><br><span class="line">        <span class="comment">// 获取模板引擎实例</span></span><br><span class="line">        TemplateEngine engine = webapp.getTemplateEngine();</span><br><span class="line">        String result = engine.process(<span class="string">"user"</span>, context);</span><br><span class="line">        resp.setContentType(<span class="string">"text/html; charset=utf-8"</span>);</span><br><span class="line">        <span class="comment">// 输出渲染后的HTML</span></span><br><span class="line">        resp.getWriter().print(result);</span><br><span class="line"></span><br><span class="line"><span class="comment">//        新建一个user.html, 在WEB-INF/templates/</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> List&lt;User&gt; <span class="title">getUsers</span><span class="params">()</span></span>&#123;</span><br><span class="line">        List&lt;User&gt; users = <span class="keyword">new</span> ArrayList&lt;User&gt;();</span><br><span class="line">        users.add(<span class="keyword">new</span> User(<span class="number">1</span>, <span class="string">"测试1"</span>));</span><br><span class="line">        users.add(<span class="keyword">new</span> User(<span class="number">2</span>, <span class="string">"测试2"</span>));</span><br><span class="line">        users.add(<span class="keyword">new</span> User(<span class="number">3</span>, <span class="string">"测试3"</span>));</span><br><span class="line">        users.add(<span class="keyword">new</span> User(<span class="number">4</span>, <span class="string">"测试4"</span>));</span><br><span class="line">        users.add(<span class="keyword">new</span> User(<span class="number">5</span>, <span class="string">"测试5"</span>));</span><br><span class="line">        <span class="keyword">return</span> users;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="html文件"><a href="#html文件" class="headerlink" title="html文件"></a>html文件</h3><p>user.html</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-4.dtd"&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">xmlns</span>=<span class="string">"http://www.w3.org/1999/xhtml"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">xmlns:th</span>=<span class="string">"http://www.thymeleaf.org"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"http://66.lacknb.cn/ssm/js/jquery3.3.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">integrity</span>=<span class="string">"sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"</span> <span class="attr">crossorigin</span>=<span class="string">"anonymous"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">integrity</span>=<span class="string">"sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">crossorigin</span>=<span class="string">"anonymous"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">table</span> <span class="attr">align</span>=<span class="string">"center"</span> <span class="attr">class</span>=<span class="string">"table"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>序号<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>姓名<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span> <span class="attr">th:each</span>=<span class="string">"user : $&#123;users&#125;"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">"$&#123;user.id&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">"$&#123;user.name&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><!-- rebuild by neat -->]]></content>
      
      
      <categories>
          
          <category> springboot </category>
          
      </categories>
      
      
        <tags>
            
            <tag> thymeleaf </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>基于springboot对thymeleaf的使用</title>
      <link href="/2019/11/26/%E5%9F%BA%E4%BA%8Espringboot%E5%AF%B9thymeleaf%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
      <url>/2019/11/26/%E5%9F%BA%E4%BA%8Espringboot%E5%AF%B9thymeleaf%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<!-- build time:Tue Dec 31 2019 09:54:11 GMT+0800 (CST) --><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">基于springboot对thymeleaf的使用</span><br></pre></td></tr></table></figure><a id="more"></a><h3 id="Thymeleaf"><a href="#Thymeleaf" class="headerlink" title="Thymeleaf"></a>Thymeleaf</h3><p>Thymeleaf是一个XML/XHTML/HTML5模板引擎，可用于Web与非Web环境中的应用开发。它是一个开源的Java库，基于Apache License 2.0许可，由Daniel Fernández创建，该作者还是Java加密库Jasypt的作者。</p><p>Thymeleaf提供了一个用于整合Spring MVC的可选模块，在应用开发中，你可以使用Thymeleaf来完全代替JSP或其他模板引擎，如Velocity、FreeMarker等。Thymeleaf的主要目标在于提供一种可被浏览器正确显示的、格式良好的模板创建方式，因此也可以用作静态建模。你可以使用它创建经过验证的XML与HTML模板。相对于编写逻辑或代码，开发者只需将标签属性添加到模板中即可。接下来，这些标签属性就会在DOM（文档对象模型）上执行预先制定好的逻辑。</p><p><strong>官方文档: <a href="https://www.thymeleaf.org/doc/tutorials/2.1/usingthymeleaf.html#what-is-thymeleaf" target="_blank" rel="noopener">https://www.thymeleaf.org/doc/tutorials/2.1/usingthymeleaf.html#what-is-thymeleaf</a></strong></p><p>默认的模板配置路径为：<code>src/main/resources/templates</code>。当然也可以修改这个路径，可以看application.properties中的配置. springboot不用下面参数, 使用默认参数即可.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"># thymeleaf start</span><br><span class="line"># 开发时关闭缓存, 不然没办法看到实时页面</span><br><span class="line">spring.thymeleaf.cache=false</span><br><span class="line"></span><br><span class="line"># 是否检查模板位置, 默认为true</span><br><span class="line">spring.thymeleaf.check-template-location=true</span><br><span class="line"># 模板的content-type值, 默认为text/html</span><br><span class="line">spring.thymeleaf.servlet.content-type=text/html</span><br><span class="line"># 是否开启视图解析, 默认为true</span><br><span class="line">spring.thymeleaf.enabled=true</span><br><span class="line"># 模板的编码, 默认为utf-8</span><br><span class="line">spring.thymeleaf.encoding=utf-8</span><br><span class="line"># 要排除的模板名称</span><br><span class="line">#spring.thymeleaf.excluded-view-names=</span><br><span class="line"># 模板模式, 默认为utf-8</span><br><span class="line">spring.thymeleaf.mode=HTML5</span><br><span class="line"># 配置视图解析器</span><br><span class="line">spring.thymeleaf.prefix=classpath:/templates/</span><br><span class="line"># 模板后缀, 默认为.html, 用于创建模板url &quot;前缀&quot; + 模板名称 + &quot;后缀&quot; 即可定位到具体模板</span><br><span class="line">spring.thymeleaf.suffix=.html</span><br><span class="line"># 默认模板解析器的执行顺序</span><br><span class="line">#spring.thymeleaf.templates-resolver-order=</span><br><span class="line"># 要解析的模板名称, 用逗号隔开</span><br><span class="line"># spring.thymeleaf.view-names=</span><br></pre></td></tr></table></figure><p>在html文件中加头部</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-4.dtd"&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">xmlns</span>=<span class="string">"http://www.w3.org/1999/xhtml"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">xmlns:th</span>=<span class="string">"http://www.thymeleaf.org"</span>&gt;</span></span><br></pre></td></tr></table></figure><p>使用bootrap4.0版本</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"http://66.lacknb.cn/ssm/js/jquery3.3.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">integrity</span>=<span class="string">"sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"</span> <span class="attr">crossorigin</span>=<span class="string">"anonymous"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">integrity</span>=<span class="string">"sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">crossorigin</span>=<span class="string">"anonymous"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>控制器如下</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/demo01"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">test01</span><span class="params">(ModelMap modelMap, HttpSession session)</span></span>&#123;</span><br><span class="line">    modelMap.addAttribute(<span class="string">"message"</span>, <span class="string">"&lt;a href=\"#\" class=\"btn btn-primary\"&gt;thymeleaf 哈喽. &lt;/a&gt;"</span>);</span><br><span class="line">    User user = <span class="keyword">new</span> User();</span><br><span class="line">    user.setUid(<span class="number">11</span>);</span><br><span class="line">    user.setUname(<span class="string">"张三"</span>);</span><br><span class="line">    user.setUsex(<span class="string">"女"</span>);</span><br><span class="line">    modelMap.addAttribute(<span class="string">"user1"</span>, user);</span><br><span class="line">    session.setAttribute(<span class="string">"user2"</span>, user);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"demo01"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>demo01.html</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">align</span>=<span class="string">"center"</span> <span class="attr">th:text</span>=<span class="string">"'这是我收到的第一条信息为: ' + $&#123;message&#125; + '---这是结尾'"</span> &gt;</span>Hello World !!!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span> <span class="attr">align</span>=<span class="string">"center"</span> <span class="attr">th:text</span>=<span class="string">"|这是第二种方式, 只不过限制有点多只能使用变量表达式--- $&#123;message&#125;---这是结尾|"</span>&gt;</span>Hello World !!!<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br></pre></td></tr></table></figure><p>运行之后发现没有显示HelloWorld , 而是被th:text中的字符串给替换了. 当我们不通过编译器, 直接通过浏览器打开demo01.html文件时, 我们会看到Hello World !!!. <strong>对于springboot的静态资源, 我们放在src/java/resources/static</strong>文件夹下. 启动项目, 我们可以访问localhost:8080/静态资源文件名, 就可以访问到了.</p><h3 id="th-text-与-th-utext的区别"><a href="#th-text-与-th-utext的区别" class="headerlink" title="th:text 与 th:utext的区别"></a>th:text 与 th:utext的区别</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>utext 和 text的区别:</strong><br><strong>utext 会解析后台传过来的html标签</strong><br><strong>而text 不会解析, 它会把标签和内容一块显示到界面上</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"max"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">"table"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">"姓名"</span>&gt;</span>1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">"性别"</span>&gt;</span>2<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>3<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:utext</span>=<span class="string">"|utext标签: $&#123;message&#125;|"</span>&gt;</span>1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">"$&#123;user1.usex&#125;"</span>&gt;</span>2<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">"|text标签: $&#123;message&#125;|"</span>&gt;</span>3<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">tr</span> <span class="attr">th:object</span>=<span class="string">"$&#123;user1&#125;"</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!--选择表达式 *&#123;&#125;--&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">"*&#123;uname&#125;"</span>&gt;</span>1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">"$&#123;user1.usex&#125;"</span>&gt;</span>2<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>4<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="与-的区别"><a href="#与-的区别" class="headerlink" title="*{} 与 ${} 的区别:"></a>*{} 与 ${} 的区别:</h3><ol><li><strong>当没有用th:obejct指定对象前, 它们两个的用法完全一样</strong></li><li><strong>当指定对象之后, *{属性}可以直接获取属性,而${}不行, 只有${对象.属性}才能获取</strong></li><li><strong>th:Object=”${session.user}” 这里用来指定对象, 只能是${}, 而*{}不能获取</strong></li></ol><h2 id="链接网址"><a href="#链接网址" class="headerlink" title="链接网址"></a>链接网址</h2><p>语法为: @{…}</p><p>​ 可以使用相对路径, 也可以使用绝对路径</p><p>例如:</p><ul><li><p>跳转到其他网页</p><pre><code>@{http://www.lacknb.cn}</code></pre></li><li><p>get请求, 以及请求参数</p><pre><code>@{~/text/demo(id=1, uname=&apos;张三 &apos;, usex=&apos;女&apos;)}</code></pre></li></ul><p>thymeleaf对url会自动帮我们编码, urlencode</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span> <span class="attr">th:href</span>=<span class="string">"@&#123;~/test/success.html&#125;"</span>&gt;</span>点击跳转<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"http://www.sohu.com"</span> <span class="attr">th:href</span>=<span class="string">"@&#123;http://www.baidu.com&#125;"</span>&gt;</span>跳转到百度还是搜狐<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span> <span class="attr">th:href</span>=<span class="string">"@&#123;/test/href.do(uid=1, uname='王二', usex='女的')&#125;"</span>&gt;</span>获取json格式<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/href.do"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="meta">@ResponseBody</span> <span class="function">User <span class="title">test02</span><span class="params">(User user)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> user;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>编码后的url</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/test/href.do?uid=1&amp;amp;uname=%E7%8E%8B%E4%BA%8C&amp;amp;usex=%E5%A5%B3%E7%9A%84"</span>&gt;</span>获取json格式<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br></pre></td></tr></table></figure><p>js文件和css文件我们可以这样引入</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"http://66.lacknb.cn/ssm/js/jquery3.3.js"</span> <span class="attr">th:src</span>=<span class="string">"@&#123;http://66.lacknb.cn/ssm/js/jquery3.3.js&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"</span> <span class="attr">th:href</span>=<span class="string">"@&#123;https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css&#125;"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">integrity</span>=<span class="string">"sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"</span> <span class="attr">crossorigin</span>=<span class="string">"anonymous"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"</span> <span class="attr">th:src</span>=<span class="string">"@&#123;https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js&#125;"</span> <span class="attr">integrity</span>=<span class="string">"sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">crossorigin</span>=<span class="string">"anonymous"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="服务器根目录相对URL"><a href="#服务器根目录相对URL" class="headerlink" title="服务器根目录相对URL"></a>服务器根目录相对URL</h3><p>可以使用其他语法来创建相对于服务器根目录的URL（而不是上下文根目录的URL），以便链接到同一服务器中的不同上下文。这些网址的指定方式如下<code>@{~/path/to/something}</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div th:if=&quot;$&#123;user.isAdmin()&#125; == false&quot;&gt; ...</span><br></pre></td></tr></table></figure><p>请注意，在上面的示例中，<code>== false</code>y是写在花括号外面的，因此Thymeleaf本身负责它。如果将其写在花括号内，则OGNL / SpringEL引擎应负责：</p><h2 id="算术运算"><a href="#算术运算" class="headerlink" title="算术运算"></a>算术运算</h2><p>一些运算符存在文本别名：<code>gt</code>（<code>&gt;</code>），<code>lt</code>（<code>&lt;</code>），<code>ge</code>（<code>&gt;=</code>），<code>le</code>（<code>&lt;=</code>），<code>not</code>（<code>!</code>）。还有<code>eq</code>（<code>==</code>），<code>neq</code>/ <code>ne</code>（<code>!=</code>）。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">     <span class="comment">&lt;!--这里的意思是 如果user1.uname 为null 输出李四, 不为空就输出user1.uname的值--&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">"*&#123;user1.uname&#125;?: '李四'"</span>&gt;</span>默认是张三<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">td</span>&gt;</span>false<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">     <span class="comment">&lt;!--三目运算--&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:class</span>=<span class="string">"4&gt;0?5:9"</span>&gt;</span>false<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"#"</span> <span class="attr">th:attr</span>=<span class="string">"action=@&#123;~/test/form.do&#125;"</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        th:attr具有更改标签属性值的能力</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">fieldset</span>&gt;</span></span><br><span class="line">            姓名: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">name</span>=<span class="string">"uname"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">            性别: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">name</span>=<span class="string">"usex"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">class</span>=<span class="string">"btn btn-outline-primary"</span> <span class="attr">value</span>=<span class="string">"提交"</span> <span class="attr">th:attr</span>=<span class="string">"value='登录一下'"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">fieldset</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--       一次设置多个属性怎么办？XML规则不允许您在标记中设置属性两次，因此th:attr将采用逗号分隔的分配列表，例如：--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">"table"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">"姓名"</span>&gt;</span>1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">"性别"</span>&gt;</span>2<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>年龄<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:attr</span>=<span class="string">"href=@&#123;http://www.lacknb.cn&#125;, target=@&#123;_blank&#125;"</span>&gt;</span>设置多个属性<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>2<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="迭代"><a href="#迭代" class="headerlink" title="迭代"></a>迭代</h2><p>th:each=” aaa : ${list} “</p><p>通过${aaa}(迭代变量), 获取其中的元素</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">tr</span> <span class="attr">th:each</span>=<span class="string">"users : $&#123;list&#125;"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">"$&#123;users.uid&#125;"</span>&gt;</span>id<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">"$&#123;users.uname&#125;"</span>&gt;</span>姓名<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">"$&#123;users.usex&#125;"</span>&gt;</span>性别<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br></pre></td></tr></table></figure><p>使用<code>th:each</code>Thymeleaf时，提供了一种可用于跟踪迭代状态的机制：<strong><em>状态变量</em></strong> 需要自己定义, 详细请看下面例子。</p><ul><li>The current <em>iteration index</em>, starting with 0. This is the <code>index</code> property.<ul><li>当前迭代下标, 从0开始, 这是index属性</li></ul></li><li>The current <em>iteration index</em>, starting with 1. This is the <code>count</code> property.<ul><li>当前迭代下标, 从1开始, 这是count属性</li></ul></li><li>The total amount of elements in the iterated variable. This is the <code>size</code> property.<ul><li>迭代变量中元素的总数, 是size属性</li></ul></li><li>The <em>iter variable</em> for each iteration. This is the <code>current</code> property.<ul><li>这是当前迭代的变量, (可以是对象), 是current属性</li></ul></li><li>Whether the current iteration is even or odd. These are the <code>even/odd</code> boolean properties.<ul><li>判断当前迭代是偶数还是奇数, 返回布尔值, odd是奇数, even是偶数.</li></ul></li><li>Whether the current iteration is the first one. This is the <code>first</code> boolean property.<ul><li>当前迭代是否是第一个元素</li></ul></li><li>Whether the current iteration is the last one. This is the <code>last</code> boolean property.<ul><li>当前迭代的元素是否是最后一个元素, 返回布尔类型</li></ul></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">tr</span> <span class="attr">th:each</span>=<span class="string">"users, iterable : $&#123;list&#125;"</span> <span class="attr">th:class</span>=<span class="string">"$&#123;iterable.odd&#125;"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">"$&#123;users.uid&#125; + 'index: ' + $&#123;iterable.index&#125; + 'count: ' + $&#123;iterable.count&#125;"</span>&gt;</span>id<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">"$&#123;users.uname&#125; + '当前:' + $&#123;iterable.current&#125; + '总数:' + $&#123;iterable.size&#125;"</span>&gt;</span>姓名<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">"$&#123;users.usex&#125;"</span>&gt;</span>性别<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br></pre></td></tr></table></figure><p>这里iterable就是状态变量</p><h2 id="基本对象"><a href="#基本对象" class="headerlink" title="基本对象"></a>基本对象</h2><p>在jsp页面中, 我们可以很轻松地获取几个内置对象, 例如 request, session,等. 在thymeleaf的模板中. 也提供了类似的内置对象.</p><ul><li>#ctx: 表示模板引擎的全局上下文对象</li><li>#vars: 同样返回模板引擎上下文对象, 一般使用#ctx即可</li><li>#locale: 在全局上下文中维护的java.util.Locale对象</li><li>#request: 表示HttpServletRequest对象</li><li>#response: 表示HttpServletResponse对象</li><li>#servletContext: 表示ServletContext对象</li></ul><h2 id="使用sequence方法"><a href="#使用sequence方法" class="headerlink" title="使用sequence方法"></a>使用sequence方法</h2><p>调用#numbers的sequence方法, 会返回integer数组, 该方法可以设置开始值, 结束值以及步长, 它主要有两个重载的方法</p><ul><li>sequence(from , to) 设置开始值与结束值, 如果from比to大, 则步长默认为1, 否则步长为-1. 它的范围是 全是闭区间 即 [1, 3] 取 1, 2, 3</li><li>sequence(from , to , step): 设置开始值与结束值, 还有步长</li></ul><p>例子: 在下方. from 和 to值 不能用${}获取, 可以使用#ctx.属性</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 这里传过来的x是8--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"pagination"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"page-item"</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"page-link"</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>上一页<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">th:each</span>=<span class="string">"num : $&#123;#numbers.sequence(1, #ctx.x)&#125;"</span> <span class="attr">class</span>=<span class="string">"pagination"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"page-item"</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"page-link"</span> <span class="attr">href</span>=<span class="string">"#"</span> <span class="attr">th:text</span>=<span class="string">"$&#123;num&#125;"</span>&gt;</span>1<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"page-item"</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"page-link"</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>下一页<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure><p>效果如下:</p><p><img src="https://s2.ax1x.com/2019/11/20/MhNH0A.png" alt="MhNH0A.png"></p><h2 id="条件判断"><a href="#条件判断" class="headerlink" title="条件判断"></a>条件判断</h2><p><strong>th:if</strong></p><p>&emsp; &emsp; 例如: 网页分页, 当我们数据量很大时, 需要对其进行分页. 从后台获取第一页的数据并获取到总页数, 我们根据这个总页数进行判断, 如果大于1 时候, 我们就在当前页面显示第2页的 按钮, 否则就不显示下一页的按钮.</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"$&#123;x&#125;"</span>&gt;</span>9999<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span>评论<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span> <span class="attr">th:href</span>=<span class="string">"@&#123;~/comment(id=$&#123;x&#125;)&#125;"</span> <span class="attr">th:text</span>=<span class="string">"|评论数: $&#123;x&#125;|"</span> <span class="attr">th:if</span>=<span class="string">"$&#123;x&#125; &gt; 0"</span>&gt;</span>点击进入<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br></pre></td></tr></table></figure><p>当x &gt; 0就会显示超链接, 否则就不显示超链接</p><h2 id="uri对象"><a href="#uri对象" class="headerlink" title="uri对象"></a>uri对象</h2><p>#uri对象提供了对uri或url进行转码的功能, 其主要有以下四个方法</p><ul><li>escapePathSegment(uri) 对uri路径进行编码, 大小写英文字母, 阿拉伯数字以及部分字符不会被转码. 这些字符包括: “ -._~!$ &amp; &amp;-amp; ‘ () +, ; = : @ “</li><li>escapePath(uri) 会编码的字符, 在前一个方法(escapePathSegment)的基础上增加一个 “/“</li><li>escapeFragemetnId(uri) 会被编码的字符, 在前一个方法(escapePath)的基础上, 多一个 “ ? “</li><li>escapeQueryParam(uri) 该方法主要对uri参数进行编码, 除了英文字母与数字之外, 还会对以下字符进行编码: “-.~!$*,;:@/?”</li></ul><p>每一个编码的方法都三个派生出来 的方法, 以escapePath为例</p><ul><li>escapePath(uri, encoding) 使用特定的字符集进行解码, 默认使用utf-8进行解码</li><li>unescapePath(uri) 对uri进行解码</li><li>unescapePath(uri, encoding) 使用特定的字符集进行解码 默认使用utf-8</li></ul><!-- rebuild by neat -->]]></content>
      
      
      <categories>
          
          <category> springboot </category>
          
      </categories>
      
      
        <tags>
            
            <tag> springboot </tag>
            
            <tag> thymeleaf </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQL 8.0安装与操作指南</title>
      <link href="/2019/11/21/MySQL-8-0%E5%AE%89%E8%A3%85%E4%B8%8E%E6%93%8D%E4%BD%9C%E6%8C%87%E5%8D%97/"/>
      <url>/2019/11/21/MySQL-8-0%E5%AE%89%E8%A3%85%E4%B8%8E%E6%93%8D%E4%BD%9C%E6%8C%87%E5%8D%97/</url>
      
        <content type="html"><![CDATA[<!-- build time:Tue Dec 31 2019 09:54:11 GMT+0800 (CST) --><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MySQL 8.0安装与操作指南</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><h3 id="下载：-https-dev-mysql-com-downloads-mysql"><a href="#下载：-https-dev-mysql-com-downloads-mysql" class="headerlink" title="下载：  https://dev.mysql.com/downloads/mysql/"></a>下载： <a href="https://dev.mysql.com/downloads/mysql/" target="_blank" rel="noopener">https://dev.mysql.com/downloads/mysql/</a></h3><p><img src="https://s2.ax1x.com/2019/11/18/McAmTO.png" alt="McAmTO.png"></p><h3 id="解压之后，-在这，目录下创建my-ini文件-把安装路径填一下，-还有创建data目录"><a href="#解压之后，-在这，目录下创建my-ini文件-把安装路径填一下，-还有创建data目录" class="headerlink" title="解压之后， 在这，目录下创建my.ini文件, 把安装路径填一下， 还有创建data目录"></a>解压之后， 在这，目录下创建my.ini文件, 把安装路径填一下， 还有创建data目录</h3><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[mysqld]</span></span><br><span class="line"><span class="comment"># 设置3306端口</span></span><br><span class="line"><span class="attr">port</span>=<span class="number">3306</span></span><br><span class="line"><span class="comment"># 设置mysql的安装目录</span></span><br><span class="line"><span class="attr">basedir</span>=G:\win_mysql\mysql-<span class="number">8.0</span>.<span class="number">17</span>-winx64</span><br><span class="line"><span class="comment"># 设置mysql数据库的数据的存放目录</span></span><br><span class="line"><span class="attr">datadir</span>=G:\win_mysql\mysql-<span class="number">8.0</span>.<span class="number">17</span>-winx64\Data</span><br><span class="line"><span class="comment"># 允许最大连接数</span></span><br><span class="line"><span class="attr">max_connections</span>=<span class="number">200</span></span><br><span class="line"><span class="comment"># 允许连接失败的次数。这是为了防止有人从该主机试图攻击数据库系统</span></span><br><span class="line"><span class="attr">max_connect_errors</span>=<span class="number">5</span></span><br><span class="line"><span class="comment"># 服务端使用的字符集默认为UTF8</span></span><br><span class="line"><span class="attr">character-set-server</span>=utf8</span><br><span class="line"><span class="comment"># 创建新表时将使用的默认存储引擎</span></span><br><span class="line"><span class="attr">default-storage-engine</span>=INNODB</span><br><span class="line"><span class="comment"># 默认使用“mysql_native_password”插件认证</span></span><br><span class="line"><span class="attr">default_authentication_plugin</span>=mysql_native_password</span><br><span class="line"><span class="section">[mysql]</span></span><br><span class="line"><span class="comment"># 设置mysql客户端默认字符集</span></span><br><span class="line"><span class="attr">default-character-set</span>=utf8</span><br><span class="line"><span class="section">[client]</span></span><br><span class="line"><span class="comment"># 设置mysql客户端连接服务端时默认使用的端口</span></span><br><span class="line"><span class="attr">port</span>=<span class="number">3306</span></span><br><span class="line"><span class="attr">default-character-set</span>=utf8</span><br></pre></td></tr></table></figure><h3 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h3><p><img src="https://s2.ax1x.com/2019/11/18/McAUAS.png" alt="McAUAS.png"></p><h3 id="添加环境变量"><a href="#添加环境变量" class="headerlink" title="添加环境变量"></a>添加环境变量</h3><p>G:\win_mysql\mysql-8.0.17-winx64\bin</p><p><img src="https://s2.ax1x.com/2019/11/18/McECHf.png" alt="McECHf.png"></p><p><img src="https://s2.ax1x.com/2019/11/18/McEKbV.png" alt="McEKbV.png"></p><p>点击确定， 完成。</p><h3 id="安装指令"><a href="#安装指令" class="headerlink" title="安装指令"></a>安装指令</h3><p>打开cmd命令行， win + r 键 输入cmd 确认 –（以管理员运行）</p><p>输入命令， 初始化</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysqld --initialize --console</span><br><span class="line"><span class="comment"># 也可以使用 mysqld --initialize-insecure --user=mysql 使用这个命令, 默认没有root密码, 可以自己设置, 比较方便.</span></span><br></pre></td></tr></table></figure><p>耐心等一会， 会输出mysql的默认密码</p><p><img src="https://s2.ax1x.com/2019/11/18/McVEdK.png" alt="McVEdK.png"></p><p>如果是你执行这个命令之后， 不小心关闭了窗口， 可以删除datadir目录， 再执行一遍初始化命令， 又会重新生成默认密码</p><blockquote><p>现在还没安装完， 不要急着去登mysql， 登你也登不上。 mysql服务没开。</p></blockquote><h3 id="安装服务"><a href="#安装服务" class="headerlink" title="安装服务"></a>安装服务</h3><p><strong>mysqld –install [服务名]</strong></p><p>后面的服务名可以不写，默认的名字为 mysql。当然，如果你的电脑上需要安装多个MySQL服务，就可以用不同的名字区分了，比如 mysql5 和 mysql8。</p><p>例如执行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqld --install</span><br></pre></td></tr></table></figure><p>会出现</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\Administrator&gt;mysqld --install</span><br><span class="line">Service successfully installed.</span><br><span class="line">C:\Users\Administrator&gt;</span><br></pre></td></tr></table></figure><p>显示已经安装成功</p><p>现在打开服务</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\Administrator&gt;net start mysql</span><br><span class="line">MySQL 服务正在启动 ....</span><br><span class="line">MySQL 服务已经启动成功。</span><br></pre></td></tr></table></figure><h3 id="更改默认的root密码"><a href="#更改默认的root密码" class="headerlink" title="更改默认的root密码"></a>更改默认的root密码</h3><p>使用默认密码登陆mysql</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\Administrator&gt;mysql -u root -p</span><br><span class="line">Enter password: ************</span><br><span class="line">Welcome to the MySQL monitor.  Commands end with ; or \g.</span><br><span class="line">Your MySQL connection id is 8</span><br><span class="line">Server version: 8.0.17</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2019, Oracle and/or its affiliates. All rights reserved.</span><br><span class="line"></span><br><span class="line">Oracle is a registered trademark of Oracle Corporation and/or its</span><br><span class="line">affiliates. Other names may be trademarks of their respective</span><br><span class="line">owners.</span><br><span class="line"></span><br><span class="line">Type <span class="string">'help;'</span> or <span class="string">'\h'</span> <span class="keyword">for</span> <span class="built_in">help</span>. Type <span class="string">'\c'</span> to clear the current input statement.</span><br><span class="line"></span><br><span class="line">mysql&gt;</span><br></pre></td></tr></table></figure><p>更改密码</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER USER <span class="string">'root'</span>@<span class="string">'localhost'</span> IDENTIFIED WITH mysql_native_password BY <span class="string">'新密码'</span>;</span><br></pre></td></tr></table></figure><p>执行完之后，安装成功</p><h2 id="卸载MySQL"><a href="#卸载MySQL" class="headerlink" title="卸载MySQL"></a>卸载MySQL</h2><h3 id="首先关闭MySQL服务"><a href="#首先关闭MySQL服务" class="headerlink" title="首先关闭MySQL服务"></a>首先关闭MySQL服务</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">net stop mysql</span><br></pre></td></tr></table></figure><h3 id="卸载服务"><a href="#卸载服务" class="headerlink" title="卸载服务"></a>卸载服务</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqld --remove</span><br></pre></td></tr></table></figure><h3 id="最后删除环境变量，-就ok了。"><a href="#最后删除环境变量，-就ok了。" class="headerlink" title="最后删除环境变量， 就ok了。"></a>最后删除环境变量， 就ok了。</h3><h2 id="MySQL的基本操作"><a href="#MySQL的基本操作" class="headerlink" title="MySQL的基本操作"></a>MySQL的基本操作</h2><h3 id="创建数据库"><a href="#创建数据库" class="headerlink" title="创建数据库"></a>创建数据库</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create database test;</span><br><span class="line">Query OK, 1 row affected (0.19 sec)</span><br></pre></td></tr></table></figure><ul><li><p>使用该数据库</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; use test;</span><br><span class="line">Database changed</span><br></pre></td></tr></table></figure></li></ul><h3 id="创建表"><a href="#创建表" class="headerlink" title="创建表"></a>创建表</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create table user(</span><br><span class="line">    -&gt; id int(11) primary key,</span><br><span class="line">    -&gt; name varchar(10),</span><br><span class="line">    -&gt; age int(3)</span><br><span class="line">    -&gt; );</span><br><span class="line">Query OK, 0 rows affected, 2 warnings (0.35 sec)</span><br></pre></td></tr></table></figure><ul><li>单独的命令</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> <span class="keyword">user</span>(</span><br><span class="line">     <span class="keyword">id</span> <span class="built_in">int</span>(<span class="number">11</span>) primary <span class="keyword">key</span>,</span><br><span class="line">     <span class="keyword">name</span> <span class="built_in">varchar</span>(<span class="number">10</span>),</span><br><span class="line">     age <span class="built_in">int</span>(<span class="number">3</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h3 id="插入数据"><a href="#插入数据" class="headerlink" title="插入数据"></a>插入数据</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; insert into user (id, name, age) values(1, '张三', 22);</span><br><span class="line">Query OK, 1 row affected (0.77 sec)</span><br></pre></td></tr></table></figure><ul><li><p>单独的命令</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">user</span> (<span class="keyword">id</span>, <span class="keyword">name</span>, age) <span class="keyword">values</span>(<span class="number">1</span>, <span class="string">'张三'</span>, <span class="number">22</span>);</span><br></pre></td></tr></table></figure></li></ul><h3 id="修改数据"><a href="#修改数据" class="headerlink" title="修改数据"></a>修改数据</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; update user set name = '李四' where id = 1;</span><br><span class="line">Query OK, 1 row affected (0.14 sec)</span><br><span class="line">Rows matched: 1  Changed: 1  Warnings: 0</span><br></pre></td></tr></table></figure><ul><li><p>单独的命令</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> <span class="keyword">user</span> <span class="keyword">set</span> <span class="keyword">name</span> = <span class="string">'李四'</span> <span class="keyword">where</span> <span class="keyword">id</span> = <span class="number">1</span>;</span><br></pre></td></tr></table></figure></li></ul><h3 id="查询数据"><a href="#查询数据" class="headerlink" title="查询数据"></a>查询数据</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from user;</span><br><span class="line">+<span class="comment">----+--------+------+</span></span><br><span class="line">| id | name   | age  |</span><br><span class="line">+<span class="comment">----+--------+------+</span></span><br><span class="line">|  1 | 李四   |   22 |</span><br><span class="line">+<span class="comment">----+--------+------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure><ul><li><p>单独的命令</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> <span class="keyword">user</span>;</span><br></pre></td></tr></table></figure></li></ul><h3 id="删除数据"><a href="#删除数据" class="headerlink" title="删除数据"></a>删除数据</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; delete from user where id = 1;</span><br><span class="line">Query OK, 1 row affected (0.13 sec)</span><br></pre></td></tr></table></figure><ul><li><p>单独的命令</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> <span class="keyword">user</span> <span class="keyword">where</span> <span class="keyword">id</span> = <span class="number">1</span>;</span><br></pre></td></tr></table></figure></li></ul><h3 id="删除数据库"><a href="#删除数据库" class="headerlink" title="删除数据库"></a>删除数据库</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">database</span> <span class="keyword">test</span>;</span><br></pre></td></tr></table></figure><!-- rebuild by neat -->]]></content>
      
      
      <categories>
          
          <category> mysql </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用IDEA将ssm项目模块化</title>
      <link href="/2019/11/19/%E4%BD%BF%E7%94%A8IDEA%E5%B0%86ssm%E9%A1%B9%E7%9B%AE%E6%A8%A1%E5%9D%97%E5%8C%96/"/>
      <url>/2019/11/19/%E4%BD%BF%E7%94%A8IDEA%E5%B0%86ssm%E9%A1%B9%E7%9B%AE%E6%A8%A1%E5%9D%97%E5%8C%96/</url>
      
        <content type="html"><![CDATA[<!-- build time:Tue Dec 31 2019 09:54:11 GMT+0800 (CST) --><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">使用IDEA将ssm项目模块化</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="创建父项目"><a href="#创建父项目" class="headerlink" title="创建父项目"></a>创建父项目</h2><p>首先创建一个maven项目叫ssm_parent, 可以把src文件夹删除掉, 父项目用不到. 最终也不会去编译父项目. 把pom.xml 的打包方式改成pom.</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">packaging</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.lacknb.parent<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>ssm_parents<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br></pre></td></tr></table></figure><p>导入所有我们需要的jar包, 由父项目统一版本号. &lt;dependencyManagement&gt; 不会让子模块继承依赖, 当子模块需要的时候, 通过填写指定依赖使用, <strong>(不用再写版本号 , 由父项目统一管理)</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-core --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-beans --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-beans<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-context --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-expression<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-aop<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-tx<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;mybatis.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.json<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>json<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>20090211<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.tomcat<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>tomcat-servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;tomcat.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>taglibs<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>standard<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!--    spring与mybatis整合包--&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.mybatis/mybatis-spring --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;mybatis-spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!--        Druid数据源--&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--         https://mvnrepository.com/artifact/com.alibaba/druid --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;com.alibaba&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;mysql-connector&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="创建子模块dao层"><a href="#创建子模块dao层" class="headerlink" title="创建子模块dao层"></a>创建子模块dao层</h3><p><img src="https://s1.ax1x.com/2019/11/19/M2PFZ8.png" alt="M2PFZ8.png"></p><p>当子模块需要某个依赖时, 可以在子模块下的pom.xml进行配置, 可以把配置文件所需要的部分抽离出来, 当不再有错误报出的时候. 就行了. <strong>打包格式为jar</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>ssm_parents<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.lacknb.parent<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.lacknb.dao<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>ssm_dao<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-expression<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-beans<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="创建子模块service层"><a href="#创建子模块service层" class="headerlink" title="创建子模块service层"></a>创建子模块service层</h2><p><img src="https://s1.ax1x.com/2019/11/19/M2PLyq.png" alt="M2PLyq.png"></p><p>和上一个子模块一样, 需要什么依赖, 就导什么依赖. 直到没有错误为止. <strong>这个打包格式也是jar包</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>ssm_parents<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.lacknb.parent<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.lacknb.service<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>ssm_servce<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.lacknb.dao<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>ssm_dao<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.tomcat<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>tomcat-servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.json<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>json<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="创建子模块view层"><a href="#创建子模块view层" class="headerlink" title="创建子模块view层"></a>创建子模块view层</h3><p>这个maven项目可以创建成web项目, 这里需要我们的视图层的文件. <strong>这个打包格式是war包</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>ssm_parents<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.lacknb.parent<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>war<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.lacknb.view<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>ssm_view<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.lacknb.dao<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>ssm_dao<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.lacknb.service<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>ssm_servce<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>taglibs<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>standard<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://s1.ax1x.com/2019/11/19/M2i0cn.png" alt="M2i0cn.png"></p><p>配置web.xml, 当Spring配置的文件太多的时候, 可以使用通配符的方式进行批量加载.</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="attr">xmlns</span>=<span class="string">"http://xmlns.jcp.org/xml/ns/javaee"</span> <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd"</span> <span class="attr">id</span>=<span class="string">"WebApp_ID"</span> <span class="attr">version</span>=<span class="string">"3.1"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">display-name</span>&gt;</span>Archetype Created Web Application<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:springmvc-servlet.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--表示容器在启动时加载--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>*.do<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!--防止中文乱码--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncoding<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>utf-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncoding<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!--配置spring 监听器--&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- classpath*: 匹配所有依赖jar包的类路径下 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath*:applicationContext.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure><p>springmvc.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置只扫描Controller注解--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"cn.lacknb.controller"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:include-filter</span> <span class="attr">type</span>=<span class="string">"annotation"</span> <span class="attr">expression</span>=<span class="string">"org.springframework.stereotype.Controller"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--启动各种器, 包括注解的--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:annotation-driven</span>/&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 不扫描Controller注解 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"cn.lacknb"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:exclude-filter</span> <span class="attr">type</span>=<span class="string">"annotation"</span> <span class="attr">expression</span>=<span class="string">"org.springframework.stereotype.Controller"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br></pre></td></tr></table></figure><p>当不再有错误报出了, 就可以运行了.</p><p>运行方式有两种:(都是运行 web项目)</p><pre><code>1. 通过maven中的tomcat插件 maven run:tomcat7   2. 通过把web项目 部署到tomcat上</code></pre><p>最后通过maven的热部署, 推送到服务器上.</p><p><img src="https://s1.ax1x.com/2019/11/19/M2Aw1H.png" alt="M2Aw1H.png"></p><p><img src="https://s1.ax1x.com/2019/11/19/M2A4js.png" alt="M2A4js.png"></p><!-- rebuild by neat -->]]></content>
      
      
      <categories>
          
          <category> spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mybatis </tag>
            
            <tag> spring </tag>
            
            <tag> springmvc </tag>
            
            <tag> ssm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pageHelper分页插件初体验</title>
      <link href="/2019/11/15/pageHelper%E5%88%86%E9%A1%B5%E6%8F%92%E4%BB%B6%E5%88%9D%E4%BD%93%E9%AA%8C/"/>
      <url>/2019/11/15/pageHelper%E5%88%86%E9%A1%B5%E6%8F%92%E4%BB%B6%E5%88%9D%E4%BD%93%E9%AA%8C/</url>
      
        <content type="html"><![CDATA[<!-- build time:Tue Dec 31 2019 09:54:11 GMT+0800 (CST) --><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pageHelper分页插件初体验</span><br></pre></td></tr></table></figure><a id="more"></a><p>*<em>官方文档: *</em> <a href="https://pagehelper.github.io/docs/howtouse" target="_blank" rel="noopener"><a href="https://pagehelper.github.io/docs/howtouse" target="_blank" rel="noopener">https://pagehelper.github.io/docs/howtouse</a></a></p><p>以本站获取虎牙直播的api为demo</p><h2 id="需要的jar包"><a href="#需要的jar包" class="headerlink" title="需要的jar包"></a>需要的jar包</h2><ul><li>pagehelper.jar</li><li>sql的解析工具, jsqlparser.jar</li></ul><h3 id="maven引入依赖"><a href="#maven引入依赖" class="headerlink" title="maven引入依赖"></a>maven引入依赖</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--pageHelper 分页插件--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.pagehelper<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>pagehelper<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>LATEST<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>引入之后, maven会帮我们自动下载那两个jar包</p><h2 id="配置拦截插件"><a href="#配置拦截插件" class="headerlink" title="配置拦截插件"></a>配置拦截插件</h2><p><strong>如果我们只使用mybatis, 可以在mybatis-config.xml配置</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    plugins在配置文件中的位置必须符合要求，否则会报错，顺序如下:</span></span><br><span class="line"><span class="comment">    properties?, settings?,</span></span><br><span class="line"><span class="comment">    typeAliases?, typeHandlers?,</span></span><br><span class="line"><span class="comment">    objectFactory?,objectWrapperFactory?,</span></span><br><span class="line"><span class="comment">    plugins?,</span></span><br><span class="line"><span class="comment">    environments?, databaseIdProvider?, mappers?</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- com.github.pagehelper为PageHelper类所在包名 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugin</span> <span class="attr">interceptor</span>=<span class="string">"com.github.pagehelper.PageInterceptor"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 使用下面的方式配置参数，后面会有所有的参数介绍 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"helperDialect"</span> <span class="attr">value</span>=<span class="string">"mysql"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"reasonable"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br></pre></td></tr></table></figure><p>如果我们使用的是ssm, 我们可以在mybatis-config.xml配置上述参数</p><p>也可以在applicationContext.xml配置下列参数, 注意plugins的位置. 注意: 如果mybatis配置了, spring就不能再配置了.</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"sqlSessionFactory"</span> <span class="attr">class</span>=<span class="string">"org.mybatis.spring.SqlSessionFactoryBean"</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 注意其他配置 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"plugins"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"com.github.pagehelper.PageInterceptor"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"properties"</span>&gt;</span></span><br><span class="line">                        <span class="comment">&lt;!--使用下面的方式配置参数，一行配置一个 --&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">props</span>&gt;</span></span><br><span class="line">                            <span class="comment">&lt;!--常用的两个，helperDialect配置操作数据库的类型--&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">"helperDialect"</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">                            <span class="comment">&lt;!--reasonable配置分页合理化(超过第一页第一页，超过最后一页即为最后一页)--&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">"reasonable"</span>&gt;</span>true<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">props</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="后台调用"><a href="#后台调用" class="headerlink" title="后台调用"></a>后台调用</h2><p>控制器</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/huya"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">huya</span><span class="params">(@RequestParam(value = <span class="string">"page"</span>, defaultValue = <span class="string">"1"</span>)</span> Integer page, @<span class="title">RequestParam</span><span class="params">(value = <span class="string">"pageSize"</span>, defaultValue = <span class="string">"60"</span>)</span> Integer pageSize, Model model)</span>&#123;</span><br><span class="line">    String huyas = huyaService.findAll(page, pageSize);</span><br><span class="line">    model.addAttribute(<span class="string">"huya"</span>, huyas);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"/huya.jsp"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>HuyaService</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">findAll</span><span class="params">(<span class="keyword">int</span> page, <span class="keyword">int</span> pageSize)</span> </span>&#123;</span><br><span class="line">    PageHelper.startPage(page, pageSize);</span><br><span class="line">    PageInfo pageInfo = <span class="keyword">new</span> PageInfo(huyaDao.findAll());</span><br><span class="line">    StringBuilder builder = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">    List&lt;Huya&gt; list = pageInfo.getList();</span><br><span class="line">    builder.append(<span class="string">"huya(&#123;pages: \""</span> + pageInfo.getPages() + <span class="string">"\", msg: \""</span>);</span><br><span class="line">    <span class="comment">// deaList 是自己写的方法 其实就是将集合手动转成json格式 的字符串</span></span><br><span class="line">    <span class="keyword">return</span> dealList(builder, list);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>HuyaDao</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Select</span>(<span class="string">"select * from huya"</span>)</span><br><span class="line"><span class="function">List&lt;Huya&gt; <span class="title">findAll</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure><p>pageInfo的一些参数我们需要知道</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">int</span> pageNum; <span class="comment">// 当前页</span></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">int</span> pageSize; <span class="comment">// 每页显示的数量</span></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">int</span> size;<span class="comment">// 当前页的条数</span></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">int</span> startRow; <span class="comment">// 从第几条开始</span></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">int</span> endRow; <span class="comment">// 从第几条结束</span></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">int</span> pages; <span class="comment">// 总共有多少页</span></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">int</span> prePage; <span class="comment">// 上一页</span></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">int</span> nextPage; <span class="comment">// 下一页</span></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">boolean</span> isFirstPage; <span class="comment">// 是否第一页</span></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">boolean</span> isLastPage; <span class="comment">// 是否最后一页</span></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">boolean</span> hasPreviousPage;</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">boolean</span> hasNextPage;</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">int</span> navigatePages; </span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">int</span>[] navigatepageNums;</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">int</span> navigateFirstPage;</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">int</span> navigateLastPage;</span><br></pre></td></tr></table></figure><p>其他功能, 以后慢慢研究……..</p><!-- rebuild by neat -->]]></content>
      
      
      <categories>
          
          <category> mybatis </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mybatis </tag>
            
            <tag> pageHelper </tag>
            
            <tag> 插件 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring MVC入门学习(五)</title>
      <link href="/2019/11/15/Spring-MVC%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E4%BA%94/"/>
      <url>/2019/11/15/Spring-MVC%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E4%BA%94/</url>
      
        <content type="html"><![CDATA[<!-- build time:Tue Dec 31 2019 09:54:11 GMT+0800 (CST) --><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Spring MVC入门学习之(五)</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="配置拦截器"><a href="#配置拦截器" class="headerlink" title="配置拦截器"></a>配置拦截器</h2><p>&emsp;&emsp; springmvc的拦截器只能拦截控制器, 不能拦截jsp. 当我们不想让别人访问的jsp文件的时候, 可以把jsp界面放在WEB-INF文件夹中, 这个目录称为安全目录, 不能被外界直接访问.</p><p>当然我们可以通过设置过滤器拦截jsp界面.</p><h3 id="编写自定义拦截器"><a href="#编写自定义拦截器" class="headerlink" title="编写自定义拦截器"></a>编写自定义拦截器</h3><p>&emsp;&emsp; 编写的类需要实现HandlerInterceptor接口, 其中有三个方法(preHandle、postHandler、afterCompletion). 其实生命周期和servlet中的过滤器一致. preHandle方法是在执行控制方法之前执行, 如果返回为true, 放行, 即执行Controller, 如果返回false, 即不放行, 不执行Controller. postHandler为Controller方法执行之后 执行此方法. afterCompletion为最后执行, 即返回视图后才执行</p><h3 id="xml配置"><a href="#xml配置" class="headerlink" title="xml配置"></a>xml配置</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--配置一个全局的拦截器, 拦截所有请求--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;bean class="cn.lacknb.interceptor.SessonInterceptor"/&gt;--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--配置拦截器作用的路径--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">"/**"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">mvc:exclude-mapping</span> <span class="attr">path</span>=<span class="string">"/user/login.do"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">mvc:exclude-mapping</span> <span class="attr">path</span>=<span class="string">"/user/register.do"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"cn.lacknb.interceptor.SessonInterceptor"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mvc:interceptors</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="多个拦截器的执行流程"><a href="#多个拦截器的执行流程" class="headerlink" title="多个拦截器的执行流程"></a>多个拦截器的执行流程</h2><p>现在有拦截器111和拦截器222, 执行分别输出111和222.</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>上述的配置顺序, 当执行完成之后, 输出顺序为:</p><p>​ preHandler——1111</p><p>​ preHandler——2222</p><p>​ postHandler——2222</p><p>​ postHandler——1111</p><p>​ afterCompletion——2222</p><p>​ afterCompletion——1111</p><h2 id="JSON数据交互"><a href="#JSON数据交互" class="headerlink" title="JSON数据交互"></a>JSON数据交互</h2><p>需要准备的jar包</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--自动封装json为实体类对象, 并返回给前台--&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-core --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.8<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-databind --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-databind<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.8<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-annotations --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-annotations<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.8<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>在使用注解开发时需要用到两个重要的JSON格式转换注解, 分别是@RequestBody和@ResponseBody</p><ul><li>@RequestBody: 用于将请求体中的数据绑定到方法的形参中, 改注解应用在方法的形参上(其实就是将前台传来的json数据转成实体类对象)</li><li>@ResponseBody: 用于直接返回return对象, 该注解应用在方法上.</li></ul><h3 id="前端代码"><a href="#前端代码" class="headerlink" title="前端代码"></a>前端代码</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">        $(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            $(<span class="string">'#btn'</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                alert(<span class="string">"hello"</span>)</span></span><br><span class="line"><span class="javascript">                $.ajax(&#123;</span></span><br><span class="line"><span class="javascript">                    <span class="comment">/*这里一定要表明contentType为json类型, 否则后台接收不到数据, 会报415错误*/</span></span></span><br><span class="line"><span class="javascript">                    contentType: <span class="string">"application/json; charset=UTF-8"</span>,</span></span><br><span class="line"><span class="javascript">                    url: <span class="string">"$&#123;pageContext.request.contextPath&#125;/test/ajax.do"</span>,</span></span><br><span class="line"><span class="javascript">                    dataType: <span class="string">"json"</span>,</span></span><br><span class="line"><span class="javascript">                    method: <span class="string">"post"</span>,</span></span><br><span class="line"><span class="javascript">                    data: <span class="built_in">JSON</span>.stringify(&#123;<span class="string">"name"</span>: <span class="string">"张三"</span>, <span class="string">"sex"</span>: <span class="string">"女"</span>, <span class="string">"age"</span>: <span class="number">13</span> &#125;),</span></span><br><span class="line"><span class="javascript">                    success: <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                        <span class="built_in">console</span>.log(data)</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn"</span>&gt;</span>ajax模拟请求<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="后端代码"><a href="#后端代码" class="headerlink" title="后端代码"></a>后端代码</h3><p>实体类user</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.bean;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String sex;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getSex</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> sex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSex</span><span class="params">(String sex)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.sex = sex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(Integer age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>控制器controller</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.lacknb.bean.User;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestBody;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMethod;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ResponseBody;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/test"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AjaxTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * 这里的:</span></span><br><span class="line"><span class="comment">    *       RequestBody : 接收json数据 并封装成对象</span></span><br><span class="line"><span class="comment">    *       ResponseBody: 将对象封装成json数据 并返回</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * */</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(value = <span class="string">"/ajax.do"</span>, method = RequestMethod.POST)</span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">ajaxTest</span><span class="params">(@RequestBody User user)</span></span>&#123;</span><br><span class="line">        System.out.println(user);</span><br><span class="line">        user.setAge(<span class="number">77</span>);</span><br><span class="line">        user.setName(<span class="string">"李四"</span>);</span><br><span class="line">        user.setSex(<span class="string">"男"</span>);</span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><!-- rebuild by neat -->]]></content>
      
      
      <categories>
          
          <category> springmvc </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring MVC入门学习(四)</title>
      <link href="/2019/11/15/Spring-MVC%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E5%9B%9B/"/>
      <url>/2019/11/15/Spring-MVC%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E5%9B%9B/</url>
      
        <content type="html"><![CDATA[<!-- build time:Tue Dec 31 2019 09:54:11 GMT+0800 (CST) --><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Spring MVC入门学习(四)</span><br></pre></td></tr></table></figure><a id="more"></a><p>&emsp;&emsp; 在SpringMVC框架中需要收集用户请求参数, 并将请求参数传递给应用的控制器组件. 此时存在一个问题, 即所有的<strong>请求参数类型只能是字符串数据类型, 但java是强类型语言</strong>, 所以Spring MVC框架必须<strong>将这些字符串请求参数转换成相应的数据类型.</strong></p><p>&emsp;&emsp; SpringMVC框架不仅提供了强大的类型转换和格式化机制, 而且开发者还可以方便地开发自己的类型转换器和格式化转换器.</p><h2 id="Converter"><a href="#Converter" class="headerlink" title="Converter"></a>Converter</h2><p>&emsp;&emsp; Spring MVC框架的Converter&lt;S, T&gt;是一个可以将一种数据类型转换成另一种数据类型的接口, 这里的S表示源类型, T表示目标类型. 开发者在实际应用中使用框架内置的类型转换器基本上就够了, 但有时需要编写具有特定功能的类型转换器.</p><ul><li>标量转换器</li><li>集合、数组相关转换器</li></ul><p>&emsp;&emsp; 类型转换是在视图和控制器相互传递数据时发生的. Spring MVC 框架对于基本类型已经做好了基本类型转换.</p><h3 id="例如下面的这个例子-spring-mvc默认将基本类型进行-了转换"><a href="#例如下面的这个例子-spring-mvc默认将基本类型进行-了转换" class="headerlink" title="例如下面的这个例子, spring mvc默认将基本类型进行 了转换"></a>例如下面的这个例子, spring mvc默认将基本类型进行 了转换</h3><ul><li><p>web.xml的配置不再赘述</p></li><li><p>springmvc-servlet.xml, 配置注解</p></li><li><p>index.jsp</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--</span><br><span class="line">  Created by 年少、.</span><br><span class="line">  User: nianshao</span><br><span class="line">  Date: <span class="number">19</span>-<span class="number">11</span>-<span class="number">9</span></span><br><span class="line">  Time: 下午<span class="number">2</span>:<span class="number">05</span></span><br><span class="line">--%&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> %&gt;</span><br><span class="line">&lt;%@ page isELIgnored=<span class="string">"false"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;meta http-equiv=<span class="string">"X-UA-Compatible"</span> content=<span class="string">"IE=edge"</span>/&gt;</span><br><span class="line">&lt;meta name=<span class="string">"viewport"</span> content=<span class="string">"width=device-width, initial-scale=1"</span>/&gt;</span><br><span class="line">&lt;meta charset=<span class="string">"UTF-8"</span>&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;form action=<span class="string">"$&#123;pageContext.request.contextPath&#125;/index/buy"</span>&gt;</span><br><span class="line">    商品名称: &lt;input type=<span class="string">"text"</span> name=<span class="string">"name"</span>&gt;&lt;br&gt;</span><br><span class="line">    商品价格: &lt;input type=<span class="string">"text"</span> name=<span class="string">"price"</span>&gt;&lt;br&gt;</span><br><span class="line">    商品数量: &lt;input type=<span class="string">"text"</span> name=<span class="string">"number"</span>&gt;&lt;br&gt;</span><br><span class="line">    &lt;input type=<span class="string">"submit"</span> value=提交<span class="string">""</span>&gt;&lt;br&gt;</span><br><span class="line"></span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></li><li><p>BuyController</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/index"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BuyController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/buy"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">buy</span><span class="params">(String name, <span class="keyword">double</span> price, <span class="keyword">int</span> number)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"商品名字:"</span> + name);</span><br><span class="line">        System.out.println(<span class="string">"商品价格:"</span> + price);</span><br><span class="line">        System.out.println(<span class="string">"商品数量:"</span> + number);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"/success.jsp"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><code>在使用内置类型转换器时, 请求参数输入值与接收参数类型要兼容, 否则会报400错误. 请求参数类型与接收参数类型不兼容问题需要学习输入校验后才可解决.</code></p></li></ul><h3 id="自定义类型转换器"><a href="#自定义类型转换器" class="headerlink" title="自定义类型转换器"></a>自定义类型转换器</h3><p>&emsp;&emsp; 例如有一个应用希望用户在页面表单中输入信息来创建商品信息, 当输入 “apple, 10.58 ,200”时,表示在程序中会自动创建一个new Goods(商品实体类), 并将apple值自动赋给goodsname属性…</p><h3 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h3><h4 id="创建实体类-goodsModel"><a href="#创建实体类-goodsModel" class="headerlink" title="创建实体类 goodsModel"></a>创建实体类 goodsModel</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.beans;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GoodsModel</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String goodsname;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">double</span> goodsprice;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> goodsnumber;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getGoodsname</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> goodsname;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setGoodsname</span><span class="params">(String goodsname)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.goodsname = goodsname;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getGoodsprice</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> goodsprice;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setGoodsprice</span><span class="params">(<span class="keyword">double</span> goodsprice)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.goodsprice = goodsprice;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getGoodsnumber</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> goodsnumber;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setGoodsnumber</span><span class="params">(<span class="keyword">int</span> goodsnumber)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.goodsnumber = goodsnumber;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"GoodsModel&#123;"</span> +</span><br><span class="line">                <span class="string">"goodsname='"</span> + goodsname + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", goodsprice="</span> + goodsprice +</span><br><span class="line">                <span class="string">", goodsnumber="</span> + goodsnumber +</span><br><span class="line">                <span class="string">'&#125;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="创建控制类"><a href="#创建控制类" class="headerlink" title="创建控制类"></a>创建控制类</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.lacknb.beans.GoodsModel;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ui.Model;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestParam;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/index"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConverterController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/buy"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">buy</span><span class="params">(@RequestParam(<span class="string">"goods"</span>)</span> GoodsModel goods, Model model)</span>&#123;</span><br><span class="line">        model.addAttribute(<span class="string">"goods"</span>, goods);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"/showGoods.jsp"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="创建自定义类型转换器"><a href="#创建自定义类型转换器" class="headerlink" title="创建自定义类型转换器"></a>创建自定义类型转换器</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.converter;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 创建自定义类型转换类</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.lacknb.beans.GoodsModel;</span><br><span class="line"><span class="keyword">import</span> org.springframework.core.convert.converter.Converter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GoodsConverter</span> <span class="keyword">implements</span> <span class="title">Converter</span>&lt;<span class="title">String</span>, <span class="title">GoodsModel</span>&gt; </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> GoodsModel <span class="title">convert</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 创建一个Goods实例</span></span><br><span class="line">        GoodsModel goods = <span class="keyword">new</span> GoodsModel();</span><br><span class="line">        <span class="comment">// 以 , 为分割</span></span><br><span class="line">        String stringValues[] = s.split(<span class="string">","</span>);</span><br><span class="line">        <span class="keyword">if</span> (stringValues != <span class="keyword">null</span> &amp;&amp; stringValues.length == <span class="number">3</span>)&#123;</span><br><span class="line">            <span class="comment">// 为Goods实例赋值</span></span><br><span class="line">            goods.setGoodsname(stringValues[<span class="number">0</span>]);</span><br><span class="line">            goods.setGoodsprice(Double.parseDouble(stringValues[<span class="number">1</span>]));</span><br><span class="line">            goods.setGoodsnumber(Integer.parseInt(stringValues[<span class="number">2</span>]));</span><br><span class="line">            <span class="keyword">return</span> goods;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(String.format(<span class="string">"类型转换失败, 需要格式 'applce, 10.58, 200', 但格式是[%s]"</span>, s));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="springmvc-servlet-xml"><a href="#springmvc-servlet-xml" class="headerlink" title="springmvc-servlet.xml"></a>springmvc-servlet.xml</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:mvc</span>=<span class="string">"http://www.springframework.org/schema/mvc"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"cn.lacknb"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--注册类型转换器--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"conversionService"</span> <span class="attr">class</span>=<span class="string">"org.springframework.context.support.ConversionServiceFactoryBean"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"converters"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"cn.lacknb.converter.GoodsConverter"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--ConversionSerivce的作用是把接收的参数以什么“类型”呈现出来。前端传递什么参数我们后台以什么形势接收它们--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:annotation-driven</span> <span class="attr">conversion-service</span>=<span class="string">"conversionService"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="index-jsp"><a href="#index-jsp" class="headerlink" title="index.jsp"></a>index.jsp</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--</span><br><span class="line">  Created by 年少、.</span><br><span class="line">  User: nianshao</span><br><span class="line">  Date: <span class="number">19</span>-<span class="number">11</span>-<span class="number">9</span></span><br><span class="line">  Time: 下午<span class="number">2</span>:<span class="number">05</span></span><br><span class="line">--%&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> %&gt;</span><br><span class="line">&lt;%@ page isELIgnored=<span class="string">"false"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;meta http-equiv=<span class="string">"X-UA-Compatible"</span> content=<span class="string">"IE=edge"</span>/&gt;</span><br><span class="line">&lt;meta name=<span class="string">"viewport"</span> content=<span class="string">"width=device-width, initial-scale=1"</span>/&gt;</span><br><span class="line">&lt;meta charset=<span class="string">"UTF-8"</span>&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;form action=<span class="string">"$&#123;pageContext.request.contextPath&#125;/index/buy"</span>&gt;</span><br><span class="line">&lt;%--    商品名称: &lt;input type=<span class="string">"text"</span> name=<span class="string">"goodsname"</span>&gt;&lt;br&gt;--%&gt;</span><br><span class="line">&lt;%--    商品价格: &lt;input type=<span class="string">"text"</span> name=<span class="string">"goodsprice"</span>&gt;&lt;br&gt;--%&gt;</span><br><span class="line">&lt;%--    商品数量: &lt;input type=<span class="string">"text"</span> name=<span class="string">"goodsnumber"</span>&gt;&lt;br&gt;--%&gt;</span><br><span class="line">    请输入商品信息:(格式[不能有空格]: apple,<span class="number">10.58</span>,<span class="number">200</span>)</span><br><span class="line">    &lt;input type=<span class="string">"text"</span> name=<span class="string">"goods"</span>/&gt;&lt;br&gt;</span><br><span class="line">    &lt;input type=<span class="string">"submit"</span> value=<span class="string">"提交"</span>&gt;&lt;br&gt;</span><br><span class="line"></span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><h4 id="showGoods-jsp"><a href="#showGoods-jsp" class="headerlink" title="showGoods.jsp"></a>showGoods.jsp</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--</span><br><span class="line">  Created by 年少、.</span><br><span class="line">  User: nianshao</span><br><span class="line">  Date: <span class="number">19</span>-<span class="number">11</span>-<span class="number">9</span></span><br><span class="line">  Time: 下午<span class="number">2</span>:<span class="number">36</span></span><br><span class="line">--%&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> %&gt;</span><br><span class="line">&lt;%@ page isELIgnored=<span class="string">"false"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;meta http-equiv=<span class="string">"X-UA-Compatible"</span> content=<span class="string">"IE=edge"</span>/&gt;</span><br><span class="line">&lt;meta name=<span class="string">"viewport"</span> content=<span class="string">"width=device-width, initial-scale=1"</span>/&gt;</span><br><span class="line">&lt;meta charset=<span class="string">"UTF-8"</span>&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    商品名称为: $&#123;goods.goodsname&#125;&lt;br&gt;</span><br><span class="line">    商品价格为: $&#123;goods.goodsprice&#125;&lt;br&gt;</span><br><span class="line">    商品数量为: $&#123;goods.goodsnumber&#125;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><h2 id="Formatter"><a href="#Formatter" class="headerlink" title="Formatter"></a>Formatter</h2><p>&emsp;&emsp; Spring NVC框架的Formatter<t>与Converter&lt;S, T&gt;一样, 也是一个可以将一种数据类型转换成另一种数据类型的接口. 不同的是, Formatter<t>的源数据类型必须是String类型, 而Converter&lt;S, T&gt;的源数据是任意类型数据.</t></t></p><h3 id="内置的格式化转换器"><a href="#内置的格式化转换器" class="headerlink" title="内置的格式化转换器"></a>内置的格式化转换器</h3><h3 id="自定义格式化转换器"><a href="#自定义格式化转换器" class="headerlink" title="自定义格式化转换器"></a>自定义格式化转换器</h3><p>&emsp;&emsp; Formatter<t>, 这里的T表示由字符串转换的目标数据类型. 该接口有parse和print两个接口方法, 自定义格式化转换器类必须覆盖它们.</t></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> T <span class="title">parse</span><span class="params">(String s, java.util.Locale locale)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">print</span><span class="params">(T object, java.util.Locale locale)</span></span>;</span><br></pre></td></tr></table></figure><p>parse方法的功能是利用指定的Locale讲一个String类型转换成目标类型, print方法与之相反. 用户返回目标对象的字符串表示.</p><h3 id="例子-1"><a href="#例子-1" class="headerlink" title="例子"></a>例子</h3><h4 id="创建实体类"><a href="#创建实体类" class="headerlink" title="创建实体类"></a>创建实体类</h4><ul><li><p>GoodModelb</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.beans;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GoodsModelb</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String goodsname;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">double</span> goodsprice;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> goodsnumber;</span><br><span class="line">    <span class="keyword">private</span> Date goodsdate;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Date <span class="title">getGoodsdate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> goodsdate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setGoodsdate</span><span class="params">(Date goodsdate)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.goodsdate = goodsdate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getGoodsname</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> goodsname;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setGoodsname</span><span class="params">(String goodsname)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.goodsname = goodsname;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getGoodsprice</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> goodsprice;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setGoodsprice</span><span class="params">(<span class="keyword">double</span> goodsprice)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.goodsprice = goodsprice;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getGoodsnumber</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> goodsnumber;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setGoodsnumber</span><span class="params">(<span class="keyword">int</span> goodsnumber)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.goodsnumber = goodsnumber;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"GoodsModel&#123;"</span> +</span><br><span class="line">                <span class="string">"goodsname='"</span> + goodsname + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", goodsprice="</span> + goodsprice +</span><br><span class="line">                <span class="string">", goodsnumber="</span> + goodsnumber +</span><br><span class="line">                <span class="string">'&#125;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h4 id="创建控制类-1"><a href="#创建控制类-1" class="headerlink" title="创建控制类"></a>创建控制类</h4><ul><li><p>FormatterController</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.controller;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.lacknb.beans.GoodsModelb;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ui.Model;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/index"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FormatterController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/buy"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">buy</span><span class="params">(GoodsModelb goodsModelb, Model model)</span></span>&#123;</span><br><span class="line">        model.addAttribute(<span class="string">"goods"</span>, goodsModelb);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"/showGoods.jsp"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h4 id="创建自定义格式化转换器类"><a href="#创建自定义格式化转换器类" class="headerlink" title="创建自定义格式化转换器类"></a>创建自定义格式化转换器类</h4><ul><li><p>GoodsFormatter</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.converter.formatter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.format.Formatter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.text.ParseException;</span><br><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> java.util.Locale;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GoodsFormatter</span> <span class="keyword">implements</span> <span class="title">Formatter</span>&lt;<span class="title">Date</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    SimpleDateFormat dateFormat = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy-mm-dd"</span>);</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Date <span class="title">parse</span><span class="params">(String s, Locale locale)</span> <span class="keyword">throws</span> ParseException </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> dateFormat.parse(s);  <span class="comment">// Formatter只能对字符串进行转换</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    * SimpleDateFormat 中有两个方法parse()个format()</span></span><br><span class="line"><span class="comment">    * parse() 是将字符串转换成Date类型</span></span><br><span class="line"><span class="comment">    * format() 是将date类型转成字符串类型</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * */</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">print</span><span class="params">(Date date, Locale locale)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> dateFormat.format(date);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h4 id="注册格式化转换器"><a href="#注册格式化转换器" class="headerlink" title="注册格式化转换器"></a>注册格式化转换器</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"conversionService"</span> <span class="attr">class</span>=<span class="string">"org.springframework.format.support.FormattingConversionServiceFactoryBean"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"formatters"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"cn.lacknb.converter.formatter.GoodsFormatter"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">mvn:annotation-driven</span> <span class="attr">conversion-service</span>=<span class="string">"conversionService"</span>/&gt;</span></span><br></pre></td></tr></table></figure><h4 id="创建相关视图"><a href="#创建相关视图" class="headerlink" title="创建相关视图"></a>创建相关视图</h4><ul><li><p>index.jsp</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--</span><br><span class="line">  Created by 年少、.</span><br><span class="line">  User: nianshao</span><br><span class="line">  Date: <span class="number">19</span>-<span class="number">11</span>-<span class="number">9</span></span><br><span class="line">  Time: 下午<span class="number">4</span>:<span class="number">19</span></span><br><span class="line">--%&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> %&gt;</span><br><span class="line">&lt;%@ page isELIgnored=<span class="string">"false"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;meta http-equiv=<span class="string">"X-UA-Compatible"</span> content=<span class="string">"IE=edge"</span>/&gt;</span><br><span class="line">&lt;meta name=<span class="string">"viewport"</span> content=<span class="string">"width=device-width, initial-scale=1"</span>/&gt;</span><br><span class="line">&lt;meta charset=<span class="string">"UTF-8"</span>&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;form action=<span class="string">"$&#123;pageContext.request.contextPath&#125;/index/buy"</span> method=<span class="string">"post"</span>&gt;</span><br><span class="line">    商品名称: &lt;input type=<span class="string">"text"</span> name=<span class="string">"goodsname"</span>/&gt;&lt;br&gt;</span><br><span class="line">    商品价格: &lt;input type=<span class="string">"text"</span> name=<span class="string">"goodsprice"</span>/&gt;&lt;br&gt;</span><br><span class="line">    商品数量: &lt;input type=<span class="string">"text"</span> name=<span class="string">"goodsnumber"</span>/&gt;&lt;br&gt;</span><br><span class="line">    商品日期: &lt;input type=<span class="string">"text"</span> name=<span class="string">"goodsdate"</span>/&gt;(yyyy-mm-dd)&lt;br&gt;</span><br><span class="line">    &lt;input type=<span class="string">"submit"</span> value=<span class="string">"提交"</span>/&gt;&lt;br&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></li><li><p>showGoods.jsp</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--</span><br><span class="line">  Created by 年少、.</span><br><span class="line">  User: nianshao</span><br><span class="line">  Date: <span class="number">19</span>-<span class="number">11</span>-<span class="number">9</span></span><br><span class="line">  Time: 下午<span class="number">2</span>:<span class="number">36</span></span><br><span class="line">--%&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> %&gt;</span><br><span class="line">&lt;%@ page isELIgnored=<span class="string">"false"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;meta http-equiv=<span class="string">"X-UA-Compatible"</span> content=<span class="string">"IE=edge"</span>/&gt;</span><br><span class="line">&lt;meta name=<span class="string">"viewport"</span> content=<span class="string">"width=device-width, initial-scale=1"</span>/&gt;</span><br><span class="line">&lt;meta charset=<span class="string">"UTF-8"</span>&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    商品名称为: $&#123;goods.goodsname&#125;&lt;br&gt;</span><br><span class="line">    商品价格为: $&#123;goods.goodsprice&#125;&lt;br&gt;</span><br><span class="line">    商品数量为: $&#123;goods.goodsnumber&#125;&lt;br&gt;</span><br><span class="line">    商品日期为: $&#123;goods.goodsdate&#125;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></li></ul><h2 id="数据绑定和表单标签库"><a href="#数据绑定和表单标签库" class="headerlink" title="数据绑定和表单标签库"></a>数据绑定和表单标签库</h2><p>&emsp;&emsp; 有了数据绑定之后就不再需要手动将Http请求中的String类型转换为模型需要的类型. 数据绑定的另一个好处就是当输入验证失败时会重新生成一个HTML表单, 无须重新填写输入字段.</p><h3 id="数据绑定"><a href="#数据绑定" class="headerlink" title="数据绑定"></a>数据绑定</h3><p>&emsp;&emsp; 在SpringMVC中框架中数据绑定有这样几层含义: 绑定请求参数输入值到领域模型、模型数据到视图的绑定(输入验证失败时)、模型数据到表单元素的绑定.</p><h3 id="表单标签库"><a href="#表单标签库" class="headerlink" title="表单标签库"></a>表单标签库</h3><p><code>一定要导入jstl的jar包</code></p><p>首先必须在jsp页面开头处声明taglib命令</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib prefix=<span class="string">"form"</span> url=<span class="string">"http://www.springframework.org/form"</span> %&gt;</span><br></pre></td></tr></table></figure><h4 id="表单标签"><a href="#表单标签" class="headerlink" title="表单标签"></a>表单标签</h4><p>………………………………………</p><!-- rebuild by neat -->]]></content>
      
      
      <categories>
          
          <category> springmvc </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>frp内网穿透</title>
      <link href="/2019/11/13/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/"/>
      <url>/2019/11/13/frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/</url>
      
        <content type="html"><![CDATA[<!-- build time:Tue Dec 31 2019 09:54:11 GMT+0800 (CST) --><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">frp 内网穿透</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="仓库地址-https-github-com-fatedier-frp-blob-master-README-zh-md"><a href="#仓库地址-https-github-com-fatedier-frp-blob-master-README-zh-md" class="headerlink" title="仓库地址: https://github.com/fatedier/frp/blob/master/README_zh.md"></a>仓库地址: <a href="https://github.com/fatedier/frp/blob/master/README_zh.md" target="_blank" rel="noopener">https://github.com/fatedier/frp/blob/master/README_zh.md</a></h2><p>&emsp;&emsp; frp 是一个可用于内网穿透的高性能的反向代理应用，支持 tcp, udp 协议，为 http 和 https 应用协议提供了额外的能力，且尝试性支持了点对点穿透。</p><p><img src="https://raw.githubusercontent.com/fatedier/frp/master/doc/pic/architecture.png" alt></p><h2 id="linux上的使用教程"><a href="#linux上的使用教程" class="headerlink" title="linux上的使用教程"></a>linux上的使用教程</h2><blockquote><p>目前只用到web服务, 其他用途请移步官方仓库</p></blockquote><h3 id="下载地址-https-github-com-fatedier-frp-releases"><a href="#下载地址-https-github-com-fatedier-frp-releases" class="headerlink" title="下载地址: https://github.com/fatedier/frp/releases"></a>下载地址: <a href="https://github.com/fatedier/frp/releases" target="_blank" rel="noopener">https://github.com/fatedier/frp/releases</a></h3><ul><li><p>例如下载这个: <a href="https://github.com/fatedier/frp/releases/download/v0.29.1/frp_0.29.1_linux_amd64.tar.gz" target="_blank" rel="noopener">frp_0.29.1_linux_amd64.tar.gz</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://github.com/fatedier/frp/releases/download/v0.29.1/frp_0.29.1_linux_amd64.tar.gz</span><br></pre></td></tr></table></figure></li><li><p>解压</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf frp_0.29.1_linux_amd64.tar.gz</span><br></pre></td></tr></table></figure></li></ul><h2 id="服务端配置"><a href="#服务端配置" class="headerlink" title="服务端配置"></a>服务端配置</h2><ul><li><p>编辑 frps.ini</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[common]</span></span><br><span class="line"><span class="attr">bind_port</span> = <span class="number">7000</span> </span><br><span class="line"><span class="attr">vhost_http_port</span> = <span class="number">80</span></span><br><span class="line"><span class="attr">token</span> = <span class="number">123456</span></span><br></pre></td></tr></table></figure><p>bind_port是服务端与客户端之间通信使用的端口号，默认就可以。</p><p>token用于验证连接，只有服务端和客户端token相同的时候才能正常访问。如果不使用token，那么所有人都可以直接连接上，所以我建议大家在使用的时候还是把token加上。</p><p>v_host_http_port 设置http访问端口, 如果使用https, 改成v_host_https_port</p></li><li><p>启动指令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./frps -c ./frps.ini</span><br></pre></td></tr></table></figure></li></ul><h2 id="客户端配置"><a href="#客户端配置" class="headerlink" title="客户端配置"></a>客户端配置</h2><ul><li><p>编辑frpc.ini</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># frpc.ini</span></span><br><span class="line"><span class="section">[common]</span></span><br><span class="line"><span class="attr">server_addr</span> = x.x.x.x</span><br><span class="line"><span class="attr">server_port</span> = <span class="number">7000</span></span><br><span class="line"></span><br><span class="line"><span class="section">[web]</span></span><br><span class="line"><span class="attr">type</span> = http</span><br><span class="line"><span class="attr">local_port</span> = <span class="number">80</span></span><br><span class="line"><span class="attr">custom_domains</span> = www.yourdomain.com</span><br></pre></td></tr></table></figure><p>server_addr 服务器地址</p><p>server_port 服务器启动frps所绑定的端口, 同上面的bind_port = 7000</p><p>type 协议类型: http或https</p><p>local_port 是客户端 网站所用的端口号</p></li><li><p>启动 frpc：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./frpc -c ./frpc.ini</span><br></pre></td></tr></table></figure><ul><li>将 <code>www.yourdomain.com</code> 的域名 A 记录解析到 IP <code>x.x.x.x</code>，如果服务器已经有对应的域名，也可以将 CNAME 记录解析到服务器原先的域名。</li><li>通过浏览器访问 <code>http://www.yourdomain.com</code> 即可访问到处于内网机器上的 web 服务。</li></ul></li></ul><!-- rebuild by neat -->]]></content>
      
      
      <categories>
          
          <category> 计算机网络 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> frp </tag>
            
            <tag> 内网穿透 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringMVC入门学习(三)</title>
      <link href="/2019/11/06/SpringMVC%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E4%B8%89/"/>
      <url>/2019/11/06/SpringMVC%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E4%B8%89/</url>
      
        <content type="html"><![CDATA[<!-- build time:Tue Dec 31 2019 09:54:11 GMT+0800 (CST) --><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Spring MVC入门学习(三)</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="重定向与转发"><a href="#重定向与转发" class="headerlink" title="重定向与转发"></a>重定向与转发</h2><p>&emsp;&emsp; 这里不再做过多的叙述, 在学JavaWeb都有讲过.</p><ul><li>转发: 是服务器行为, 一次请求, (地址栏不变化)在视图层可以使用当前请求Request域的数据, 转发路径必须是同一个web容器下的url.</li><li>重定向: 是客户端行为, 两次请求, (地址栏有变化) , 可以重定向到任意的URL</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/register"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">register</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"register"</span>;  <span class="comment">// 转发到register.jsp</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMappng</span>(<span class="string">"/index"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IndexController</span></span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/login"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">login</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">// 转发到一个请求方法, (同一个控制器类中可以省略/index/)</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">"forward:/index/isLogin"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/isLogin"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">isLogin</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">// 重定向到一个请求方法</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">"redirect:/index/isRegister"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/isRegister"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">isRegister</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">// 转发到一个视图</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">"register"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>&emsp;&emsp;</p><p>&emsp;&emsp; 在SpringMVC框架中, 不管是重定向或转发, 都需要符合视图解析器的配置, 如果直接转发到一个不需要DispatcherServlet的资源. 例如:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> <span class="string">"forward:/html/my.html"</span>;</span><br></pre></td></tr></table></figure><p>则需要使用<code>mvc:resources</code>配置</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mvc:resources</span> <span class="attr">locaton</span>=<span class="string">"/html/"</span> <span class="attr">mapping</span>=<span class="string">"html/**"</span>&gt;</span><span class="tag">&lt;/<span class="name">mvc:resources</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="使用-Autowired进行依赖注入"><a href="#使用-Autowired进行依赖注入" class="headerlink" title="使用@Autowired进行依赖注入"></a>使用@Autowired进行依赖注入</h2><p>&emsp;&emsp; 在Spring MVC中, 为了能作为依赖注入, 类必须使用org.springframework.stereotype.Service 注解类型表明为@Service(一个服务). 另外, 还需要在配置文件中使用&lt;context:component base-package=”基本包”/&gt;元素来扫描依赖基本包</p><h3 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h3><ul><li>将之前的例子, 分离出service层</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.lacknb.beans.UserForm;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">login</span><span class="params">(UserForm userForm)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">register</span><span class="params">(UserForm userForm)</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.lacknb.beans.UserForm;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 注解为一个服务</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">login</span><span class="params">(UserForm userForm)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="string">"zhangsan"</span>.equals(userForm.getUname()) &amp;&amp; <span class="string">"123456"</span>.equals(userForm.getUpass()))&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">register</span><span class="params">(UserForm userForm)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="string">"zhangsan"</span>.equals(userForm.getUname()) &amp;&amp; <span class="string">"123456"</span>.equals(userForm.getUpass()))&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.lacknb.beans.UserForm;</span><br><span class="line"><span class="keyword">import</span> cn.lacknb.service.UserService;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.logging.Log;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.logging.LogFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ui.Model;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ModelAttribute;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/user"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//得到一个用来记录日志对象, 这样在打印信息的时候能够标记打印的是哪个类的信息</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Log loger = LogFactory.getLog(UserController.class);</span><br><span class="line">    <span class="comment">// 将服务依赖注入到属性userService</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">public</span> UserService userService;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    * 处理登录</span></span><br><span class="line"><span class="comment">    * */</span></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/login"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">login</span><span class="params">(UserForm userForm, HttpSession session, Model model)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (userService.login(userForm))&#123;</span><br><span class="line">            session.setAttribute(<span class="string">"user"</span>, userForm);</span><br><span class="line">            loger.info(<span class="string">"登录成功"</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"main"</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            loger.info(<span class="string">"登录失败"</span>);</span><br><span class="line">            model.addAttribute(<span class="string">"messageError"</span>, <span class="string">"用户名或密码错误"</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"login"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    * 处理注册</span></span><br><span class="line"><span class="comment">    * */</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/register"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">register</span><span class="params">(@ModelAttribute(<span class="string">"user"</span>)</span> UserForm user)</span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (userService.register(user))&#123;</span><br><span class="line">            loger.info(<span class="string">"注册成功"</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"login"</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            loger.info(<span class="string">"注册失败"</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"register"</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ModelAttribute"><a href="#ModelAttribute" class="headerlink" title="@ModelAttribute"></a>@ModelAttribute</h2><ol><li>绑定请求参数到实体对象(表单的命令对象), 见前面的例子</li><li>注解一个非请求处理方法</li></ol><p>&emsp;&emsp; 被@ModelAttribute注解的方法将在<strong>每次调用该控制类的请求处理方法前被调用.</strong> 这种特性可以用来控制登录权限, 当然控制登录权限的方法有很多. 例如: 拦截器,、过滤器等.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.ui.Model;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ModelAttribute;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BaseController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ModelAttribute</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">isLogin</span><span class="params">(HttpSession session, Model model)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (session.getAttribute(<span class="string">"user"</span>) == <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> Exception(<span class="string">"没有权限"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/test"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ModelAttributeController</span> <span class="keyword">extends</span> <span class="title">BaseController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/add"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">add</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"add"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/delete"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">delete</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"delete"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/modify"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">modify</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"modify"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/find"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">find</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"find"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><!-- rebuild by neat -->]]></content>
      
      
      <categories>
          
          <category> springmvc </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> springmvc </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringMVC入门学习(二)</title>
      <link href="/2019/11/06/SpringMVC%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E4%BA%8C/"/>
      <url>/2019/11/06/SpringMVC%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E4%BA%8C/</url>
      
        <content type="html"><![CDATA[<!-- build time:Tue Dec 31 2019 09:54:11 GMT+0800 (CST) --><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SpringMVC入门学习(二)</span><br></pre></td></tr></table></figure><a id="more"></a><h1 id="Controller接收请求参数的常见方式"><a href="#Controller接收请求参数的常见方式" class="headerlink" title="Controller接收请求参数的常见方式"></a>Controller接收请求参数的常见方式</h1><h2 id="通过实体类Bean接收请求参数"><a href="#通过实体类Bean接收请求参数" class="headerlink" title="通过实体类Bean接收请求参数"></a>通过实体类Bean接收请求参数</h2><p>&emsp;&emsp; 通过一个实体Bean来接收请求参数, 适用于get和pos提交请求方式. 需要注意的是, Bean的属性名称必须与请求参数名称相同.</p><h2 id="例子–-文件结构"><a href="#例子–-文件结构" class="headerlink" title="例子– 文件结构"></a>例子– 文件结构</h2><p><img src="https://s2.ax1x.com/2019/11/03/KjKPXR.png" alt="KjKPXR.png"></p><h3 id="web-xml"><a href="#web-xml" class="headerlink" title="web.xml"></a>web.xml</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE web-app PUBLIC</span></span><br><span class="line"><span class="meta"> "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN"</span></span><br><span class="line"><span class="meta"> "http://java.sun.com/dtd/web-app_2_3.dtd" &gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">display-name</span>&gt;</span>Archetype Created Web Application<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--  部署DispatcherServlet--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>/WEB-INF/spring-config/springmvc-servlet.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="comment">&lt;!--    表示容器在启动时立即加载--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    处理所有的URL--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="UserForm-java"><a href="#UserForm-java" class="headerlink" title="UserForm.java"></a>UserForm.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserForm</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String uname;  <span class="comment">// 与请求参数名称相同</span></span><br><span class="line">    <span class="keyword">private</span> String upass;</span><br><span class="line">    <span class="keyword">private</span> String reupass;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getUname</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> uname;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUname</span><span class="params">(String uname)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.uname = uname;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getUpass</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> upass;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUpass</span><span class="params">(String upass)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.upass = upass;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getReupass</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> reupass;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setReupass</span><span class="params">(String reupass)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.reupass = reupass;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="UserController-java"><a href="#UserController-java" class="headerlink" title="UserController.java"></a>UserController.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.controller;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.lacknb.pojo.UserForm;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.logging.Log;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.logging.LogFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ui.Model;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/user"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 得到一个用来记录日志的对象, 这样在打印信息的时候能够标记打印的是哪个类的信息</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Log logger = LogFactory.getLog(UserController.class);</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    * 处理登录</span></span><br><span class="line"><span class="comment">    * 使用UserForm对象 user接收注册页面提交的请求参数</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/login"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">login</span><span class="params">(UserForm user, HttpSession session, Model model)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="string">"zhangsan"</span>.equals(user.getUname()) &amp;&amp; <span class="string">"123456"</span>.equals(user.getUpass()))&#123;</span><br><span class="line">            session.setAttribute(<span class="string">"u"</span>, user);</span><br><span class="line">            logger.info(<span class="string">"成功"</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"main"</span>;  <span class="comment">// 登录成功  跳转到main.jsp</span></span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            logger.info(<span class="string">"失败"</span>);</span><br><span class="line">            model.addAttribute(<span class="string">"messageError"</span>, <span class="string">"用户名或密码错误"</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"login"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    * 处理注册</span></span><br><span class="line"><span class="comment">    * 使用UserForm对象 user接收注册页面提交的请求参数</span></span><br><span class="line"><span class="comment">    * */</span></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/register"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">register</span><span class="params">(UserForm user, Model model)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="string">"zhangsan"</span>.equals(user.getUname()) &amp;&amp; <span class="string">"123456"</span>.equals(user.getUpass()))&#123;</span><br><span class="line">            logger.info(<span class="string">"成功"</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"login"</span>;  <span class="comment">// 注册成功  跳转到login.jsp</span></span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            logger.info(<span class="string">"失败"</span>);</span><br><span class="line">            <span class="comment">// 在register.jsp页面上可以使用EL表达式 取出model的uname值</span></span><br><span class="line">            model.addAttribute(<span class="string">"uname"</span>, user.getUname());</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"register"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="springmvc-servlet-xml"><a href="#springmvc-servlet-xml" class="headerlink" title="springmvc-servlet.xml"></a>springmvc-servlet.xml</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:mvc</span>=<span class="string">"http://www.springframework.org/schema/mvc"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"cn.lacknb.controller"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:annotation-driven</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- annotation-driven用于简化开发的配置, 注解DefaultAnnotationHandlerMapping和AnnotationMethodHandlerAdapt --&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    使用resources过滤掉不需要DispatcherServlet的资源(即静态资源, 例如 css  js  html images) 在使用resources时 必须使用annotation-driven--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    否则resources元素会阻止任意控制器被调用--&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--允许css目录下的所有文件可见--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:resources</span> <span class="attr">mapping</span>=<span class="string">"/css/**"</span> <span class="attr">location</span>=<span class="string">"/css/"</span>&gt;</span><span class="tag">&lt;/<span class="name">mvc:resources</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    允许html目录下的所有文件可见--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:resources</span> <span class="attr">mapping</span>=<span class="string">"/html/**"</span> <span class="attr">location</span>=<span class="string">"/html/"</span>&gt;</span><span class="tag">&lt;/<span class="name">mvc:resources</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--允许images目录下的所有文件可见--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:resources</span> <span class="attr">mapping</span>=<span class="string">"/images/**"</span> <span class="attr">location</span>=<span class="string">"/images/"</span>&gt;</span><span class="tag">&lt;/<span class="name">mvc:resources</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--配置视图解析器--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"internalResourceViewResolver"</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.view.InternalResourceViewResolver"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--前缀--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"prefix"</span> <span class="attr">value</span>=<span class="string">"/WEB-INF/jsp/"</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--后缀--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"suffix"</span> <span class="attr">value</span>=<span class="string">".jsp"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="login-jsp"><a href="#login-jsp" class="headerlink" title="login.jsp"></a>login.jsp</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span>?&gt;</span><br><span class="line">&lt;beans xmlns=<span class="string">"http://www.springframework.org/schema/beans"</span></span><br><span class="line">       xmlns:xsi=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span><br><span class="line">       xmlns:context=<span class="string">"http://www.springframework.org/schema/context"</span></span><br><span class="line">       xmlns:mvc=<span class="string">"http://www.springframework.org/schema/mvc"</span></span><br><span class="line">       xsi:schemaLocation=<span class="string">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd"</span>&gt;</span><br><span class="line"></span><br><span class="line">    &lt;context:component-scan base-<span class="keyword">package</span>=<span class="string">"cn.lacknb.controller"</span>/&gt;</span><br><span class="line">    &lt;mvc:annotation-driven/&gt;</span><br><span class="line">    &lt;!-- annotation-driven用于简化开发的配置, 注解DefaultAnnotationHandlerMapping和AnnotationMethodHandlerAdapt --&gt;</span><br><span class="line">&lt;!--    使用resources过滤掉不需要DispatcherServlet的资源(即静态资源, 例如 css  js  html images) 在使用resources时 必须使用annotation-driven--&gt;</span><br><span class="line">&lt;!--    否则resources元素会阻止任意控制器被调用--&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--允许css目录下的所有文件可见--&gt;</span><br><span class="line">    &lt;mvc:resources mapping="/css/**" location="/css/"&gt;&lt;/mvc:resources&gt;</span><br><span class="line">&lt;!--    允许html目录下的所有文件可见--&gt;</span><br><span class="line">    &lt;mvc:resources mapping="/html/**" location="/html/"&gt;&lt;/mvc:resources&gt;</span><br><span class="line">    &lt;!--允许images目录下的所有文件可见--&gt;</span><br><span class="line">    &lt;mvc:resources mapping="/images/**" location="/images/"&gt;&lt;/mvc:resources&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--配置视图解析器--&gt;</span><br><span class="line">    &lt;bean id=<span class="string">"internalResourceViewResolver"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"org.springframework.web.servlet.view.InternalResourceViewResolver"</span>&gt;</span><br><span class="line">        &lt;!--前缀--&gt;</span><br><span class="line">        &lt;property name=<span class="string">"prefix"</span> value=<span class="string">"/WEB-INF/jsp/"</span>/&gt;</span><br><span class="line">        &lt;!--后缀--&gt;</span><br><span class="line">        &lt;property name=<span class="string">"suffix"</span> value=<span class="string">".jsp"</span> /&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line">&lt;/beans&gt;</span><br></pre></td></tr></table></figure><h3 id="register-jsp"><a href="#register-jsp" class="headerlink" title="register.jsp"></a>register.jsp</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--</span><br><span class="line">  Created by 年少、.</span><br><span class="line">  User: nianshao</span><br><span class="line">  Date: <span class="number">19</span>-<span class="number">11</span>-<span class="number">3</span></span><br><span class="line">  Time: 下午<span class="number">2</span>:<span class="number">45</span></span><br><span class="line">--%&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> %&gt;</span><br><span class="line">&lt;%@ page isELIgnored=<span class="string">"false"</span>%&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;meta http-equiv=<span class="string">"X-UA-Compatible"</span> content=<span class="string">"IE=edge"</span>/&gt;</span><br><span class="line">&lt;meta name=<span class="string">"viewport"</span> content=<span class="string">"width=device-width, initial-scale=1"</span>/&gt;</span><br><span class="line">&lt;meta charset=<span class="string">"UTF-8"</span>&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;form action=<span class="string">"$&#123;pageContext.request.contextPath&#125;/user/register"</span> method=<span class="string">"post"</span> name=<span class="string">"registForm"</span>&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;table border=<span class="string">"1"</span> bgcolor=<span class="string">"#add8e6"</span> align=<span class="string">"center"</span>&gt;</span><br><span class="line">        &lt;tr&gt;</span><br><span class="line">            &lt;td&gt;姓名: &lt;/td&gt;</span><br><span class="line">            &lt;td&gt;&lt;input type="text" name="uname" value="$&#123;uname&#125;"&gt;&lt;/td&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">        &lt;tr&gt;</span><br><span class="line">            &lt;td&gt;密码:&lt;/td&gt;</span><br><span class="line">            &lt;td&gt;&lt;input type="password" name="upass" maxlength="20"&gt;&lt;/td&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">        &lt;tr&gt;</span><br><span class="line">            &lt;td&gt;确认密码: &lt;/td&gt;</span><br><span class="line">            &lt;td&gt;&lt;input type="password" name="reupass" maxlength="20"&gt;&lt;/td&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">        &lt;tr&gt;</span><br><span class="line">            &lt;td colspan="2" align="center"&gt;&lt;input type="submit" value="注册"&gt;&lt;/td&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">    &lt;/table&gt;</span><br><span class="line">    </span><br><span class="line">&lt;/form&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><h3 id="main-jsp"><a href="#main-jsp" class="headerlink" title="main.jsp"></a>main.jsp</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--</span><br><span class="line">  Created by 年少、.</span><br><span class="line">  User: nianshao</span><br><span class="line">  Date: <span class="number">19</span>-<span class="number">11</span>-<span class="number">3</span></span><br><span class="line">  Time: 下午<span class="number">8</span>:<span class="number">39</span></span><br><span class="line">--%&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> %&gt;</span><br><span class="line">&lt;%@ page isELIgnored=<span class="string">"false"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;meta http-equiv=<span class="string">"X-UA-Compatible"</span> content=<span class="string">"IE=edge"</span>/&gt;</span><br><span class="line">&lt;meta name=<span class="string">"viewport"</span> content=<span class="string">"width=device-width, initial-scale=1"</span>/&gt;</span><br><span class="line">&lt;meta charset=<span class="string">"UTF-8"</span>&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;欢迎你, $&#123;u&#125;&lt;/h1&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><h3 id="pom-xml"><a href="#pom-xml" class="headerlink" title="pom.xml"></a>pom.xml</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--      &lt;scope&gt;test&lt;/scope&gt;--&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-core --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-beans --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-beans<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-context --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-expression<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-aop<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!--    第三方jar--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-logging<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-logging<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.tomcat<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>tomcat-servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>9.0.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="通过处理方法的形参接收请求参数"><a href="#通过处理方法的形参接收请求参数" class="headerlink" title="通过处理方法的形参接收请求参数"></a>通过处理方法的形参接收请求参数</h2><p>&emsp;&emsp; 通过处理方法的形参接收请求参数也就是直接把表单参数写在控制器类相应方法的形参中, 即形参名称与请求参数名称完全相同. 该接收参数方式适用于get和post提交请求方式.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 得到一个用来记录日志的对象, 这样在打印信息的时候能够标记打印的是哪个类的信息</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Log logger = LogFactory.getLog(UserController.class);</span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"register"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">register</span><span class="params">(String uname, String upass, Model model)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="string">"zhangsan"</span>.equals(uname) &amp;&amp; <span class="string">"123456"</span>.equals(upass))&#123;</span><br><span class="line">        logger.info(<span class="string">"成功"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"login"</span>;  <span class="comment">// 注册成功  跳转到login.jsp</span></span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        logger.info(<span class="string">"失败"</span>);</span><br><span class="line">        <span class="comment">// 在register.jsp页面上可以使用EL表达式 取出model的uname值</span></span><br><span class="line">        model.addAttribute(<span class="string">"uname"</span>, uname);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"register"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="通过HttpServletRequest接收请求参数"><a href="#通过HttpServletRequest接收请求参数" class="headerlink" title="通过HttpServletRequest接收请求参数"></a>通过HttpServletRequest接收请求参数</h2><p>&emsp;&emsp; 通过HttpServletRequest接收请求参数适用于get和post提交请求方式</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 得到一个用来记录日志的对象, 这样在打印信息的时候能够标记打印的是哪个类的信息</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Log logger = LogFactory.getLog(UserController.class);</span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"register"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">register</span><span class="params">(HttpServletRequest request, Model model)</span></span>&#123;</span><br><span class="line">    String uname = request.getParameter(<span class="string">"uname"</span>);</span><br><span class="line">    String upass = request.getParameter(<span class="string">"upass"</span>);</span><br><span class="line">    <span class="keyword">if</span> (<span class="string">"zhangsan"</span>.equals(uname) &amp;&amp; <span class="string">"123456"</span>.equals(upass))&#123;</span><br><span class="line">        logger.info(<span class="string">"成功"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"login"</span>;  <span class="comment">// 注册成功  跳转到login.jsp</span></span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        logger.info(<span class="string">"失败"</span>);</span><br><span class="line">        <span class="comment">// 在register.jsp页面上可以使用EL表达式 取出model的uname值</span></span><br><span class="line">        model.addAttribute(<span class="string">"uname"</span>, uname);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"register"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="通过-PathVariable接收URL中的请求参数"><a href="#通过-PathVariable接收URL中的请求参数" class="headerlink" title="通过@PathVariable接收URL中的请求参数"></a>通过@PathVariable接收URL中的请求参数</h2><ul><li>例如: <code>127.0.0.1:8080/SpringMVC/user/login/zhangsan/123456</code>, 下面代码自动将URL中的模板变量{uname}和{upass}绑定到通过@PathVariable注解的同名参数上.</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.controller;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.commons.logging.Log;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.logging.LogFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ui.Model;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.PathVariable;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMethod;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/user"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController02</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 得到一个用来记录日志的对象, 这样在打印信息的时候能够标记打印的是哪个类的信息</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Log logger = LogFactory.getLog(UserController.class);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 必须加method属性</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * 通过@PathVariable获取URL中的参数</span></span><br><span class="line"><span class="comment">    * ps: 使用@PathVariable 不能接收表单的数据, 只能做URL上的  对应的  位置参数</span></span><br><span class="line"><span class="comment">    * */</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/register/&#123;uname&#125;/&#123;upass&#125;/&#123;reupass&#125;"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">register</span><span class="params">(@PathVariable String uname, @PathVariable String upass, @PathVariable String reupass, Model model)</span></span>&#123;</span><br><span class="line">        System.out.println(reupass);</span><br><span class="line">        <span class="keyword">if</span> (<span class="string">"zhangsan"</span>.equals(uname) &amp;&amp; <span class="string">"123456"</span>.equals(upass))&#123;</span><br><span class="line">            logger.info(<span class="string">"成功"</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"login"</span>;  <span class="comment">// 注册成功  跳转到login.jsp</span></span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            logger.info(<span class="string">"失败"</span>);</span><br><span class="line">            <span class="comment">// 在register.jsp页面上可以使用EL表达式 取出model的uname值</span></span><br><span class="line">            model.addAttribute(<span class="string">"uname"</span>, uname);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"register"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(value = <span class="string">"/login/&#123;uname&#125;/&#123;upass&#125;"</span>, method = RequestMethod.GET)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">login</span><span class="params">(@PathVariable String uname, @PathVariable String upass, Model model, HttpSession session)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="string">"zhangsan"</span>.equals(uname) &amp;&amp; <span class="string">"123456"</span>.equals(upass))&#123;</span><br><span class="line">            session.setAttribute(<span class="string">"u"</span>, uname);</span><br><span class="line">            logger.info(<span class="string">"成功"</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"main"</span>;  <span class="comment">// 登录成功  跳转到main.jsp</span></span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            logger.info(<span class="string">"失败"</span>);</span><br><span class="line">            model.addAttribute(<span class="string">"messageError"</span>, <span class="string">"用户名或密码错误"</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"login"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="通过-RequestParam接收get和post请求参数"><a href="#通过-RequestParam接收get和post请求参数" class="headerlink" title="通过@RequestParam接收get和post请求参数"></a>通过@RequestParam接收get和post请求参数</h2><ul><li>通过@RequestParam接收的参数适用于get和post提交请求方式</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.controller;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.commons.logging.Log;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.logging.LogFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ui.Model;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestParam;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/user"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RequestParamController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 得到一个用来记录日志的对象, 这样在打印信息的时候能够标记打印的是哪个类的信息</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Log logger = LogFactory.getLog(UserController.class);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 必须加method属性</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    *@RequestParam可以接收get请求和post请求</span></span><br><span class="line"><span class="comment">    * </span></span><br><span class="line"><span class="comment">    * */</span></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/register"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">register</span><span class="params">(@RequestParam String uname, @RequestParam String upass, @RequestParam String reupass, Model model)</span></span>&#123;</span><br><span class="line">        System.out.println(reupass);</span><br><span class="line">        <span class="keyword">if</span> (<span class="string">"zhangsan"</span>.equals(uname) &amp;&amp; <span class="string">"123456"</span>.equals(upass))&#123;</span><br><span class="line">            logger.info(<span class="string">"成功"</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"login"</span>;  <span class="comment">// 注册成功  跳转到login.jsp</span></span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            logger.info(<span class="string">"失败"</span>);</span><br><span class="line">            <span class="comment">// 在register.jsp页面上可以使用EL表达式 取出model的uname值</span></span><br><span class="line">            model.addAttribute(<span class="string">"uname"</span>, uname);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"register"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/login"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">login</span><span class="params">(@RequestParam String uname, @RequestParam String upass, Model model, HttpSession session)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="string">"zhangsan"</span>.equals(uname) &amp;&amp; <span class="string">"123456"</span>.equals(upass))&#123;</span><br><span class="line">            session.setAttribute(<span class="string">"uname"</span>, uname);</span><br><span class="line">            logger.info(<span class="string">"成功"</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"main"</span>;  <span class="comment">// 登录成功  跳转到main.jsp</span></span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            logger.info(<span class="string">"失败"</span>);</span><br><span class="line">            model.addAttribute(<span class="string">"messageError"</span>, <span class="string">"用户名或密码错误"</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"login"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>与通过处理方法的形参接收的区别: <code>当请求参数与接收参数不一致时, 通过处理方法的形参接收请求参数不会报404错误, 而通过@RequestParam接收请求参数时, 会报404错误.</code></li></ul><h2 id="通过-ModelAttribute接收请求参数"><a href="#通过-ModelAttribute接收请求参数" class="headerlink" title="通过@ModelAttribute接收请求参数"></a>通过@ModelAttribute接收请求参数</h2><p>&emsp;&emsp; 当@ModelAttribute注解放在处理方法的形参上时, 用于将多个请求参数封装到一个实体对象, 从而简化数据绑定流程, 而且自动暴露为模型数据, 在视图页面展示时使用. 在前面的实体类Bean接收请求参数封装到一个对象, 并不能暴露为模型数据(需要使用model.addAttribute语句才能暴露为模型数据)</p><p>&emsp;&emsp; 通过@ModelAttribute注解接收请求参数适用于get和post提交请求方式.</p><!-- rebuild by neat -->]]></content>
      
      
      <categories>
          
          <category> springmvc </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> springmvc </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringMVC入门学习(一)</title>
      <link href="/2019/11/03/SpringMVC%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E4%B8%80/"/>
      <url>/2019/11/03/SpringMVC%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0-%E4%B8%80/</url>
      
        <content type="html"><![CDATA[<!-- build time:Tue Dec 31 2019 09:54:11 GMT+0800 (CST) --><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SpringMVC入门学习(一)</span><br></pre></td></tr></table></figure><a id="more"></a><p>&emsp;&emsp; MVC思想是将一个应用分成3个基本部分, 即Model(模型)、View(视图)和Controller(控制器), 让这3个部分以最低的耦合进行协同工作, 从而提高应用的可扩展性以及可维护性. SpringMVC是一款优秀的基于MVC思想的应用框架, 它是Spring提供的一个实现了web MVC设计模式的轻量级WEB框架.</p><h2 id="MVC模式"><a href="#MVC模式" class="headerlink" title="MVC模式"></a>MVC模式</h2><ul><li>模型: 用于存储数据库以及处理用户请求的业务逻辑</li><li>视图: 向控制器提交数据, 显示模型中的数据</li><li>控制器: 根据视图提出的请求判断将请求和数据交给哪个模型处理, 将处理后的有关结果及交给哪个视图更新显示</li></ul><h2 id="Spring-MVC工作原理"><a href="#Spring-MVC工作原理" class="headerlink" title="Spring MVC工作原理"></a>Spring MVC工作原理</h2><p>&emsp;&emsp; SpringMVC框架是高度可配置的, 包含多种视图技术, 例如JSP技术、Velocity、Tiles、IText和POI. Spring MVC框架并不关心使用的视图技术, 也不会强迫开发者只使用JSP技术.</p><p>&emsp;&emsp; SpringMVC框架主要是由DispatcherServlet、处理器映射、控制器、视图解析器、视图组成.</p><p><img src="https://img3.doubanio.com/view/note/l/public/p52677033.webp" alt></p><ol><li>客户端请求提交到DispatcherServlet</li><li>由DispatcherServlet控制器寻求一个或多个HandlerMapping, 找到处理请求的Controller</li><li>DispatcherServlet将请求提交到Controller</li><li>Controller调用业务逻辑处理后返回ModelAndView</li><li>DispatcherServlet寻求一个或多个ViewResolver视图解析器, 找到ModelAndView指定的视图</li><li>视图负责将结果显示到客户端</li></ol><h2 id="SpringMVC接口"><a href="#SpringMVC接口" class="headerlink" title="SpringMVC接口"></a>SpringMVC接口</h2><p>&emsp;&emsp; 在上图中包含了4个SpringMVC接口, 即DispatcherServlet、HandlerMapping、Controller和ViewResolver.</p><p>&emsp;&emsp; SpringMVC所有请求都经过DispatcherServlet来统一分发, 在DispatcherServlet将请求分发给Controller之前需要借助SpringMVC提供的HandlerMapping定位到具体的Controller.</p><p>&emsp;&emsp; HandlerMapping接口负责完成客户请求到Controller映射.</p><p>&emsp;&emsp; Controller接口将处理用户的请求, 这和Java Servlet扮演的角色是一致的, 一旦Controller处理完用户请求, 将返回的ModelAndView对象给DispatcherServlet前端控制器, ModelAndView中包含模型和视图. 从宏观角度考虑, DispatcherServlet是整个web应用的控制器, 从微观上考虑, Controller是单个http请求处理过程中的控制器, 而ModelAndView是http请求过程中返回的模型和视图.</p><p>&emsp;&emsp; ViewResolver接口(视图解析器)在web应用中负责查找view对象, 从而将相应结果渲染给客户.</p><h2 id="第一个Spring-MVC应用"><a href="#第一个Spring-MVC应用" class="headerlink" title="第一个Spring MVC应用"></a>第一个Spring MVC应用</h2><p><strong>完整代码链接:</strong> <a href="https://gitee.com/gitsilence/SpringMVC_01" target="_blank" rel="noopener"><a href="https://gitee.com/gitsilence/SpringMVC_01" target="_blank" rel="noopener">https://gitee.com/gitsilence/SpringMVC_01</a></a></p><h3 id="导入相关jar包"><a href="#导入相关jar包" class="headerlink" title="导入相关jar包"></a>导入相关jar包</h3><ul><li>导入spring基本jar包</li><li>spring-web-xxx.jar</li><li>spring-webmvc-xxx.jar</li></ul><h3 id="pom-xml"><a href="#pom-xml" class="headerlink" title="pom.xml"></a>pom.xml</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--      &lt;scope&gt;test&lt;/scope&gt;--&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-core --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-beans --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-beans<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-context --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-expression<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-aop<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!--    第三方jar--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-logging<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-logging<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.tomcat<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>tomcat-servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>9.0.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="在web-xml文件中部署DispatcherServlet"><a href="#在web-xml文件中部署DispatcherServlet" class="headerlink" title="在web.xml文件中部署DispatcherServlet"></a>在web.xml文件中部署DispatcherServlet</h3><p>代码如下:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE web-app PUBLIC</span></span><br><span class="line"><span class="meta"> "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN"</span></span><br><span class="line"><span class="meta"> "http://java.sun.com/dtd/web-app_2_3.dtd" &gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">display-name</span>&gt;</span>Archetype Created Web Application<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--  部署DispatcherServlet--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    表示容器在启动时立即加载--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    处理所有的URL--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure><p>&emsp;&emsp; 上述DispatcherServlet的servlet对象springmvc初始化时将在应用程序的WEB-INF目录下查找一个配置文件, 该配置文件的命名规则是 ‘servletName-servlet.xml’, 例如: springmvc-servlet.xml</p><p>&emsp;&emsp; 另外, 也可以将SpringMVC配置文件存放在应用程序目录中的任何地方, 但需要使用servlet的init-param元素加载配置文件, 示例代码如下:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE web-app PUBLIC</span></span><br><span class="line"><span class="meta"> "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN"</span></span><br><span class="line"><span class="meta"> "http://java.sun.com/dtd/web-app_2_3.dtd" &gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">display-name</span>&gt;</span>Archetype Created Web Application<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--  部署DispatcherServlet--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>/WEB-INF/spring-config/springmvc-servlet.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="comment">&lt;!--    表示容器在启动时立即加载--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    处理所有的URL--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="创建web应用首页-index-jsp"><a href="#创建web应用首页-index-jsp" class="headerlink" title="创建web应用首页 index.jsp"></a>创建web应用首页 index.jsp</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--</span><br><span class="line">  Created by 年少、.</span><br><span class="line">  User: nianshao</span><br><span class="line">  Date: <span class="number">19</span>-<span class="number">11</span>-<span class="number">3</span></span><br><span class="line">  Time: 下午<span class="number">2</span>:<span class="number">38</span></span><br><span class="line">--%&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;meta http-equiv=<span class="string">"X-UA-Compatible"</span> content=<span class="string">"IE=edge"</span>/&gt;</span><br><span class="line">&lt;meta name=<span class="string">"viewport"</span> content=<span class="string">"width=device-width, initial-scale=1"</span>/&gt;</span><br><span class="line">&lt;meta charset=<span class="string">"UTF-8"</span>&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">    未注册的用户, 请 &lt;a href="$&#123;pageContext.request.contextPath&#125;/register"&gt;主页&lt;/a&gt;&lt;br&gt;</span><br><span class="line">    已注册的用户, 去 &lt;a href="$&#123;pageContext.request.contextPath&#125;/login"&gt;登录&lt;/a&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><h3 id="创建Controller类"><a href="#创建Controller类" class="headerlink" title="创建Controller类"></a>创建Controller类</h3><ul><li><p>LoginController</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.ModelAndView;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.mvc.Controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginController</span> <span class="keyword">implements</span> <span class="title">Controller</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ModelAndView <span class="title">handleRequest</span><span class="params">(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ModelAndView(<span class="string">"/WEB-INF/jsp/login.jsp"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>RegisterController</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.ModelAndView;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.mvc.Controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RegisterController</span> <span class="keyword">implements</span> <span class="title">Controller</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ModelAndView <span class="title">handleRequest</span><span class="params">(javax.servlet.http.HttpServletRequest httpServletRequest, javax.servlet.http.HttpServletResponse httpServletResponse)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ModelAndView(<span class="string">"/WEB-INF/jsp/register.jsp"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="创建SpringMVC配置文件并配置Controller映射信息"><a href="#创建SpringMVC配置文件并配置Controller映射信息" class="headerlink" title="创建SpringMVC配置文件并配置Controller映射信息"></a>创建SpringMVC配置文件并配置Controller映射信息</h3><p>&emsp;&emsp; 在WEB-INF目录下创建名为: spring-config/springmvc-servlet.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    LoginController控制类, 映射到 /login--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"/login"</span> <span class="attr">class</span>=<span class="string">"cn.lacknb.controller.LoginController"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    RegisterController控制器类, 映射到 /registe--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"/register"</span> <span class="attr">class</span>=<span class="string">"cn.lacknb.controller.RegisterController"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="IDEA下-pageContext-request-contextPath-不生效问题"><a href="#IDEA下-pageContext-request-contextPath-不生效问题" class="headerlink" title="IDEA下${pageContext.request.contextPath}不生效问题"></a>IDEA下${pageContext.request.contextPath}不生效问题</h3><p><strong>原文链接:</strong> <a href="https://blog.csdn.net/l577217/article/details/81490910" target="_blank" rel="noopener"><a href="https://blog.csdn.net/l577217/article/details/81490910" target="_blank" rel="noopener">https://blog.csdn.net/l577217/article/details/81490910</a></a></p><p>在idea下，已经添加了jsp的jar包，其中一个.jsp文件中表单提交为：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">action=&quot;$&#123;pageContext.request.contextPath&#125;/login&quot;</span><br></pre></td></tr></table></figure><p>部署到tomcat上，在浏览器访问后显示错误：</p><p>但是同样的文件在eclipse下可以正常访问，通过给出的url可以看出是EL表达式解析错误</p><p>解决方法1:为在.jsp文件前面设置属性：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@page isELIgnored=&quot;false&quot;%&gt;</span><br></pre></td></tr></table></figure><p>解决方法2:更改web.xml命名空间：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="attr">xmlns</span>=<span class="string">"http://xmlns.jcp.org/xml/ns/javaee"</span> <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd"</span> <span class="attr">id</span>=<span class="string">"WebApp_ID"</span> <span class="attr">version</span>=<span class="string">"3.1"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="视图解析器"><a href="#视图解析器" class="headerlink" title="视图解析器"></a>视图解析器</h3><p>&emsp;&emsp; 用户可以在配置文件中定义SpringMVC的一个视图解析器(ViewResolver), 代码如下:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"internalResourceViewResolver"</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.view.InternalResourceViewResolver"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--前缀--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"prefix"</span> <span class="attr">value</span>=<span class="string">"/WEB-INF/jsp/"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--后缀--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"suffix"</span> <span class="attr">value</span>=<span class="string">".jsp"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p>&emsp;&emsp; 上述视图解析器配置了前缀和后缀两个属性, RegisterController和LoginController控制器类的视图路径仅需提供register和login, 视图解析器将会自动添加前缀和后缀.</p><p>例如: 现在将RegisterController修改如下 :</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.ModelAndView;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.mvc.Controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RegisterController</span> <span class="keyword">implements</span> <span class="title">Controller</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ModelAndView <span class="title">handleRequest</span><span class="params">(javax.servlet.http.HttpServletRequest httpServletRequest, javax.servlet.http.HttpServletResponse httpServletResponse)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ModelAndView(<span class="string">"register"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>重新运行, 点击注册, 运行成功.</p><p>注意:　当设置前缀和后缀之后, LoginController也要对应做出修改.</p><h2 id="基于注解的控制器"><a href="#基于注解的控制器" class="headerlink" title="基于注解的控制器"></a>基于注解的控制器</h2><p>&emsp;&emsp; 使用基于注解的控制器有以下两个优点:</p><p>&emsp;&emsp; (1) 在基于注解的控制器类中可以编写多个处理方法, 进而可以处理多个请求(动作), 这就允许将相关的操作编写在同一个控制器类中, 从而减少控制器类的数量, 方便以后的维护.</p><p>&emsp;&emsp; (2) 基于注解的控制器不需要在配置文件中部署映射, 仅需要使用RequestMapping注释类型注解一个方法进行请求处理.</p><p>&emsp;&emsp; 在SpringMVC中最重要的的两个注解类型是Controller和RequestMapping,.</p><h2 id="Controller注解类型"><a href="#Controller注解类型" class="headerlink" title="Controller注解类型"></a>Controller注解类型</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> controller</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* @Controller 表示IndexController的实例是一个控制器</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IndexController</span></span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>&emsp;&emsp; 在Spring MVC中使用扫描机制找到应用中所有基于注解的控制类, 所以, 为了让控制器被Spring MVC框架扫描到, 需要在配置文件中声明 spring-Context, 并使用&lt; context:component-scan/ &gt;元素指定控制类的基本包</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"cn.lacknb.controller"</span>/&gt;</span></span><br></pre></td></tr></table></figure><h2 id="RequestMapping注解类型"><a href="#RequestMapping注解类型" class="headerlink" title="RequestMapping注解类型"></a>RequestMapping注解类型</h2><p>&emsp;&emsp; 在基于注解的控制类中可以为每个请求编写对应的处理方法. 那么如何将请求与方法一一对应呢 ? 需要使用org.springframework.web.bind.annotation.RequestMapping 注解类型将请求与处理方法一一对应.</p><ul><li><p>方法级别注解的示例代码</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IndexController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(value = <span class="string">"login"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">login</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        * login代表逻辑视图, 需要根据SpringMVC配置</span></span><br><span class="line"><span class="comment">        * 文件中internalResourceViewResolver的前缀和后缀找到对应的物理视图</span></span><br><span class="line"><span class="comment">        * */</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">"login"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(value = <span class="string">"register"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">register</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"register"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><ul><li><p>类级别的注解</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IndexController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"login"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">login</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        * login代表逻辑视图, 需要根据SpringMVC配置</span></span><br><span class="line"><span class="comment">        * 文件中internalResourceViewResolver的前缀和后缀找到对应的物理视图</span></span><br><span class="line"><span class="comment">        * */</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">"login"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"register"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">register</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"register"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>&emsp;&emsp; 在类级别注解的情况下, 控制器类中的所有方法都将映射为类级别的请求.</p></li></ul><p>&emsp;&emsp; 为了方便维护程序, 建议开发者采用类级别注解, 将相关处理放在同一个控制类中. 例如, 对商品的增、删、改、查处理方法都可以放在同一控制类中.</p><h2 id="编写请求处理方法"><a href="#编写请求处理方法" class="headerlink" title="编写请求处理方法"></a>编写请求处理方法</h2><p>&emsp;&emsp; 在控制类中每个请求处理方法可以有多个不同类型的参数, 以及一个多种类型的返回结果.</p><p>如果需要在请求处理方法中使用servlet API类型, 那么可以将这些类型作为请求处理方法的参数类型 .</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringServlet</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"login"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">login</span><span class="params">(HttpSession session, HttpServletRequest request)</span></span>&#123;</span><br><span class="line">        session.setAttribute(<span class="string">"skey"</span>, <span class="string">"session范围的值"</span>);</span><br><span class="line">        request.setAttribute(<span class="string">"rkey"</span>, <span class="string">"request范围的值"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"login"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>&emsp;&emsp; 除了Servlet API参数类型外, 还有输入输出流、表单实体类、注解类型、与Spring框架相关的类型等. 其中特别重要的是<code>org.springframework.ui.Model</code>类型, 该类型是一个包含Map的Spring框架类型. 在每次调用请求处理方法时 SpringMVC都将创建<code>org.springframework.ui.Model</code>对象</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.controller;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ui.Model;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IndexModel</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/register"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">register</span><span class="params">(Model model)</span></span>&#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        * 在视图中可以使用EL表达式$&#123;success&#125;取出model值</span></span><br><span class="line"><span class="comment">        * </span></span><br><span class="line"><span class="comment">        * */</span></span><br><span class="line">        </span><br><span class="line">        model.addAttribute(<span class="string">"success"</span>, <span class="string">"注册成功"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"register"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>&emsp;&emsp; 最常见的返回类型就是代表逻辑视图名称的String类型, 除了String类型以外, 还有ModelAndView、Model、View以及其他任意的java类型.</p><!-- rebuild by neat -->]]></content>
      
      
      <categories>
          
          <category> springmvc </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring MVC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MyBatis与Spring的整合</title>
      <link href="/2019/11/02/MyBatis%E4%B8%8ESpring%E7%9A%84%E6%95%B4%E5%90%88/"/>
      <url>/2019/11/02/MyBatis%E4%B8%8ESpring%E7%9A%84%E6%95%B4%E5%90%88/</url>
      
        <content type="html"><![CDATA[<!-- build time:Tue Dec 31 2019 09:54:11 GMT+0800 (CST) --><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MyBatis与Spring的整合的入门案例</span><br></pre></td></tr></table></figure><a id="more"></a><p>&emsp;&emsp; 直接使用MyBatis框架的SqlSession访问数据库并不简便. Mybatis框架的重点是SQL映射文件.</p><h2 id="代码结构图"><a href="#代码结构图" class="headerlink" title="代码结构图"></a>代码结构图</h2><p><img src="https://s2.ax1x.com/2019/11/02/KLS5Af.png" alt="https://s2.ax1x.com/2019/11/02/KLS5Af.png"></p><h2 id="所需要的相关的jar包"><a href="#所需要的相关的jar包" class="headerlink" title="所需要的相关的jar包"></a>所需要的相关的jar包</h2><ul><li>Spring的jar包</li><li>MyBatis的jar包</li><li>MyBatis与Spring的整合jar包</li><li>这里使用c3p0数据源</li><li>连接数据库的驱动jar包</li></ul><p>pom.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--Spring相关jar包--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-core --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-beans --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-beans<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-context --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-expression<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.0.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--        Mybatis相关jar包--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.17<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-log4j12<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.7.25<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--      &lt;scope&gt;test&lt;/scope&gt;--&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-logging<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-logging<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--        spring-mybatis--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.43<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.mchange<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>c3p0<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.9.5.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="数据库结构"><a href="#数据库结构" class="headerlink" title="数据库结构"></a>数据库结构</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`user`</span> (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  <span class="string">`username`</span> <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`password`</span> <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`address`</span> <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure><h2 id="实体类User-java"><a href="#实体类User-java" class="headerlink" title="实体类User.java"></a>实体类User.java</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.beans;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Repository;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"王二"</span>)</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"89898998"</span>)</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"弦歌大道"</span>)</span><br><span class="line">    <span class="keyword">private</span> String address;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">(String username, String password, String address)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.username = username;</span><br><span class="line">        <span class="keyword">this</span>.password = password;</span><br><span class="line">        <span class="keyword">this</span>.address = address;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getUsername</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUsername</span><span class="params">(String username)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.username = username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getPassword</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPassword</span><span class="params">(String password)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.password = password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getAddress</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> address;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAddress</span><span class="params">(String address)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.address = address;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"User&#123;"</span> +</span><br><span class="line">                <span class="string">"id="</span> + id +</span><br><span class="line">                <span class="string">", username='"</span> + username + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", password='"</span> + password + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", address='"</span> + address + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">'&#125;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="dao层UserDao-java"><a href="#dao层UserDao-java" class="headerlink" title="dao层UserDao.java"></a>dao层UserDao.java</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.lacknb.beans.User;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Insert</span>(<span class="string">"insert into user(username, password, address) values(#&#123;username&#125;, #&#123;password&#125;, #&#123;address&#125;)"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">addUser</span><span class="params">(User user)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Delete</span>(<span class="string">"delete from user where id=#&#123;id&#125;"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">deleteUser</span><span class="params">(@Param(<span class="string">"id"</span>)</span> Integer id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Update</span>(<span class="string">"update user set username=#&#123;username&#125;, password=#&#123;password&#125;, address=#&#123;address&#125; where id = #&#123;id&#125;"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">updateUser</span><span class="params">(User user)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Select</span>(<span class="string">"select * from user where id = #&#123;id&#125;"</span>)</span><br><span class="line">    <span class="function">User <span class="title">find</span><span class="params">(@Param(<span class="string">"id"</span>)</span> Integer id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Select</span>(<span class="string">"select * from user"</span>)</span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">findAll</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="service层UserService和UserServiceImpl"><a href="#service层UserService和UserServiceImpl" class="headerlink" title="service层UserService和UserServiceImpl"></a>service层UserService和UserServiceImpl</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.lacknb.beans.User;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">addUser</span><span class="params">(User user)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">deleteUser</span><span class="params">(Integer id)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">updateUser</span><span class="params">(User user)</span></span>;</span><br><span class="line">    <span class="function">User <span class="title">find</span><span class="params">(Integer id)</span></span>;</span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">findAll</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.lacknb.beans.User;</span><br><span class="line"><span class="keyword">import</span> cn.lacknb.dao.UserDao;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">addUser</span><span class="params">(User user)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userDao.addUser(user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">deleteUser</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userDao.deleteUser(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">updateUser</span><span class="params">(User user)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userDao.updateUser(user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">find</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userDao.find(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">findAll</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userDao.findAll();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="applicationContext-xml、mybatis-config-xml和jdbc-properties"><a href="#applicationContext-xml、mybatis-config-xml和jdbc-properties" class="headerlink" title="applicationContext.xml、mybatis-config.xml和jdbc.properties"></a>applicationContext.xml、mybatis-config.xml和jdbc.properties</h2><ul><li><p>applicationContext.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span> <span class="attr">xmlns:tx</span>=<span class="string">"http://www.springframework.org/schema/tx"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/tx https://www.springframework.org/schema/tx/spring-tx.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--    需要扫描的包(包括子包), 使注解生效--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"cn.lacknb"</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    读取properties文件--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    &lt;context:property-placeholder location="xml/jdbc.properties"/&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    另一种读取多个properties文件|--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"jdbcProperty"</span> <span class="attr">class</span>=<span class="string">"org.springframework.beans.factory.config.PropertyPlaceholderConfigurer"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"locations"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>classpath*:/xml/jdbc.properties<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    配置数据源--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    配置数据源--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"dataSource"</span> <span class="attr">class</span>=<span class="string">"com.mchange.v2.c3p0.ComboPooledDataSource"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClass"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.driver&#125;"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jdbcUrl"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.url&#125;"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"user"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.username&#125;"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.password&#125;"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--        添加事务支持--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    &lt;bean id="txManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager"&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;property name="dataSource" ref="dataSource"/&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    &lt;/bean&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    &amp;lt;!&amp;ndash;    开启事务注解&amp;ndash;&amp;gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    &lt;tx:annotation-driven transaction-manager="txManager"/&gt;--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    配置mybatis工厂, 同时指定数据源, 并与mybatis完美结合--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"sqlSessionFactory"</span> <span class="attr">class</span>=<span class="string">"org.mybatis.spring.SqlSessionFactoryBean"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        configlocation的属性值为mybatis的核心配置文件--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"configLocation"</span> <span class="attr">value</span>=<span class="string">"classpath:xml/mybatis-config.xml"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    Mapper代理开发,使用Spring自动扫描mybatis的接口并装配--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--spring指定包中所有被@Mapper注解标注的接口自动装配为mybatis的映射接口--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.mybatis.spring.mapper.MapperScannerConfigurer"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        mybatis-Spring组件的扫描器--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"basePackage"</span> <span class="attr">value</span>=<span class="string">"cn.lacknb"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"sqlSessionFactoryBeanName"</span> <span class="attr">value</span>=<span class="string">"sqlSessionFactory"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>mybatis-config.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE configuration</span></span><br><span class="line"><span class="meta">        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"</span></span><br><span class="line"><span class="meta">        "http://mybatis.org/dtd/mybatis-3-config.dtd"&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--  引入外部配置文件  加入变量propertis--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span> <span class="attr">resource</span>=<span class="string">"xml/jdbc.properties"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--        开启mybatis支持延迟加载--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"lazyLoadingEnabled"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--        任何方法的调用都会加载该对象的所有属性，否则每个属性都会按需加载--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"aggressiveLazyLoading"</span> <span class="attr">value</span>=<span class="string">"false"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--        开启二级缓存     默认为true--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"cacheEnabled"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--    配置别名--&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">"cn.lacknb.beans"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--    起别名--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--    &lt;typeAliases&gt;--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--        &lt;typeAlias type="MyUser" alias="beans"/&gt;--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--    &lt;/typeAliases&gt;--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--    配置环境--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    &lt;environments default="development"&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &amp;lt;!&amp;ndash;       配置mysql的环境， 和default保持一致&amp;ndash;&amp;gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;environment id="development"&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &amp;lt;!&amp;ndash;           配置事务的类型　ＪＤＢＣ  &amp;ndash;&amp;gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &lt;transactionManager type="JDBC"/&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &amp;lt;!&amp;ndash;            配置数据源（连接池）&amp;ndash;&amp;gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &lt;dataSource type="POOLED"&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--                &lt;property name="driver" value="$&#123;jdbc.driver&#125;"/&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--                &lt;property name="url" value="$&#123;jdbc.url&#125;"/&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--                &lt;property name="password" value="$&#123;jdbc.password&#125;"/&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--                &lt;property name="username" value="$&#123;jdbc.username&#125;"/&gt;--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--            &lt;/dataSource&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;/environment&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    &lt;/environments&gt;--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--    指定带有注解的dao接口所在的位置--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">"cn.lacknb.dao"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>jdbc.properties</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">jdbc.driver=com.mysql.jdbc.Driver</span><br><span class="line">jdbc.url=jdbc:mysql:///jdbc_template?useSSL=false</span><br><span class="line">jdbc.username=root</span><br><span class="line">jdbc.password=123456</span><br></pre></td></tr></table></figure></li></ul><h2 id="log4j-properties"><a href="#log4j-properties" class="headerlink" title="log4j.properties"></a>log4j.properties</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#log4j.rootLogger=DEBUG,console</span><br><span class="line">log4j.logger.cn.lacknb.dao.UserDao=DEBUG, console</span><br><span class="line">log4j.additivity.org.apache=true</span><br><span class="line"># 控制台(console)</span><br><span class="line">log4j.appender.console=org.apache.log4j.ConsoleAppender</span><br><span class="line">log4j.appender.console.Threshold=DEBUG</span><br><span class="line">log4j.appender.console.ImmediateFlush=true</span><br><span class="line">log4j.appender.console.Target=System.err</span><br><span class="line">log4j.appender.console.layout=org.apache.log4j.PatternLayout</span><br><span class="line">log4j.appender.console.layout.ConversionPattern=[%-5p] %d(%r) --&gt; %m %x %n</span><br></pre></td></tr></table></figure><!-- rebuild by neat -->]]></content>
      
      
      <categories>
          
          <category> spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mybatis </tag>
            
            <tag> spring </tag>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring的事务管理</title>
      <link href="/2019/11/02/Spring%E7%9A%84%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86/"/>
      <url>/2019/11/02/Spring%E7%9A%84%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86/</url>
      
        <content type="html"><![CDATA[<!-- build time:Tue Dec 31 2019 09:54:11 GMT+0800 (CST) --><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Spring中对数据库的事务管理</span><br></pre></td></tr></table></figure><a id="more"></a><h1 id="编程式事务管理"><a href="#编程式事务管理" class="headerlink" title="编程式事务管理"></a>编程式事务管理</h1><ul><li>原子性(Atomicity)：事务中的全部操作在数据库中是不可分割的，要么全部完成，要么全部不执行。</li><li>一致性(Consistency)：几个并行执行的事务，其执行结果必须与按某一顺序 串行执行的结果相一致。</li><li>夺隔离性(Isolation)：事务的执行不受其他事务的干扰，事务执行的中间结果对其他事务必须是透明的。</li><li>夺持久性(Durability):对于任意已提交事务，系统必须保证该事务对数据库的改变不被丢失，即使数据库出现故障。</li></ul><p>&emsp;&emsp;事务的ACID特性是由<a href="https://baike.baidu.com/item/%E5%85%B3%E7%B3%BB%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F/9797711" target="_blank" rel="noopener">关系数据库系统</a>(DBMS)来实现的，DBMS采用日志来保证事务的原子性、一致性和持久性。日志记录了事务对数据库所作的更新，如果某个事务在执行过程中发生错误，就可以根据日志撤销事务对数据库已做的更新，使得数据库同滚到执行事务前的初始状态。</p><p>&emsp;&emsp;对于事务的隔离性，DBMS是采用锁机制来实现的。当多个事务同时更新数据库中相同的数据时，只允许持有锁的事务能更新该数据，其他事务必须等待，直到前一个事务释放了锁，其他事务才有机会更新该数据。</p><blockquote><p>在代码中显式调用beginTransaction、commit、rollback等与事务处理相关的方法, 这就是编程式事务管理. 当只有少数事务操作时, 编程式事务管理才比较合适.</p></blockquote><p>用到的表结构:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> custom</span><br><span class="line">(</span><br><span class="line">    <span class="keyword">id</span>    <span class="built_in">int</span> auto_increment</span><br><span class="line">        primary <span class="keyword">key</span>,</span><br><span class="line">    <span class="keyword">name</span>  <span class="built_in">varchar</span>(<span class="number">33</span>) <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">    sex   <span class="built_in">varchar</span>(<span class="number">33</span>) <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">    money <span class="keyword">double</span>      <span class="keyword">not</span> <span class="literal">null</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><h2 id="基于底层编程式事务管理"><a href="#基于底层编程式事务管理" class="headerlink" title="基于底层编程式事务管理"></a>基于底层编程式事务管理</h2><p>​ 基于底层API的编程式事务管理就是根据PlatformTransactionManager、TransactionDefinition和TransactionStatus几个核心接口, 通过编程的方式来进行事务处理.</p><h3 id="给数据源配置事务管理器"><a href="#给数据源配置事务管理器" class="headerlink" title="给数据源配置事务管理器"></a>给数据源配置事务管理器</h3><p><code>使用PlatformTransactionManager接口的实现类org.springframework.jdbc.datasource.DataSourceTransactionManager为数据源添加事务管理器</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--   为数据源添加事务管理器--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"txManager"</span> <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.datasource.DataSourceTransactionManager"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="例子"><a href="#例子" class="headerlink" title="例子:"></a>例子:</h3><ul><li>需要的文件有:<ul><li>jdbc.properties <code>用来保存数据库连接相关参数</code></li><li>applicationContext.xml</li><li>JdbcTest.java</li></ul></li></ul><h4 id="applicationContext-xml文件"><a href="#applicationContext-xml文件" class="headerlink" title="applicationContext.xml文件"></a>applicationContext.xml文件</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 导入properties文件 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">"classpath*:jdbc.properties"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"cn.lacknb"</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    基于底层API的编程式管理--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    配置数据源--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"dataSource"</span> <span class="attr">class</span>=<span class="string">"com.alibaba.druid.pool.DruidDataSource"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClassName"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.driver&#125;"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.url&#125;"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.username&#125;"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.password&#125;"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--    定义事务管理器--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"txManager"</span> <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.datasource.DataSourceTransactionManager"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    配置jdbc模板--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"jdbcTemplate"</span> <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.core.JdbcTemplate"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="jdbc-properties文件"><a href="#jdbc-properties文件" class="headerlink" title="jdbc.properties文件"></a>jdbc.properties文件</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">jdbc.driver=com.mysql.jdbc.Driver</span><br><span class="line">jdbc.url=jdbc:mysql:///jdbc_template</span><br><span class="line">jdbc.username=root</span><br><span class="line">jdbc.password=123456</span><br></pre></td></tr></table></figure><h4 id="JdbcTest-java"><a href="#JdbcTest-java" class="headerlink" title="JdbcTest.java"></a>JdbcTest.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> org.junit.runner.RunWith;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.jdbc.core.JdbcTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.jdbc.datasource.DataSourceTransactionManager;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Repository;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.ContextConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.junit4.SpringJUnit4ClassRunner;</span><br><span class="line"><span class="keyword">import</span> org.springframework.transaction.TransactionDefinition;</span><br><span class="line"><span class="keyword">import</span> org.springframework.transaction.TransactionStatus;</span><br><span class="line"><span class="keyword">import</span> org.springframework.transaction.support.DefaultTransactionDefinition;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="meta">@RunWith</span>(SpringJUnit4ClassRunner.class)</span><br><span class="line"><span class="meta">@ContextConfiguration</span>(locations = &#123;<span class="string">"classpath*:applicationContext.xml"</span>&#125;)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JdbcTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 使用配置文件中的jdbc模板</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> JdbcTemplate jdbcTemplate;</span><br><span class="line">    <span class="comment">// DataSourceTransaction是platformTransactionManager接口的实现类</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> DataSourceTransactionManager txManager;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test01</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">// 默认事务定义, 例如隔离级别, 传播行为等</span></span><br><span class="line">        TransactionDefinition tf = <span class="keyword">new</span> DefaultTransactionDefinition();</span><br><span class="line">        <span class="comment">// 开启事务 ts</span></span><br><span class="line">        TransactionStatus ts = txManager.getTransaction(tf);</span><br><span class="line">        String message = <span class="string">"执行成功, 没有事务回滚"</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            String sql = <span class="string">"insert into custom(id, name, sex, money) values(?, ?, ?, ?)"</span>;</span><br><span class="line">            Object param[] = &#123;<span class="number">11</span>, <span class="string">"张三"</span>, <span class="string">"女"</span>, <span class="number">1000.0</span>&#125;;</span><br><span class="line">            jdbcTemplate.update(sql, param);</span><br><span class="line">            <span class="comment">// 添加相同主键的数据, 让事务进行回滚</span></span><br><span class="line">            jdbcTemplate.update(sql, param);</span><br><span class="line">            <span class="comment">// 提交事务</span></span><br><span class="line">            txManager.commit(ts);</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            <span class="comment">// 出现异常, 事务回滚</span></span><br><span class="line">            txManager.rollback(ts);</span><br><span class="line">            message = <span class="string">"出现异常, 事务回滚"</span>;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(message);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="基于TransactionTemplate的编程式事务管理"><a href="#基于TransactionTemplate的编程式事务管理" class="headerlink" title="基于TransactionTemplate的编程式事务管理"></a>基于TransactionTemplate的编程式事务管理</h2><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">事务处理的代码散落在业务逻辑代码中, 破坏了原有代码的条理性, 并且每一个业务方法都包含了类似的启动事务、提交以及回滚事务的样板代码.</span><br><span class="line"></span><br><span class="line">TransactionTemplate的execute方法有一个TransactionCallback接口类型的参数, 该接口定义一个doInTransaction方法, 通常以匿名内部类的方式实现TransactionCallback接口, 并在其中doInTransaction方法中书写业务逻辑代码. 在这里可以使用默认的事务提交和回滚规则, 在业务代码中不需要显式调用任何事务处理的API. doInTransaction方法有一个TransactionStatus参数, 可以在该方法的任何位置调用该参数的setRollbackOnly方法将事务标识为回滚, 以执行事务回滚.</span><br><span class="line"></span><br><span class="line">根据默认规则, 如果在执行回调方法的过程中抛出了未检查的异常, 或者显式调用了setRollbackOnly方法, 则回滚事务; 如果事务执行完成或者抛出了checked类型的异常, 则提交事务.</span><br></pre></td></tr></table></figure><h3 id="为事务管理器添加事务模板"><a href="#为事务管理器添加事务模板" class="headerlink" title="为事务管理器添加事务模板"></a>为事务管理器添加事务模板</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    为事务管理器txManager创建transactionTemplate --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"transactionTemplate"</span> <span class="attr">class</span>=<span class="string">"org.springframework.transaction.support.TransactionTemplate"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"transactionManager"</span> <span class="attr">ref</span>=<span class="string">"txManager"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="例子-1"><a href="#例子-1" class="headerlink" title="例子"></a>例子</h3><ul><li>需要的文件有:<ul><li>jdbc.properties <code>用来保存数据库连接相关参数</code></li><li>applicationContext.xml</li><li>TemplateTransactionTest.java</li></ul></li></ul><h4 id="applicationContext-xml文件-1"><a href="#applicationContext-xml文件-1" class="headerlink" title="applicationContext.xml文件"></a>applicationContext.xml文件</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">"classpath*:jdbc.properties"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"cn.lacknb"</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    基于底层API的编程式管理--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    配置数据源--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"dataSource"</span> <span class="attr">class</span>=<span class="string">"com.alibaba.druid.pool.DruidDataSource"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClassName"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.driver&#125;"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.url&#125;"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.username&#125;"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.password&#125;"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--    定义事务管理器--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"txManager"</span> <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.datasource.DataSourceTransactionManager"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--    配置jdbc模板--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"jdbcTemplate"</span> <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.core.JdbcTemplate"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    配置事务的模板--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"transactionTemplate"</span> <span class="attr">class</span>=<span class="string">"org.springframework.transaction.support.TransactionTemplate"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"transactionManager"</span> <span class="attr">ref</span>=<span class="string">"txManager"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="jdbc-properties"><a href="#jdbc-properties" class="headerlink" title="jdbc.properties"></a>jdbc.properties</h4><p>同上一个例子, 不变.</p><h4 id="TemplateTransactionTest-java"><a href="#TemplateTransactionTest-java" class="headerlink" title="TemplateTransactionTest.java"></a>TemplateTransactionTest.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> org.junit.runner.RunWith;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.jdbc.core.JdbcTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Repository;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.ContextConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.junit4.SpringJUnit4ClassRunner;</span><br><span class="line"><span class="keyword">import</span> org.springframework.transaction.TransactionStatus;</span><br><span class="line"><span class="keyword">import</span> org.springframework.transaction.support.TransactionCallback;</span><br><span class="line"><span class="keyword">import</span> org.springframework.transaction.support.TransactionTemplate;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* 不再需要自己手动提交和手动回滚了.</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="meta">@RunWith</span>(SpringJUnit4ClassRunner.class)</span><br><span class="line"><span class="meta">@ContextConfiguration</span>(locations = &#123;<span class="string">"classpath*:applicationContext.xml"</span>&#125;)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TemplateTransactionTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 使用配置文件中的jdbc模板</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> JdbcTemplate jdbcTemplate;</span><br><span class="line">    <span class="comment">// DataSourceTransaction是platformTransactionManager接口的实现类</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> TransactionTemplate transactionTemplate;</span><br><span class="line"></span><br><span class="line">    String message = <span class="string">""</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test01</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">// 以匿名内部类的方式实现TransactionCallback接口,使用默认的事务提交和回滚规则</span></span><br><span class="line">        <span class="comment">// 在业务代码中不需要显式调用任何事务处理的api</span></span><br><span class="line">        transactionTemplate.execute(<span class="keyword">new</span> TransactionCallback&lt;Object&gt;() &#123;</span><br><span class="line">            <span class="function"><span class="keyword">public</span> Object <span class="title">doInTransaction</span><span class="params">(TransactionStatus args0)</span></span>&#123;</span><br><span class="line">                String sql = <span class="string">"insert into custom(id, name, sex, money) values(?, ?, ?, ?)"</span>;</span><br><span class="line">                Object param[] = &#123;<span class="number">22</span>, <span class="string">"小红"</span>, <span class="string">"女"</span>, <span class="number">1200.0</span>&#125;;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    jdbcTemplate.update(sql, param);</span><br><span class="line">                    <span class="comment">// 添加相同主键的数据. 让事务回滚</span></span><br><span class="line">                    jdbcTemplate.update(sql, param);</span><br><span class="line">                    message = <span class="string">"执行成功, 没有回滚"</span>;</span><br><span class="line">                &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">                    message = <span class="string">"执行异常, 事务回滚"</span>;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> message;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        System.out.println(message);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="声明式事务管理"><a href="#声明式事务管理" class="headerlink" title="声明式事务管理"></a>声明式事务管理</h1><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Spring的声明式事务管理是通过AOP技术实现的事务管理, 其本质是对方法前后进行拦截, 然后在目标方法开始之前创建或者加入一个事务, 在执行完目标方法之后根据执行情况提交或者回滚事务</span><br><span class="line"></span><br><span class="line">声明式事务管理最大的优点是不需要通过编程的方法管理事务, 因而不需要在业务逻辑代码中掺杂事务处理的代码, 只需相关的事务规则声明便可以将事务规则应用到业务逻辑中. 通常情况下, 在开发中使用声明式事务处理不仅因为其简单, 更主要的是因为这样是的纯业务代码不被污染, 极大地方便了后期的代码维护. </span><br><span class="line"></span><br><span class="line">与编程式事务管理相比, 声明式事务管理唯一不足的地方是最细粒度只能作用到方法级别, 无法做到像编程式事务管理那样可以作用到代码块级别. 但即便有这样的需求, 也可以用过变通的方法进行解决, 例如可以将需要进行事务处理的代码块独立为方法等.</span><br><span class="line"></span><br><span class="line">Spring的声明式事务管理可以通过两种方式来实现, 一是基于XML的方式. 二是基于@Transactional注解的方式.</span><br></pre></td></tr></table></figure><hr><h2 id="基于XML方式的声明式事务管理"><a href="#基于XML方式的声明式事务管理" class="headerlink" title="基于XML方式的声明式事务管理"></a>基于XML方式的声明式事务管理</h2><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">基于XML方式的声明式事务管理是通过在配置文件中配置规则的相关的声明来实现的. Spring框架提供了tx命名空间来配置事务, 提供了&lt;tx:advice&gt;元素来配置事务的通知. 在配置&lt;tx:advice&gt;元素时一般需要指定id和transaction-manager属性, 其中id属性是配置文件中的唯一标识, transaction-manager属性指定事务管理器. 另外还需要&lt;tx:attributes&gt;子元素, 该子元素可配置多个&lt;tx:method&gt;子元素指定执行事务的细节.</span><br><span class="line"></span><br><span class="line">在&lt;tx:advice&gt;元素配置了事务的增强处理后就可以通过编写AOP配置让Spring自动对目标对象生成代理.</span><br></pre></td></tr></table></figure><h3 id="例子-2"><a href="#例子-2" class="headerlink" title="例子"></a>例子</h3><ul><li>需要用到的文件:<ul><li>实体类 Custom.java</li><li>dao层 CustomDao和CustomImpl</li><li>service层 CustomServiceImpl</li><li>测试类DeclarationTest</li><li>配置文件applicationContext.xml</li><li>jdbc.properties 见第一个例子</li></ul></li></ul><h4 id="Custom-java"><a href="#Custom-java" class="headerlink" title="Custom.java"></a>Custom.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.beans;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Repository;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Custom</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String sex;</span><br><span class="line">    <span class="keyword">private</span> Double money;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Custom</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getSex</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> sex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSex</span><span class="params">(String sex)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.sex = sex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Double <span class="title">getMoney</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> money;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMoney</span><span class="params">(Double money)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.money = money;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Custom&#123;"</span> +</span><br><span class="line">                <span class="string">"id="</span> + id +</span><br><span class="line">                <span class="string">", name='"</span> + name + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", sex='"</span> + sex + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", money="</span> + money +</span><br><span class="line">                <span class="string">'&#125;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="CustomDao"><a href="#CustomDao" class="headerlink" title="CustomDao"></a>CustomDao</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.lacknb.beans.Custom;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">CustomDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">addCustom</span><span class="params">(String sql, Object param[])</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">deletCustom</span><span class="params">(String sql, Object param[])</span></span>;</span><br><span class="line">    <span class="function">List&lt;Custom&gt; <span class="title">findAll</span><span class="params">(String sql)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">operation</span><span class="params">(Integer id1, Integer id2, Double money)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="CustomDaoImpl"><a href="#CustomDaoImpl" class="headerlink" title="CustomDaoImpl"></a>CustomDaoImpl</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.lacknb.beans.Custom;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.jdbc.core.BeanPropertyRowMapper;</span><br><span class="line"><span class="keyword">import</span> org.springframework.jdbc.core.JdbcTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.jdbc.core.RowMapper;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Repository;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomDaoImpl</span> <span class="keyword">implements</span> <span class="title">CustomDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> JdbcTemplate jdbcTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addCustom</span><span class="params">(String sql, Object[] param)</span> </span>&#123;</span><br><span class="line">        jdbcTemplate.update(sql, param);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deletCustom</span><span class="params">(String sql, Object[] param)</span> </span>&#123;</span><br><span class="line">        jdbcTemplate.update(sql, param);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Custom&gt; <span class="title">findAll</span><span class="params">(String sql)</span> </span>&#123;</span><br><span class="line">        RowMapper&lt;Custom&gt; rowMapper = <span class="keyword">new</span> BeanPropertyRowMapper&lt;Custom&gt;(Custom.class);</span><br><span class="line">        <span class="keyword">return</span> jdbcTemplate.query(sql, rowMapper);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//    顾客id1给id2转钱</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">operation</span><span class="params">(Integer id1, Integer id2, Double money)</span> </span>&#123;</span><br><span class="line">        String sql1 = <span class="string">"update custom set money = money - ? where id = ?"</span>;</span><br><span class="line">        String sql2 = <span class="string">"update custom set money = money + ? where id = ?"</span>;</span><br><span class="line">        jdbcTemplate.update(sql1, money, id1);</span><br><span class="line">        <span class="comment">// 这里制造异常,</span></span><br><span class="line"><span class="comment">//        int i = 1 / 0;</span></span><br><span class="line">        jdbcTemplate.update(sql2, money, id2);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="CustomService"><a href="#CustomService" class="headerlink" title="CustomService"></a>CustomService</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.lacknb.beans.Custom;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">CustomService</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function">List&lt;Custom&gt; <span class="title">findAll</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">operation</span><span class="params">(Integer id1, Integer id2, Double money)</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="CustomServiceImpl"><a href="#CustomServiceImpl" class="headerlink" title="CustomServiceImpl"></a>CustomServiceImpl</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.lacknb.beans.Custom;</span><br><span class="line"><span class="keyword">import</span> cn.lacknb.dao.CustomDao;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"><span class="keyword">import</span> org.springframework.transaction.annotation.Transactional;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="meta">@Transactional</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomServiceImpl</span> <span class="keyword">implements</span> <span class="title">CustomService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> CustomDao customDao;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        String sql = <span class="string">"insert into custom(id, name, sex, money) values(?, ?, ?, ?)"</span>;</span><br><span class="line">        Object param[] = &#123;<span class="number">1</span>, <span class="string">"张三"</span>, <span class="string">"女"</span>, <span class="number">1000.0</span>&#125;;</span><br><span class="line">        customDao.addCustom(sql, param);</span><br><span class="line">        <span class="comment">// 添加相同的主键, 由于事务的管理, 第一条数据也不会添加成功.</span></span><br><span class="line">        customDao.addCustom(sql, param);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Custom&gt; <span class="title">findAll</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> customDao.findAll(<span class="string">"select * from custom"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">operation</span><span class="params">(Integer id1, Integer id2, Double money)</span> </span>&#123;</span><br><span class="line">        customDao.operation(id1, id2, money);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="applicationContext-xml"><a href="#applicationContext-xml" class="headerlink" title="applicationContext.xml"></a>applicationContext.xml</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:tx</span>=<span class="string">"http://www.springframework.org/schema/tx"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">"http://www.springframework.org/schema/aop"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/tx</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/tx/spring-tx.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/aop</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/aop/spring-aop.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">"classpath*:jdbc.properties"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"cn.lacknb"</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    基于底层API的编程式管理--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    配置数据源--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"dataSource"</span> <span class="attr">class</span>=<span class="string">"com.alibaba.druid.pool.DruidDataSource"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClassName"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.driver&#125;"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.url&#125;"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.username&#125;"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.password&#125;"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--  为数据源缇添加事务管理器--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"txManager"</span> <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.datasource.DataSourceTransactionManager"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--    配置jdbc模板--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"jdbcTemplate"</span> <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.core.JdbcTemplate"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--这里的约束文件注意一下, 不要导入成xmlns:tx="http://www.springframework.org/schema/cache        http://www.springframework.org/schema/cache/spring-cache.xsd--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    编通知 声明事务--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tx:advice</span> <span class="attr">id</span>=<span class="string">"myAdvice"</span> <span class="attr">transaction-manager</span>=<span class="string">"txManager"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            表示任意方法--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"*"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tx:advice</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    编写aop, 让spring自动对目标对象生成代理, 需要使用aspect表达式--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        定义切入点, --&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        这里就是 设置事务管理的范围--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">"txPonintCut"</span> <span class="attr">expression</span>=<span class="string">"execution(* cn.lacknb.*.*.*(..))"</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        切面: 将切入点与通知关联--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">"myAdvice"</span> <span class="attr">pointcut-ref</span>=<span class="string">"txPonintCut"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li><p>配置解释</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--切面： 通知和顾问--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--注册平台事务管理器：---切面中的顾问--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"txManager"</span> <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.datasource.DataSourceTransactionManager"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">value</span>=<span class="string">"myDataSource"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 注册事务通知  ---编写顾问--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tx:advice</span> <span class="attr">id</span>=<span class="string">"txAdvice"</span> <span class="attr">transaction-manager</span>=<span class="string">"txManager"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 指定连接点  ---可以被增强的目标方法 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--这里可以直接填方法名, 可以填* 表示任意方法--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"方法名"</span> <span class="attr">isolation</span>=<span class="string">"DEFAULT"</span> <span class="attr">propagation</span>=<span class="string">"REQUIRED"</span> <span class="attr">rollback-for</span>=<span class="string">"Exception"</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--这里定义， 当发生异常的时候， 进行回滚--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"方法名"</span> <span class="attr">isolation</span>=<span class="string">"DEFAULT"</span> <span class="attr">propagation</span>=<span class="string">"REQUIRED"</span> <span class="attr">rollback-for</span>=<span class="string">"Exception"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tx:advice</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--aop的配置 ---织入顾问 advisor --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- '*..' 多级包  '..' 有或没有都可以 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">"txAdvice"</span> <span class="attr">pointcut</span>=<span class="string">"execution(void *..dao.*.*(..))"</span> </span></span><br><span class="line">&lt;/aop:config&gt;</span><br></pre></td></tr></table></figure></li></ul><h4 id="测试类"><a href="#测试类" class="headerlink" title="测试类"></a>测试类</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.lacknb.beans.Custom;</span><br><span class="line"><span class="keyword">import</span> cn.lacknb.service.CustomService;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> org.junit.runner.RunWith;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Repository;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.ContextConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.junit4.SpringJUnit4ClassRunner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="meta">@RunWith</span>(SpringJUnit4ClassRunner.class)</span><br><span class="line"><span class="meta">@ContextConfiguration</span>(locations = &#123;<span class="string">"classpath:applicationContext.xml"</span>&#125;)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DelaratinTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> CustomService customService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test01</span><span class="params">()</span></span>&#123;</span><br><span class="line">        customService.test();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test02</span><span class="params">()</span></span>&#123;</span><br><span class="line">        List&lt;Custom&gt; list = customService.findAll();</span><br><span class="line">        <span class="keyword">for</span> (Custom custom : list)&#123;</span><br><span class="line">            System.out.println(custom);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test03</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">// 顾客2 给 顾客3 转300元</span></span><br><span class="line">        customService.operation(<span class="number">3</span> ,<span class="number">2</span>, <span class="number">700.0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="基于-Transactional注解的声明式事务管理"><a href="#基于-Transactional注解的声明式事务管理" class="headerlink" title="基于@Transactional注解的声明式事务管理"></a>基于@Transactional注解的声明式事务管理</h2><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">@Transactional注解可以作用于接口、接口方法、类以及类的方法上. 当作用与类上时, 该类的所有public方法都将具有该类型的事务属性, 同时也可以在方法级别使用该注解来覆盖类级别的定义. 虽然@Transactional注解可以作用于接口、接口方法、类以及类的方法上, 但是Spring小组建议不要在接口或者方法上使用该注解, 因为它只有在使用基于接口的代理时才会生效.</span><br></pre></td></tr></table></figure><h3 id="例子-3"><a href="#例子-3" class="headerlink" title="例子"></a>例子</h3><h4 id="applicationContex-xml"><a href="#applicationContex-xml" class="headerlink" title="applicationContex.xml"></a>applicationContex.xml</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span> <span class="attr">xmlns:tx</span>=<span class="string">"http://www.springframework.org/schema/tx"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">"classpath*:jdbc.properties"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"cn.lacknb"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--    基于底层API的编程式管理--&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--    配置数据源--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"dataSource"</span> <span class="attr">class</span>=<span class="string">"com.alibaba.druid.pool.DruidDataSource"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClassName"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.driver&#125;"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.url&#125;"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.username&#125;"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.password&#125;"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--    配置jdbc模板--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"jdbcTemplate"</span> <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.core.JdbcTemplate"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--  为数据源缇添加事务管理器--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"txManager"</span> <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.datasource.DataSourceTransactionManager"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    为事务管理器注册注解驱动器--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tx:annotation-driven</span> <span class="attr">transaction-manager</span>=<span class="string">"txManager"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="CustomDaoImpl-1"><a href="#CustomDaoImpl-1" class="headerlink" title="CustomDaoImpl"></a>CustomDaoImpl</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.lacknb.beans.Custom;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.jdbc.core.BeanPropertyRowMapper;</span><br><span class="line"><span class="keyword">import</span> org.springframework.jdbc.core.JdbcTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.jdbc.core.RowMapper;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Repository;</span><br><span class="line"><span class="keyword">import</span> org.springframework.transaction.annotation.Transactional;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="meta">@Transactional</span></span><br><span class="line"><span class="comment">// 加上Transactional注解, 就可以指定这个类需要受spring的事务管理</span></span><br><span class="line"><span class="comment">// 注意添加Transactional只能针对public属性范围内的方法添加</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomDaoImpl</span> <span class="keyword">implements</span> <span class="title">CustomDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> JdbcTemplate jdbcTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addCustom</span><span class="params">(String sql, Object[] param)</span> </span>&#123;</span><br><span class="line">        jdbcTemplate.update(sql, param);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deletCustom</span><span class="params">(String sql, Object[] param)</span> </span>&#123;</span><br><span class="line">        jdbcTemplate.update(sql, param);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Custom&gt; <span class="title">findAll</span><span class="params">(String sql)</span> </span>&#123;</span><br><span class="line">        RowMapper&lt;Custom&gt; rowMapper = <span class="keyword">new</span> BeanPropertyRowMapper&lt;Custom&gt;(Custom.class);</span><br><span class="line">        <span class="keyword">return</span> jdbcTemplate.query(sql, rowMapper);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//    顾客id1给id2转钱</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">operation</span><span class="params">(Integer id1, Integer id2, Double money)</span> </span>&#123;</span><br><span class="line">        String sql1 = <span class="string">"update custom set money = money - ? where id = ?"</span>;</span><br><span class="line">        String sql2 = <span class="string">"update custom set money = money + ? where id = ?"</span>;</span><br><span class="line">        jdbcTemplate.update(sql1, money, id1);</span><br><span class="line">        <span class="comment">// 这里制造异常,</span></span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">1</span> / <span class="number">0</span>;</span><br><span class="line">        jdbcTemplate.update(sql2, money, id2);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="CustomServiceImpl-1"><a href="#CustomServiceImpl-1" class="headerlink" title="CustomServiceImpl"></a>CustomServiceImpl</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.lacknb.beans.Custom;</span><br><span class="line"><span class="keyword">import</span> cn.lacknb.dao.CustomDao;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"><span class="keyword">import</span> org.springframework.transaction.annotation.Transactional;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="meta">@Transactional</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomServiceImpl</span> <span class="keyword">implements</span> <span class="title">CustomService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> CustomDao customDao;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        String sql = <span class="string">"insert into custom(id, name, sex, money) values(?, ?, ?, ?)"</span>;</span><br><span class="line">        Object param[] = &#123;<span class="number">1</span>, <span class="string">"张三"</span>, <span class="string">"女"</span>, <span class="number">1000.0</span>&#125;;</span><br><span class="line">        customDao.addCustom(sql, param);</span><br><span class="line">        <span class="comment">// 添加相同的主键, 由于事务的管理, 第一条数据也不会添加成功.</span></span><br><span class="line">        customDao.addCustom(sql, param);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Custom&gt; <span class="title">findAll</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> customDao.findAll(<span class="string">"select * from custom"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">operation</span><span class="params">(Integer id1, Integer id2, Double money)</span> </span>&#123;</span><br><span class="line">        customDao.operation(id1, id2, money);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="事务的隔离级别-—-isolation"><a href="#事务的隔离级别-—-isolation" class="headerlink" title="事务的隔离级别   — isolation"></a>事务的隔离级别 — isolation</h3><table><thead><tr><th>隔离级别</th><th>含义</th><th>脏读</th><th>不可重复读</th><th>幻读</th></tr></thead><tbody><tr><td>TransactionDefinition.ISOLATION_DEFAULT</td><td>使用后端数据库默认的隔离级别</td><td></td><td></td><td></td></tr><tr><td>TransactionDefinition.ISOLATION_READ_UNCOMMITTED</td><td>允许读取尚未提交的数据变更(最低的隔离级别)</td><td>是</td><td>是</td><td>是</td></tr><tr><td>TransactionDefinition.ISOLATION_READ_COMMITTED</td><td>允许读取并发事务已经提交的数据</td><td>否</td><td>是</td><td>是</td></tr><tr><td>TransactionDefinition.ISOLATION_REPEATABLE_READ</td><td>对同一字段的多次读取结果都是一致的，除非数据是被本身事务自己所修改</td><td>否</td><td>否</td><td>是</td></tr><tr><td>TransactionDefinition.ISOLATION_SERIALIZABLE</td><td>最高的隔离级别，完全服从ACID的隔离级别，也是最慢的事务隔离级别，因为它通常是通过完全锁定事务相关的数据库表来实现的</td><td>否</td><td>否</td><td>否</td></tr></tbody></table><blockquote><p>​ ISOLATION_SERIALIZABLE 隔离规则类型在开发中很少用到。举个很简单的例子。咱们使用了ISOLATION_SERIALIZABLE规则。A,B两个事务操作同一个数据表并发过来了。A先执行。A事务这个时候会把表给锁住，B事务执行的时候直接报错。</p></blockquote><h2 id="发生异常-什么时候-声明式事务不会回滚"><a href="#发生异常-什么时候-声明式事务不会回滚" class="headerlink" title="发生异常, 什么时候, 声明式事务不会回滚?"></a>发生异常, 什么时候, 声明式事务不会回滚?</h2><p>​ 如果开发者在代码逻辑汇总加入try…catch语句, Spring不能在声明式事务处理中正常得到事务回滚的异常信息.</p><!-- rebuild by neat -->]]></content>
      
      
      <categories>
          
          <category> spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> spring </tag>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用spring的jdbc-Template学习</title>
      <link href="/2019/10/31/%E4%BD%BF%E7%94%A8spring%E7%9A%84jdbc-Template%E5%AD%A6%E4%B9%A0/"/>
      <url>/2019/10/31/%E4%BD%BF%E7%94%A8spring%E7%9A%84jdbc-Template%E5%AD%A6%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<!-- build time:Tue Dec 31 2019 09:54:11 GMT+0800 (CST) --><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spring的jdbc_template的入门例子</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="数据源"><a href="#数据源" class="headerlink" title="数据源"></a>数据源</h2><p><code>具体配置见applicationContext.xml</code></p><h3 id="c3p0数据源"><a href="#c3p0数据源" class="headerlink" title="c3p0数据源"></a>c3p0数据源</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.mchange<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>c3p0<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.9.5.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="Druid数据源"><a href="#Druid数据源" class="headerlink" title="Druid数据源"></a>Druid数据源</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.10<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li><p>导入jar</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.0.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>导入mysql驱动</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.43<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>数据库</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`user`</span> (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  <span class="string">`username`</span> <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`password`</span> <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`address`</span> <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> AUTO_INCREMENT=<span class="number">7</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8mb4;</span><br></pre></td></tr></table></figure></li></ul><ul><li><p>配置数据源</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    配置数据源--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"springDataSource"</span> <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.datasource.DriverManagerDataSource"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--       数据库驱动 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClassName"</span> <span class="attr">value</span>=<span class="string">"com.mysql.jdbc.Driver"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"jdbc:mysql:///jdbc_template"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"root"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"123456"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--    配置Druid数据源--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"druidDataSource"</span> <span class="attr">class</span>=<span class="string">"com.alibaba.druid.pool.DruidDataSource"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--       数据库驱动 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClassName"</span> <span class="attr">value</span>=<span class="string">"com.mysql.jdbc.Driver"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"jdbc:mysql:///jdbc_template"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"root"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"123456"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--    配置c3p0数据源--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"c3p0DataSource"</span> <span class="attr">class</span>=<span class="string">"com.mchange.v2.c3p0.ComboPooledDataSource"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--       数据库驱动 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClass"</span> <span class="attr">value</span>=<span class="string">"com.mysql.jdbc.Driver"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jdbcUrl"</span> <span class="attr">value</span>=<span class="string">"jdbc:mysql:///jdbc_template"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"user"</span> <span class="attr">value</span>=<span class="string">"root"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"123456"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    配置jdbc模板--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"jdbcTemplate"</span> <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.core.JdbcTemplate"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"c3p0DataSource"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"user"</span> <span class="attr">class</span>=<span class="string">"cn.lacknb.beans.User"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">index</span>=<span class="string">"0"</span> <span class="attr">value</span>=<span class="string">"test01"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">index</span>=<span class="string">"1"</span> <span class="attr">value</span>=<span class="string">"123456"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">index</span>=<span class="string">"2"</span> <span class="attr">value</span>=<span class="string">"安阳师范学院老校区"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"userDao"</span> <span class="attr">class</span>=<span class="string">"cn.lacknb.dao.UserDaoImpl"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jdbcTemplate"</span> <span class="attr">ref</span>=<span class="string">"jdbcTemplate"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"service"</span> <span class="attr">class</span>=<span class="string">"cn.lacknb.service.UserServiceImpl"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"userDao"</span> <span class="attr">ref</span>=<span class="string">"userDao"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>User.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.beans;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> String address;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">(String username, String password, String address)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.username = username;</span><br><span class="line">        <span class="keyword">this</span>.password = password;</span><br><span class="line">        <span class="keyword">this</span>.address = address;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getUsername</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUsername</span><span class="params">(String username)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.username = username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getPassword</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPassword</span><span class="params">(String password)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.password = password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getAddress</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> address;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAddress</span><span class="params">(String address)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.address = address;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"User&#123;"</span> +</span><br><span class="line">                <span class="string">"id="</span> + id +</span><br><span class="line">                <span class="string">", username='"</span> + username + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", password='"</span> + password + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", address='"</span> + address + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">'&#125;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>UserDao.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.lacknb.beans.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">addUser</span><span class="params">(User user)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">deleteUser</span><span class="params">(Integer id)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">updateUser</span><span class="params">(User user)</span></span>;</span><br><span class="line">    <span class="function">User <span class="title">find</span><span class="params">(Integer id)</span></span>;</span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">findAll</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>UserImpl.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.lacknb.beans.User;</span><br><span class="line"><span class="keyword">import</span> org.springframework.jdbc.core.BeanPropertyRowMapper;</span><br><span class="line"><span class="keyword">import</span> org.springframework.jdbc.core.JdbcTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.jdbc.core.RowMapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDaoImpl</span> <span class="keyword">implements</span> <span class="title">UserDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> JdbcTemplate jdbcTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setJdbcTemplate</span><span class="params">(JdbcTemplate jdbcTemplate)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.jdbcTemplate = jdbcTemplate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">addUser</span><span class="params">(User user)</span> </span>&#123;</span><br><span class="line">        String sql = <span class="string">"insert into user(username, password, address) values(?, ?, ?)"</span>;</span><br><span class="line">        <span class="keyword">return</span> jdbcTemplate.update(sql, user.getUsername(), user.getPassword(), user.getAddress());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">deleteUser</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">        String sql = <span class="string">"delete from user where id=?"</span>;</span><br><span class="line">        <span class="keyword">return</span> jdbcTemplate.update(sql, id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">updateUser</span><span class="params">(User user)</span> </span>&#123;</span><br><span class="line">        String sql = <span class="string">"update user set username=?, password=?, address=? where id = ?"</span>;</span><br><span class="line">        <span class="keyword">return</span> jdbcTemplate.update(sql, user.getUsername(), user.getPassword(), user.getAddress(), user.getId());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">find</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">        String sql = <span class="string">"select * from user where id = ?"</span>;</span><br><span class="line">        RowMapper&lt;User&gt; rowMapper = <span class="keyword">new</span> BeanPropertyRowMapper&lt;User&gt;(User.class);</span><br><span class="line">        <span class="keyword">return</span> (User) jdbcTemplate.queryForObject(sql, rowMapper, id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">findAll</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        String sql = <span class="string">"select * from user"</span>;</span><br><span class="line">        RowMapper&lt;User&gt; rowMapper = <span class="keyword">new</span> BeanPropertyRowMapper&lt;User&gt;(User.class);</span><br><span class="line">        <span class="keyword">return</span> jdbcTemplate.query(sql, rowMapper);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>UserService.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.lacknb.beans.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">addUser</span><span class="params">(User user)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">deleteUser</span><span class="params">(Integer id)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">updateUser</span><span class="params">(User user)</span></span>;</span><br><span class="line">    <span class="function">User <span class="title">find</span><span class="params">(Integer id)</span></span>;</span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">findAll</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>UserServiceImpl.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.lacknb.beans.User;</span><br><span class="line"><span class="keyword">import</span> cn.lacknb.dao.UserDaoImpl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> UserDaoImpl userDao;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUserDao</span><span class="params">(UserDaoImpl userDao)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.userDao = userDao;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">addUser</span><span class="params">(User user)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userDao.addUser(user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">deleteUser</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userDao.deleteUser(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">updateUser</span><span class="params">(User user)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userDao.updateUser(user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">find</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userDao.find(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">findAll</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userDao.findAll();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>MyTest.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.lacknb.beans.User;</span><br><span class="line"><span class="keyword">import</span> cn.lacknb.service.UserServiceImpl;</span><br><span class="line"><span class="keyword">import</span> org.junit.Before;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    ApplicationContext context;</span><br><span class="line">    UserServiceImpl service;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Before</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">before</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        context = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"applicationContext.xml"</span>);</span><br><span class="line">        service = (UserServiceImpl) context.getBean(<span class="string">"service"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="comment">// 添加用户</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        User user = (User) context.getBean(<span class="string">"user"</span>);</span><br><span class="line">        System.out.println(<span class="string">"改变的行数为: "</span> + service.addUser(user));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 删除用户</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test02</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 删除主键为1的用户</span></span><br><span class="line">        System.out.println(<span class="string">"影响的行数: "</span> + service.deleteUser(<span class="number">1</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 修改用户</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test03</span><span class="params">()</span></span>&#123;</span><br><span class="line">        User user = (User) context.getBean(<span class="string">"user"</span>);</span><br><span class="line">        <span class="comment">// 修改2号 的 username 为张三</span></span><br><span class="line">        user = service.find(<span class="number">2</span>);</span><br><span class="line">        user.setUsername(<span class="string">"张三"</span>);</span><br><span class="line">        System.out.println(<span class="string">"影响的行数为: "</span> + service.updateUser(user));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 查询一个用户</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test04</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">// 查找2号用户</span></span><br><span class="line">        User user = service.find(<span class="number">2</span>);</span><br><span class="line">        System.out.println(user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 查找所有用户</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test05</span><span class="params">()</span></span>&#123;</span><br><span class="line">        List&lt;User&gt; list = service.findAll();</span><br><span class="line">        <span class="keyword">for</span> (User user : list)&#123;</span><br><span class="line">            System.out.println(user);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><!-- rebuild by neat -->]]></content>
      
      
      <categories>
          
          <category> spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> spring </tag>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring-AOP学习之（二）</title>
      <link href="/2019/10/31/Spring-AOP%E5%AD%A6%E4%B9%A0%E4%B9%8B%EF%BC%88%E4%BA%8C%EF%BC%89/"/>
      <url>/2019/10/31/Spring-AOP%E5%AD%A6%E4%B9%A0%E4%B9%8B%EF%BC%88%E4%BA%8C%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<!-- build time:Tue Dec 31 2019 09:54:11 GMT+0800 (CST) --><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">基于注解方式实现AOP以及例子</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="基于xml实现"><a href="#基于xml实现" class="headerlink" title="基于xml实现"></a>基于xml实现</h2><p>切入点表达式： execution (返回值类型 全限定方法名 方法是否含参数)</p><ul><li>获取目标方法的返回值</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">aop:after-returning</span> <span class="attr">method</span>=<span class="string">"afterReturning"</span> <span class="attr">pointcut-ref</span>=<span class="string">"mycut"</span> <span class="attr">returning</span>=<span class="string">"res"</span>/&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterReturning</span><span class="params">(Object res)</span></span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"这是目标方法执行后的返回值"</span> + res);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>修改目标方法的返回值 - -环绕通知</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Object <span class="title">around</span><span class="params">(ProceedingJoinPoint pjp)</span> throw Throwable</span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 执行目标方法 并获取返回值proceed</span></span><br><span class="line">    Object proceed = pjp.proceed();</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 修改返回结果</span></span><br><span class="line">    <span class="keyword">if</span> (proceed != <span class="keyword">null</span>)&#123;</span><br><span class="line">         <span class="keyword">return</span> proceed + <span class="string">"测试"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><img src="https://s2.ax1x.com/2019/10/31/K5LulQ.png" alt="K5LulQ.png"></p><p><img src="https://s2.ax1x.com/2019/10/31/K5LnSg.png" alt="K5LnSg.png"></p><p><img src="https://s2.ax1x.com/2019/10/31/K5LVFf.png" alt="K5LVFf.png"></p><h2 id="基于注解实现"><a href="#基于注解实现" class="headerlink" title="基于注解实现"></a>基于注解实现</h2><p><img src="https://s2.ax1x.com/2019/10/31/K5XMaq.png" alt="K5XMaq.png"></p><ul><li>定义切入点表达式</li></ul><p><img src="https://s2.ax1x.com/2019/10/31/K5Xdd1.png" alt="K5Xdd1.png"></p><ul><li>引用切入点表达式</li></ul><p><img src="https://s2.ax1x.com/2019/10/31/K5XwIx.png" alt></p><blockquote><p>‘value = ‘ 可以省略</p></blockquote><p><img src="https://s2.ax1x.com/2019/10/31/K5X4FP.png" alt="K5X4FP.png"></p><h2 id="例子-–-xml-注解"><a href="#例子-–-xml-注解" class="headerlink" title="例子 – xml + 注解"></a>例子 – xml + 注解</h2><ul><li><p>MyAspect.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.aspect;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 切面类</span></span><br><span class="line"><span class="comment">* 在此类中编写各种类型的通知</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.JoinPoint;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.ProceedingJoinPoint;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.*;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="comment">// 这里的 Component如果不写, 增强方法会不执行</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyAspect</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    * 前置通知</span></span><br><span class="line"><span class="comment">    * 使用JoinPoint接口作为参数获得目标对象信息</span></span><br><span class="line"><span class="comment">    * */</span></span><br><span class="line">    <span class="meta">@Before</span>(value = <span class="string">"execution(* cn.lacknb.dao.TestDaoImpl.save())"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">before</span><span class="params">(JoinPoint jp)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"前置通知: 执行保存"</span>);</span><br><span class="line">        System.out.println(<span class="string">"目标对象: "</span> + jp.getTarget()</span><br><span class="line">        + <span class="string">"被增强处理的方法:"</span> + jp.getSignature().getName());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    * 后置返回通知</span></span><br><span class="line"><span class="comment">    * */</span></span><br><span class="line">    <span class="comment">// 引用 切入点表达式</span></span><br><span class="line">    <span class="meta">@AfterReturning</span>(<span class="string">"doAll()"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterReturning</span><span class="params">(JoinPoint jp)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"后置返回通知:"</span> + <span class="string">" 模拟删除临时文件"</span>);</span><br><span class="line">        System.out.println(<span class="string">"被增强处理的方法: "</span> + jp.getSignature().getName());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 这里的value要与 接收的参数名保持一致</span></span><br><span class="line">    <span class="meta">@AfterReturning</span>(value = <span class="string">"doAll()"</span>, returning = <span class="string">"value"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterReturning2</span><span class="params">(Object value)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"获取的值为: "</span> + value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 配置 切入点表达式</span></span><br><span class="line">    <span class="meta">@Pointcut</span>(<span class="string">"execution(* cn.lacknb.dao.TestDaoImpl.*())"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doAll</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    * 环绕通知</span></span><br><span class="line"><span class="comment">    * */</span></span><br><span class="line">    <span class="meta">@Around</span>(<span class="string">"execution(* cn.lacknb.dao.TestDaoImpl.modifyValue())"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">around</span><span class="params">(ProceedingJoinPoint pjp)</span> <span class="keyword">throws</span> Throwable</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"环绕开始: 执行目标方法之前"</span>);</span><br><span class="line">        <span class="comment">// 执行目标方法, 获取返回值</span></span><br><span class="line">        Object obj = pjp.proceed();</span><br><span class="line">        System.out.println(<span class="string">"环绕结束: 执行目标方法之后"</span>);</span><br><span class="line">        <span class="keyword">if</span> (obj != <span class="keyword">null</span>)&#123;</span><br><span class="line">            obj = obj.toString().toUpperCase();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> obj;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    * 异常通知</span></span><br><span class="line"><span class="comment">    * */</span></span><br><span class="line">    <span class="meta">@AfterThrowing</span>(value = <span class="string">"doAll()"</span>, throwing = <span class="string">"e"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">except</span><span class="params">(Throwable e)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"异常通知: "</span> + <span class="string">"程序执行异常"</span> + e.getMessage());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    * 后置最终通知</span></span><br><span class="line"><span class="comment">    * */</span></span><br><span class="line">    <span class="meta">@After</span>(<span class="string">"doAll()"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">after</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"(无论是否异常,都会执行这个方法)最终通知: 模拟释放资源"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>TestDao.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">TestDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">modify</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function">String <span class="title">returnValue</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function">String <span class="title">modifyValue</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">except</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>TestDaoImpl.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span>(<span class="string">"testDao"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDaoImpl</span> <span class="keyword">implements</span> <span class="title">TestDao</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"保存"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">modify</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"修改"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"删除"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">returnValue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"截取目标方法的返回值"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">modifyValue</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"lowcasetouppercase"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">except</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">        <span class="keyword">int</span> num = <span class="number">1</span>;</span><br><span class="line"><span class="comment">//        num = 4 / 0;</span></span><br><span class="line">        System.out.println(<span class="string">"except方法执行: "</span> + num);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>applicationContext.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="attr">xmlns:aop</span>=<span class="string">"http://www.springframework.org/schema/aop"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--       扫描指定包下的所有的类 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"cn.lacknb"</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--设置切面自动扫描代理--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:aspectj-autoproxy</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>MyTest.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.lacknb.dao.TestDao;</span><br><span class="line"><span class="keyword">import</span> org.junit.Before;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    ApplicationContext context = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Before</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">before</span><span class="params">()</span></span>&#123;</span><br><span class="line">        context = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"applicationContext.xml"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test01</span><span class="params">()</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">        TestDao test = (TestDao) context.getBean(<span class="string">"testDao"</span>);</span><br><span class="line">        test.save();</span><br><span class="line">        test.delete();</span><br><span class="line">        test.modify();</span><br><span class="line">        System.out.println(test.returnValue());</span><br><span class="line">        System.out.println(test.modifyValue());</span><br><span class="line">        test.except();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><!-- rebuild by neat -->]]></content>
      
      
      <categories>
          
          <category> spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> spring </tag>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring基于XML配置的AOP实现</title>
      <link href="/2019/10/29/Untitled/"/>
      <url>/2019/10/29/Untitled/</url>
      
        <content type="html"><![CDATA[<!-- build time:Tue Dec 31 2019 09:54:11 GMT+0800 (CST) --><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">基于xml配置的aop实现以及例子</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="通知类型"><a href="#通知类型" class="headerlink" title="通知类型"></a>通知类型</h2><ol><li>环绕通知（around）<ul><li>环绕通知是在<strong>目标方法执行前和执行后</strong>实施增强，可用于日志记录、事务处理等功能。</li><li><code>&lt;aop:around&gt;</code>， <code>&lt;aop:aspect&gt;</code>元素的子元素，属性method指定环绕通知方法，属性pointcut-ref指定关联的切入点。</li></ul></li><li>前置通知（before）<ul><li>是在目标方法执行前实施增强，可应用于权限管理等功能。</li><li><code>&lt;aop:before&gt;</code>, 属性method指定前置通知方法，属性pointcut-ref指定关联的切入点。</li></ul></li><li>后置返回通知（afterReturning）<ul><li>是在方法目标方法执行成功后实施增强，可应用于关闭流、删除临时文件等功能。</li><li><code>&lt;aop:after-returning&gt;</code>, 属性method指定后置返回通知方法，属性pointcut-ref指定关联的切入点。</li></ul></li><li>后置（最终）通知（after）<ul><li>在目标方法执行后实施增强，与后置返回通知不同的是，不管是否发生异常都要执行该类的通知，该类的通知可应用于释放资源。</li><li><code>&lt;aop:after&gt;</code>, 属性method指定后置（最终）通知，属性pointcut-ref指定关联的切入点。</li></ul></li><li>异常通知 （afterThrowing）<ul><li>是在方法抛出异常后实施增强，可应用于处理异常、记录日志等功能。</li><li><code>&lt;aop:after-throwing&gt;</code>, 属性method指定异常通知 ，属性pointcut-ref指定关联的切入点。</li></ul></li><li>引入通知<ul><li>是在目标类中添加一些新的方法和属性，可应用于修改目标类（增强类）</li><li><code>&lt;aop:declare-parents&gt;</code>， 给通知引入新的额外接口，增强功能。（不要求掌握）</li></ul></li></ol><h2 id="导入相关jar包"><a href="#导入相关jar包" class="headerlink" title="导入相关jar包"></a>导入相关jar包</h2><ul><li><p>Spring-aspects-5.0.2.release.jar</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-aspects --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-aspects<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.0.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>aspectjweaver-1.8.13.jar</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.aspectj/aspectjweaver --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.aspectj<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aspectjweaver<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.9.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h2><h3 id="maven的依赖坐标"><a href="#maven的依赖坐标" class="headerlink" title="maven的依赖坐标"></a>maven的依赖坐标</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">  <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--      &lt;scope&gt;test&lt;/scope&gt;--&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-core --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-beans --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-beans<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-context --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-expression<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- https://mvnrepository.com/artifact/aopalliance/aopalliance --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>aopalliance<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aopalliance<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-aspects --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-aspects<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.0.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.aspectj<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aspectjweaver<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.9.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="创建切面类"><a href="#创建切面类" class="headerlink" title="创建切面类"></a>创建切面类</h3><ul><li><p>MyAspect.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.aspect;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.JoinPoint;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.ProceedingJoinPoint;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 切面类</span></span><br><span class="line"><span class="comment"> * 在此类中编写各种类型的通知</span></span><br><span class="line"><span class="comment"> * */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyAspect</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 前置通知，使用JoinPonit接口作为参数获得目标对象信息</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">before</span><span class="params">(JoinPoint jp)</span></span>&#123;</span><br><span class="line">System.out.println(<span class="string">"前置通知：模拟权限控制"</span>);</span><br><span class="line">System.out.println(<span class="string">"，目标对象："</span> + jp.getTarget()</span><br><span class="line">+ <span class="string">"，被增强处理的方法："</span> + jp.getSignature().getName());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 后置返回通知</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterReturning</span><span class="params">(JoinPoint jp)</span></span>&#123;</span><br><span class="line">System.out.println(<span class="string">"后置返回通知："</span> + <span class="string">"模拟删除临时文件"</span>);</span><br><span class="line">System.out.println(<span class="string">"，被增强处理的方法: "</span> + jp.getSignature().getName());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 环绕通知</span></span><br><span class="line"><span class="comment"> * ProceedingJoinPoint是JoinPoint的子接口，代表可以执行的目标方法</span></span><br><span class="line"><span class="comment"> * 返回值的类型必须是Object</span></span><br><span class="line"><span class="comment"> * 必须一个参数是ProceedingJoinPoint类型</span></span><br><span class="line"><span class="comment"> * 必须throws Throwable</span></span><br><span class="line"><span class="comment"> * */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Object <span class="title">around</span><span class="params">(ProceedingJoinPoint pjp)</span> <span class="keyword">throws</span> Throwable</span>&#123;</span><br><span class="line"><span class="comment">// 开始</span></span><br><span class="line">System.out.println(<span class="string">"环绕开始：执行目标在前，模拟开启事务"</span>);</span><br><span class="line"><span class="comment">// 执行当前目标方法</span></span><br><span class="line">Object obj = pjp.proceed();</span><br><span class="line"><span class="comment">// 结束</span></span><br><span class="line">System.out.println(<span class="string">"环绕结束：执行目标方法后，模拟关闭事务"</span>);</span><br><span class="line"><span class="keyword">return</span> obj;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 异常通知</span></span><br><span class="line"><span class="comment"> * */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">except</span><span class="params">(Throwable e)</span></span>&#123;</span><br><span class="line">System.out.println(<span class="string">"异常通知："</span> + <span class="string">"程序执行异常"</span> + e.getMessage());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 后置最终通知</span></span><br><span class="line"><span class="comment"> * */</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">after</span><span class="params">()</span></span>&#123;</span><br><span class="line">System.out.println(<span class="string">"最终通知：模拟释放资源"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="创建接口和实现方法"><a href="#创建接口和实现方法" class="headerlink" title="创建接口和实现方法"></a>创建接口和实现方法</h3><ul><li><p>TestDao.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">TestDao</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">modify</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>TestDaoImpl.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDaoImpl</span> <span class="keyword">implements</span> <span class="title">TestDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span></span>&#123;</span><br><span class="line">System.out.println(<span class="string">"保存"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">modify</span><span class="params">()</span></span>&#123;</span><br><span class="line">System.out.println(<span class="string">"修改"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">()</span></span>&#123;</span><br><span class="line">System.out.println(<span class="string">"删除"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="创建额配置文件，并编写相关配置"><a href="#创建额配置文件，并编写相关配置" class="headerlink" title="创建额配置文件，并编写相关配置"></a>创建额配置文件，并编写相关配置</h3><ul><li><p>applicationContext.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">"http://www.springframework.org/schema/aop"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"</span></span></span><br><span class="line"><span class="tag"><span class="string">          http://www.springframework.org/schema/beans    </span></span></span><br><span class="line"><span class="tag"><span class="string">          http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">          http://www.springframework.org/schema/aop</span></span></span><br><span class="line"><span class="tag"><span class="string">          http://www.springframework.org/schema/aop/spring-aop.xsd"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- bean definitions here --&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="comment">&lt;!-- 定义目标对象 --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"testDao"</span> <span class="attr">class</span>=<span class="string">"cn.lacknb.dao.TestDaoImpl"</span>/&gt;</span></span><br><span class="line"> <span class="comment">&lt;!-- 定义切面 --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"myAspect"</span> <span class="attr">class</span>=<span class="string">"cn.lacknb.aspect.MyAspect"</span>/&gt;</span></span><br><span class="line"> <span class="comment">&lt;!-- aop配置 --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!-- 配置切面 --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">aop:aspect</span> <span class="attr">ref</span>=<span class="string">"myAspect"</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!-- 配置切入点，通知增强哪些方法 --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">expression</span>=<span class="string">"execution(* cn.lacknb.dao.*.*(..))"</span> <span class="attr">id</span>=<span class="string">"myPointcut"</span>/&gt;</span></span><br><span class="line"> <span class="comment">&lt;!-- 将通知于切入点关联 --&gt;</span></span><br><span class="line"> <span class="comment">&lt;!-- 关联前置通知 --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">aop:before</span> <span class="attr">method</span>=<span class="string">"before"</span> <span class="attr">pointcut-ref</span>=<span class="string">"myPointcut"</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">aop:aspect</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="创建测试类"><a href="#创建测试类" class="headerlink" title="创建测试类"></a>创建测试类</h3><ul><li><p>MyTest.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.junit.Before;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.lacknb.dao.TestDao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">ApplicationContext context = <span class="keyword">null</span>;</span><br><span class="line"><span class="meta">@Before</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line">context = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"applicationContext.xml"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test01</span><span class="params">()</span></span>&#123;</span><br><span class="line">TestDao test = (TestDao) context.getBean(<span class="string">"testDao"</span>);</span><br><span class="line">test.save();</span><br><span class="line">test.delete();</span><br><span class="line">test.modify();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="前置通知测试"><a href="#前置通知测试" class="headerlink" title="前置通知测试"></a>前置通知测试</h3><p><img src="https://s2.ax1x.com/2019/10/29/K2QCOP.png" alt="K2QCOP.png"></p><h3 id="后置返回通知"><a href="#后置返回通知" class="headerlink" title="后置返回通知"></a>后置返回通知</h3><ul><li><p>xml文件</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 关联后置返回通知，在目标方法成功执行后执行 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:after-returning</span> <span class="attr">method</span>=<span class="string">"afterReturning"</span> <span class="attr">pointcut-ref</span>=<span class="string">"myPointcut"</span>/&gt;</span></span><br></pre></td></tr></table></figure></li></ul><p><img src="https://s2.ax1x.com/2019/10/29/K2QU61.png" alt="K2QU61.png"></p><h3 id="关联环绕通知"><a href="#关联环绕通知" class="headerlink" title="关联环绕通知"></a>关联环绕通知</h3><ul><li><p>xml文件</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 关联环绕通知 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:around</span> <span class="attr">method</span>=<span class="string">"around"</span> <span class="attr">pointcut-ref</span>=<span class="string">"myPointcut"</span>/&gt;</span></span><br></pre></td></tr></table></figure></li></ul><ul><li><p>结果</p><p><img src="https://s2.ax1x.com/2019/10/29/K2Qcpd.png" alt="K2Qcpd.png"></p></li></ul><h3 id="关联异常通知"><a href="#关联异常通知" class="headerlink" title="关联异常通知"></a>关联异常通知</h3><ul><li><p>xml文件</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 关联异常通知，没有异常发生时将不会执行增强， throwing属性设置通知的第二个参数的名称 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:after-throwing</span> <span class="attr">method</span>=<span class="string">"except"</span> <span class="attr">pointcut-ref</span>=<span class="string">"myPointcut"</span> <span class="attr">throwing</span>=<span class="string">"e"</span>/&gt;</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="关联后置最终通知"><a href="#关联后置最终通知" class="headerlink" title="关联后置最终通知"></a>关联后置最终通知</h3><ul><li><p>xml文件</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 关联后置最终通知， 不管目标方法是否成功都要执行 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:after</span> <span class="attr">method</span>=<span class="string">"after"</span> <span class="attr">pointcut-ref</span>=<span class="string">"myPointcut"</span>/&gt;</span></span><br></pre></td></tr></table></figure></li></ul><ul><li><p>结果</p><p><img src="https://s2.ax1x.com/2019/10/29/K2licR.png" alt="K2licR.png"></p></li></ul><!-- rebuild by neat -->]]></content>
      
      
      <categories>
          
          <category> spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> spring </tag>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>linux端口映射工具</title>
      <link href="/2019/10/28/linux%E7%AB%AF%E5%8F%A3%E6%98%A0%E5%B0%84%E5%B7%A5%E5%85%B7/"/>
      <url>/2019/10/28/linux%E7%AB%AF%E5%8F%A3%E6%98%A0%E5%B0%84%E5%B7%A5%E5%85%B7/</url>
      
        <content type="html"><![CDATA[<!-- build time:Tue Dec 31 2019 09:54:11 GMT+0800 (CST) --><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">linux端口映射工具rinetd</span><br></pre></td></tr></table></figure><a id="more"></a><h1 id="linux下的端口映射工具rinetd"><a href="#linux下的端口映射工具rinetd" class="headerlink" title="linux下的端口映射工具rinetd"></a>linux下的端口映射工具rinetd</h1><p><strong>内容来自</strong>: <a href="https://www.cnblogs.com/zhangxun1/p/6438565.html" target="_blank" rel="noopener"><a href="https://www.cnblogs.com/zhangxun1/p/6438565.html" target="_blank" rel="noopener">https://www.cnblogs.com/zhangxun1/p/6438565.html</a></a></p><p>Linux下简单好用的工具rinetd，实现端口映射/转发/重定向<br>项目首页github: <a href="https://github.com/boutell/rinetd" target="_blank" rel="noopener">https://github.com/boutell/rinetd</a></p><ul><li><p>项目下载</p><p><code>git clone https://github.com/boutell/rinetd.git</code></p></li><li><p>解压安装</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">tar zxvf rinetd.tar.gz</span><br><span class="line"></span><br><span class="line">make</span><br><span class="line"></span><br><span class="line">make install</span><br></pre></td></tr></table></figure></li><li><p><code>遇到的错误</code></p><p><img src="https://s2.ax1x.com/2019/10/28/Kg3Puq.png" alt="Kg3Puq.png"></p><p><code>这里自己手动创建目录</code><br><code>mkdir /usr/man</code></p></li><li><p>编辑配置</p></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/rinetd.conf</span><br><span class="line"></span><br><span class="line">0.0.0.0 8080 172.19.94.3 8080</span><br><span class="line"></span><br><span class="line">0.0.0.0 2222 192.168.0.103 3389</span><br><span class="line"></span><br><span class="line">1.2.3.4 80     192.168.0.10 80</span><br></pre></td></tr></table></figure><p>说明一下（0.0.0.0表示本机绑定所有可用地址）<br>将所有发往本机8080端口的请求转发到172.19.94.3的8080端口<br>将所有发往本机2222端口的请求转发到192.168.0.103的3389端口<br>将所有发往1.2.3.4的80端口请求转发到192.168.0.10的80端口</p><p>命令格式是<br>bindaddress bindport connectaddress connectport<br>绑定的地址 绑定的端口 连接的地址 连接的端口<br>或<br>[Source Address] [Source Port] [Destination Address] [Destination Port]<br>源地址 源端口 目的地址 目的端口</p><ul><li>启动程序</li></ul><p><code>pkill rinetd ##关闭进程</code><br><code>rinetd -c /etc/rinetd.conf ##启动转发</code></p><ul><li>把这条命令加到/etc/rc.local里面就可以开机自动运行</li></ul><p>查看状态<br>netstat -antup</p><ul><li><p>需要注意</p><p>1.rinetd.conf中绑定的本机端口必须没有被其它程序占用<br>2.运行rinetd的系统防火墙应该打开绑定的本机端口<br>例如：<br>-A RH-Firewall-1-INPUT -m state –state NEW -m tcp -p tcp –dport 1111 -j ACCEPT<br>-A RH-Firewall-1-INPUT -m state –state NEW -m tcp -p tcp –dport 2222 -j ACCEPT</p></li></ul><!-- rebuild by neat -->]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> 端口映射 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Oracle数据库例题</title>
      <link href="/2019/10/28/Oracle%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BE%8B%E9%A2%98/"/>
      <url>/2019/10/28/Oracle%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BE%8B%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<!-- build time:Tue Dec 31 2019 09:54:11 GMT+0800 (CST) --><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">平时课本的的例题和课后题.</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="导入需要用的数据"><a href="#导入需要用的数据" class="headerlink" title="导入需要用的数据"></a>导入需要用的数据</h2><p><code>首先创建用户 zs</code></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br><span class="line">849</span><br><span class="line">850</span><br><span class="line">851</span><br><span class="line">852</span><br><span class="line">853</span><br><span class="line">854</span><br><span class="line">855</span><br><span class="line">856</span><br><span class="line">857</span><br><span class="line">858</span><br><span class="line">859</span><br><span class="line">860</span><br><span class="line">861</span><br><span class="line">862</span><br><span class="line">863</span><br><span class="line">864</span><br><span class="line">865</span><br><span class="line">866</span><br><span class="line">867</span><br><span class="line">868</span><br><span class="line">869</span><br><span class="line">870</span><br><span class="line">871</span><br><span class="line">872</span><br><span class="line">873</span><br><span class="line">874</span><br><span class="line">875</span><br><span class="line">876</span><br><span class="line">877</span><br><span class="line">878</span><br><span class="line">879</span><br><span class="line">880</span><br><span class="line">881</span><br><span class="line">882</span><br><span class="line">883</span><br><span class="line">884</span><br><span class="line">885</span><br><span class="line">886</span><br><span class="line">887</span><br><span class="line">888</span><br><span class="line">889</span><br><span class="line">890</span><br><span class="line">891</span><br><span class="line">892</span><br><span class="line">893</span><br><span class="line">894</span><br><span class="line">895</span><br><span class="line">896</span><br><span class="line">897</span><br><span class="line">898</span><br><span class="line">899</span><br><span class="line">900</span><br><span class="line">901</span><br><span class="line">902</span><br><span class="line">903</span><br><span class="line">904</span><br><span class="line">905</span><br><span class="line">906</span><br><span class="line">907</span><br><span class="line">908</span><br><span class="line">909</span><br><span class="line">910</span><br><span class="line">911</span><br><span class="line">912</span><br><span class="line">913</span><br><span class="line">914</span><br><span class="line">915</span><br><span class="line">916</span><br><span class="line">917</span><br><span class="line">918</span><br><span class="line">919</span><br><span class="line">920</span><br><span class="line">921</span><br><span class="line">922</span><br><span class="line">923</span><br><span class="line">924</span><br><span class="line">925</span><br><span class="line">926</span><br><span class="line">927</span><br><span class="line">928</span><br><span class="line">929</span><br><span class="line">930</span><br><span class="line">931</span><br><span class="line">932</span><br><span class="line">933</span><br><span class="line">934</span><br><span class="line">935</span><br><span class="line">936</span><br><span class="line">937</span><br><span class="line">938</span><br><span class="line">939</span><br><span class="line">940</span><br><span class="line">941</span><br><span class="line">942</span><br><span class="line">943</span><br><span class="line">944</span><br><span class="line">945</span><br><span class="line">946</span><br><span class="line">947</span><br><span class="line">948</span><br><span class="line">949</span><br><span class="line">950</span><br><span class="line">951</span><br><span class="line">952</span><br><span class="line">953</span><br><span class="line">954</span><br><span class="line">955</span><br><span class="line">956</span><br><span class="line">957</span><br><span class="line">958</span><br><span class="line">959</span><br><span class="line">960</span><br><span class="line">961</span><br><span class="line">962</span><br><span class="line">963</span><br><span class="line">964</span><br><span class="line">965</span><br><span class="line">966</span><br><span class="line">967</span><br><span class="line">968</span><br><span class="line">969</span><br><span class="line">970</span><br><span class="line">971</span><br><span class="line">972</span><br><span class="line">973</span><br><span class="line">974</span><br><span class="line">975</span><br><span class="line">976</span><br><span class="line">977</span><br><span class="line">978</span><br><span class="line">979</span><br><span class="line">980</span><br><span class="line">981</span><br><span class="line">982</span><br><span class="line">983</span><br><span class="line">984</span><br><span class="line">985</span><br><span class="line">986</span><br><span class="line">987</span><br><span class="line">988</span><br><span class="line">989</span><br><span class="line">990</span><br><span class="line">991</span><br><span class="line">992</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"><span class="comment">--  文件已创建 - 星期一-十月-28-2019   </span></span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"><span class="comment">--  DDL for Sequence DEPARTMENTS_SEQ</span></span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">   <span class="keyword">CREATE</span> <span class="keyword">SEQUENCE</span>  <span class="string">"ZS"</span>.<span class="string">"DEPARTMENTS_SEQ"</span>  <span class="keyword">MINVALUE</span> <span class="number">1</span> MAXVALUE <span class="number">9990</span> <span class="keyword">INCREMENT</span> <span class="keyword">BY</span> <span class="number">10</span> <span class="keyword">START</span> <span class="keyword">WITH</span> <span class="number">280</span> NOCACHE  <span class="keyword">NOORDER</span>  <span class="keyword">NOCYCLE</span>  NOPARTITION ;</span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"><span class="comment">--  DDL for Sequence EMPLOYEES_SEQ</span></span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">   <span class="keyword">CREATE</span> <span class="keyword">SEQUENCE</span>  <span class="string">"ZS"</span>.<span class="string">"EMPLOYEES_SEQ"</span>  <span class="keyword">MINVALUE</span> <span class="number">1</span> MAXVALUE <span class="number">9999999999999999999999999999</span> <span class="keyword">INCREMENT</span> <span class="keyword">BY</span> <span class="number">1</span> <span class="keyword">START</span> <span class="keyword">WITH</span> <span class="number">207</span> NOCACHE  <span class="keyword">NOORDER</span>  <span class="keyword">NOCYCLE</span>  NOPARTITION ;</span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"><span class="comment">--  DDL for Sequence LOCATIONS_SEQ</span></span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">   <span class="keyword">CREATE</span> <span class="keyword">SEQUENCE</span>  <span class="string">"ZS"</span>.<span class="string">"LOCATIONS_SEQ"</span>  <span class="keyword">MINVALUE</span> <span class="number">1</span> MAXVALUE <span class="number">9900</span> <span class="keyword">INCREMENT</span> <span class="keyword">BY</span> <span class="number">100</span> <span class="keyword">START</span> <span class="keyword">WITH</span> <span class="number">3300</span> NOCACHE  <span class="keyword">NOORDER</span>  <span class="keyword">NOCYCLE</span>  NOPARTITION ;</span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"><span class="comment">--  DDL for Table COUNTRIES</span></span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">"ZS"</span>.<span class="string">"COUNTRIES"</span> </span><br><span class="line">   (<span class="string">"COUNTRY_ID"</span> <span class="built_in">CHAR</span>(<span class="number">2</span> <span class="keyword">BYTE</span>), </span><br><span class="line"><span class="string">"COUNTRY_NAME"</span> VARCHAR2(<span class="number">40</span> <span class="keyword">BYTE</span>), </span><br><span class="line"><span class="string">"REGION_ID"</span> <span class="built_in">NUMBER</span>, </span><br><span class="line"> PRIMARY <span class="keyword">KEY</span> (<span class="string">"COUNTRY_ID"</span>) <span class="keyword">ENABLE</span></span><br><span class="line">   ) <span class="keyword">ORGANIZATION</span> <span class="keyword">INDEX</span> <span class="keyword">NOCOMPRESS</span> PCTFREE <span class="number">10</span> <span class="keyword">INITRANS</span> <span class="number">2</span> <span class="keyword">MAXTRANS</span> <span class="number">255</span> <span class="keyword">LOGGING</span></span><br><span class="line">  <span class="keyword">STORAGE</span>(<span class="keyword">INITIAL</span> <span class="number">65536</span> <span class="keyword">NEXT</span> <span class="number">1048576</span> <span class="keyword">MINEXTENTS</span> <span class="number">1</span> <span class="keyword">MAXEXTENTS</span> <span class="number">2147483645</span></span><br><span class="line">  <span class="keyword">PCTINCREASE</span> <span class="number">0</span> <span class="keyword">FREELISTS</span> <span class="number">1</span> <span class="keyword">FREELIST</span> <span class="keyword">GROUPS</span> <span class="number">1</span></span><br><span class="line">  <span class="keyword">BUFFER_POOL</span> <span class="keyword">DEFAULT</span> <span class="keyword">FLASH_CACHE</span> <span class="keyword">DEFAULT</span> CELL_FLASH_CACHE <span class="keyword">DEFAULT</span>)</span><br><span class="line">  <span class="keyword">TABLESPACE</span> <span class="string">"USERS"</span> </span><br><span class="line"> <span class="keyword">PCTTHRESHOLD</span> <span class="number">50</span>;</span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"><span class="comment">--  DDL for Table DEPARTMENTS</span></span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">"ZS"</span>.<span class="string">"DEPARTMENTS"</span> </span><br><span class="line">   (<span class="string">"DEPARTMENT_ID"</span> <span class="built_in">NUMBER</span>(<span class="number">4</span>,<span class="number">0</span>), </span><br><span class="line"><span class="string">"DEPARTMENT_NAME"</span> VARCHAR2(<span class="number">30</span> <span class="keyword">BYTE</span>), </span><br><span class="line"><span class="string">"MANAGER_ID"</span> <span class="built_in">NUMBER</span>(<span class="number">6</span>,<span class="number">0</span>), </span><br><span class="line"><span class="string">"LOCATION_ID"</span> <span class="built_in">NUMBER</span>(<span class="number">4</span>,<span class="number">0</span>)</span><br><span class="line">   ) <span class="keyword">SEGMENT</span> <span class="keyword">CREATION</span> <span class="keyword">IMMEDIATE</span> </span><br><span class="line">  PCTFREE <span class="number">10</span> <span class="keyword">PCTUSED</span> <span class="number">40</span> <span class="keyword">INITRANS</span> <span class="number">1</span> <span class="keyword">MAXTRANS</span> <span class="number">255</span> </span><br><span class="line"> <span class="keyword">NOCOMPRESS</span> <span class="keyword">LOGGING</span></span><br><span class="line">  <span class="keyword">STORAGE</span>(<span class="keyword">INITIAL</span> <span class="number">65536</span> <span class="keyword">NEXT</span> <span class="number">1048576</span> <span class="keyword">MINEXTENTS</span> <span class="number">1</span> <span class="keyword">MAXEXTENTS</span> <span class="number">2147483645</span></span><br><span class="line">  <span class="keyword">PCTINCREASE</span> <span class="number">0</span> <span class="keyword">FREELISTS</span> <span class="number">1</span> <span class="keyword">FREELIST</span> <span class="keyword">GROUPS</span> <span class="number">1</span></span><br><span class="line">  <span class="keyword">BUFFER_POOL</span> <span class="keyword">DEFAULT</span> <span class="keyword">FLASH_CACHE</span> <span class="keyword">DEFAULT</span> CELL_FLASH_CACHE <span class="keyword">DEFAULT</span>)</span><br><span class="line">  <span class="keyword">TABLESPACE</span> <span class="string">"USERS"</span> ;</span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"><span class="comment">--  DDL for Table DEPT_SALARY_STAT</span></span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">"ZS"</span>.<span class="string">"DEPT_SALARY_STAT"</span> </span><br><span class="line">   (<span class="string">"DEPARTMENT_ID"</span> <span class="built_in">NUMBER</span>(<span class="number">20</span>,<span class="number">0</span>), </span><br><span class="line"><span class="string">"MAX_SALAEY"</span> <span class="built_in">NUMBER</span>(<span class="number">20</span>,<span class="number">0</span>), </span><br><span class="line"><span class="string">"MIN_SALARY"</span> <span class="built_in">NUMBER</span>(<span class="number">20</span>,<span class="number">0</span>)</span><br><span class="line">   ) <span class="keyword">SEGMENT</span> <span class="keyword">CREATION</span> <span class="keyword">IMMEDIATE</span> </span><br><span class="line">  PCTFREE <span class="number">10</span> <span class="keyword">PCTUSED</span> <span class="number">40</span> <span class="keyword">INITRANS</span> <span class="number">1</span> <span class="keyword">MAXTRANS</span> <span class="number">255</span> </span><br><span class="line"> <span class="keyword">NOCOMPRESS</span> <span class="keyword">LOGGING</span></span><br><span class="line">  <span class="keyword">STORAGE</span>(<span class="keyword">INITIAL</span> <span class="number">65536</span> <span class="keyword">NEXT</span> <span class="number">1048576</span> <span class="keyword">MINEXTENTS</span> <span class="number">1</span> <span class="keyword">MAXEXTENTS</span> <span class="number">2147483645</span></span><br><span class="line">  <span class="keyword">PCTINCREASE</span> <span class="number">0</span> <span class="keyword">FREELISTS</span> <span class="number">1</span> <span class="keyword">FREELIST</span> <span class="keyword">GROUPS</span> <span class="number">1</span></span><br><span class="line">  <span class="keyword">BUFFER_POOL</span> <span class="keyword">DEFAULT</span> <span class="keyword">FLASH_CACHE</span> <span class="keyword">DEFAULT</span> CELL_FLASH_CACHE <span class="keyword">DEFAULT</span>)</span><br><span class="line">  <span class="keyword">TABLESPACE</span> <span class="string">"USERS"</span> ;</span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"><span class="comment">--  DDL for Table EMPLOYEES</span></span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">"ZS"</span>.<span class="string">"EMPLOYEES"</span> </span><br><span class="line">   (<span class="string">"EMPLOYEE_ID"</span> <span class="built_in">NUMBER</span>(<span class="number">6</span>,<span class="number">0</span>), </span><br><span class="line"><span class="string">"FIRST_NAME"</span> VARCHAR2(<span class="number">20</span> <span class="keyword">BYTE</span>), </span><br><span class="line"><span class="string">"LAST_NAME"</span> VARCHAR2(<span class="number">25</span> <span class="keyword">BYTE</span>), </span><br><span class="line"><span class="string">"EMAIL"</span> VARCHAR2(<span class="number">25</span> <span class="keyword">BYTE</span>), </span><br><span class="line"><span class="string">"PHONE_NUMBER"</span> VARCHAR2(<span class="number">20</span> <span class="keyword">BYTE</span>), </span><br><span class="line"><span class="string">"HIRE_DATE"</span> <span class="built_in">DATE</span>, </span><br><span class="line"><span class="string">"JOB_ID"</span> VARCHAR2(<span class="number">10</span> <span class="keyword">BYTE</span>), </span><br><span class="line"><span class="string">"SALARY"</span> <span class="built_in">NUMBER</span>(<span class="number">8</span>,<span class="number">2</span>), </span><br><span class="line"><span class="string">"COMMISSION_PCT"</span> <span class="built_in">NUMBER</span>(<span class="number">2</span>,<span class="number">2</span>), </span><br><span class="line"><span class="string">"MANAGER_ID"</span> <span class="built_in">NUMBER</span>(<span class="number">6</span>,<span class="number">0</span>), </span><br><span class="line"><span class="string">"DEPARTMENT_ID"</span> <span class="built_in">NUMBER</span>(<span class="number">4</span>,<span class="number">0</span>)</span><br><span class="line">   ) <span class="keyword">SEGMENT</span> <span class="keyword">CREATION</span> <span class="keyword">IMMEDIATE</span> </span><br><span class="line">  PCTFREE <span class="number">10</span> <span class="keyword">PCTUSED</span> <span class="number">40</span> <span class="keyword">INITRANS</span> <span class="number">1</span> <span class="keyword">MAXTRANS</span> <span class="number">255</span> </span><br><span class="line"> <span class="keyword">NOCOMPRESS</span> <span class="keyword">LOGGING</span></span><br><span class="line">  <span class="keyword">STORAGE</span>(<span class="keyword">INITIAL</span> <span class="number">65536</span> <span class="keyword">NEXT</span> <span class="number">1048576</span> <span class="keyword">MINEXTENTS</span> <span class="number">1</span> <span class="keyword">MAXEXTENTS</span> <span class="number">2147483645</span></span><br><span class="line">  <span class="keyword">PCTINCREASE</span> <span class="number">0</span> <span class="keyword">FREELISTS</span> <span class="number">1</span> <span class="keyword">FREELIST</span> <span class="keyword">GROUPS</span> <span class="number">1</span></span><br><span class="line">  <span class="keyword">BUFFER_POOL</span> <span class="keyword">DEFAULT</span> <span class="keyword">FLASH_CACHE</span> <span class="keyword">DEFAULT</span> CELL_FLASH_CACHE <span class="keyword">DEFAULT</span>)</span><br><span class="line">  <span class="keyword">TABLESPACE</span> <span class="string">"USERS"</span> ;</span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"><span class="comment">--  DDL for Table EMP_10</span></span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">"ZS"</span>.<span class="string">"EMP_10"</span> </span><br><span class="line">   (<span class="string">"EMPLOYEE_ID"</span> <span class="built_in">NUMBER</span>(<span class="number">6</span>,<span class="number">0</span>), </span><br><span class="line"><span class="string">"FIRST_NAME"</span> VARCHAR2(<span class="number">20</span> <span class="keyword">BYTE</span>), </span><br><span class="line"><span class="string">"LAST_NAME"</span> VARCHAR2(<span class="number">25</span> <span class="keyword">BYTE</span>), </span><br><span class="line"><span class="string">"EMAIL"</span> VARCHAR2(<span class="number">25</span> <span class="keyword">BYTE</span>), </span><br><span class="line"><span class="string">"PHONE_NUMBER"</span> VARCHAR2(<span class="number">20</span> <span class="keyword">BYTE</span>), </span><br><span class="line"><span class="string">"HIRE_DATE"</span> <span class="built_in">DATE</span>, </span><br><span class="line"><span class="string">"JOB_ID"</span> VARCHAR2(<span class="number">10</span> <span class="keyword">BYTE</span>), </span><br><span class="line"><span class="string">"SALARY"</span> <span class="built_in">NUMBER</span>(<span class="number">8</span>,<span class="number">2</span>), </span><br><span class="line"><span class="string">"COMMISSION_PCT"</span> <span class="built_in">NUMBER</span>(<span class="number">2</span>,<span class="number">2</span>), </span><br><span class="line"><span class="string">"MANAGER_ID"</span> <span class="built_in">NUMBER</span>(<span class="number">6</span>,<span class="number">0</span>), </span><br><span class="line"><span class="string">"DEPARTMENT_ID"</span> <span class="built_in">NUMBER</span>(<span class="number">4</span>,<span class="number">0</span>)</span><br><span class="line">   ) <span class="keyword">SEGMENT</span> <span class="keyword">CREATION</span> <span class="keyword">IMMEDIATE</span> </span><br><span class="line">  PCTFREE <span class="number">10</span> <span class="keyword">PCTUSED</span> <span class="number">40</span> <span class="keyword">INITRANS</span> <span class="number">1</span> <span class="keyword">MAXTRANS</span> <span class="number">255</span> </span><br><span class="line"> <span class="keyword">NOCOMPRESS</span> <span class="keyword">LOGGING</span></span><br><span class="line">  <span class="keyword">STORAGE</span>(<span class="keyword">INITIAL</span> <span class="number">65536</span> <span class="keyword">NEXT</span> <span class="number">1048576</span> <span class="keyword">MINEXTENTS</span> <span class="number">1</span> <span class="keyword">MAXEXTENTS</span> <span class="number">2147483645</span></span><br><span class="line">  <span class="keyword">PCTINCREASE</span> <span class="number">0</span> <span class="keyword">FREELISTS</span> <span class="number">1</span> <span class="keyword">FREELIST</span> <span class="keyword">GROUPS</span> <span class="number">1</span></span><br><span class="line">  <span class="keyword">BUFFER_POOL</span> <span class="keyword">DEFAULT</span> <span class="keyword">FLASH_CACHE</span> <span class="keyword">DEFAULT</span> CELL_FLASH_CACHE <span class="keyword">DEFAULT</span>)</span><br><span class="line">  <span class="keyword">TABLESPACE</span> <span class="string">"USERS"</span> ;</span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"><span class="comment">--  DDL for Table EMP_20</span></span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">"ZS"</span>.<span class="string">"EMP_20"</span> </span><br><span class="line">   (<span class="string">"EMPLOYEE_ID"</span> <span class="built_in">NUMBER</span>(<span class="number">6</span>,<span class="number">0</span>), </span><br><span class="line"><span class="string">"FIRST_NAME"</span> VARCHAR2(<span class="number">20</span> <span class="keyword">BYTE</span>), </span><br><span class="line"><span class="string">"LAST_NAME"</span> VARCHAR2(<span class="number">25</span> <span class="keyword">BYTE</span>), </span><br><span class="line"><span class="string">"EMAIL"</span> VARCHAR2(<span class="number">25</span> <span class="keyword">BYTE</span>), </span><br><span class="line"><span class="string">"PHONE_NUMBER"</span> VARCHAR2(<span class="number">20</span> <span class="keyword">BYTE</span>), </span><br><span class="line"><span class="string">"HIRE_DATE"</span> <span class="built_in">DATE</span>, </span><br><span class="line"><span class="string">"JOB_ID"</span> VARCHAR2(<span class="number">10</span> <span class="keyword">BYTE</span>), </span><br><span class="line"><span class="string">"SALARY"</span> <span class="built_in">NUMBER</span>(<span class="number">8</span>,<span class="number">2</span>), </span><br><span class="line"><span class="string">"COMMISSION_PCT"</span> <span class="built_in">NUMBER</span>(<span class="number">2</span>,<span class="number">2</span>), </span><br><span class="line"><span class="string">"MANAGER_ID"</span> <span class="built_in">NUMBER</span>(<span class="number">6</span>,<span class="number">0</span>), </span><br><span class="line"><span class="string">"DEPARTMENT_ID"</span> <span class="built_in">NUMBER</span>(<span class="number">4</span>,<span class="number">0</span>)</span><br><span class="line">   ) <span class="keyword">SEGMENT</span> <span class="keyword">CREATION</span> <span class="keyword">IMMEDIATE</span> </span><br><span class="line">  PCTFREE <span class="number">10</span> <span class="keyword">PCTUSED</span> <span class="number">40</span> <span class="keyword">INITRANS</span> <span class="number">1</span> <span class="keyword">MAXTRANS</span> <span class="number">255</span> </span><br><span class="line"> <span class="keyword">NOCOMPRESS</span> <span class="keyword">LOGGING</span></span><br><span class="line">  <span class="keyword">STORAGE</span>(<span class="keyword">INITIAL</span> <span class="number">65536</span> <span class="keyword">NEXT</span> <span class="number">1048576</span> <span class="keyword">MINEXTENTS</span> <span class="number">1</span> <span class="keyword">MAXEXTENTS</span> <span class="number">2147483645</span></span><br><span class="line">  <span class="keyword">PCTINCREASE</span> <span class="number">0</span> <span class="keyword">FREELISTS</span> <span class="number">1</span> <span class="keyword">FREELIST</span> <span class="keyword">GROUPS</span> <span class="number">1</span></span><br><span class="line">  <span class="keyword">BUFFER_POOL</span> <span class="keyword">DEFAULT</span> <span class="keyword">FLASH_CACHE</span> <span class="keyword">DEFAULT</span> CELL_FLASH_CACHE <span class="keyword">DEFAULT</span>)</span><br><span class="line">  <span class="keyword">TABLESPACE</span> <span class="string">"USERS"</span> ;</span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"><span class="comment">--  DDL for Table EMP_30</span></span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">"ZS"</span>.<span class="string">"EMP_30"</span> </span><br><span class="line">   (<span class="string">"EMPLOYEE_ID"</span> <span class="built_in">NUMBER</span>(<span class="number">6</span>,<span class="number">0</span>), </span><br><span class="line"><span class="string">"FIRST_NAME"</span> VARCHAR2(<span class="number">20</span> <span class="keyword">BYTE</span>), </span><br><span class="line"><span class="string">"LAST_NAME"</span> VARCHAR2(<span class="number">25</span> <span class="keyword">BYTE</span>), </span><br><span class="line"><span class="string">"EMAIL"</span> VARCHAR2(<span class="number">25</span> <span class="keyword">BYTE</span>), </span><br><span class="line"><span class="string">"PHONE_NUMBER"</span> VARCHAR2(<span class="number">20</span> <span class="keyword">BYTE</span>), </span><br><span class="line"><span class="string">"HIRE_DATE"</span> <span class="built_in">DATE</span>, </span><br><span class="line"><span class="string">"JOB_ID"</span> VARCHAR2(<span class="number">10</span> <span class="keyword">BYTE</span>), </span><br><span class="line"><span class="string">"SALARY"</span> <span class="built_in">NUMBER</span>(<span class="number">8</span>,<span class="number">2</span>), </span><br><span class="line"><span class="string">"COMMISSION_PCT"</span> <span class="built_in">NUMBER</span>(<span class="number">2</span>,<span class="number">2</span>), </span><br><span class="line"><span class="string">"MANAGER_ID"</span> <span class="built_in">NUMBER</span>(<span class="number">6</span>,<span class="number">0</span>), </span><br><span class="line"><span class="string">"DEPARTMENT_ID"</span> <span class="built_in">NUMBER</span>(<span class="number">4</span>,<span class="number">0</span>)</span><br><span class="line">   ) <span class="keyword">SEGMENT</span> <span class="keyword">CREATION</span> <span class="keyword">IMMEDIATE</span> </span><br><span class="line">  PCTFREE <span class="number">10</span> <span class="keyword">PCTUSED</span> <span class="number">40</span> <span class="keyword">INITRANS</span> <span class="number">1</span> <span class="keyword">MAXTRANS</span> <span class="number">255</span> </span><br><span class="line"> <span class="keyword">NOCOMPRESS</span> <span class="keyword">LOGGING</span></span><br><span class="line">  <span class="keyword">STORAGE</span>(<span class="keyword">INITIAL</span> <span class="number">65536</span> <span class="keyword">NEXT</span> <span class="number">1048576</span> <span class="keyword">MINEXTENTS</span> <span class="number">1</span> <span class="keyword">MAXEXTENTS</span> <span class="number">2147483645</span></span><br><span class="line">  <span class="keyword">PCTINCREASE</span> <span class="number">0</span> <span class="keyword">FREELISTS</span> <span class="number">1</span> <span class="keyword">FREELIST</span> <span class="keyword">GROUPS</span> <span class="number">1</span></span><br><span class="line">  <span class="keyword">BUFFER_POOL</span> <span class="keyword">DEFAULT</span> <span class="keyword">FLASH_CACHE</span> <span class="keyword">DEFAULT</span> CELL_FLASH_CACHE <span class="keyword">DEFAULT</span>)</span><br><span class="line">  <span class="keyword">TABLESPACE</span> <span class="string">"USERS"</span> ;</span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"><span class="comment">--  DDL for Table EMP_MGR</span></span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">"ZS"</span>.<span class="string">"EMP_MGR"</span> </span><br><span class="line">   (<span class="string">"EMPLOYEE_ID"</span> <span class="built_in">NUMBER</span>(<span class="number">6</span>,<span class="number">0</span>), </span><br><span class="line"><span class="string">"MANAGER_ID"</span> <span class="built_in">NUMBER</span>(<span class="number">6</span>,<span class="number">0</span>), </span><br><span class="line"><span class="string">"SALARY"</span> <span class="built_in">NUMBER</span>(<span class="number">8</span>,<span class="number">2</span>)</span><br><span class="line">   ) <span class="keyword">SEGMENT</span> <span class="keyword">CREATION</span> <span class="keyword">IMMEDIATE</span> </span><br><span class="line">  PCTFREE <span class="number">10</span> <span class="keyword">PCTUSED</span> <span class="number">40</span> <span class="keyword">INITRANS</span> <span class="number">1</span> <span class="keyword">MAXTRANS</span> <span class="number">255</span> </span><br><span class="line"> <span class="keyword">NOCOMPRESS</span> <span class="keyword">LOGGING</span></span><br><span class="line">  <span class="keyword">STORAGE</span>(<span class="keyword">INITIAL</span> <span class="number">65536</span> <span class="keyword">NEXT</span> <span class="number">1048576</span> <span class="keyword">MINEXTENTS</span> <span class="number">1</span> <span class="keyword">MAXEXTENTS</span> <span class="number">2147483645</span></span><br><span class="line">  <span class="keyword">PCTINCREASE</span> <span class="number">0</span> <span class="keyword">FREELISTS</span> <span class="number">1</span> <span class="keyword">FREELIST</span> <span class="keyword">GROUPS</span> <span class="number">1</span></span><br><span class="line">  <span class="keyword">BUFFER_POOL</span> <span class="keyword">DEFAULT</span> <span class="keyword">FLASH_CACHE</span> <span class="keyword">DEFAULT</span> CELL_FLASH_CACHE <span class="keyword">DEFAULT</span>)</span><br><span class="line">  <span class="keyword">TABLESPACE</span> <span class="string">"USERS"</span> ;</span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"><span class="comment">--  DDL for Table EMP_OTHER</span></span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">"ZS"</span>.<span class="string">"EMP_OTHER"</span> </span><br><span class="line">   (<span class="string">"EMPLOYEE_ID"</span> <span class="built_in">NUMBER</span>(<span class="number">6</span>,<span class="number">0</span>), </span><br><span class="line"><span class="string">"FIRST_NAME"</span> VARCHAR2(<span class="number">20</span> <span class="keyword">BYTE</span>), </span><br><span class="line"><span class="string">"LAST_NAME"</span> VARCHAR2(<span class="number">25</span> <span class="keyword">BYTE</span>), </span><br><span class="line"><span class="string">"EMAIL"</span> VARCHAR2(<span class="number">25</span> <span class="keyword">BYTE</span>), </span><br><span class="line"><span class="string">"PHONE_NUMBER"</span> VARCHAR2(<span class="number">20</span> <span class="keyword">BYTE</span>), </span><br><span class="line"><span class="string">"HIRE_DATE"</span> <span class="built_in">DATE</span>, </span><br><span class="line"><span class="string">"JOB_ID"</span> VARCHAR2(<span class="number">10</span> <span class="keyword">BYTE</span>), </span><br><span class="line"><span class="string">"SALARY"</span> <span class="built_in">NUMBER</span>(<span class="number">8</span>,<span class="number">2</span>), </span><br><span class="line"><span class="string">"COMMISSION_PCT"</span> <span class="built_in">NUMBER</span>(<span class="number">2</span>,<span class="number">2</span>), </span><br><span class="line"><span class="string">"MANAGER_ID"</span> <span class="built_in">NUMBER</span>(<span class="number">6</span>,<span class="number">0</span>), </span><br><span class="line"><span class="string">"DEPARTMENT_ID"</span> <span class="built_in">NUMBER</span>(<span class="number">4</span>,<span class="number">0</span>)</span><br><span class="line">   ) <span class="keyword">SEGMENT</span> <span class="keyword">CREATION</span> <span class="keyword">IMMEDIATE</span> </span><br><span class="line">  PCTFREE <span class="number">10</span> <span class="keyword">PCTUSED</span> <span class="number">40</span> <span class="keyword">INITRANS</span> <span class="number">1</span> <span class="keyword">MAXTRANS</span> <span class="number">255</span> </span><br><span class="line"> <span class="keyword">NOCOMPRESS</span> <span class="keyword">LOGGING</span></span><br><span class="line">  <span class="keyword">STORAGE</span>(<span class="keyword">INITIAL</span> <span class="number">65536</span> <span class="keyword">NEXT</span> <span class="number">1048576</span> <span class="keyword">MINEXTENTS</span> <span class="number">1</span> <span class="keyword">MAXEXTENTS</span> <span class="number">2147483645</span></span><br><span class="line">  <span class="keyword">PCTINCREASE</span> <span class="number">0</span> <span class="keyword">FREELISTS</span> <span class="number">1</span> <span class="keyword">FREELIST</span> <span class="keyword">GROUPS</span> <span class="number">1</span></span><br><span class="line">  <span class="keyword">BUFFER_POOL</span> <span class="keyword">DEFAULT</span> <span class="keyword">FLASH_CACHE</span> <span class="keyword">DEFAULT</span> CELL_FLASH_CACHE <span class="keyword">DEFAULT</span>)</span><br><span class="line">  <span class="keyword">TABLESPACE</span> <span class="string">"USERS"</span> ;</span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"><span class="comment">--  DDL for Table EMP_SAL</span></span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">"ZS"</span>.<span class="string">"EMP_SAL"</span> </span><br><span class="line">   (<span class="string">"EMPLOYEE_ID"</span> <span class="built_in">NUMBER</span>(<span class="number">6</span>,<span class="number">0</span>), </span><br><span class="line"><span class="string">"HIRE_DATE"</span> <span class="built_in">DATE</span>, </span><br><span class="line"><span class="string">"SALARY"</span> <span class="built_in">NUMBER</span>(<span class="number">8</span>,<span class="number">2</span>)</span><br><span class="line">   ) <span class="keyword">SEGMENT</span> <span class="keyword">CREATION</span> <span class="keyword">IMMEDIATE</span> </span><br><span class="line">  PCTFREE <span class="number">10</span> <span class="keyword">PCTUSED</span> <span class="number">40</span> <span class="keyword">INITRANS</span> <span class="number">1</span> <span class="keyword">MAXTRANS</span> <span class="number">255</span> </span><br><span class="line"> <span class="keyword">NOCOMPRESS</span> <span class="keyword">LOGGING</span></span><br><span class="line">  <span class="keyword">STORAGE</span>(<span class="keyword">INITIAL</span> <span class="number">65536</span> <span class="keyword">NEXT</span> <span class="number">1048576</span> <span class="keyword">MINEXTENTS</span> <span class="number">1</span> <span class="keyword">MAXEXTENTS</span> <span class="number">2147483645</span></span><br><span class="line">  <span class="keyword">PCTINCREASE</span> <span class="number">0</span> <span class="keyword">FREELISTS</span> <span class="number">1</span> <span class="keyword">FREELIST</span> <span class="keyword">GROUPS</span> <span class="number">1</span></span><br><span class="line">  <span class="keyword">BUFFER_POOL</span> <span class="keyword">DEFAULT</span> <span class="keyword">FLASH_CACHE</span> <span class="keyword">DEFAULT</span> CELL_FLASH_CACHE <span class="keyword">DEFAULT</span>)</span><br><span class="line">  <span class="keyword">TABLESPACE</span> <span class="string">"USERS"</span> ;</span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"><span class="comment">--  DDL for Table JOBS</span></span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">"ZS"</span>.<span class="string">"JOBS"</span> </span><br><span class="line">   (<span class="string">"JOB_ID"</span> VARCHAR2(<span class="number">10</span> <span class="keyword">BYTE</span>), </span><br><span class="line"><span class="string">"JOB_TITLE"</span> VARCHAR2(<span class="number">35</span> <span class="keyword">BYTE</span>), </span><br><span class="line"><span class="string">"MIN_SALARY"</span> <span class="built_in">NUMBER</span>(<span class="number">6</span>,<span class="number">0</span>), </span><br><span class="line"><span class="string">"MAX_SALARY"</span> <span class="built_in">NUMBER</span>(<span class="number">6</span>,<span class="number">0</span>)</span><br><span class="line">   ) <span class="keyword">SEGMENT</span> <span class="keyword">CREATION</span> <span class="keyword">IMMEDIATE</span> </span><br><span class="line">  PCTFREE <span class="number">10</span> <span class="keyword">PCTUSED</span> <span class="number">40</span> <span class="keyword">INITRANS</span> <span class="number">1</span> <span class="keyword">MAXTRANS</span> <span class="number">255</span> </span><br><span class="line"> <span class="keyword">NOCOMPRESS</span> <span class="keyword">LOGGING</span></span><br><span class="line">  <span class="keyword">STORAGE</span>(<span class="keyword">INITIAL</span> <span class="number">65536</span> <span class="keyword">NEXT</span> <span class="number">1048576</span> <span class="keyword">MINEXTENTS</span> <span class="number">1</span> <span class="keyword">MAXEXTENTS</span> <span class="number">2147483645</span></span><br><span class="line">  <span class="keyword">PCTINCREASE</span> <span class="number">0</span> <span class="keyword">FREELISTS</span> <span class="number">1</span> <span class="keyword">FREELIST</span> <span class="keyword">GROUPS</span> <span class="number">1</span></span><br><span class="line">  <span class="keyword">BUFFER_POOL</span> <span class="keyword">DEFAULT</span> <span class="keyword">FLASH_CACHE</span> <span class="keyword">DEFAULT</span> CELL_FLASH_CACHE <span class="keyword">DEFAULT</span>)</span><br><span class="line">  <span class="keyword">TABLESPACE</span> <span class="string">"USERS"</span> ;</span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"><span class="comment">--  DDL for Table JOB_HISTORY</span></span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">"ZS"</span>.<span class="string">"JOB_HISTORY"</span> </span><br><span class="line">   (<span class="string">"EMPLOYEE_ID"</span> <span class="built_in">NUMBER</span>(<span class="number">6</span>,<span class="number">0</span>), </span><br><span class="line"><span class="string">"START_DATE"</span> <span class="built_in">DATE</span>, </span><br><span class="line"><span class="string">"END_DATE"</span> <span class="built_in">DATE</span>, </span><br><span class="line"><span class="string">"JOB_ID"</span> VARCHAR2(<span class="number">10</span> <span class="keyword">BYTE</span>), </span><br><span class="line"><span class="string">"DEPARTMENT_ID"</span> <span class="built_in">NUMBER</span>(<span class="number">4</span>,<span class="number">0</span>)</span><br><span class="line">   ) <span class="keyword">SEGMENT</span> <span class="keyword">CREATION</span> <span class="keyword">IMMEDIATE</span> </span><br><span class="line">  PCTFREE <span class="number">10</span> <span class="keyword">PCTUSED</span> <span class="number">40</span> <span class="keyword">INITRANS</span> <span class="number">1</span> <span class="keyword">MAXTRANS</span> <span class="number">255</span> </span><br><span class="line"> <span class="keyword">NOCOMPRESS</span> <span class="keyword">LOGGING</span></span><br><span class="line">  <span class="keyword">STORAGE</span>(<span class="keyword">INITIAL</span> <span class="number">65536</span> <span class="keyword">NEXT</span> <span class="number">1048576</span> <span class="keyword">MINEXTENTS</span> <span class="number">1</span> <span class="keyword">MAXEXTENTS</span> <span class="number">2147483645</span></span><br><span class="line">  <span class="keyword">PCTINCREASE</span> <span class="number">0</span> <span class="keyword">FREELISTS</span> <span class="number">1</span> <span class="keyword">FREELIST</span> <span class="keyword">GROUPS</span> <span class="number">1</span></span><br><span class="line">  <span class="keyword">BUFFER_POOL</span> <span class="keyword">DEFAULT</span> <span class="keyword">FLASH_CACHE</span> <span class="keyword">DEFAULT</span> CELL_FLASH_CACHE <span class="keyword">DEFAULT</span>)</span><br><span class="line">  <span class="keyword">TABLESPACE</span> <span class="string">"USERS"</span> ;</span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"><span class="comment">--  DDL for Table LOCATIONS</span></span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">"ZS"</span>.<span class="string">"LOCATIONS"</span> </span><br><span class="line">   (<span class="string">"LOCATION_ID"</span> <span class="built_in">NUMBER</span>(<span class="number">4</span>,<span class="number">0</span>), </span><br><span class="line"><span class="string">"STREET_ADDRESS"</span> VARCHAR2(<span class="number">40</span> <span class="keyword">BYTE</span>), </span><br><span class="line"><span class="string">"POSTAL_CODE"</span> VARCHAR2(<span class="number">12</span> <span class="keyword">BYTE</span>), </span><br><span class="line"><span class="string">"CITY"</span> VARCHAR2(<span class="number">30</span> <span class="keyword">BYTE</span>), </span><br><span class="line"><span class="string">"STATE_PROVINCE"</span> VARCHAR2(<span class="number">25</span> <span class="keyword">BYTE</span>), </span><br><span class="line"><span class="string">"COUNTRY_ID"</span> <span class="built_in">CHAR</span>(<span class="number">2</span> <span class="keyword">BYTE</span>)</span><br><span class="line">   ) <span class="keyword">SEGMENT</span> <span class="keyword">CREATION</span> <span class="keyword">IMMEDIATE</span> </span><br><span class="line">  PCTFREE <span class="number">10</span> <span class="keyword">PCTUSED</span> <span class="number">40</span> <span class="keyword">INITRANS</span> <span class="number">1</span> <span class="keyword">MAXTRANS</span> <span class="number">255</span> </span><br><span class="line"> <span class="keyword">NOCOMPRESS</span> <span class="keyword">LOGGING</span></span><br><span class="line">  <span class="keyword">STORAGE</span>(<span class="keyword">INITIAL</span> <span class="number">65536</span> <span class="keyword">NEXT</span> <span class="number">1048576</span> <span class="keyword">MINEXTENTS</span> <span class="number">1</span> <span class="keyword">MAXEXTENTS</span> <span class="number">2147483645</span></span><br><span class="line">  <span class="keyword">PCTINCREASE</span> <span class="number">0</span> <span class="keyword">FREELISTS</span> <span class="number">1</span> <span class="keyword">FREELIST</span> <span class="keyword">GROUPS</span> <span class="number">1</span></span><br><span class="line">  <span class="keyword">BUFFER_POOL</span> <span class="keyword">DEFAULT</span> <span class="keyword">FLASH_CACHE</span> <span class="keyword">DEFAULT</span> CELL_FLASH_CACHE <span class="keyword">DEFAULT</span>)</span><br><span class="line">  <span class="keyword">TABLESPACE</span> <span class="string">"USERS"</span> ;</span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"><span class="comment">--  DDL for Table REGIONS</span></span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">"ZS"</span>.<span class="string">"REGIONS"</span> </span><br><span class="line">   (<span class="string">"REGION_ID"</span> <span class="built_in">NUMBER</span>, </span><br><span class="line"><span class="string">"REGION_NAME"</span> VARCHAR2(<span class="number">25</span> <span class="keyword">BYTE</span>)</span><br><span class="line">   ) <span class="keyword">SEGMENT</span> <span class="keyword">CREATION</span> <span class="keyword">IMMEDIATE</span> </span><br><span class="line">  PCTFREE <span class="number">10</span> <span class="keyword">PCTUSED</span> <span class="number">40</span> <span class="keyword">INITRANS</span> <span class="number">1</span> <span class="keyword">MAXTRANS</span> <span class="number">255</span> </span><br><span class="line"> <span class="keyword">NOCOMPRESS</span> <span class="keyword">LOGGING</span></span><br><span class="line">  <span class="keyword">STORAGE</span>(<span class="keyword">INITIAL</span> <span class="number">65536</span> <span class="keyword">NEXT</span> <span class="number">1048576</span> <span class="keyword">MINEXTENTS</span> <span class="number">1</span> <span class="keyword">MAXEXTENTS</span> <span class="number">2147483645</span></span><br><span class="line">  <span class="keyword">PCTINCREASE</span> <span class="number">0</span> <span class="keyword">FREELISTS</span> <span class="number">1</span> <span class="keyword">FREELIST</span> <span class="keyword">GROUPS</span> <span class="number">1</span></span><br><span class="line">  <span class="keyword">BUFFER_POOL</span> <span class="keyword">DEFAULT</span> <span class="keyword">FLASH_CACHE</span> <span class="keyword">DEFAULT</span> CELL_FLASH_CACHE <span class="keyword">DEFAULT</span>)</span><br><span class="line">  <span class="keyword">TABLESPACE</span> <span class="string">"USERS"</span> ;</span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"><span class="comment">--  DDL for Table SAL_GRADES</span></span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">"ZS"</span>.<span class="string">"SAL_GRADES"</span> </span><br><span class="line">   (<span class="string">"GRADE"</span> <span class="built_in">NUMBER</span>, </span><br><span class="line"><span class="string">"MIN_SALARY"</span> <span class="built_in">NUMBER</span>(<span class="number">8</span>,<span class="number">2</span>), </span><br><span class="line"><span class="string">"MAX_SALARY"</span> <span class="built_in">NUMBER</span>(<span class="number">8</span>,<span class="number">2</span>)</span><br><span class="line">   ) <span class="keyword">SEGMENT</span> <span class="keyword">CREATION</span> <span class="keyword">IMMEDIATE</span> </span><br><span class="line">  PCTFREE <span class="number">10</span> <span class="keyword">PCTUSED</span> <span class="number">40</span> <span class="keyword">INITRANS</span> <span class="number">1</span> <span class="keyword">MAXTRANS</span> <span class="number">255</span> </span><br><span class="line"> <span class="keyword">NOCOMPRESS</span> <span class="keyword">LOGGING</span></span><br><span class="line">  <span class="keyword">STORAGE</span>(<span class="keyword">INITIAL</span> <span class="number">65536</span> <span class="keyword">NEXT</span> <span class="number">1048576</span> <span class="keyword">MINEXTENTS</span> <span class="number">1</span> <span class="keyword">MAXEXTENTS</span> <span class="number">2147483645</span></span><br><span class="line">  <span class="keyword">PCTINCREASE</span> <span class="number">0</span> <span class="keyword">FREELISTS</span> <span class="number">1</span> <span class="keyword">FREELIST</span> <span class="keyword">GROUPS</span> <span class="number">1</span></span><br><span class="line">  <span class="keyword">BUFFER_POOL</span> <span class="keyword">DEFAULT</span> <span class="keyword">FLASH_CACHE</span> <span class="keyword">DEFAULT</span> CELL_FLASH_CACHE <span class="keyword">DEFAULT</span>)</span><br><span class="line">  <span class="keyword">TABLESPACE</span> <span class="string">"USERS"</span> ;</span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"><span class="comment">--  DDL for Table SOURCE_EMP</span></span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">"ZS"</span>.<span class="string">"SOURCE_EMP"</span> </span><br><span class="line">   (<span class="string">"EMPLOYEE_ID"</span> <span class="built_in">NUMBER</span>(<span class="number">20</span>,<span class="number">0</span>), </span><br><span class="line"><span class="string">"LAST_NAME"</span> VARCHAR2(<span class="number">20</span> <span class="keyword">BYTE</span>), </span><br><span class="line"><span class="string">"DEPARTMENT_ID"</span> <span class="built_in">NUMBER</span>(<span class="number">20</span>,<span class="number">0</span>)</span><br><span class="line">   ) <span class="keyword">SEGMENT</span> <span class="keyword">CREATION</span> <span class="keyword">IMMEDIATE</span> </span><br><span class="line">  PCTFREE <span class="number">10</span> <span class="keyword">PCTUSED</span> <span class="number">40</span> <span class="keyword">INITRANS</span> <span class="number">1</span> <span class="keyword">MAXTRANS</span> <span class="number">255</span> </span><br><span class="line"> <span class="keyword">NOCOMPRESS</span> <span class="keyword">LOGGING</span></span><br><span class="line">  <span class="keyword">STORAGE</span>(<span class="keyword">INITIAL</span> <span class="number">65536</span> <span class="keyword">NEXT</span> <span class="number">1048576</span> <span class="keyword">MINEXTENTS</span> <span class="number">1</span> <span class="keyword">MAXEXTENTS</span> <span class="number">2147483645</span></span><br><span class="line">  <span class="keyword">PCTINCREASE</span> <span class="number">0</span> <span class="keyword">FREELISTS</span> <span class="number">1</span> <span class="keyword">FREELIST</span> <span class="keyword">GROUPS</span> <span class="number">1</span></span><br><span class="line">  <span class="keyword">BUFFER_POOL</span> <span class="keyword">DEFAULT</span> <span class="keyword">FLASH_CACHE</span> <span class="keyword">DEFAULT</span> CELL_FLASH_CACHE <span class="keyword">DEFAULT</span>)</span><br><span class="line">  <span class="keyword">TABLESPACE</span> <span class="string">"USERS"</span> ;</span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"><span class="comment">--  DDL for Table TARGET_EMP</span></span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">"ZS"</span>.<span class="string">"TARGET_EMP"</span> </span><br><span class="line">   (<span class="string">"EMPLOYEE_ID"</span> <span class="built_in">NUMBER</span>(<span class="number">20</span>,<span class="number">0</span>), </span><br><span class="line"><span class="string">"LAST_NAME"</span> VARCHAR2(<span class="number">20</span> <span class="keyword">BYTE</span>), </span><br><span class="line"><span class="string">"DEPARTMENT_ID"</span> <span class="built_in">NUMBER</span>(<span class="number">20</span>,<span class="number">0</span>)</span><br><span class="line">   ) <span class="keyword">SEGMENT</span> <span class="keyword">CREATION</span> <span class="keyword">IMMEDIATE</span> </span><br><span class="line">  PCTFREE <span class="number">10</span> <span class="keyword">PCTUSED</span> <span class="number">40</span> <span class="keyword">INITRANS</span> <span class="number">1</span> <span class="keyword">MAXTRANS</span> <span class="number">255</span> </span><br><span class="line"> <span class="keyword">NOCOMPRESS</span> <span class="keyword">LOGGING</span></span><br><span class="line">  <span class="keyword">STORAGE</span>(<span class="keyword">INITIAL</span> <span class="number">65536</span> <span class="keyword">NEXT</span> <span class="number">1048576</span> <span class="keyword">MINEXTENTS</span> <span class="number">1</span> <span class="keyword">MAXEXTENTS</span> <span class="number">2147483645</span></span><br><span class="line">  <span class="keyword">PCTINCREASE</span> <span class="number">0</span> <span class="keyword">FREELISTS</span> <span class="number">1</span> <span class="keyword">FREELIST</span> <span class="keyword">GROUPS</span> <span class="number">1</span></span><br><span class="line">  <span class="keyword">BUFFER_POOL</span> <span class="keyword">DEFAULT</span> <span class="keyword">FLASH_CACHE</span> <span class="keyword">DEFAULT</span> CELL_FLASH_CACHE <span class="keyword">DEFAULT</span>)</span><br><span class="line">  <span class="keyword">TABLESPACE</span> <span class="string">"USERS"</span> ;</span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"><span class="comment">--  DDL for Table USERS</span></span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">"ZS"</span>.<span class="string">"USERS"</span> </span><br><span class="line">   (<span class="string">"USER_ID"</span> <span class="built_in">NUMBER</span>(<span class="number">2</span>,<span class="number">0</span>), </span><br><span class="line"><span class="string">"USER_NAME"</span> <span class="built_in">CHAR</span>(<span class="number">20</span> <span class="keyword">BYTE</span>), </span><br><span class="line"><span class="string">"PASSWORD"</span> VARCHAR2(<span class="number">20</span> <span class="keyword">BYTE</span>)</span><br><span class="line">   ) <span class="keyword">SEGMENT</span> <span class="keyword">CREATION</span> <span class="keyword">DEFERRED</span> </span><br><span class="line">  PCTFREE <span class="number">10</span> <span class="keyword">PCTUSED</span> <span class="number">40</span> <span class="keyword">INITRANS</span> <span class="number">1</span> <span class="keyword">MAXTRANS</span> <span class="number">255</span> </span><br><span class="line"> <span class="keyword">NOCOMPRESS</span> <span class="keyword">LOGGING</span></span><br><span class="line">  <span class="keyword">TABLESPACE</span> <span class="string">"USERS"</span> ;</span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"><span class="comment">--  DDL for View EMP_BASE_INFO_VIEW</span></span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">CREATE</span> <span class="keyword">OR</span> <span class="keyword">REPLACE</span> <span class="keyword">FORCE</span> <span class="keyword">EDITIONABLE</span> <span class="keyword">VIEW</span> <span class="string">"ZS"</span>.<span class="string">"EMP_BASE_INFO_VIEW"</span> (<span class="string">"EMPNO"</span>, <span class="string">"FENAME"</span>, <span class="string">"LNAME"</span>, <span class="string">"SAL"</span>, <span class="string">"DEPTNO"</span>) <span class="keyword">AS</span> </span><br><span class="line">  <span class="keyword">SELECT</span> employee_id,first_name,</span><br><span class="line">last_name,salary,department_id </span><br><span class="line"><span class="keyword">FROM</span> employees;</span><br><span class="line">REM INSERTING into ZS.COUNTRIES</span><br><span class="line"><span class="keyword">SET</span> <span class="keyword">DEFINE</span> <span class="keyword">OFF</span>;</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.COUNTRIES (COUNTRY_ID,COUNTRY_NAME,REGION_ID) <span class="keyword">values</span> (<span class="string">'AR'</span>,<span class="string">'Argentina'</span>,<span class="number">2</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.COUNTRIES (COUNTRY_ID,COUNTRY_NAME,REGION_ID) <span class="keyword">values</span> (<span class="string">'AU'</span>,<span class="string">'Australia'</span>,<span class="number">3</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.COUNTRIES (COUNTRY_ID,COUNTRY_NAME,REGION_ID) <span class="keyword">values</span> (<span class="string">'BE'</span>,<span class="string">'Belgium'</span>,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.COUNTRIES (COUNTRY_ID,COUNTRY_NAME,REGION_ID) <span class="keyword">values</span> (<span class="string">'BR'</span>,<span class="string">'Brazil'</span>,<span class="number">2</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.COUNTRIES (COUNTRY_ID,COUNTRY_NAME,REGION_ID) <span class="keyword">values</span> (<span class="string">'CA'</span>,<span class="string">'Canada'</span>,<span class="number">2</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.COUNTRIES (COUNTRY_ID,COUNTRY_NAME,REGION_ID) <span class="keyword">values</span> (<span class="string">'CH'</span>,<span class="string">'Switzerland'</span>,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.COUNTRIES (COUNTRY_ID,COUNTRY_NAME,REGION_ID) <span class="keyword">values</span> (<span class="string">'CN'</span>,<span class="string">'China'</span>,<span class="number">3</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.COUNTRIES (COUNTRY_ID,COUNTRY_NAME,REGION_ID) <span class="keyword">values</span> (<span class="string">'DE'</span>,<span class="string">'Germany'</span>,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.COUNTRIES (COUNTRY_ID,COUNTRY_NAME,REGION_ID) <span class="keyword">values</span> (<span class="string">'DK'</span>,<span class="string">'Den05k'</span>,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.COUNTRIES (COUNTRY_ID,COUNTRY_NAME,REGION_ID) <span class="keyword">values</span> (<span class="string">'EG'</span>,<span class="string">'Egypt'</span>,<span class="number">4</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.COUNTRIES (COUNTRY_ID,COUNTRY_NAME,REGION_ID) <span class="keyword">values</span> (<span class="string">'FR'</span>,<span class="string">'France'</span>,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.COUNTRIES (COUNTRY_ID,COUNTRY_NAME,REGION_ID) <span class="keyword">values</span> (<span class="string">'HK'</span>,<span class="string">'HongKong'</span>,<span class="number">3</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.COUNTRIES (COUNTRY_ID,COUNTRY_NAME,REGION_ID) <span class="keyword">values</span> (<span class="string">'IL'</span>,<span class="string">'Israel'</span>,<span class="number">4</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.COUNTRIES (COUNTRY_ID,COUNTRY_NAME,REGION_ID) <span class="keyword">values</span> (<span class="string">'IN'</span>,<span class="string">'India'</span>,<span class="number">3</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.COUNTRIES (COUNTRY_ID,COUNTRY_NAME,REGION_ID) <span class="keyword">values</span> (<span class="string">'IT'</span>,<span class="string">'Italy'</span>,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.COUNTRIES (COUNTRY_ID,COUNTRY_NAME,REGION_ID) <span class="keyword">values</span> (<span class="string">'JP'</span>,<span class="string">'Japan'</span>,<span class="number">3</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.COUNTRIES (COUNTRY_ID,COUNTRY_NAME,REGION_ID) <span class="keyword">values</span> (<span class="string">'KW'</span>,<span class="string">'Kuwait'</span>,<span class="number">4</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.COUNTRIES (COUNTRY_ID,COUNTRY_NAME,REGION_ID) <span class="keyword">values</span> (<span class="string">'MX'</span>,<span class="string">'Mexico'</span>,<span class="number">2</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.COUNTRIES (COUNTRY_ID,COUNTRY_NAME,REGION_ID) <span class="keyword">values</span> (<span class="string">'NG'</span>,<span class="string">'Nigeria'</span>,<span class="number">4</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.COUNTRIES (COUNTRY_ID,COUNTRY_NAME,REGION_ID) <span class="keyword">values</span> (<span class="string">'NL'</span>,<span class="string">'Netherlands'</span>,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.COUNTRIES (COUNTRY_ID,COUNTRY_NAME,REGION_ID) <span class="keyword">values</span> (<span class="string">'SG'</span>,<span class="string">'Singapore'</span>,<span class="number">3</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.COUNTRIES (COUNTRY_ID,COUNTRY_NAME,REGION_ID) <span class="keyword">values</span> (<span class="string">'UK'</span>,<span class="string">'United Kingdom'</span>,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.COUNTRIES (COUNTRY_ID,COUNTRY_NAME,REGION_ID) <span class="keyword">values</span> (<span class="string">'US'</span>,<span class="string">'United States of America'</span>,<span class="number">2</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.COUNTRIES (COUNTRY_ID,COUNTRY_NAME,REGION_ID) <span class="keyword">values</span> (<span class="string">'ZM'</span>,<span class="string">'Zambia'</span>,<span class="number">4</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.COUNTRIES (COUNTRY_ID,COUNTRY_NAME,REGION_ID) <span class="keyword">values</span> (<span class="string">'ZW'</span>,<span class="string">'Zimbabwe'</span>,<span class="number">4</span>);</span><br><span class="line">REM INSERTING into ZS.DEPARTMENTS</span><br><span class="line"><span class="keyword">SET</span> <span class="keyword">DEFINE</span> <span class="keyword">OFF</span>;</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.DEPARTMENTS (DEPARTMENT_ID,DEPARTMENT_NAME,MANAGER_ID,LOCATION_ID) <span class="keyword">values</span> (<span class="number">10</span>,<span class="string">'Administration'</span>,<span class="number">201</span>,<span class="number">1700</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.DEPARTMENTS (DEPARTMENT_ID,DEPARTMENT_NAME,MANAGER_ID,LOCATION_ID) <span class="keyword">values</span> (<span class="number">20</span>,<span class="string">'05keting'</span>,<span class="number">201</span>,<span class="number">1800</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.DEPARTMENTS (DEPARTMENT_ID,DEPARTMENT_NAME,MANAGER_ID,LOCATION_ID) <span class="keyword">values</span> (<span class="number">30</span>,<span class="string">'Purchasing'</span>,<span class="number">114</span>,<span class="number">1700</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.DEPARTMENTS (DEPARTMENT_ID,DEPARTMENT_NAME,MANAGER_ID,LOCATION_ID) <span class="keyword">values</span> (<span class="number">40</span>,<span class="string">'Human Resources'</span>,<span class="number">203</span>,<span class="number">2400</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.DEPARTMENTS (DEPARTMENT_ID,DEPARTMENT_NAME,MANAGER_ID,LOCATION_ID) <span class="keyword">values</span> (<span class="number">50</span>,<span class="string">'Shipping'</span>,<span class="number">121</span>,<span class="number">1500</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.DEPARTMENTS (DEPARTMENT_ID,DEPARTMENT_NAME,MANAGER_ID,LOCATION_ID) <span class="keyword">values</span> (<span class="number">60</span>,<span class="string">'IT'</span>,<span class="number">103</span>,<span class="number">1400</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.DEPARTMENTS (DEPARTMENT_ID,DEPARTMENT_NAME,MANAGER_ID,LOCATION_ID) <span class="keyword">values</span> (<span class="number">70</span>,<span class="string">'Public Relations'</span>,<span class="number">204</span>,<span class="number">2700</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.DEPARTMENTS (DEPARTMENT_ID,DEPARTMENT_NAME,MANAGER_ID,LOCATION_ID) <span class="keyword">values</span> (<span class="number">80</span>,<span class="string">'Sales'</span>,<span class="number">145</span>,<span class="number">2500</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.DEPARTMENTS (DEPARTMENT_ID,DEPARTMENT_NAME,MANAGER_ID,LOCATION_ID) <span class="keyword">values</span> (<span class="number">90</span>,<span class="string">'Executive'</span>,<span class="number">101</span>,<span class="number">1700</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.DEPARTMENTS (DEPARTMENT_ID,DEPARTMENT_NAME,MANAGER_ID,LOCATION_ID) <span class="keyword">values</span> (<span class="number">100</span>,<span class="string">'Finance'</span>,<span class="number">108</span>,<span class="number">1700</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.DEPARTMENTS (DEPARTMENT_ID,DEPARTMENT_NAME,MANAGER_ID,LOCATION_ID) <span class="keyword">values</span> (<span class="number">110</span>,<span class="string">'Accounting'</span>,<span class="number">205</span>,<span class="number">1700</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.DEPARTMENTS (DEPARTMENT_ID,DEPARTMENT_NAME,MANAGER_ID,LOCATION_ID) <span class="keyword">values</span> (<span class="number">120</span>,<span class="string">'Treasury'</span>,<span class="literal">null</span>,<span class="number">1700</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.DEPARTMENTS (DEPARTMENT_ID,DEPARTMENT_NAME,MANAGER_ID,LOCATION_ID) <span class="keyword">values</span> (<span class="number">130</span>,<span class="string">'Corporate Tax'</span>,<span class="literal">null</span>,<span class="number">1700</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.DEPARTMENTS (DEPARTMENT_ID,DEPARTMENT_NAME,MANAGER_ID,LOCATION_ID) <span class="keyword">values</span> (<span class="number">140</span>,<span class="string">'Control And Credit'</span>,<span class="literal">null</span>,<span class="number">1700</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.DEPARTMENTS (DEPARTMENT_ID,DEPARTMENT_NAME,MANAGER_ID,LOCATION_ID) <span class="keyword">values</span> (<span class="number">150</span>,<span class="string">'Shareholder Services'</span>,<span class="literal">null</span>,<span class="number">1700</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.DEPARTMENTS (DEPARTMENT_ID,DEPARTMENT_NAME,MANAGER_ID,LOCATION_ID) <span class="keyword">values</span> (<span class="number">160</span>,<span class="string">'Benefits'</span>,<span class="literal">null</span>,<span class="number">1700</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.DEPARTMENTS (DEPARTMENT_ID,DEPARTMENT_NAME,MANAGER_ID,LOCATION_ID) <span class="keyword">values</span> (<span class="number">170</span>,<span class="string">'Manufacturing'</span>,<span class="literal">null</span>,<span class="number">1700</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.DEPARTMENTS (DEPARTMENT_ID,DEPARTMENT_NAME,MANAGER_ID,LOCATION_ID) <span class="keyword">values</span> (<span class="number">180</span>,<span class="string">'Construction'</span>,<span class="literal">null</span>,<span class="number">1700</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.DEPARTMENTS (DEPARTMENT_ID,DEPARTMENT_NAME,MANAGER_ID,LOCATION_ID) <span class="keyword">values</span> (<span class="number">190</span>,<span class="string">'Contracting'</span>,<span class="literal">null</span>,<span class="number">1700</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.DEPARTMENTS (DEPARTMENT_ID,DEPARTMENT_NAME,MANAGER_ID,LOCATION_ID) <span class="keyword">values</span> (<span class="number">200</span>,<span class="string">'Operations'</span>,<span class="literal">null</span>,<span class="number">1700</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.DEPARTMENTS (DEPARTMENT_ID,DEPARTMENT_NAME,MANAGER_ID,LOCATION_ID) <span class="keyword">values</span> (<span class="number">210</span>,<span class="string">'IT Support'</span>,<span class="literal">null</span>,<span class="number">1700</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.DEPARTMENTS (DEPARTMENT_ID,DEPARTMENT_NAME,MANAGER_ID,LOCATION_ID) <span class="keyword">values</span> (<span class="number">220</span>,<span class="string">'NOC'</span>,<span class="literal">null</span>,<span class="number">1700</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.DEPARTMENTS (DEPARTMENT_ID,DEPARTMENT_NAME,MANAGER_ID,LOCATION_ID) <span class="keyword">values</span> (<span class="number">230</span>,<span class="string">'IT Helpdesk'</span>,<span class="literal">null</span>,<span class="number">1700</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.DEPARTMENTS (DEPARTMENT_ID,DEPARTMENT_NAME,MANAGER_ID,LOCATION_ID) <span class="keyword">values</span> (<span class="number">240</span>,<span class="string">'Government Sales'</span>,<span class="literal">null</span>,<span class="number">1700</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.DEPARTMENTS (DEPARTMENT_ID,DEPARTMENT_NAME,MANAGER_ID,LOCATION_ID) <span class="keyword">values</span> (<span class="number">250</span>,<span class="string">'Retail Sales'</span>,<span class="literal">null</span>,<span class="number">1700</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.DEPARTMENTS (DEPARTMENT_ID,DEPARTMENT_NAME,MANAGER_ID,LOCATION_ID) <span class="keyword">values</span> (<span class="number">260</span>,<span class="string">'Recruiting'</span>,<span class="literal">null</span>,<span class="number">1700</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.DEPARTMENTS (DEPARTMENT_ID,DEPARTMENT_NAME,MANAGER_ID,LOCATION_ID) <span class="keyword">values</span> (<span class="number">270</span>,<span class="string">'Payroll'</span>,<span class="literal">null</span>,<span class="number">1700</span>);</span><br><span class="line">REM INSERTING into ZS.DEPT_SALARY_STAT</span><br><span class="line"><span class="keyword">SET</span> <span class="keyword">DEFINE</span> <span class="keyword">OFF</span>;</span><br><span class="line">REM INSERTING into ZS.EMPLOYEES</span><br><span class="line"><span class="keyword">SET</span> <span class="keyword">DEFINE</span> <span class="keyword">OFF</span>;</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">100</span>,<span class="string">'Steven'</span>,<span class="string">'King'</span>,<span class="string">'SKING'</span>,<span class="string">'515.123.4567'</span>,<span class="keyword">to_date</span>(<span class="string">'17-1月 -87'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'AD_PRES'</span>,<span class="number">24000</span>,<span class="literal">null</span>,<span class="literal">null</span>,<span class="number">90</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">101</span>,<span class="string">'Neena'</span>,<span class="string">'Kochhar'</span>,<span class="string">'NKOCHHAR'</span>,<span class="string">'515.123.4568'</span>,<span class="keyword">to_date</span>(<span class="string">'21-9月 -89'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'AD_VP'</span>,<span class="number">17000</span>,<span class="literal">null</span>,<span class="number">100</span>,<span class="number">90</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">102</span>,<span class="string">'Lex'</span>,<span class="string">'De Haan'</span>,<span class="string">'LDEHAAN'</span>,<span class="string">'515.123.4569'</span>,<span class="keyword">to_date</span>(<span class="string">'13-6月 -93'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'AD_VP'</span>,<span class="number">17000</span>,<span class="literal">null</span>,<span class="number">100</span>,<span class="number">90</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">103</span>,<span class="string">'Alexander'</span>,<span class="string">'Hunold'</span>,<span class="string">'AHUNOLD'</span>,<span class="string">'590.423.4567'</span>,<span class="keyword">to_date</span>(<span class="string">'03-6月 -90'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'IT_PROG'</span>,<span class="number">9000</span>,<span class="literal">null</span>,<span class="number">102</span>,<span class="number">60</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">104</span>,<span class="string">'Bruce'</span>,<span class="string">'Ernst'</span>,<span class="string">'BERNST'</span>,<span class="string">'590.423.4568'</span>,<span class="keyword">to_date</span>(<span class="string">'21-5月 -91'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'IT_PROG'</span>,<span class="number">6000</span>,<span class="literal">null</span>,<span class="number">103</span>,<span class="number">60</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">105</span>,<span class="string">'David'</span>,<span class="string">'Austin'</span>,<span class="string">'DAUSTIN'</span>,<span class="string">'590.423.4569'</span>,<span class="keyword">to_date</span>(<span class="string">'25-1月 -97'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'IT_PROG'</span>,<span class="number">4800</span>,<span class="literal">null</span>,<span class="number">103</span>,<span class="number">60</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">106</span>,<span class="string">'Valli'</span>,<span class="string">'Pataballa'</span>,<span class="string">'VPATABAL'</span>,<span class="string">'590.423.4560'</span>,<span class="keyword">to_date</span>(<span class="string">'05-11月-98'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'IT_PROG'</span>,<span class="number">4800</span>,<span class="literal">null</span>,<span class="number">103</span>,<span class="number">60</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">107</span>,<span class="string">'Diana'</span>,<span class="string">'Lorentz'</span>,<span class="string">'DLORENTZ'</span>,<span class="string">'590.423.5567'</span>,<span class="keyword">to_date</span>(<span class="string">'07-11月-99'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'IT_PROG'</span>,<span class="number">4200</span>,<span class="literal">null</span>,<span class="number">103</span>,<span class="number">60</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">108</span>,<span class="string">'Nancy'</span>,<span class="string">'Greenberg'</span>,<span class="string">'NGREENBE'</span>,<span class="string">'515.124.4569'</span>,<span class="keyword">to_date</span>(<span class="string">'17-8月 -94'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'FI_MGR'</span>,<span class="number">12000</span>,<span class="literal">null</span>,<span class="number">101</span>,<span class="number">100</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">109</span>,<span class="string">'Daniel'</span>,<span class="string">'Faviet'</span>,<span class="string">'DFAVIET'</span>,<span class="string">'515.124.4169'</span>,<span class="keyword">to_date</span>(<span class="string">'16-8月 -94'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'FI_ACCOUNT'</span>,<span class="number">9000</span>,<span class="literal">null</span>,<span class="number">108</span>,<span class="number">100</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">110</span>,<span class="string">'John'</span>,<span class="string">'Chen'</span>,<span class="string">'JCHEN'</span>,<span class="string">'515.124.4269'</span>,<span class="keyword">to_date</span>(<span class="string">'28-9月 -97'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'FI_ACCOUNT'</span>,<span class="number">8200</span>,<span class="literal">null</span>,<span class="number">108</span>,<span class="number">100</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">111</span>,<span class="string">'Ismael'</span>,<span class="string">'Sciarra'</span>,<span class="string">'ISCIARRA'</span>,<span class="string">'515.124.4369'</span>,<span class="keyword">to_date</span>(<span class="string">'30-9月 -97'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'FI_ACCOUNT'</span>,<span class="number">7700</span>,<span class="literal">null</span>,<span class="number">108</span>,<span class="number">100</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">112</span>,<span class="string">'Jose Manuel'</span>,<span class="string">'Urman'</span>,<span class="string">'JMURMAN'</span>,<span class="string">'515.124.4469'</span>,<span class="keyword">to_date</span>(<span class="string">'07-5月 -98'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'FI_ACCOUNT'</span>,<span class="number">7800</span>,<span class="literal">null</span>,<span class="number">108</span>,<span class="number">100</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">113</span>,<span class="string">'Luis'</span>,<span class="string">'Popp'</span>,<span class="string">'LPOPP'</span>,<span class="string">'515.124.4567'</span>,<span class="keyword">to_date</span>(<span class="string">'07-12月-99'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'FI_ACCOUNT'</span>,<span class="number">6900</span>,<span class="literal">null</span>,<span class="number">108</span>,<span class="number">100</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">114</span>,<span class="string">'Den'</span>,<span class="string">'Raphaely'</span>,<span class="string">'DRAPHEAL'</span>,<span class="string">'515.127.4561'</span>,<span class="keyword">to_date</span>(<span class="string">'07-12月-94'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'PU_MAN'</span>,<span class="number">11000</span>,<span class="literal">null</span>,<span class="number">100</span>,<span class="number">30</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">115</span>,<span class="string">'Alexander'</span>,<span class="string">'Khoo'</span>,<span class="string">'AKHOO'</span>,<span class="string">'515.127.4562'</span>,<span class="keyword">to_date</span>(<span class="string">'18-5月 -95'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'PU_CLERK'</span>,<span class="number">3100</span>,<span class="literal">null</span>,<span class="number">114</span>,<span class="number">30</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">116</span>,<span class="string">'Shelli'</span>,<span class="string">'Baida'</span>,<span class="string">'SBAIDA'</span>,<span class="string">'515.127.4563'</span>,<span class="keyword">to_date</span>(<span class="string">'24-12月-97'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'PU_CLERK'</span>,<span class="number">2900</span>,<span class="literal">null</span>,<span class="number">114</span>,<span class="number">30</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">117</span>,<span class="string">'Sigal'</span>,<span class="string">'Tobias'</span>,<span class="string">'STOBIAS'</span>,<span class="string">'515.127.4564'</span>,<span class="keyword">to_date</span>(<span class="string">'24-7月 -97'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'PU_CLERK'</span>,<span class="number">2800</span>,<span class="literal">null</span>,<span class="number">114</span>,<span class="number">30</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">118</span>,<span class="string">'Guy'</span>,<span class="string">'Himuro'</span>,<span class="string">'GHIMURO'</span>,<span class="string">'515.127.4565'</span>,<span class="keyword">to_date</span>(<span class="string">'15-11月-98'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'PU_CLERK'</span>,<span class="number">2600</span>,<span class="literal">null</span>,<span class="number">114</span>,<span class="number">30</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">119</span>,<span class="string">'Karen'</span>,<span class="string">'Colmenares'</span>,<span class="string">'KCOLMENA'</span>,<span class="string">'515.127.4566'</span>,<span class="keyword">to_date</span>(<span class="string">'10-8月 -99'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'PU_CLERK'</span>,<span class="number">2500</span>,<span class="literal">null</span>,<span class="number">114</span>,<span class="number">30</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">120</span>,<span class="string">'Matthew'</span>,<span class="string">'Weiss'</span>,<span class="string">'MWEISS'</span>,<span class="string">'650.123.1234'</span>,<span class="keyword">to_date</span>(<span class="string">'18-7月 -96'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'ST_MAN'</span>,<span class="number">4450</span>,<span class="literal">null</span>,<span class="number">100</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">121</span>,<span class="string">'Adam'</span>,<span class="string">'Fripp'</span>,<span class="string">'AFRIPP'</span>,<span class="string">'650.123.2234'</span>,<span class="keyword">to_date</span>(<span class="string">'10-4月 -97'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'ST_MAN'</span>,<span class="number">4450</span>,<span class="literal">null</span>,<span class="number">100</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">122</span>,<span class="string">'Payam'</span>,<span class="string">'Kaufling'</span>,<span class="string">'PKAUFLIN'</span>,<span class="string">'650.123.3234'</span>,<span class="keyword">to_date</span>(<span class="string">'01-5月 -95'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'ST_MAN'</span>,<span class="number">4450</span>,<span class="literal">null</span>,<span class="number">100</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">123</span>,<span class="string">'Shanta'</span>,<span class="string">'Vollman'</span>,<span class="string">'SVOLLMAN'</span>,<span class="string">'650.123.4234'</span>,<span class="keyword">to_date</span>(<span class="string">'10-10月-97'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'ST_MAN'</span>,<span class="number">4450</span>,<span class="literal">null</span>,<span class="number">100</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">124</span>,<span class="string">'Kevin'</span>,<span class="string">'Mourgos'</span>,<span class="string">'KMOURGOS'</span>,<span class="string">'650.123.5234'</span>,<span class="keyword">to_date</span>(<span class="string">'16-11月-99'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'ST_MAN'</span>,<span class="number">4450</span>,<span class="literal">null</span>,<span class="number">100</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">125</span>,<span class="string">'07ia'</span>,<span class="string">'Nayer'</span>,<span class="string">'JNAYER'</span>,<span class="string">'650.124.1214'</span>,<span class="keyword">to_date</span>(<span class="string">'16-7月 -97'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'ST_CLERK'</span>,<span class="number">4450</span>,<span class="literal">null</span>,<span class="number">120</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">126</span>,<span class="string">'Irene'</span>,<span class="string">'Mikkilineni'</span>,<span class="string">'IMIKKILI'</span>,<span class="string">'650.124.1224'</span>,<span class="keyword">to_date</span>(<span class="string">'28-9月 -98'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'ST_CLERK'</span>,<span class="number">4450</span>,<span class="literal">null</span>,<span class="number">120</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">127</span>,<span class="string">'James'</span>,<span class="string">'Landry'</span>,<span class="string">'JLANDRY'</span>,<span class="string">'650.124.1334'</span>,<span class="keyword">to_date</span>(<span class="string">'14-6月 -99'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'ST_CLERK'</span>,<span class="number">4450</span>,<span class="literal">null</span>,<span class="number">120</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">128</span>,<span class="string">'Steven'</span>,<span class="string">'05kle'</span>,<span class="string">'S05KLE'</span>,<span class="string">'650.124.1434'</span>,<span class="keyword">to_date</span>(<span class="string">'08-5月 -00'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'ST_CLERK'</span>,<span class="number">4450</span>,<span class="literal">null</span>,<span class="number">120</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">129</span>,<span class="string">'Laura'</span>,<span class="string">'Bissot'</span>,<span class="string">'LBISSOT'</span>,<span class="string">'650.124.5234'</span>,<span class="keyword">to_date</span>(<span class="string">'20-8月 -97'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'ST_CLERK'</span>,<span class="number">4450</span>,<span class="literal">null</span>,<span class="number">121</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">130</span>,<span class="string">'Mozhe'</span>,<span class="string">'Atkinson'</span>,<span class="string">'MATKINSO'</span>,<span class="string">'650.124.6234'</span>,<span class="keyword">to_date</span>(<span class="string">'30-10月-97'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'ST_CLERK'</span>,<span class="number">4450</span>,<span class="literal">null</span>,<span class="number">121</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">131</span>,<span class="string">'James'</span>,<span class="string">'05low'</span>,<span class="string">'JAMRLOW'</span>,<span class="string">'650.124.7234'</span>,<span class="keyword">to_date</span>(<span class="string">'16-11月-97'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'ST_CLERK'</span>,<span class="number">4450</span>,<span class="literal">null</span>,<span class="number">121</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">132</span>,<span class="string">'TJ'</span>,<span class="string">'Olson'</span>,<span class="string">'TJOLSON'</span>,<span class="string">'650.124.8234'</span>,<span class="keyword">to_date</span>(<span class="string">'10-4月 -99'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'ST_CLERK'</span>,<span class="number">4450</span>,<span class="literal">null</span>,<span class="number">121</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">133</span>,<span class="string">'Jason'</span>,<span class="string">'Mallin'</span>,<span class="string">'JMALLIN'</span>,<span class="string">'650.127.1934'</span>,<span class="keyword">to_date</span>(<span class="string">'14-1月 -96'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'ST_CLERK'</span>,<span class="number">4450</span>,<span class="literal">null</span>,<span class="number">122</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">134</span>,<span class="string">'Michael'</span>,<span class="string">'Rogers'</span>,<span class="string">'MROGERS'</span>,<span class="string">'650.127.1834'</span>,<span class="keyword">to_date</span>(<span class="string">'26-8月 -98'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'ST_CLERK'</span>,<span class="number">4450</span>,<span class="literal">null</span>,<span class="number">122</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">135</span>,<span class="string">'Ki'</span>,<span class="string">'Gee'</span>,<span class="string">'KGEE'</span>,<span class="string">'650.127.1734'</span>,<span class="keyword">to_date</span>(<span class="string">'12-12月-99'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'ST_CLERK'</span>,<span class="number">4450</span>,<span class="literal">null</span>,<span class="number">122</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">136</span>,<span class="string">'Hazel'</span>,<span class="string">'Philtanker'</span>,<span class="string">'HPHILTAN'</span>,<span class="string">'650.127.1634'</span>,<span class="keyword">to_date</span>(<span class="string">'06-11月-00'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'ST_CLERK'</span>,<span class="number">4450</span>,<span class="literal">null</span>,<span class="number">122</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">137</span>,<span class="string">'Renske'</span>,<span class="string">'Ladwig'</span>,<span class="string">'RLADWIG'</span>,<span class="string">'650.121.1234'</span>,<span class="keyword">to_date</span>(<span class="string">'14-7月 -95'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'ST_CLERK'</span>,<span class="number">4450</span>,<span class="literal">null</span>,<span class="number">123</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">138</span>,<span class="string">'Stephen'</span>,<span class="string">'Stiles'</span>,<span class="string">'SSTILES'</span>,<span class="string">'650.121.2034'</span>,<span class="keyword">to_date</span>(<span class="string">'26-10月-97'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'ST_CLERK'</span>,<span class="number">4450</span>,<span class="literal">null</span>,<span class="number">123</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">139</span>,<span class="string">'John'</span>,<span class="string">'Seo'</span>,<span class="string">'JSEO'</span>,<span class="string">'650.121.2019'</span>,<span class="keyword">to_date</span>(<span class="string">'12-11月-98'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'ST_CLERK'</span>,<span class="number">4450</span>,<span class="literal">null</span>,<span class="number">123</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">140</span>,<span class="string">'Joshua'</span>,<span class="string">'Patel'</span>,<span class="string">'JPATEL'</span>,<span class="string">'650.121.1834'</span>,<span class="keyword">to_date</span>(<span class="string">'06-4月 -98'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'ST_CLERK'</span>,<span class="number">4450</span>,<span class="literal">null</span>,<span class="number">123</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">141</span>,<span class="string">'Trenna'</span>,<span class="string">'Rajs'</span>,<span class="string">'TRAJS'</span>,<span class="string">'650.121.8009'</span>,<span class="keyword">to_date</span>(<span class="string">'17-10月-95'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'ST_CLERK'</span>,<span class="number">4450</span>,<span class="literal">null</span>,<span class="number">124</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">142</span>,<span class="string">'Curtis'</span>,<span class="string">'Davies'</span>,<span class="string">'CDAVIES'</span>,<span class="string">'650.121.2994'</span>,<span class="keyword">to_date</span>(<span class="string">'29-6月 -97'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'ST_CLERK'</span>,<span class="number">4450</span>,<span class="literal">null</span>,<span class="number">124</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">143</span>,<span class="string">'Randall'</span>,<span class="string">'Matos'</span>,<span class="string">'RMATOS'</span>,<span class="string">'650.121.2874'</span>,<span class="keyword">to_date</span>(<span class="string">'15-5月 -98'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'ST_CLERK'</span>,<span class="number">4450</span>,<span class="literal">null</span>,<span class="number">124</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">144</span>,<span class="string">'Peter'</span>,<span class="string">'Vargas'</span>,<span class="string">'PVARGAS'</span>,<span class="string">'650.121.2004'</span>,<span class="keyword">to_date</span>(<span class="string">'09-7月 -98'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'ST_CLERK'</span>,<span class="number">4450</span>,<span class="literal">null</span>,<span class="number">124</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">145</span>,<span class="string">'John'</span>,<span class="string">'Russell'</span>,<span class="string">'JRUSSEL'</span>,<span class="string">'011.44.1344.429268'</span>,<span class="keyword">to_date</span>(<span class="string">'01-10月-96'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_MAN'</span>,<span class="number">14000</span>,<span class="number">0.4</span>,<span class="number">100</span>,<span class="number">80</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">146</span>,<span class="string">'Karen'</span>,<span class="string">'Partners'</span>,<span class="string">'KPARTNER'</span>,<span class="string">'011.44.1344.467268'</span>,<span class="keyword">to_date</span>(<span class="string">'05-6月 -97'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_MAN'</span>,<span class="number">13500</span>,<span class="number">0.3</span>,<span class="number">100</span>,<span class="number">80</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">147</span>,<span class="string">'Alberto'</span>,<span class="string">'Errazuriz'</span>,<span class="string">'AERRAZUR'</span>,<span class="string">'011.44.1344.429278'</span>,<span class="keyword">to_date</span>(<span class="string">'10-5月 -97'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_MAN'</span>,<span class="number">12000</span>,<span class="number">0.3</span>,<span class="number">100</span>,<span class="number">80</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">148</span>,<span class="string">'Gerald'</span>,<span class="string">'Cambrault'</span>,<span class="string">'GCAMBRAU'</span>,<span class="string">'011.44.1344.619268'</span>,<span class="keyword">to_date</span>(<span class="string">'15-10月-99'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_MAN'</span>,<span class="number">11000</span>,<span class="number">0.3</span>,<span class="number">100</span>,<span class="number">80</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">149</span>,<span class="string">'Eleni'</span>,<span class="string">'Zlotkey'</span>,<span class="string">'EZLOTKEY'</span>,<span class="string">'011.44.1344.429018'</span>,<span class="keyword">to_date</span>(<span class="string">'29-6月 -00'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_MAN'</span>,<span class="number">10500</span>,<span class="number">0.2</span>,<span class="number">100</span>,<span class="number">80</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">150</span>,<span class="string">'Peter'</span>,<span class="string">'Tucker'</span>,<span class="string">'PTUCKER'</span>,<span class="string">'011.44.1344.129268'</span>,<span class="keyword">to_date</span>(<span class="string">'30-6月 -97'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_REP'</span>,<span class="number">10000</span>,<span class="number">0.3</span>,<span class="number">145</span>,<span class="number">80</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">151</span>,<span class="string">'David'</span>,<span class="string">'Bernstein'</span>,<span class="string">'DBERNSTE'</span>,<span class="string">'011.44.1344.345268'</span>,<span class="keyword">to_date</span>(<span class="string">'24-5月 -97'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_REP'</span>,<span class="number">9500</span>,<span class="number">0.25</span>,<span class="number">145</span>,<span class="number">80</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">152</span>,<span class="string">'Peter'</span>,<span class="string">'Hall'</span>,<span class="string">'PHALL'</span>,<span class="string">'011.44.1344.478968'</span>,<span class="keyword">to_date</span>(<span class="string">'20-8月 -97'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_REP'</span>,<span class="number">9000</span>,<span class="number">0.25</span>,<span class="number">145</span>,<span class="number">80</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">153</span>,<span class="string">'Christopher'</span>,<span class="string">'Olsen'</span>,<span class="string">'COLSEN'</span>,<span class="string">'011.44.1344.498718'</span>,<span class="keyword">to_date</span>(<span class="string">'30-5月 -98'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_REP'</span>,<span class="number">8000</span>,<span class="number">0.2</span>,<span class="number">145</span>,<span class="number">80</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">154</span>,<span class="string">'Nanette'</span>,<span class="string">'Cambrault'</span>,<span class="string">'NCAMBRAU'</span>,<span class="string">'011.44.1344.987668'</span>,<span class="keyword">to_date</span>(<span class="string">'09-12月-98'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_REP'</span>,<span class="number">7500</span>,<span class="number">0.2</span>,<span class="number">145</span>,<span class="number">80</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">155</span>,<span class="string">'Oliver'</span>,<span class="string">'Tuvault'</span>,<span class="string">'OTUVAULT'</span>,<span class="string">'011.44.1344.486508'</span>,<span class="keyword">to_date</span>(<span class="string">'23-11月-99'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_REP'</span>,<span class="number">7000</span>,<span class="number">0.15</span>,<span class="number">145</span>,<span class="number">80</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">156</span>,<span class="string">'06ette'</span>,<span class="string">'King'</span>,<span class="string">'JKING'</span>,<span class="string">'011.44.1345.429268'</span>,<span class="keyword">to_date</span>(<span class="string">'30-6月 -96'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_REP'</span>,<span class="number">10000</span>,<span class="number">0.35</span>,<span class="number">146</span>,<span class="number">80</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">157</span>,<span class="string">'Patrick'</span>,<span class="string">'Sully'</span>,<span class="string">'PSULLY'</span>,<span class="string">'011.44.1345.929268'</span>,<span class="keyword">to_date</span>(<span class="string">'04-5月 -96'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_REP'</span>,<span class="number">9500</span>,<span class="number">0.35</span>,<span class="number">146</span>,<span class="number">80</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">158</span>,<span class="string">'Allan'</span>,<span class="string">'McEwen'</span>,<span class="string">'AMCEWEN'</span>,<span class="string">'011.44.1345.829268'</span>,<span class="keyword">to_date</span>(<span class="string">'01-8月 -96'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_REP'</span>,<span class="number">9000</span>,<span class="number">0.35</span>,<span class="number">146</span>,<span class="number">80</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">159</span>,<span class="string">'Lindsey'</span>,<span class="string">'Smith'</span>,<span class="string">'LSMITH'</span>,<span class="string">'011.44.1345.729268'</span>,<span class="keyword">to_date</span>(<span class="string">'10-5月 -97'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_REP'</span>,<span class="number">8000</span>,<span class="number">0.3</span>,<span class="number">146</span>,<span class="number">80</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">160</span>,<span class="string">'Louise'</span>,<span class="string">'Doran'</span>,<span class="string">'LDORAN'</span>,<span class="string">'011.44.1345.629268'</span>,<span class="keyword">to_date</span>(<span class="string">'15-12月-97'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_REP'</span>,<span class="number">7500</span>,<span class="number">0.3</span>,<span class="number">146</span>,<span class="number">80</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">161</span>,<span class="string">'Sarath'</span>,<span class="string">'Sewall'</span>,<span class="string">'SSEWALL'</span>,<span class="string">'011.44.1345.529268'</span>,<span class="keyword">to_date</span>(<span class="string">'03-11月-98'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_REP'</span>,<span class="number">7000</span>,<span class="number">0.25</span>,<span class="number">146</span>,<span class="number">80</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">162</span>,<span class="string">'Clara'</span>,<span class="string">'Vishney'</span>,<span class="string">'CVISHNEY'</span>,<span class="string">'011.44.1346.129268'</span>,<span class="keyword">to_date</span>(<span class="string">'11-11月-97'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_REP'</span>,<span class="number">10500</span>,<span class="number">0.25</span>,<span class="number">147</span>,<span class="number">80</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">163</span>,<span class="string">'Danielle'</span>,<span class="string">'Greene'</span>,<span class="string">'DGREENE'</span>,<span class="string">'011.44.1346.229268'</span>,<span class="keyword">to_date</span>(<span class="string">'19-5月 -99'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_REP'</span>,<span class="number">9500</span>,<span class="number">0.15</span>,<span class="number">147</span>,<span class="number">80</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">164</span>,<span class="string">'Mattea'</span>,<span class="string">'05vins'</span>,<span class="string">'M05VINS'</span>,<span class="string">'011.44.1346.329268'</span>,<span class="keyword">to_date</span>(<span class="string">'24-6月 -00'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_REP'</span>,<span class="number">7200</span>,<span class="number">0.1</span>,<span class="number">147</span>,<span class="number">80</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">165</span>,<span class="string">'David'</span>,<span class="string">'Lee'</span>,<span class="string">'DLEE'</span>,<span class="string">'011.44.1346.529268'</span>,<span class="keyword">to_date</span>(<span class="string">'23-11月-00'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_REP'</span>,<span class="number">6800</span>,<span class="number">0.1</span>,<span class="number">147</span>,<span class="number">80</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">166</span>,<span class="string">'Sundar'</span>,<span class="string">'Ande'</span>,<span class="string">'SANDE'</span>,<span class="string">'011.44.1346.629268'</span>,<span class="keyword">to_date</span>(<span class="string">'24-5月 -00'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_REP'</span>,<span class="number">6400</span>,<span class="number">0.1</span>,<span class="number">147</span>,<span class="number">80</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">167</span>,<span class="string">'Amit'</span>,<span class="string">'Banda'</span>,<span class="string">'ABANDA'</span>,<span class="string">'011.44.1346.729268'</span>,<span class="keyword">to_date</span>(<span class="string">'21-4月 -00'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_REP'</span>,<span class="number">6200</span>,<span class="number">0.1</span>,<span class="number">147</span>,<span class="number">80</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">168</span>,<span class="string">'Lisa'</span>,<span class="string">'Ozer'</span>,<span class="string">'LOZER'</span>,<span class="string">'011.44.1343.929268'</span>,<span class="keyword">to_date</span>(<span class="string">'11-5月 -97'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_REP'</span>,<span class="number">11500</span>,<span class="number">0.25</span>,<span class="number">148</span>,<span class="number">80</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">169</span>,<span class="string">'Harrison'</span>,<span class="string">'Bloom'</span>,<span class="string">'HBLOOM'</span>,<span class="string">'011.44.1343.829268'</span>,<span class="keyword">to_date</span>(<span class="string">'23-5月 -98'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_REP'</span>,<span class="number">10000</span>,<span class="number">0.2</span>,<span class="number">148</span>,<span class="number">80</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">170</span>,<span class="string">'Tayler'</span>,<span class="string">'Fox'</span>,<span class="string">'TFOX'</span>,<span class="string">'011.44.1343.729268'</span>,<span class="keyword">to_date</span>(<span class="string">'24-6月 -98'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_REP'</span>,<span class="number">9600</span>,<span class="number">0.2</span>,<span class="number">148</span>,<span class="number">80</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">171</span>,<span class="string">'William'</span>,<span class="string">'Smith'</span>,<span class="string">'WSMITH'</span>,<span class="string">'011.44.1343.629268'</span>,<span class="keyword">to_date</span>(<span class="string">'23-11月-99'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_REP'</span>,<span class="number">7400</span>,<span class="number">0.15</span>,<span class="number">148</span>,<span class="number">80</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">172</span>,<span class="string">'Elizabeth'</span>,<span class="string">'Bates'</span>,<span class="string">'EBATES'</span>,<span class="string">'011.44.1343.529268'</span>,<span class="keyword">to_date</span>(<span class="string">'24-5月 -99'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_REP'</span>,<span class="number">7300</span>,<span class="number">0.15</span>,<span class="number">148</span>,<span class="number">80</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">173</span>,<span class="string">'Sundita'</span>,<span class="string">'Ku05'</span>,<span class="string">'SKU05'</span>,<span class="string">'011.44.1343.329268'</span>,<span class="keyword">to_date</span>(<span class="string">'21-4月 -00'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_REP'</span>,<span class="number">6100</span>,<span class="number">0.1</span>,<span class="number">148</span>,<span class="number">80</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">174</span>,<span class="string">'Ellen'</span>,<span class="string">'Abel'</span>,<span class="string">'EABEL'</span>,<span class="string">'011.44.1644.429267'</span>,<span class="keyword">to_date</span>(<span class="string">'11-5月 -96'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_REP'</span>,<span class="number">11000</span>,<span class="number">0.3</span>,<span class="number">149</span>,<span class="number">80</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">175</span>,<span class="string">'Alyssa'</span>,<span class="string">'Hutton'</span>,<span class="string">'AHUTTON'</span>,<span class="string">'011.44.1644.429266'</span>,<span class="keyword">to_date</span>(<span class="string">'19-5月 -97'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_REP'</span>,<span class="number">8800</span>,<span class="number">0.25</span>,<span class="number">149</span>,<span class="number">80</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">176</span>,<span class="string">'Jonathon'</span>,<span class="string">'Taylor'</span>,<span class="string">'JTAYLOR'</span>,<span class="string">'011.44.1644.429265'</span>,<span class="keyword">to_date</span>(<span class="string">'24-5月 -98'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_REP'</span>,<span class="number">8600</span>,<span class="number">0.2</span>,<span class="number">149</span>,<span class="number">80</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">177</span>,<span class="string">'Jack'</span>,<span class="string">'Livingston'</span>,<span class="string">'JLIVINGS'</span>,<span class="string">'011.44.1644.429264'</span>,<span class="keyword">to_date</span>(<span class="string">'23-4月 -98'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_REP'</span>,<span class="number">8400</span>,<span class="number">0.2</span>,<span class="number">149</span>,<span class="number">80</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">178</span>,<span class="string">'Kimberely'</span>,<span class="string">'Grant'</span>,<span class="string">'KGRANT'</span>,<span class="string">'011.44.1644.429263'</span>,<span class="keyword">to_date</span>(<span class="string">'24-5月 -99'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_REP'</span>,<span class="number">7000</span>,<span class="number">0.15</span>,<span class="number">149</span>,<span class="number">20</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">179</span>,<span class="string">'Charles'</span>,<span class="string">'Johnson'</span>,<span class="string">'CJOHNSON'</span>,<span class="string">'011.44.1644.429262'</span>,<span class="keyword">to_date</span>(<span class="string">'04-6月 -00'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_REP'</span>,<span class="number">6200</span>,<span class="number">0.1</span>,<span class="number">149</span>,<span class="number">80</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">180</span>,<span class="string">'Winston'</span>,<span class="string">'Taylor'</span>,<span class="string">'WTAYLOR'</span>,<span class="string">'650.507.9876'</span>,<span class="keyword">to_date</span>(<span class="string">'24-6月 -98'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SH_CLERK'</span>,<span class="number">4450</span>,<span class="literal">null</span>,<span class="number">120</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">181</span>,<span class="string">'Jean'</span>,<span class="string">'Fleaur'</span>,<span class="string">'JFLEAUR'</span>,<span class="string">'650.507.9877'</span>,<span class="keyword">to_date</span>(<span class="string">'23-11月-98'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SH_CLERK'</span>,<span class="number">4450</span>,<span class="literal">null</span>,<span class="number">120</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">182</span>,<span class="string">'05tha'</span>,<span class="string">'Sullivan'</span>,<span class="string">'MSULLIVA'</span>,<span class="string">'650.507.9878'</span>,<span class="keyword">to_date</span>(<span class="string">'21-1月 -99'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SH_CLERK'</span>,<span class="number">4450</span>,<span class="literal">null</span>,<span class="number">120</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">183</span>,<span class="string">'Girard'</span>,<span class="string">'Geoni'</span>,<span class="string">'GGEONI'</span>,<span class="string">'650.507.9879'</span>,<span class="keyword">to_date</span>(<span class="string">'03-11月-00'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SH_CLERK'</span>,<span class="number">4450</span>,<span class="literal">null</span>,<span class="number">120</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">184</span>,<span class="string">'Nandita'</span>,<span class="string">'Sarchand'</span>,<span class="string">'NSARCHAN'</span>,<span class="string">'650.509.1876'</span>,<span class="keyword">to_date</span>(<span class="string">'27-6月 -96'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SH_CLERK'</span>,<span class="number">4450</span>,<span class="literal">null</span>,<span class="number">121</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">185</span>,<span class="string">'Alexis'</span>,<span class="string">'Bull'</span>,<span class="string">'ABULL'</span>,<span class="string">'650.509.2876'</span>,<span class="keyword">to_date</span>(<span class="string">'20-11月-97'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SH_CLERK'</span>,<span class="number">4450</span>,<span class="literal">null</span>,<span class="number">121</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">186</span>,<span class="string">'07ia'</span>,<span class="string">'Dellinger'</span>,<span class="string">'JDELLING'</span>,<span class="string">'650.509.3876'</span>,<span class="keyword">to_date</span>(<span class="string">'24-1月 -98'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SH_CLERK'</span>,<span class="number">4450</span>,<span class="literal">null</span>,<span class="number">121</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">187</span>,<span class="string">'Anthony'</span>,<span class="string">'Cabrio'</span>,<span class="string">'ACABRIO'</span>,<span class="string">'650.509.4876'</span>,<span class="keyword">to_date</span>(<span class="string">'07-11月-99'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SH_CLERK'</span>,<span class="number">4450</span>,<span class="literal">null</span>,<span class="number">121</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">188</span>,<span class="string">'Kelly'</span>,<span class="string">'Chung'</span>,<span class="string">'KCHUNG'</span>,<span class="string">'650.505.1876'</span>,<span class="keyword">to_date</span>(<span class="string">'14-1月 -97'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SH_CLERK'</span>,<span class="number">4450</span>,<span class="literal">null</span>,<span class="number">122</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">189</span>,<span class="string">'Jennifer'</span>,<span class="string">'Dilly'</span>,<span class="string">'JDILLY'</span>,<span class="string">'650.505.2876'</span>,<span class="keyword">to_date</span>(<span class="string">'13-8月 -97'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SH_CLERK'</span>,<span class="number">4450</span>,<span class="literal">null</span>,<span class="number">122</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">190</span>,<span class="string">'Timothy'</span>,<span class="string">'Gates'</span>,<span class="string">'TGATES'</span>,<span class="string">'650.505.3876'</span>,<span class="keyword">to_date</span>(<span class="string">'11-7月 -98'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SH_CLERK'</span>,<span class="number">4450</span>,<span class="literal">null</span>,<span class="number">122</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">191</span>,<span class="string">'Randall'</span>,<span class="string">'Perkins'</span>,<span class="string">'RPERKINS'</span>,<span class="string">'650.505.4876'</span>,<span class="keyword">to_date</span>(<span class="string">'19-12月-99'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SH_CLERK'</span>,<span class="number">4450</span>,<span class="literal">null</span>,<span class="number">122</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">192</span>,<span class="string">'Sarah'</span>,<span class="string">'Bell'</span>,<span class="string">'SBELL'</span>,<span class="string">'650.501.1876'</span>,<span class="keyword">to_date</span>(<span class="string">'04-11月-96'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SH_CLERK'</span>,<span class="number">4450</span>,<span class="literal">null</span>,<span class="number">123</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">193</span>,<span class="string">'Britney'</span>,<span class="string">'Everett'</span>,<span class="string">'BEVERETT'</span>,<span class="string">'650.501.2876'</span>,<span class="keyword">to_date</span>(<span class="string">'03-5月 -97'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SH_CLERK'</span>,<span class="number">4450</span>,<span class="literal">null</span>,<span class="number">123</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">194</span>,<span class="string">'Samuel'</span>,<span class="string">'McCain'</span>,<span class="string">'SMCCAIN'</span>,<span class="string">'650.501.3876'</span>,<span class="keyword">to_date</span>(<span class="string">'01-7月 -98'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SH_CLERK'</span>,<span class="number">4450</span>,<span class="literal">null</span>,<span class="number">123</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">195</span>,<span class="string">'Vance'</span>,<span class="string">'Jones'</span>,<span class="string">'VJONES'</span>,<span class="string">'650.501.4876'</span>,<span class="keyword">to_date</span>(<span class="string">'17-5月 -99'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SH_CLERK'</span>,<span class="number">4450</span>,<span class="literal">null</span>,<span class="number">123</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">196</span>,<span class="string">'Alana'</span>,<span class="string">'Walsh'</span>,<span class="string">'AWALSH'</span>,<span class="string">'650.507.9811'</span>,<span class="keyword">to_date</span>(<span class="string">'24-4月 -98'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SH_CLERK'</span>,<span class="number">4450</span>,<span class="literal">null</span>,<span class="number">124</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">197</span>,<span class="string">'Kevin'</span>,<span class="string">'Feeney'</span>,<span class="string">'KFEENEY'</span>,<span class="string">'650.507.9822'</span>,<span class="keyword">to_date</span>(<span class="string">'23-5月 -98'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SH_CLERK'</span>,<span class="number">4450</span>,<span class="literal">null</span>,<span class="number">124</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">198</span>,<span class="string">'Donald'</span>,<span class="string">'OConnell'</span>,<span class="string">'DOCONNEL'</span>,<span class="string">'650.507.9833'</span>,<span class="keyword">to_date</span>(<span class="string">'21-1月 -99'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SH_CLERK'</span>,<span class="number">4450</span>,<span class="literal">null</span>,<span class="number">124</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">199</span>,<span class="string">'Douglas'</span>,<span class="string">'Grant'</span>,<span class="string">'DGRANT'</span>,<span class="string">'650.507.9844'</span>,<span class="keyword">to_date</span>(<span class="string">'13-6月 -00'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SH_CLERK'</span>,<span class="number">4450</span>,<span class="literal">null</span>,<span class="number">124</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">200</span>,<span class="string">'Jennifer'</span>,<span class="string">'Whalen'</span>,<span class="string">'JWHALEN'</span>,<span class="string">'515.123.4444'</span>,<span class="keyword">to_date</span>(<span class="string">'17-9月 -87'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'AD_ASST'</span>,<span class="number">4400</span>,<span class="literal">null</span>,<span class="number">101</span>,<span class="number">20</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">201</span>,<span class="string">'Michael'</span>,<span class="string">'Hartstein'</span>,<span class="string">'MHARTSTE'</span>,<span class="string">'515.123.5555'</span>,<span class="keyword">to_date</span>(<span class="string">'17-11月-96'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'MK_MAN'</span>,<span class="number">13000</span>,<span class="literal">null</span>,<span class="number">100</span>,<span class="number">20</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">202</span>,<span class="string">'Pat'</span>,<span class="string">'Fay'</span>,<span class="string">'PFAY'</span>,<span class="string">'603.123.6666'</span>,<span class="keyword">to_date</span>(<span class="string">'17-8月 -97'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'MK_REP'</span>,<span class="number">6000</span>,<span class="literal">null</span>,<span class="number">201</span>,<span class="number">20</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">203</span>,<span class="string">'Susan'</span>,<span class="string">'Mavris'</span>,<span class="string">'SMAVRIS'</span>,<span class="string">'515.123.7777'</span>,<span class="keyword">to_date</span>(<span class="string">'07-1月 -94'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'HR_REP'</span>,<span class="number">6500</span>,<span class="literal">null</span>,<span class="number">101</span>,<span class="number">40</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">204</span>,<span class="string">'Hermann'</span>,<span class="string">'Baer'</span>,<span class="string">'HBAER'</span>,<span class="string">'515.123.8888'</span>,<span class="keyword">to_date</span>(<span class="string">'07-1月 -94'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'PR_REP'</span>,<span class="number">10000</span>,<span class="literal">null</span>,<span class="number">101</span>,<span class="number">70</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">205</span>,<span class="string">'Shelley'</span>,<span class="string">'Higgins'</span>,<span class="string">'SHIGGINS'</span>,<span class="string">'515.123.8080'</span>,<span class="keyword">to_date</span>(<span class="string">'07-1月 -94'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'AC_MGR'</span>,<span class="number">12000</span>,<span class="literal">null</span>,<span class="number">101</span>,<span class="number">110</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">206</span>,<span class="string">'William'</span>,<span class="string">'Gietz'</span>,<span class="string">'WGIETZ'</span>,<span class="string">'515.123.8181'</span>,<span class="keyword">to_date</span>(<span class="string">'07-1月 -94'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'AC_ACCOUNT'</span>,<span class="number">8300</span>,<span class="literal">null</span>,<span class="number">205</span>,<span class="number">110</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMPLOYEES (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">2019</span>,<span class="string">'Eleni'</span>,<span class="string">'wood'</span>,<span class="string">'wood@neusoft.edu.cn'</span>,<span class="string">'011.44.1344.429018'</span>,<span class="keyword">to_date</span>(<span class="string">'29-6月 -00'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_MAN'</span>,<span class="number">10500</span>,<span class="number">0.2</span>,<span class="number">100</span>,<span class="number">80</span>);</span><br><span class="line">REM INSERTING into ZS.EMP_10</span><br><span class="line"><span class="keyword">SET</span> <span class="keyword">DEFINE</span> <span class="keyword">OFF</span>;</span><br><span class="line">REM INSERTING into ZS.EMP_20</span><br><span class="line"><span class="keyword">SET</span> <span class="keyword">DEFINE</span> <span class="keyword">OFF</span>;</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_20 (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">200</span>,<span class="string">'Jennifer'</span>,<span class="string">'Whalen'</span>,<span class="string">'JWHALEN'</span>,<span class="string">'515.123.4444'</span>,<span class="keyword">to_date</span>(<span class="string">'17-9月 -87'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'AD_ASST'</span>,<span class="number">4400</span>,<span class="literal">null</span>,<span class="number">101</span>,<span class="number">20</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_20 (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">201</span>,<span class="string">'Michael'</span>,<span class="string">'Hartstein'</span>,<span class="string">'MHARTSTE'</span>,<span class="string">'515.123.5555'</span>,<span class="keyword">to_date</span>(<span class="string">'17-11月-96'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'MK_MAN'</span>,<span class="number">13000</span>,<span class="literal">null</span>,<span class="number">100</span>,<span class="number">20</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_20 (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">202</span>,<span class="string">'Pat'</span>,<span class="string">'Fay'</span>,<span class="string">'PFAY'</span>,<span class="string">'603.123.6666'</span>,<span class="keyword">to_date</span>(<span class="string">'17-8月 -97'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'MK_REP'</span>,<span class="number">6000</span>,<span class="literal">null</span>,<span class="number">201</span>,<span class="number">20</span>);</span><br><span class="line">REM INSERTING into ZS.EMP_30</span><br><span class="line"><span class="keyword">SET</span> <span class="keyword">DEFINE</span> <span class="keyword">OFF</span>;</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_30 (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">114</span>,<span class="string">'Den'</span>,<span class="string">'Raphaely'</span>,<span class="string">'DRAPHEAL'</span>,<span class="string">'515.127.4561'</span>,<span class="keyword">to_date</span>(<span class="string">'07-12月-94'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'PU_MAN'</span>,<span class="number">11000</span>,<span class="literal">null</span>,<span class="number">100</span>,<span class="number">30</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_30 (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">115</span>,<span class="string">'Alexander'</span>,<span class="string">'Khoo'</span>,<span class="string">'AKHOO'</span>,<span class="string">'515.127.4562'</span>,<span class="keyword">to_date</span>(<span class="string">'18-5月 -95'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'PU_CLERK'</span>,<span class="number">3100</span>,<span class="literal">null</span>,<span class="number">114</span>,<span class="number">30</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_30 (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">116</span>,<span class="string">'Shelli'</span>,<span class="string">'Baida'</span>,<span class="string">'SBAIDA'</span>,<span class="string">'515.127.4563'</span>,<span class="keyword">to_date</span>(<span class="string">'24-12月-97'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'PU_CLERK'</span>,<span class="number">2900</span>,<span class="literal">null</span>,<span class="number">114</span>,<span class="number">30</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_30 (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">117</span>,<span class="string">'Sigal'</span>,<span class="string">'Tobias'</span>,<span class="string">'STOBIAS'</span>,<span class="string">'515.127.4564'</span>,<span class="keyword">to_date</span>(<span class="string">'24-7月 -97'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'PU_CLERK'</span>,<span class="number">2800</span>,<span class="literal">null</span>,<span class="number">114</span>,<span class="number">30</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_30 (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">118</span>,<span class="string">'Guy'</span>,<span class="string">'Himuro'</span>,<span class="string">'GHIMURO'</span>,<span class="string">'515.127.4565'</span>,<span class="keyword">to_date</span>(<span class="string">'15-11月-98'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'PU_CLERK'</span>,<span class="number">2600</span>,<span class="literal">null</span>,<span class="number">114</span>,<span class="number">30</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_30 (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">119</span>,<span class="string">'Karen'</span>,<span class="string">'Colmenares'</span>,<span class="string">'KCOLMENA'</span>,<span class="string">'515.127.4566'</span>,<span class="keyword">to_date</span>(<span class="string">'10-8月 -99'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'PU_CLERK'</span>,<span class="number">2500</span>,<span class="literal">null</span>,<span class="number">114</span>,<span class="number">30</span>);</span><br><span class="line">REM INSERTING into ZS.EMP_MGR</span><br><span class="line"><span class="keyword">SET</span> <span class="keyword">DEFINE</span> <span class="keyword">OFF</span>;</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_MGR (EMPLOYEE_ID,MANAGER_ID,SALARY) <span class="keyword">values</span> (<span class="number">100</span>,<span class="literal">null</span>,<span class="number">24000</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_MGR (EMPLOYEE_ID,MANAGER_ID,SALARY) <span class="keyword">values</span> (<span class="number">101</span>,<span class="number">100</span>,<span class="number">17000</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_MGR (EMPLOYEE_ID,MANAGER_ID,SALARY) <span class="keyword">values</span> (<span class="number">102</span>,<span class="number">100</span>,<span class="number">17000</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_MGR (EMPLOYEE_ID,MANAGER_ID,SALARY) <span class="keyword">values</span> (<span class="number">103</span>,<span class="number">102</span>,<span class="number">9000</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_MGR (EMPLOYEE_ID,MANAGER_ID,SALARY) <span class="keyword">values</span> (<span class="number">108</span>,<span class="number">101</span>,<span class="number">12000</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_MGR (EMPLOYEE_ID,MANAGER_ID,SALARY) <span class="keyword">values</span> (<span class="number">109</span>,<span class="number">108</span>,<span class="number">9000</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_MGR (EMPLOYEE_ID,MANAGER_ID,SALARY) <span class="keyword">values</span> (<span class="number">110</span>,<span class="number">108</span>,<span class="number">8200</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_MGR (EMPLOYEE_ID,MANAGER_ID,SALARY) <span class="keyword">values</span> (<span class="number">114</span>,<span class="number">100</span>,<span class="number">11000</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_MGR (EMPLOYEE_ID,MANAGER_ID,SALARY) <span class="keyword">values</span> (<span class="number">121</span>,<span class="number">100</span>,<span class="number">8200</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_MGR (EMPLOYEE_ID,MANAGER_ID,SALARY) <span class="keyword">values</span> (<span class="number">145</span>,<span class="number">100</span>,<span class="number">14000</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_MGR (EMPLOYEE_ID,MANAGER_ID,SALARY) <span class="keyword">values</span> (<span class="number">146</span>,<span class="number">100</span>,<span class="number">13500</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_MGR (EMPLOYEE_ID,MANAGER_ID,SALARY) <span class="keyword">values</span> (<span class="number">147</span>,<span class="number">100</span>,<span class="number">12000</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_MGR (EMPLOYEE_ID,MANAGER_ID,SALARY) <span class="keyword">values</span> (<span class="number">148</span>,<span class="number">100</span>,<span class="number">11000</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_MGR (EMPLOYEE_ID,MANAGER_ID,SALARY) <span class="keyword">values</span> (<span class="number">149</span>,<span class="number">100</span>,<span class="number">10500</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_MGR (EMPLOYEE_ID,MANAGER_ID,SALARY) <span class="keyword">values</span> (<span class="number">150</span>,<span class="number">145</span>,<span class="number">10000</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_MGR (EMPLOYEE_ID,MANAGER_ID,SALARY) <span class="keyword">values</span> (<span class="number">151</span>,<span class="number">145</span>,<span class="number">9500</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_MGR (EMPLOYEE_ID,MANAGER_ID,SALARY) <span class="keyword">values</span> (<span class="number">152</span>,<span class="number">145</span>,<span class="number">9000</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_MGR (EMPLOYEE_ID,MANAGER_ID,SALARY) <span class="keyword">values</span> (<span class="number">156</span>,<span class="number">146</span>,<span class="number">10000</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_MGR (EMPLOYEE_ID,MANAGER_ID,SALARY) <span class="keyword">values</span> (<span class="number">157</span>,<span class="number">146</span>,<span class="number">9500</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_MGR (EMPLOYEE_ID,MANAGER_ID,SALARY) <span class="keyword">values</span> (<span class="number">158</span>,<span class="number">146</span>,<span class="number">9000</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_MGR (EMPLOYEE_ID,MANAGER_ID,SALARY) <span class="keyword">values</span> (<span class="number">162</span>,<span class="number">147</span>,<span class="number">10500</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_MGR (EMPLOYEE_ID,MANAGER_ID,SALARY) <span class="keyword">values</span> (<span class="number">163</span>,<span class="number">147</span>,<span class="number">9500</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_MGR (EMPLOYEE_ID,MANAGER_ID,SALARY) <span class="keyword">values</span> (<span class="number">168</span>,<span class="number">148</span>,<span class="number">11500</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_MGR (EMPLOYEE_ID,MANAGER_ID,SALARY) <span class="keyword">values</span> (<span class="number">169</span>,<span class="number">148</span>,<span class="number">10000</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_MGR (EMPLOYEE_ID,MANAGER_ID,SALARY) <span class="keyword">values</span> (<span class="number">170</span>,<span class="number">148</span>,<span class="number">9600</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_MGR (EMPLOYEE_ID,MANAGER_ID,SALARY) <span class="keyword">values</span> (<span class="number">174</span>,<span class="number">149</span>,<span class="number">11000</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_MGR (EMPLOYEE_ID,MANAGER_ID,SALARY) <span class="keyword">values</span> (<span class="number">175</span>,<span class="number">149</span>,<span class="number">8800</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_MGR (EMPLOYEE_ID,MANAGER_ID,SALARY) <span class="keyword">values</span> (<span class="number">176</span>,<span class="number">149</span>,<span class="number">8600</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_MGR (EMPLOYEE_ID,MANAGER_ID,SALARY) <span class="keyword">values</span> (<span class="number">177</span>,<span class="number">149</span>,<span class="number">8400</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_MGR (EMPLOYEE_ID,MANAGER_ID,SALARY) <span class="keyword">values</span> (<span class="number">201</span>,<span class="number">100</span>,<span class="number">13000</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_MGR (EMPLOYEE_ID,MANAGER_ID,SALARY) <span class="keyword">values</span> (<span class="number">204</span>,<span class="number">101</span>,<span class="number">10000</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_MGR (EMPLOYEE_ID,MANAGER_ID,SALARY) <span class="keyword">values</span> (<span class="number">205</span>,<span class="number">101</span>,<span class="number">12000</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_MGR (EMPLOYEE_ID,MANAGER_ID,SALARY) <span class="keyword">values</span> (<span class="number">206</span>,<span class="number">205</span>,<span class="number">8300</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_MGR (EMPLOYEE_ID,MANAGER_ID,SALARY) <span class="keyword">values</span> (<span class="number">2019</span>,<span class="number">100</span>,<span class="number">10500</span>);</span><br><span class="line">REM INSERTING into ZS.EMP_OTHER</span><br><span class="line"><span class="keyword">SET</span> <span class="keyword">DEFINE</span> <span class="keyword">OFF</span>;</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">100</span>,<span class="string">'Steven'</span>,<span class="string">'King'</span>,<span class="string">'SKING'</span>,<span class="string">'515.123.4567'</span>,<span class="keyword">to_date</span>(<span class="string">'17-1月 -87'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'AD_PRES'</span>,<span class="number">24000</span>,<span class="literal">null</span>,<span class="literal">null</span>,<span class="number">90</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">101</span>,<span class="string">'Neena'</span>,<span class="string">'Kochhar'</span>,<span class="string">'NKOCHHAR'</span>,<span class="string">'515.123.4568'</span>,<span class="keyword">to_date</span>(<span class="string">'21-9月 -89'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'AD_VP'</span>,<span class="number">17000</span>,<span class="literal">null</span>,<span class="number">100</span>,<span class="number">90</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">102</span>,<span class="string">'Lex'</span>,<span class="string">'De Haan'</span>,<span class="string">'LDEHAAN'</span>,<span class="string">'515.123.4569'</span>,<span class="keyword">to_date</span>(<span class="string">'13-6月 -93'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'AD_VP'</span>,<span class="number">17000</span>,<span class="literal">null</span>,<span class="number">100</span>,<span class="number">90</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">103</span>,<span class="string">'Alexander'</span>,<span class="string">'Hunold'</span>,<span class="string">'AHUNOLD'</span>,<span class="string">'590.423.4567'</span>,<span class="keyword">to_date</span>(<span class="string">'03-6月 -90'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'IT_PROG'</span>,<span class="number">9000</span>,<span class="literal">null</span>,<span class="number">102</span>,<span class="number">60</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">104</span>,<span class="string">'Bruce'</span>,<span class="string">'Ernst'</span>,<span class="string">'BERNST'</span>,<span class="string">'590.423.4568'</span>,<span class="keyword">to_date</span>(<span class="string">'21-5月 -91'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'IT_PROG'</span>,<span class="number">6000</span>,<span class="literal">null</span>,<span class="number">103</span>,<span class="number">60</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">105</span>,<span class="string">'David'</span>,<span class="string">'Austin'</span>,<span class="string">'DAUSTIN'</span>,<span class="string">'590.423.4569'</span>,<span class="keyword">to_date</span>(<span class="string">'25-1月 -97'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'IT_PROG'</span>,<span class="number">4800</span>,<span class="literal">null</span>,<span class="number">103</span>,<span class="number">60</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">106</span>,<span class="string">'Valli'</span>,<span class="string">'Pataballa'</span>,<span class="string">'VPATABAL'</span>,<span class="string">'590.423.4560'</span>,<span class="keyword">to_date</span>(<span class="string">'05-11月-98'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'IT_PROG'</span>,<span class="number">4800</span>,<span class="literal">null</span>,<span class="number">103</span>,<span class="number">60</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">107</span>,<span class="string">'Diana'</span>,<span class="string">'Lorentz'</span>,<span class="string">'DLORENTZ'</span>,<span class="string">'590.423.5567'</span>,<span class="keyword">to_date</span>(<span class="string">'07-11月-99'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'IT_PROG'</span>,<span class="number">4200</span>,<span class="literal">null</span>,<span class="number">103</span>,<span class="number">60</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">108</span>,<span class="string">'Nancy'</span>,<span class="string">'Greenberg'</span>,<span class="string">'NGREENBE'</span>,<span class="string">'515.124.4569'</span>,<span class="keyword">to_date</span>(<span class="string">'17-8月 -94'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'FI_MGR'</span>,<span class="number">12000</span>,<span class="literal">null</span>,<span class="number">101</span>,<span class="number">100</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">109</span>,<span class="string">'Daniel'</span>,<span class="string">'Faviet'</span>,<span class="string">'DFAVIET'</span>,<span class="string">'515.124.4169'</span>,<span class="keyword">to_date</span>(<span class="string">'16-8月 -94'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'FI_ACCOUNT'</span>,<span class="number">9000</span>,<span class="literal">null</span>,<span class="number">108</span>,<span class="number">100</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">110</span>,<span class="string">'John'</span>,<span class="string">'Chen'</span>,<span class="string">'JCHEN'</span>,<span class="string">'515.124.4269'</span>,<span class="keyword">to_date</span>(<span class="string">'28-9月 -97'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'FI_ACCOUNT'</span>,<span class="number">8200</span>,<span class="literal">null</span>,<span class="number">108</span>,<span class="number">100</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">111</span>,<span class="string">'Ismael'</span>,<span class="string">'Sciarra'</span>,<span class="string">'ISCIARRA'</span>,<span class="string">'515.124.4369'</span>,<span class="keyword">to_date</span>(<span class="string">'30-9月 -97'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'FI_ACCOUNT'</span>,<span class="number">7700</span>,<span class="literal">null</span>,<span class="number">108</span>,<span class="number">100</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">112</span>,<span class="string">'Jose Manuel'</span>,<span class="string">'Urman'</span>,<span class="string">'JMURMAN'</span>,<span class="string">'515.124.4469'</span>,<span class="keyword">to_date</span>(<span class="string">'07-5月 -98'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'FI_ACCOUNT'</span>,<span class="number">7800</span>,<span class="literal">null</span>,<span class="number">108</span>,<span class="number">100</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">113</span>,<span class="string">'Luis'</span>,<span class="string">'Popp'</span>,<span class="string">'LPOPP'</span>,<span class="string">'515.124.4567'</span>,<span class="keyword">to_date</span>(<span class="string">'07-12月-99'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'FI_ACCOUNT'</span>,<span class="number">6900</span>,<span class="literal">null</span>,<span class="number">108</span>,<span class="number">100</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">120</span>,<span class="string">'Matthew'</span>,<span class="string">'Weiss'</span>,<span class="string">'MWEISS'</span>,<span class="string">'650.123.1234'</span>,<span class="keyword">to_date</span>(<span class="string">'18-7月 -96'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'ST_MAN'</span>,<span class="number">8000</span>,<span class="literal">null</span>,<span class="number">100</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">121</span>,<span class="string">'Adam'</span>,<span class="string">'Fripp'</span>,<span class="string">'AFRIPP'</span>,<span class="string">'650.123.2234'</span>,<span class="keyword">to_date</span>(<span class="string">'10-4月 -97'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'ST_MAN'</span>,<span class="number">8200</span>,<span class="literal">null</span>,<span class="number">100</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">122</span>,<span class="string">'Payam'</span>,<span class="string">'Kaufling'</span>,<span class="string">'PKAUFLIN'</span>,<span class="string">'650.123.3234'</span>,<span class="keyword">to_date</span>(<span class="string">'01-5月 -95'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'ST_MAN'</span>,<span class="number">7900</span>,<span class="literal">null</span>,<span class="number">100</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">123</span>,<span class="string">'Shanta'</span>,<span class="string">'Vollman'</span>,<span class="string">'SVOLLMAN'</span>,<span class="string">'650.123.4234'</span>,<span class="keyword">to_date</span>(<span class="string">'10-10月-97'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'ST_MAN'</span>,<span class="number">6500</span>,<span class="literal">null</span>,<span class="number">100</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">124</span>,<span class="string">'Kevin'</span>,<span class="string">'Mourgos'</span>,<span class="string">'KMOURGOS'</span>,<span class="string">'650.123.5234'</span>,<span class="keyword">to_date</span>(<span class="string">'16-11月-99'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'ST_MAN'</span>,<span class="number">5800</span>,<span class="literal">null</span>,<span class="number">100</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">125</span>,<span class="string">'07ia'</span>,<span class="string">'Nayer'</span>,<span class="string">'JNAYER'</span>,<span class="string">'650.124.1214'</span>,<span class="keyword">to_date</span>(<span class="string">'16-7月 -97'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'ST_CLERK'</span>,<span class="number">3200</span>,<span class="literal">null</span>,<span class="number">120</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">126</span>,<span class="string">'Irene'</span>,<span class="string">'Mikkilineni'</span>,<span class="string">'IMIKKILI'</span>,<span class="string">'650.124.1224'</span>,<span class="keyword">to_date</span>(<span class="string">'28-9月 -98'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'ST_CLERK'</span>,<span class="number">2700</span>,<span class="literal">null</span>,<span class="number">120</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">127</span>,<span class="string">'James'</span>,<span class="string">'Landry'</span>,<span class="string">'JLANDRY'</span>,<span class="string">'650.124.1334'</span>,<span class="keyword">to_date</span>(<span class="string">'14-6月 -99'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'ST_CLERK'</span>,<span class="number">2400</span>,<span class="literal">null</span>,<span class="number">120</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">128</span>,<span class="string">'Steven'</span>,<span class="string">'05kle'</span>,<span class="string">'S05KLE'</span>,<span class="string">'650.124.1434'</span>,<span class="keyword">to_date</span>(<span class="string">'08-5月 -00'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'ST_CLERK'</span>,<span class="number">2200</span>,<span class="literal">null</span>,<span class="number">120</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">129</span>,<span class="string">'Laura'</span>,<span class="string">'Bissot'</span>,<span class="string">'LBISSOT'</span>,<span class="string">'650.124.5234'</span>,<span class="keyword">to_date</span>(<span class="string">'20-8月 -97'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'ST_CLERK'</span>,<span class="number">3300</span>,<span class="literal">null</span>,<span class="number">121</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">130</span>,<span class="string">'Mozhe'</span>,<span class="string">'Atkinson'</span>,<span class="string">'MATKINSO'</span>,<span class="string">'650.124.6234'</span>,<span class="keyword">to_date</span>(<span class="string">'30-10月-97'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'ST_CLERK'</span>,<span class="number">2800</span>,<span class="literal">null</span>,<span class="number">121</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">131</span>,<span class="string">'James'</span>,<span class="string">'05low'</span>,<span class="string">'JAMRLOW'</span>,<span class="string">'650.124.7234'</span>,<span class="keyword">to_date</span>(<span class="string">'16-11月-97'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'ST_CLERK'</span>,<span class="number">2500</span>,<span class="literal">null</span>,<span class="number">121</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">132</span>,<span class="string">'TJ'</span>,<span class="string">'Olson'</span>,<span class="string">'TJOLSON'</span>,<span class="string">'650.124.8234'</span>,<span class="keyword">to_date</span>(<span class="string">'10-4月 -99'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'ST_CLERK'</span>,<span class="number">2100</span>,<span class="literal">null</span>,<span class="number">121</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">133</span>,<span class="string">'Jason'</span>,<span class="string">'Mallin'</span>,<span class="string">'JMALLIN'</span>,<span class="string">'650.127.1934'</span>,<span class="keyword">to_date</span>(<span class="string">'14-1月 -96'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'ST_CLERK'</span>,<span class="number">3300</span>,<span class="literal">null</span>,<span class="number">122</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">134</span>,<span class="string">'Michael'</span>,<span class="string">'Rogers'</span>,<span class="string">'MROGERS'</span>,<span class="string">'650.127.1834'</span>,<span class="keyword">to_date</span>(<span class="string">'26-8月 -98'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'ST_CLERK'</span>,<span class="number">2900</span>,<span class="literal">null</span>,<span class="number">122</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">135</span>,<span class="string">'Ki'</span>,<span class="string">'Gee'</span>,<span class="string">'KGEE'</span>,<span class="string">'650.127.1734'</span>,<span class="keyword">to_date</span>(<span class="string">'12-12月-99'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'ST_CLERK'</span>,<span class="number">2400</span>,<span class="literal">null</span>,<span class="number">122</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">136</span>,<span class="string">'Hazel'</span>,<span class="string">'Philtanker'</span>,<span class="string">'HPHILTAN'</span>,<span class="string">'650.127.1634'</span>,<span class="keyword">to_date</span>(<span class="string">'06-11月-00'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'ST_CLERK'</span>,<span class="number">2200</span>,<span class="literal">null</span>,<span class="number">122</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">137</span>,<span class="string">'Renske'</span>,<span class="string">'Ladwig'</span>,<span class="string">'RLADWIG'</span>,<span class="string">'650.121.1234'</span>,<span class="keyword">to_date</span>(<span class="string">'14-7月 -95'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'ST_CLERK'</span>,<span class="number">3600</span>,<span class="literal">null</span>,<span class="number">123</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">138</span>,<span class="string">'Stephen'</span>,<span class="string">'Stiles'</span>,<span class="string">'SSTILES'</span>,<span class="string">'650.121.2034'</span>,<span class="keyword">to_date</span>(<span class="string">'26-10月-97'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'ST_CLERK'</span>,<span class="number">3200</span>,<span class="literal">null</span>,<span class="number">123</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">139</span>,<span class="string">'John'</span>,<span class="string">'Seo'</span>,<span class="string">'JSEO'</span>,<span class="string">'650.121.2019'</span>,<span class="keyword">to_date</span>(<span class="string">'12-11月-98'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'ST_CLERK'</span>,<span class="number">2700</span>,<span class="literal">null</span>,<span class="number">123</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">140</span>,<span class="string">'Joshua'</span>,<span class="string">'Patel'</span>,<span class="string">'JPATEL'</span>,<span class="string">'650.121.1834'</span>,<span class="keyword">to_date</span>(<span class="string">'06-4月 -98'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'ST_CLERK'</span>,<span class="number">2500</span>,<span class="literal">null</span>,<span class="number">123</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">141</span>,<span class="string">'Trenna'</span>,<span class="string">'Rajs'</span>,<span class="string">'TRAJS'</span>,<span class="string">'650.121.8009'</span>,<span class="keyword">to_date</span>(<span class="string">'17-10月-95'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'ST_CLERK'</span>,<span class="number">3500</span>,<span class="literal">null</span>,<span class="number">124</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">142</span>,<span class="string">'Curtis'</span>,<span class="string">'Davies'</span>,<span class="string">'CDAVIES'</span>,<span class="string">'650.121.2994'</span>,<span class="keyword">to_date</span>(<span class="string">'29-6月 -97'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'ST_CLERK'</span>,<span class="number">3100</span>,<span class="literal">null</span>,<span class="number">124</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">143</span>,<span class="string">'Randall'</span>,<span class="string">'Matos'</span>,<span class="string">'RMATOS'</span>,<span class="string">'650.121.2874'</span>,<span class="keyword">to_date</span>(<span class="string">'15-5月 -98'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'ST_CLERK'</span>,<span class="number">2600</span>,<span class="literal">null</span>,<span class="number">124</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">144</span>,<span class="string">'Peter'</span>,<span class="string">'Vargas'</span>,<span class="string">'PVARGAS'</span>,<span class="string">'650.121.2004'</span>,<span class="keyword">to_date</span>(<span class="string">'09-7月 -98'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'ST_CLERK'</span>,<span class="number">2500</span>,<span class="literal">null</span>,<span class="number">124</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">145</span>,<span class="string">'John'</span>,<span class="string">'Russell'</span>,<span class="string">'JRUSSEL'</span>,<span class="string">'011.44.1344.429268'</span>,<span class="keyword">to_date</span>(<span class="string">'01-10月-96'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_MAN'</span>,<span class="number">14000</span>,<span class="number">0.4</span>,<span class="number">100</span>,<span class="number">80</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">146</span>,<span class="string">'Karen'</span>,<span class="string">'Partners'</span>,<span class="string">'KPARTNER'</span>,<span class="string">'011.44.1344.467268'</span>,<span class="keyword">to_date</span>(<span class="string">'05-6月 -97'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_MAN'</span>,<span class="number">13500</span>,<span class="number">0.3</span>,<span class="number">100</span>,<span class="number">80</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">147</span>,<span class="string">'Alberto'</span>,<span class="string">'Errazuriz'</span>,<span class="string">'AERRAZUR'</span>,<span class="string">'011.44.1344.429278'</span>,<span class="keyword">to_date</span>(<span class="string">'10-5月 -97'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_MAN'</span>,<span class="number">12000</span>,<span class="number">0.3</span>,<span class="number">100</span>,<span class="number">80</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">148</span>,<span class="string">'Gerald'</span>,<span class="string">'Cambrault'</span>,<span class="string">'GCAMBRAU'</span>,<span class="string">'011.44.1344.619268'</span>,<span class="keyword">to_date</span>(<span class="string">'15-10月-99'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_MAN'</span>,<span class="number">11000</span>,<span class="number">0.3</span>,<span class="number">100</span>,<span class="number">80</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">149</span>,<span class="string">'Eleni'</span>,<span class="string">'Zlotkey'</span>,<span class="string">'EZLOTKEY'</span>,<span class="string">'011.44.1344.429018'</span>,<span class="keyword">to_date</span>(<span class="string">'29-6月 -00'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_MAN'</span>,<span class="number">10500</span>,<span class="number">0.2</span>,<span class="number">100</span>,<span class="number">80</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">150</span>,<span class="string">'Peter'</span>,<span class="string">'Tucker'</span>,<span class="string">'PTUCKER'</span>,<span class="string">'011.44.1344.129268'</span>,<span class="keyword">to_date</span>(<span class="string">'30-6月 -97'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_REP'</span>,<span class="number">10000</span>,<span class="number">0.3</span>,<span class="number">145</span>,<span class="number">80</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">151</span>,<span class="string">'David'</span>,<span class="string">'Bernstein'</span>,<span class="string">'DBERNSTE'</span>,<span class="string">'011.44.1344.345268'</span>,<span class="keyword">to_date</span>(<span class="string">'24-5月 -97'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_REP'</span>,<span class="number">9500</span>,<span class="number">0.25</span>,<span class="number">145</span>,<span class="number">80</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">152</span>,<span class="string">'Peter'</span>,<span class="string">'Hall'</span>,<span class="string">'PHALL'</span>,<span class="string">'011.44.1344.478968'</span>,<span class="keyword">to_date</span>(<span class="string">'20-8月 -97'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_REP'</span>,<span class="number">9000</span>,<span class="number">0.25</span>,<span class="number">145</span>,<span class="number">80</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">153</span>,<span class="string">'Christopher'</span>,<span class="string">'Olsen'</span>,<span class="string">'COLSEN'</span>,<span class="string">'011.44.1344.498718'</span>,<span class="keyword">to_date</span>(<span class="string">'30-5月 -98'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_REP'</span>,<span class="number">8000</span>,<span class="number">0.2</span>,<span class="number">145</span>,<span class="number">80</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">154</span>,<span class="string">'Nanette'</span>,<span class="string">'Cambrault'</span>,<span class="string">'NCAMBRAU'</span>,<span class="string">'011.44.1344.987668'</span>,<span class="keyword">to_date</span>(<span class="string">'09-12月-98'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_REP'</span>,<span class="number">7500</span>,<span class="number">0.2</span>,<span class="number">145</span>,<span class="number">80</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">155</span>,<span class="string">'Oliver'</span>,<span class="string">'Tuvault'</span>,<span class="string">'OTUVAULT'</span>,<span class="string">'011.44.1344.486508'</span>,<span class="keyword">to_date</span>(<span class="string">'23-11月-99'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_REP'</span>,<span class="number">7000</span>,<span class="number">0.15</span>,<span class="number">145</span>,<span class="number">80</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">156</span>,<span class="string">'06ette'</span>,<span class="string">'King'</span>,<span class="string">'JKING'</span>,<span class="string">'011.44.1345.429268'</span>,<span class="keyword">to_date</span>(<span class="string">'30-6月 -96'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_REP'</span>,<span class="number">10000</span>,<span class="number">0.35</span>,<span class="number">146</span>,<span class="number">80</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">157</span>,<span class="string">'Patrick'</span>,<span class="string">'Sully'</span>,<span class="string">'PSULLY'</span>,<span class="string">'011.44.1345.929268'</span>,<span class="keyword">to_date</span>(<span class="string">'04-5月 -96'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_REP'</span>,<span class="number">9500</span>,<span class="number">0.35</span>,<span class="number">146</span>,<span class="number">80</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">158</span>,<span class="string">'Allan'</span>,<span class="string">'McEwen'</span>,<span class="string">'AMCEWEN'</span>,<span class="string">'011.44.1345.829268'</span>,<span class="keyword">to_date</span>(<span class="string">'01-8月 -96'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_REP'</span>,<span class="number">9000</span>,<span class="number">0.35</span>,<span class="number">146</span>,<span class="number">80</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">159</span>,<span class="string">'Lindsey'</span>,<span class="string">'Smith'</span>,<span class="string">'LSMITH'</span>,<span class="string">'011.44.1345.729268'</span>,<span class="keyword">to_date</span>(<span class="string">'10-5月 -97'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_REP'</span>,<span class="number">8000</span>,<span class="number">0.3</span>,<span class="number">146</span>,<span class="number">80</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">160</span>,<span class="string">'Louise'</span>,<span class="string">'Doran'</span>,<span class="string">'LDORAN'</span>,<span class="string">'011.44.1345.629268'</span>,<span class="keyword">to_date</span>(<span class="string">'15-12月-97'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_REP'</span>,<span class="number">7500</span>,<span class="number">0.3</span>,<span class="number">146</span>,<span class="number">80</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">161</span>,<span class="string">'Sarath'</span>,<span class="string">'Sewall'</span>,<span class="string">'SSEWALL'</span>,<span class="string">'011.44.1345.529268'</span>,<span class="keyword">to_date</span>(<span class="string">'03-11月-98'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_REP'</span>,<span class="number">7000</span>,<span class="number">0.25</span>,<span class="number">146</span>,<span class="number">80</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">162</span>,<span class="string">'Clara'</span>,<span class="string">'Vishney'</span>,<span class="string">'CVISHNEY'</span>,<span class="string">'011.44.1346.129268'</span>,<span class="keyword">to_date</span>(<span class="string">'11-11月-97'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_REP'</span>,<span class="number">10500</span>,<span class="number">0.25</span>,<span class="number">147</span>,<span class="number">80</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">163</span>,<span class="string">'Danielle'</span>,<span class="string">'Greene'</span>,<span class="string">'DGREENE'</span>,<span class="string">'011.44.1346.229268'</span>,<span class="keyword">to_date</span>(<span class="string">'19-5月 -99'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_REP'</span>,<span class="number">9500</span>,<span class="number">0.15</span>,<span class="number">147</span>,<span class="number">80</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">164</span>,<span class="string">'Mattea'</span>,<span class="string">'05vins'</span>,<span class="string">'M05VINS'</span>,<span class="string">'011.44.1346.329268'</span>,<span class="keyword">to_date</span>(<span class="string">'24-6月 -00'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_REP'</span>,<span class="number">7200</span>,<span class="number">0.1</span>,<span class="number">147</span>,<span class="number">80</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">165</span>,<span class="string">'David'</span>,<span class="string">'Lee'</span>,<span class="string">'DLEE'</span>,<span class="string">'011.44.1346.529268'</span>,<span class="keyword">to_date</span>(<span class="string">'23-11月-00'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_REP'</span>,<span class="number">6800</span>,<span class="number">0.1</span>,<span class="number">147</span>,<span class="number">80</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">166</span>,<span class="string">'Sundar'</span>,<span class="string">'Ande'</span>,<span class="string">'SANDE'</span>,<span class="string">'011.44.1346.629268'</span>,<span class="keyword">to_date</span>(<span class="string">'24-5月 -00'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_REP'</span>,<span class="number">6400</span>,<span class="number">0.1</span>,<span class="number">147</span>,<span class="number">80</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">167</span>,<span class="string">'Amit'</span>,<span class="string">'Banda'</span>,<span class="string">'ABANDA'</span>,<span class="string">'011.44.1346.729268'</span>,<span class="keyword">to_date</span>(<span class="string">'21-4月 -00'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_REP'</span>,<span class="number">6200</span>,<span class="number">0.1</span>,<span class="number">147</span>,<span class="number">80</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">168</span>,<span class="string">'Lisa'</span>,<span class="string">'Ozer'</span>,<span class="string">'LOZER'</span>,<span class="string">'011.44.1343.929268'</span>,<span class="keyword">to_date</span>(<span class="string">'11-5月 -97'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_REP'</span>,<span class="number">11500</span>,<span class="number">0.25</span>,<span class="number">148</span>,<span class="number">80</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">169</span>,<span class="string">'Harrison'</span>,<span class="string">'Bloom'</span>,<span class="string">'HBLOOM'</span>,<span class="string">'011.44.1343.829268'</span>,<span class="keyword">to_date</span>(<span class="string">'23-5月 -98'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_REP'</span>,<span class="number">10000</span>,<span class="number">0.2</span>,<span class="number">148</span>,<span class="number">80</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">170</span>,<span class="string">'Tayler'</span>,<span class="string">'Fox'</span>,<span class="string">'TFOX'</span>,<span class="string">'011.44.1343.729268'</span>,<span class="keyword">to_date</span>(<span class="string">'24-6月 -98'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_REP'</span>,<span class="number">9600</span>,<span class="number">0.2</span>,<span class="number">148</span>,<span class="number">80</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">171</span>,<span class="string">'William'</span>,<span class="string">'Smith'</span>,<span class="string">'WSMITH'</span>,<span class="string">'011.44.1343.629268'</span>,<span class="keyword">to_date</span>(<span class="string">'23-11月-99'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_REP'</span>,<span class="number">7400</span>,<span class="number">0.15</span>,<span class="number">148</span>,<span class="number">80</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">172</span>,<span class="string">'Elizabeth'</span>,<span class="string">'Bates'</span>,<span class="string">'EBATES'</span>,<span class="string">'011.44.1343.529268'</span>,<span class="keyword">to_date</span>(<span class="string">'24-5月 -99'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_REP'</span>,<span class="number">7300</span>,<span class="number">0.15</span>,<span class="number">148</span>,<span class="number">80</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">173</span>,<span class="string">'Sundita'</span>,<span class="string">'Ku05'</span>,<span class="string">'SKU05'</span>,<span class="string">'011.44.1343.329268'</span>,<span class="keyword">to_date</span>(<span class="string">'21-4月 -00'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_REP'</span>,<span class="number">6100</span>,<span class="number">0.1</span>,<span class="number">148</span>,<span class="number">80</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">174</span>,<span class="string">'Ellen'</span>,<span class="string">'Abel'</span>,<span class="string">'EABEL'</span>,<span class="string">'011.44.1644.429267'</span>,<span class="keyword">to_date</span>(<span class="string">'11-5月 -96'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_REP'</span>,<span class="number">11000</span>,<span class="number">0.3</span>,<span class="number">149</span>,<span class="number">80</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">175</span>,<span class="string">'Alyssa'</span>,<span class="string">'Hutton'</span>,<span class="string">'AHUTTON'</span>,<span class="string">'011.44.1644.429266'</span>,<span class="keyword">to_date</span>(<span class="string">'19-5月 -97'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_REP'</span>,<span class="number">8800</span>,<span class="number">0.25</span>,<span class="number">149</span>,<span class="number">80</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">176</span>,<span class="string">'Jonathon'</span>,<span class="string">'Taylor'</span>,<span class="string">'JTAYLOR'</span>,<span class="string">'011.44.1644.429265'</span>,<span class="keyword">to_date</span>(<span class="string">'24-5月 -98'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_REP'</span>,<span class="number">8600</span>,<span class="number">0.2</span>,<span class="number">149</span>,<span class="number">80</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">177</span>,<span class="string">'Jack'</span>,<span class="string">'Livingston'</span>,<span class="string">'JLIVINGS'</span>,<span class="string">'011.44.1644.429264'</span>,<span class="keyword">to_date</span>(<span class="string">'23-4月 -98'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_REP'</span>,<span class="number">8400</span>,<span class="number">0.2</span>,<span class="number">149</span>,<span class="number">80</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">178</span>,<span class="string">'Kimberely'</span>,<span class="string">'Grant'</span>,<span class="string">'KGRANT'</span>,<span class="string">'011.44.1644.429263'</span>,<span class="keyword">to_date</span>(<span class="string">'24-5月 -99'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_REP'</span>,<span class="number">7000</span>,<span class="number">0.15</span>,<span class="number">149</span>,<span class="literal">null</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">179</span>,<span class="string">'Charles'</span>,<span class="string">'Johnson'</span>,<span class="string">'CJOHNSON'</span>,<span class="string">'011.44.1644.429262'</span>,<span class="keyword">to_date</span>(<span class="string">'04-6月 -00'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_REP'</span>,<span class="number">6200</span>,<span class="number">0.1</span>,<span class="number">149</span>,<span class="number">80</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">180</span>,<span class="string">'Winston'</span>,<span class="string">'Taylor'</span>,<span class="string">'WTAYLOR'</span>,<span class="string">'650.507.9876'</span>,<span class="keyword">to_date</span>(<span class="string">'24-6月 -98'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SH_CLERK'</span>,<span class="number">3200</span>,<span class="literal">null</span>,<span class="number">120</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">181</span>,<span class="string">'Jean'</span>,<span class="string">'Fleaur'</span>,<span class="string">'JFLEAUR'</span>,<span class="string">'650.507.9877'</span>,<span class="keyword">to_date</span>(<span class="string">'23-11月-98'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SH_CLERK'</span>,<span class="number">3100</span>,<span class="literal">null</span>,<span class="number">120</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">182</span>,<span class="string">'05tha'</span>,<span class="string">'Sullivan'</span>,<span class="string">'MSULLIVA'</span>,<span class="string">'650.507.9878'</span>,<span class="keyword">to_date</span>(<span class="string">'21-1月 -99'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SH_CLERK'</span>,<span class="number">2500</span>,<span class="literal">null</span>,<span class="number">120</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">183</span>,<span class="string">'Girard'</span>,<span class="string">'Geoni'</span>,<span class="string">'GGEONI'</span>,<span class="string">'650.507.9879'</span>,<span class="keyword">to_date</span>(<span class="string">'03-11月-00'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SH_CLERK'</span>,<span class="number">2800</span>,<span class="literal">null</span>,<span class="number">120</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">184</span>,<span class="string">'Nandita'</span>,<span class="string">'Sarchand'</span>,<span class="string">'NSARCHAN'</span>,<span class="string">'650.509.1876'</span>,<span class="keyword">to_date</span>(<span class="string">'27-6月 -96'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SH_CLERK'</span>,<span class="number">4200</span>,<span class="literal">null</span>,<span class="number">121</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">185</span>,<span class="string">'Alexis'</span>,<span class="string">'Bull'</span>,<span class="string">'ABULL'</span>,<span class="string">'650.509.2876'</span>,<span class="keyword">to_date</span>(<span class="string">'20-11月-97'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SH_CLERK'</span>,<span class="number">4100</span>,<span class="literal">null</span>,<span class="number">121</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">186</span>,<span class="string">'07ia'</span>,<span class="string">'Dellinger'</span>,<span class="string">'JDELLING'</span>,<span class="string">'650.509.3876'</span>,<span class="keyword">to_date</span>(<span class="string">'24-1月 -98'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SH_CLERK'</span>,<span class="number">3400</span>,<span class="literal">null</span>,<span class="number">121</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">187</span>,<span class="string">'Anthony'</span>,<span class="string">'Cabrio'</span>,<span class="string">'ACABRIO'</span>,<span class="string">'650.509.4876'</span>,<span class="keyword">to_date</span>(<span class="string">'07-11月-99'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SH_CLERK'</span>,<span class="number">3000</span>,<span class="literal">null</span>,<span class="number">121</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">188</span>,<span class="string">'Kelly'</span>,<span class="string">'Chung'</span>,<span class="string">'KCHUNG'</span>,<span class="string">'650.505.1876'</span>,<span class="keyword">to_date</span>(<span class="string">'14-1月 -97'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SH_CLERK'</span>,<span class="number">3800</span>,<span class="literal">null</span>,<span class="number">122</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">189</span>,<span class="string">'Jennifer'</span>,<span class="string">'Dilly'</span>,<span class="string">'JDILLY'</span>,<span class="string">'650.505.2876'</span>,<span class="keyword">to_date</span>(<span class="string">'13-8月 -97'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SH_CLERK'</span>,<span class="number">3600</span>,<span class="literal">null</span>,<span class="number">122</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">190</span>,<span class="string">'Timothy'</span>,<span class="string">'Gates'</span>,<span class="string">'TGATES'</span>,<span class="string">'650.505.3876'</span>,<span class="keyword">to_date</span>(<span class="string">'11-7月 -98'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SH_CLERK'</span>,<span class="number">2900</span>,<span class="literal">null</span>,<span class="number">122</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">191</span>,<span class="string">'Randall'</span>,<span class="string">'Perkins'</span>,<span class="string">'RPERKINS'</span>,<span class="string">'650.505.4876'</span>,<span class="keyword">to_date</span>(<span class="string">'19-12月-99'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SH_CLERK'</span>,<span class="number">2500</span>,<span class="literal">null</span>,<span class="number">122</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">192</span>,<span class="string">'Sarah'</span>,<span class="string">'Bell'</span>,<span class="string">'SBELL'</span>,<span class="string">'650.501.1876'</span>,<span class="keyword">to_date</span>(<span class="string">'04-11月-96'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SH_CLERK'</span>,<span class="number">4000</span>,<span class="literal">null</span>,<span class="number">123</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">193</span>,<span class="string">'Britney'</span>,<span class="string">'Everett'</span>,<span class="string">'BEVERETT'</span>,<span class="string">'650.501.2876'</span>,<span class="keyword">to_date</span>(<span class="string">'03-5月 -97'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SH_CLERK'</span>,<span class="number">3900</span>,<span class="literal">null</span>,<span class="number">123</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">194</span>,<span class="string">'Samuel'</span>,<span class="string">'McCain'</span>,<span class="string">'SMCCAIN'</span>,<span class="string">'650.501.3876'</span>,<span class="keyword">to_date</span>(<span class="string">'01-7月 -98'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SH_CLERK'</span>,<span class="number">3200</span>,<span class="literal">null</span>,<span class="number">123</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">195</span>,<span class="string">'Vance'</span>,<span class="string">'Jones'</span>,<span class="string">'VJONES'</span>,<span class="string">'650.501.4876'</span>,<span class="keyword">to_date</span>(<span class="string">'17-5月 -99'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SH_CLERK'</span>,<span class="number">2800</span>,<span class="literal">null</span>,<span class="number">123</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">196</span>,<span class="string">'Alana'</span>,<span class="string">'Walsh'</span>,<span class="string">'AWALSH'</span>,<span class="string">'650.507.9811'</span>,<span class="keyword">to_date</span>(<span class="string">'24-4月 -98'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SH_CLERK'</span>,<span class="number">3100</span>,<span class="literal">null</span>,<span class="number">124</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">197</span>,<span class="string">'Kevin'</span>,<span class="string">'Feeney'</span>,<span class="string">'KFEENEY'</span>,<span class="string">'650.507.9822'</span>,<span class="keyword">to_date</span>(<span class="string">'23-5月 -98'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SH_CLERK'</span>,<span class="number">3000</span>,<span class="literal">null</span>,<span class="number">124</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">198</span>,<span class="string">'Donald'</span>,<span class="string">'OConnell'</span>,<span class="string">'DOCONNEL'</span>,<span class="string">'650.507.9833'</span>,<span class="keyword">to_date</span>(<span class="string">'21-1月 -99'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SH_CLERK'</span>,<span class="number">2600</span>,<span class="literal">null</span>,<span class="number">124</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">199</span>,<span class="string">'Douglas'</span>,<span class="string">'Grant'</span>,<span class="string">'DGRANT'</span>,<span class="string">'650.507.9844'</span>,<span class="keyword">to_date</span>(<span class="string">'13-6月 -00'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SH_CLERK'</span>,<span class="number">2600</span>,<span class="literal">null</span>,<span class="number">124</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">203</span>,<span class="string">'Susan'</span>,<span class="string">'Mavris'</span>,<span class="string">'SMAVRIS'</span>,<span class="string">'515.123.7777'</span>,<span class="keyword">to_date</span>(<span class="string">'07-1月 -94'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'HR_REP'</span>,<span class="number">6500</span>,<span class="literal">null</span>,<span class="number">101</span>,<span class="number">40</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">204</span>,<span class="string">'Hermann'</span>,<span class="string">'Baer'</span>,<span class="string">'HBAER'</span>,<span class="string">'515.123.8888'</span>,<span class="keyword">to_date</span>(<span class="string">'07-1月 -94'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'PR_REP'</span>,<span class="number">10000</span>,<span class="literal">null</span>,<span class="number">101</span>,<span class="number">70</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">205</span>,<span class="string">'Shelley'</span>,<span class="string">'Higgins'</span>,<span class="string">'SHIGGINS'</span>,<span class="string">'515.123.8080'</span>,<span class="keyword">to_date</span>(<span class="string">'07-1月 -94'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'AC_MGR'</span>,<span class="number">12000</span>,<span class="literal">null</span>,<span class="number">101</span>,<span class="number">110</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">206</span>,<span class="string">'William'</span>,<span class="string">'Gietz'</span>,<span class="string">'WGIETZ'</span>,<span class="string">'515.123.8181'</span>,<span class="keyword">to_date</span>(<span class="string">'07-1月 -94'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'AC_ACCOUNT'</span>,<span class="number">8300</span>,<span class="literal">null</span>,<span class="number">205</span>,<span class="number">110</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_OTHER (EMPLOYEE_ID,FIRST_NAME,LAST_NAME,EMAIL,PHONE_NUMBER,HIRE_DATE,JOB_ID,SALARY,COMMISSION_PCT,MANAGER_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">2019</span>,<span class="string">'Eleni'</span>,<span class="string">'wood'</span>,<span class="string">'wood@neusoft.edu.cn'</span>,<span class="string">'011.44.1344.429018'</span>,<span class="keyword">to_date</span>(<span class="string">'29-6月 -00'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_MAN'</span>,<span class="number">10500</span>,<span class="number">0.2</span>,<span class="number">100</span>,<span class="number">80</span>);</span><br><span class="line">REM INSERTING into ZS.EMP_SAL</span><br><span class="line"><span class="keyword">SET</span> <span class="keyword">DEFINE</span> <span class="keyword">OFF</span>;</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_SAL (EMPLOYEE_ID,HIRE_DATE,SALARY) <span class="keyword">values</span> (<span class="number">100</span>,<span class="keyword">to_date</span>(<span class="string">'17-1月 -87'</span>,<span class="string">'DD-MON-RR'</span>),<span class="number">24000</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_SAL (EMPLOYEE_ID,HIRE_DATE,SALARY) <span class="keyword">values</span> (<span class="number">101</span>,<span class="keyword">to_date</span>(<span class="string">'21-9月 -89'</span>,<span class="string">'DD-MON-RR'</span>),<span class="number">17000</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_SAL (EMPLOYEE_ID,HIRE_DATE,SALARY) <span class="keyword">values</span> (<span class="number">102</span>,<span class="keyword">to_date</span>(<span class="string">'13-6月 -93'</span>,<span class="string">'DD-MON-RR'</span>),<span class="number">17000</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_SAL (EMPLOYEE_ID,HIRE_DATE,SALARY) <span class="keyword">values</span> (<span class="number">103</span>,<span class="keyword">to_date</span>(<span class="string">'03-6月 -90'</span>,<span class="string">'DD-MON-RR'</span>),<span class="number">9000</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_SAL (EMPLOYEE_ID,HIRE_DATE,SALARY) <span class="keyword">values</span> (<span class="number">108</span>,<span class="keyword">to_date</span>(<span class="string">'17-8月 -94'</span>,<span class="string">'DD-MON-RR'</span>),<span class="number">12000</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_SAL (EMPLOYEE_ID,HIRE_DATE,SALARY) <span class="keyword">values</span> (<span class="number">109</span>,<span class="keyword">to_date</span>(<span class="string">'16-8月 -94'</span>,<span class="string">'DD-MON-RR'</span>),<span class="number">9000</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_SAL (EMPLOYEE_ID,HIRE_DATE,SALARY) <span class="keyword">values</span> (<span class="number">110</span>,<span class="keyword">to_date</span>(<span class="string">'28-9月 -97'</span>,<span class="string">'DD-MON-RR'</span>),<span class="number">8200</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_SAL (EMPLOYEE_ID,HIRE_DATE,SALARY) <span class="keyword">values</span> (<span class="number">114</span>,<span class="keyword">to_date</span>(<span class="string">'07-12月-94'</span>,<span class="string">'DD-MON-RR'</span>),<span class="number">11000</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_SAL (EMPLOYEE_ID,HIRE_DATE,SALARY) <span class="keyword">values</span> (<span class="number">121</span>,<span class="keyword">to_date</span>(<span class="string">'10-4月 -97'</span>,<span class="string">'DD-MON-RR'</span>),<span class="number">8200</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_SAL (EMPLOYEE_ID,HIRE_DATE,SALARY) <span class="keyword">values</span> (<span class="number">145</span>,<span class="keyword">to_date</span>(<span class="string">'01-10月-96'</span>,<span class="string">'DD-MON-RR'</span>),<span class="number">14000</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_SAL (EMPLOYEE_ID,HIRE_DATE,SALARY) <span class="keyword">values</span> (<span class="number">146</span>,<span class="keyword">to_date</span>(<span class="string">'05-6月 -97'</span>,<span class="string">'DD-MON-RR'</span>),<span class="number">13500</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_SAL (EMPLOYEE_ID,HIRE_DATE,SALARY) <span class="keyword">values</span> (<span class="number">147</span>,<span class="keyword">to_date</span>(<span class="string">'10-5月 -97'</span>,<span class="string">'DD-MON-RR'</span>),<span class="number">12000</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_SAL (EMPLOYEE_ID,HIRE_DATE,SALARY) <span class="keyword">values</span> (<span class="number">148</span>,<span class="keyword">to_date</span>(<span class="string">'15-10月-99'</span>,<span class="string">'DD-MON-RR'</span>),<span class="number">11000</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_SAL (EMPLOYEE_ID,HIRE_DATE,SALARY) <span class="keyword">values</span> (<span class="number">149</span>,<span class="keyword">to_date</span>(<span class="string">'29-6月 -00'</span>,<span class="string">'DD-MON-RR'</span>),<span class="number">10500</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_SAL (EMPLOYEE_ID,HIRE_DATE,SALARY) <span class="keyword">values</span> (<span class="number">150</span>,<span class="keyword">to_date</span>(<span class="string">'30-6月 -97'</span>,<span class="string">'DD-MON-RR'</span>),<span class="number">10000</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_SAL (EMPLOYEE_ID,HIRE_DATE,SALARY) <span class="keyword">values</span> (<span class="number">151</span>,<span class="keyword">to_date</span>(<span class="string">'24-5月 -97'</span>,<span class="string">'DD-MON-RR'</span>),<span class="number">9500</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_SAL (EMPLOYEE_ID,HIRE_DATE,SALARY) <span class="keyword">values</span> (<span class="number">152</span>,<span class="keyword">to_date</span>(<span class="string">'20-8月 -97'</span>,<span class="string">'DD-MON-RR'</span>),<span class="number">9000</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_SAL (EMPLOYEE_ID,HIRE_DATE,SALARY) <span class="keyword">values</span> (<span class="number">156</span>,<span class="keyword">to_date</span>(<span class="string">'30-6月 -96'</span>,<span class="string">'DD-MON-RR'</span>),<span class="number">10000</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_SAL (EMPLOYEE_ID,HIRE_DATE,SALARY) <span class="keyword">values</span> (<span class="number">157</span>,<span class="keyword">to_date</span>(<span class="string">'04-5月 -96'</span>,<span class="string">'DD-MON-RR'</span>),<span class="number">9500</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_SAL (EMPLOYEE_ID,HIRE_DATE,SALARY) <span class="keyword">values</span> (<span class="number">158</span>,<span class="keyword">to_date</span>(<span class="string">'01-8月 -96'</span>,<span class="string">'DD-MON-RR'</span>),<span class="number">9000</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_SAL (EMPLOYEE_ID,HIRE_DATE,SALARY) <span class="keyword">values</span> (<span class="number">162</span>,<span class="keyword">to_date</span>(<span class="string">'11-11月-97'</span>,<span class="string">'DD-MON-RR'</span>),<span class="number">10500</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_SAL (EMPLOYEE_ID,HIRE_DATE,SALARY) <span class="keyword">values</span> (<span class="number">163</span>,<span class="keyword">to_date</span>(<span class="string">'19-5月 -99'</span>,<span class="string">'DD-MON-RR'</span>),<span class="number">9500</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_SAL (EMPLOYEE_ID,HIRE_DATE,SALARY) <span class="keyword">values</span> (<span class="number">168</span>,<span class="keyword">to_date</span>(<span class="string">'11-5月 -97'</span>,<span class="string">'DD-MON-RR'</span>),<span class="number">11500</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_SAL (EMPLOYEE_ID,HIRE_DATE,SALARY) <span class="keyword">values</span> (<span class="number">169</span>,<span class="keyword">to_date</span>(<span class="string">'23-5月 -98'</span>,<span class="string">'DD-MON-RR'</span>),<span class="number">10000</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_SAL (EMPLOYEE_ID,HIRE_DATE,SALARY) <span class="keyword">values</span> (<span class="number">170</span>,<span class="keyword">to_date</span>(<span class="string">'24-6月 -98'</span>,<span class="string">'DD-MON-RR'</span>),<span class="number">9600</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_SAL (EMPLOYEE_ID,HIRE_DATE,SALARY) <span class="keyword">values</span> (<span class="number">174</span>,<span class="keyword">to_date</span>(<span class="string">'11-5月 -96'</span>,<span class="string">'DD-MON-RR'</span>),<span class="number">11000</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_SAL (EMPLOYEE_ID,HIRE_DATE,SALARY) <span class="keyword">values</span> (<span class="number">175</span>,<span class="keyword">to_date</span>(<span class="string">'19-5月 -97'</span>,<span class="string">'DD-MON-RR'</span>),<span class="number">8800</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_SAL (EMPLOYEE_ID,HIRE_DATE,SALARY) <span class="keyword">values</span> (<span class="number">176</span>,<span class="keyword">to_date</span>(<span class="string">'24-5月 -98'</span>,<span class="string">'DD-MON-RR'</span>),<span class="number">8600</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_SAL (EMPLOYEE_ID,HIRE_DATE,SALARY) <span class="keyword">values</span> (<span class="number">177</span>,<span class="keyword">to_date</span>(<span class="string">'23-4月 -98'</span>,<span class="string">'DD-MON-RR'</span>),<span class="number">8400</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_SAL (EMPLOYEE_ID,HIRE_DATE,SALARY) <span class="keyword">values</span> (<span class="number">201</span>,<span class="keyword">to_date</span>(<span class="string">'17-11月-96'</span>,<span class="string">'DD-MON-RR'</span>),<span class="number">13000</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_SAL (EMPLOYEE_ID,HIRE_DATE,SALARY) <span class="keyword">values</span> (<span class="number">204</span>,<span class="keyword">to_date</span>(<span class="string">'07-1月 -94'</span>,<span class="string">'DD-MON-RR'</span>),<span class="number">10000</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_SAL (EMPLOYEE_ID,HIRE_DATE,SALARY) <span class="keyword">values</span> (<span class="number">205</span>,<span class="keyword">to_date</span>(<span class="string">'07-1月 -94'</span>,<span class="string">'DD-MON-RR'</span>),<span class="number">12000</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_SAL (EMPLOYEE_ID,HIRE_DATE,SALARY) <span class="keyword">values</span> (<span class="number">206</span>,<span class="keyword">to_date</span>(<span class="string">'07-1月 -94'</span>,<span class="string">'DD-MON-RR'</span>),<span class="number">8300</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.EMP_SAL (EMPLOYEE_ID,HIRE_DATE,SALARY) <span class="keyword">values</span> (<span class="number">2019</span>,<span class="keyword">to_date</span>(<span class="string">'29-6月 -00'</span>,<span class="string">'DD-MON-RR'</span>),<span class="number">10500</span>);</span><br><span class="line">REM INSERTING into ZS.JOBS</span><br><span class="line"><span class="keyword">SET</span> <span class="keyword">DEFINE</span> <span class="keyword">OFF</span>;</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.JOBS (JOB_ID,JOB_TITLE,MIN_SALARY,MAX_SALARY) <span class="keyword">values</span> (<span class="string">'AD_PRES'</span>,<span class="string">'President'</span>,<span class="number">20000</span>,<span class="number">40000</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.JOBS (JOB_ID,JOB_TITLE,MIN_SALARY,MAX_SALARY) <span class="keyword">values</span> (<span class="string">'AD_VP'</span>,<span class="string">'Administration Vice President'</span>,<span class="number">15000</span>,<span class="number">30000</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.JOBS (JOB_ID,JOB_TITLE,MIN_SALARY,MAX_SALARY) <span class="keyword">values</span> (<span class="string">'AD_ASST'</span>,<span class="string">'Administration Assistant'</span>,<span class="number">3000</span>,<span class="number">6000</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.JOBS (JOB_ID,JOB_TITLE,MIN_SALARY,MAX_SALARY) <span class="keyword">values</span> (<span class="string">'FI_MGR'</span>,<span class="string">'Finance Manager'</span>,<span class="number">8200</span>,<span class="number">16000</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.JOBS (JOB_ID,JOB_TITLE,MIN_SALARY,MAX_SALARY) <span class="keyword">values</span> (<span class="string">'FI_ACCOUNT'</span>,<span class="string">'Accountant'</span>,<span class="number">4200</span>,<span class="number">9000</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.JOBS (JOB_ID,JOB_TITLE,MIN_SALARY,MAX_SALARY) <span class="keyword">values</span> (<span class="string">'AC_MGR'</span>,<span class="string">'Accounting Manager'</span>,<span class="number">8200</span>,<span class="number">16000</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.JOBS (JOB_ID,JOB_TITLE,MIN_SALARY,MAX_SALARY) <span class="keyword">values</span> (<span class="string">'AC_ACCOUNT'</span>,<span class="string">'Public Accountant'</span>,<span class="number">4200</span>,<span class="number">9000</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.JOBS (JOB_ID,JOB_TITLE,MIN_SALARY,MAX_SALARY) <span class="keyword">values</span> (<span class="string">'SA_MAN'</span>,<span class="string">'Sales Manager'</span>,<span class="number">10000</span>,<span class="number">20000</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.JOBS (JOB_ID,JOB_TITLE,MIN_SALARY,MAX_SALARY) <span class="keyword">values</span> (<span class="string">'SA_REP'</span>,<span class="string">'Sales Representative'</span>,<span class="number">6000</span>,<span class="number">12000</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.JOBS (JOB_ID,JOB_TITLE,MIN_SALARY,MAX_SALARY) <span class="keyword">values</span> (<span class="string">'PU_MAN'</span>,<span class="string">'Purchasing Manager'</span>,<span class="number">8000</span>,<span class="number">15000</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.JOBS (JOB_ID,JOB_TITLE,MIN_SALARY,MAX_SALARY) <span class="keyword">values</span> (<span class="string">'PU_CLERK'</span>,<span class="string">'Purchasing Clerk'</span>,<span class="number">2500</span>,<span class="number">5500</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.JOBS (JOB_ID,JOB_TITLE,MIN_SALARY,MAX_SALARY) <span class="keyword">values</span> (<span class="string">'ST_MAN'</span>,<span class="string">'Stock Manager'</span>,<span class="number">5500</span>,<span class="number">8500</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.JOBS (JOB_ID,JOB_TITLE,MIN_SALARY,MAX_SALARY) <span class="keyword">values</span> (<span class="string">'ST_CLERK'</span>,<span class="string">'Stock Clerk'</span>,<span class="number">2000</span>,<span class="number">5000</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.JOBS (JOB_ID,JOB_TITLE,MIN_SALARY,MAX_SALARY) <span class="keyword">values</span> (<span class="string">'SH_CLERK'</span>,<span class="string">'Shipping Clerk'</span>,<span class="number">2500</span>,<span class="number">5500</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.JOBS (JOB_ID,JOB_TITLE,MIN_SALARY,MAX_SALARY) <span class="keyword">values</span> (<span class="string">'IT_PROG'</span>,<span class="string">'Programmer'</span>,<span class="number">4000</span>,<span class="number">10000</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.JOBS (JOB_ID,JOB_TITLE,MIN_SALARY,MAX_SALARY) <span class="keyword">values</span> (<span class="string">'MK_MAN'</span>,<span class="string">'05keting Manager'</span>,<span class="number">9000</span>,<span class="number">15000</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.JOBS (JOB_ID,JOB_TITLE,MIN_SALARY,MAX_SALARY) <span class="keyword">values</span> (<span class="string">'MK_REP'</span>,<span class="string">'05keting Representative'</span>,<span class="number">4000</span>,<span class="number">9000</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.JOBS (JOB_ID,JOB_TITLE,MIN_SALARY,MAX_SALARY) <span class="keyword">values</span> (<span class="string">'HR_REP'</span>,<span class="string">'Human Resources Representative'</span>,<span class="number">4000</span>,<span class="number">9000</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.JOBS (JOB_ID,JOB_TITLE,MIN_SALARY,MAX_SALARY) <span class="keyword">values</span> (<span class="string">'PR_REP'</span>,<span class="string">'Public Relations Representative'</span>,<span class="number">4500</span>,<span class="number">10500</span>);</span><br><span class="line">REM INSERTING into ZS.JOB_HISTORY</span><br><span class="line"><span class="keyword">SET</span> <span class="keyword">DEFINE</span> <span class="keyword">OFF</span>;</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.JOB_HISTORY (EMPLOYEE_ID,START_DATE,END_DATE,JOB_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">102</span>,<span class="keyword">to_date</span>(<span class="string">'13-6月 -93'</span>,<span class="string">'DD-MON-RR'</span>),<span class="keyword">to_date</span>(<span class="string">'24-7月 -98'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'IT_PROG'</span>,<span class="number">60</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.JOB_HISTORY (EMPLOYEE_ID,START_DATE,END_DATE,JOB_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">101</span>,<span class="keyword">to_date</span>(<span class="string">'21-9月 -89'</span>,<span class="string">'DD-MON-RR'</span>),<span class="keyword">to_date</span>(<span class="string">'27-10月-93'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'AC_ACCOUNT'</span>,<span class="number">110</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.JOB_HISTORY (EMPLOYEE_ID,START_DATE,END_DATE,JOB_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">101</span>,<span class="keyword">to_date</span>(<span class="string">'28-10月-93'</span>,<span class="string">'DD-MON-RR'</span>),<span class="keyword">to_date</span>(<span class="string">'15-5月 -97'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'AC_MGR'</span>,<span class="number">110</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.JOB_HISTORY (EMPLOYEE_ID,START_DATE,END_DATE,JOB_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">201</span>,<span class="keyword">to_date</span>(<span class="string">'17-11月-96'</span>,<span class="string">'DD-MON-RR'</span>),<span class="keyword">to_date</span>(<span class="string">'19-12月-99'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'MK_REP'</span>,<span class="number">20</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.JOB_HISTORY (EMPLOYEE_ID,START_DATE,END_DATE,JOB_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">114</span>,<span class="keyword">to_date</span>(<span class="string">'24-5月 -98'</span>,<span class="string">'DD-MON-RR'</span>),<span class="keyword">to_date</span>(<span class="string">'31-12月-99'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'ST_CLERK'</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.JOB_HISTORY (EMPLOYEE_ID,START_DATE,END_DATE,JOB_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">122</span>,<span class="keyword">to_date</span>(<span class="string">'01-6月 -99'</span>,<span class="string">'DD-MON-RR'</span>),<span class="keyword">to_date</span>(<span class="string">'31-12月-99'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'ST_CLERK'</span>,<span class="number">50</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.JOB_HISTORY (EMPLOYEE_ID,START_DATE,END_DATE,JOB_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">200</span>,<span class="keyword">to_date</span>(<span class="string">'17-9月 -87'</span>,<span class="string">'DD-MON-RR'</span>),<span class="keyword">to_date</span>(<span class="string">'17-1月 -93'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'AD_ASST'</span>,<span class="number">90</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.JOB_HISTORY (EMPLOYEE_ID,START_DATE,END_DATE,JOB_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">176</span>,<span class="keyword">to_date</span>(<span class="string">'24-5月 -98'</span>,<span class="string">'DD-MON-RR'</span>),<span class="keyword">to_date</span>(<span class="string">'31-12月-98'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_REP'</span>,<span class="number">80</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.JOB_HISTORY (EMPLOYEE_ID,START_DATE,END_DATE,JOB_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">176</span>,<span class="keyword">to_date</span>(<span class="string">'01-6月 -99'</span>,<span class="string">'DD-MON-RR'</span>),<span class="keyword">to_date</span>(<span class="string">'31-12月-99'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'SA_MAN'</span>,<span class="number">80</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.JOB_HISTORY (EMPLOYEE_ID,START_DATE,END_DATE,JOB_ID,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">200</span>,<span class="keyword">to_date</span>(<span class="string">'01-7月 -94'</span>,<span class="string">'DD-MON-RR'</span>),<span class="keyword">to_date</span>(<span class="string">'31-12月-98'</span>,<span class="string">'DD-MON-RR'</span>),<span class="string">'AC_ACCOUNT'</span>,<span class="number">90</span>);</span><br><span class="line">REM INSERTING into ZS.LOCATIONS</span><br><span class="line"><span class="keyword">SET</span> <span class="keyword">DEFINE</span> <span class="keyword">OFF</span>;</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.LOCATIONS (LOCATION_ID,STREET_ADDRESS,POSTAL_CODE,CITY,STATE_PROVINCE,COUNTRY_ID) <span class="keyword">values</span> (<span class="number">1000</span>,<span class="string">'1297 Via Cola di Rie'</span>,<span class="string">'00989'</span>,<span class="string">'Roma'</span>,<span class="literal">null</span>,<span class="string">'IT'</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.LOCATIONS (LOCATION_ID,STREET_ADDRESS,POSTAL_CODE,CITY,STATE_PROVINCE,COUNTRY_ID) <span class="keyword">values</span> (<span class="number">1100</span>,<span class="string">'93091 Calle della Testa'</span>,<span class="string">'10934'</span>,<span class="string">'Venice'</span>,<span class="literal">null</span>,<span class="string">'IT'</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.LOCATIONS (LOCATION_ID,STREET_ADDRESS,POSTAL_CODE,CITY,STATE_PROVINCE,COUNTRY_ID) <span class="keyword">values</span> (<span class="number">1200</span>,<span class="string">'2017 Shinjuku-ku'</span>,<span class="string">'1689'</span>,<span class="string">'Tokyo'</span>,<span class="string">'Tokyo Prefecture'</span>,<span class="string">'JP'</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.LOCATIONS (LOCATION_ID,STREET_ADDRESS,POSTAL_CODE,CITY,STATE_PROVINCE,COUNTRY_ID) <span class="keyword">values</span> (<span class="number">1300</span>,<span class="string">'9450 Kamiya-cho'</span>,<span class="string">'6823'</span>,<span class="string">'Hiroshima'</span>,<span class="literal">null</span>,<span class="string">'JP'</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.LOCATIONS (LOCATION_ID,STREET_ADDRESS,POSTAL_CODE,CITY,STATE_PROVINCE,COUNTRY_ID) <span class="keyword">values</span> (<span class="number">1400</span>,<span class="string">'2014 Jabberwocky Rd'</span>,<span class="string">'26192'</span>,<span class="string">'Southlake'</span>,<span class="string">'Texas'</span>,<span class="string">'US'</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.LOCATIONS (LOCATION_ID,STREET_ADDRESS,POSTAL_CODE,CITY,STATE_PROVINCE,COUNTRY_ID) <span class="keyword">values</span> (<span class="number">1500</span>,<span class="string">'2011 Interiors Blvd'</span>,<span class="string">'99236'</span>,<span class="string">'South San Francisco'</span>,<span class="string">'California'</span>,<span class="string">'US'</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.LOCATIONS (LOCATION_ID,STREET_ADDRESS,POSTAL_CODE,CITY,STATE_PROVINCE,COUNTRY_ID) <span class="keyword">values</span> (<span class="number">1600</span>,<span class="string">'2007 Zagora St'</span>,<span class="string">'50090'</span>,<span class="string">'South Brunswick'</span>,<span class="string">'New Jersey'</span>,<span class="string">'US'</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.LOCATIONS (LOCATION_ID,STREET_ADDRESS,POSTAL_CODE,CITY,STATE_PROVINCE,COUNTRY_ID) <span class="keyword">values</span> (<span class="number">1700</span>,<span class="string">'2004 Charade Rd'</span>,<span class="string">'98199'</span>,<span class="string">'Seattle'</span>,<span class="string">'Washington'</span>,<span class="string">'US'</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.LOCATIONS (LOCATION_ID,STREET_ADDRESS,POSTAL_CODE,CITY,STATE_PROVINCE,COUNTRY_ID) <span class="keyword">values</span> (<span class="number">1800</span>,<span class="string">'147 Spadina Ave'</span>,<span class="string">'M5V 2L7'</span>,<span class="string">'Toronto'</span>,<span class="string">'Ontario'</span>,<span class="string">'CA'</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.LOCATIONS (LOCATION_ID,STREET_ADDRESS,POSTAL_CODE,CITY,STATE_PROVINCE,COUNTRY_ID) <span class="keyword">values</span> (<span class="number">1900</span>,<span class="string">'6092 Boxwood St'</span>,<span class="string">'YSW 9T2'</span>,<span class="string">'Whitehorse'</span>,<span class="string">'Yukon'</span>,<span class="string">'CA'</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.LOCATIONS (LOCATION_ID,STREET_ADDRESS,POSTAL_CODE,CITY,STATE_PROVINCE,COUNTRY_ID) <span class="keyword">values</span> (<span class="number">2000</span>,<span class="string">'40-5-12 Laogianggen'</span>,<span class="string">'190518'</span>,<span class="string">'Beijing'</span>,<span class="literal">null</span>,<span class="string">'CN'</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.LOCATIONS (LOCATION_ID,STREET_ADDRESS,POSTAL_CODE,CITY,STATE_PROVINCE,COUNTRY_ID) <span class="keyword">values</span> (<span class="number">2100</span>,<span class="string">'1298 Vileparle (E)'</span>,<span class="string">'490231'</span>,<span class="string">'Bombay'</span>,<span class="string">'Maharashtra'</span>,<span class="string">'IN'</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.LOCATIONS (LOCATION_ID,STREET_ADDRESS,POSTAL_CODE,CITY,STATE_PROVINCE,COUNTRY_ID) <span class="keyword">values</span> (<span class="number">2200</span>,<span class="string">'12-98 Victoria Street'</span>,<span class="string">'2901'</span>,<span class="string">'Sydney'</span>,<span class="string">'New South Wales'</span>,<span class="string">'AU'</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.LOCATIONS (LOCATION_ID,STREET_ADDRESS,POSTAL_CODE,CITY,STATE_PROVINCE,COUNTRY_ID) <span class="keyword">values</span> (<span class="number">2300</span>,<span class="string">'198 Clementi North'</span>,<span class="string">'540198'</span>,<span class="string">'Singapore'</span>,<span class="literal">null</span>,<span class="string">'SG'</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.LOCATIONS (LOCATION_ID,STREET_ADDRESS,POSTAL_CODE,CITY,STATE_PROVINCE,COUNTRY_ID) <span class="keyword">values</span> (<span class="number">2400</span>,<span class="string">'8204 Arthur St'</span>,<span class="literal">null</span>,<span class="string">'London'</span>,<span class="literal">null</span>,<span class="string">'UK'</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.LOCATIONS (LOCATION_ID,STREET_ADDRESS,POSTAL_CODE,CITY,STATE_PROVINCE,COUNTRY_ID) <span class="keyword">values</span> (<span class="number">2500</span>,<span class="string">'Magdalen Centre, The Oxford Science Park'</span>,<span class="string">'OX9 9ZB'</span>,<span class="string">'Oxford'</span>,<span class="string">'Oxford'</span>,<span class="string">'UK'</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.LOCATIONS (LOCATION_ID,STREET_ADDRESS,POSTAL_CODE,CITY,STATE_PROVINCE,COUNTRY_ID) <span class="keyword">values</span> (<span class="number">2600</span>,<span class="string">'9702 Chester Road'</span>,<span class="string">'09629850293'</span>,<span class="string">'Stretford'</span>,<span class="string">'Manchester'</span>,<span class="string">'UK'</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.LOCATIONS (LOCATION_ID,STREET_ADDRESS,POSTAL_CODE,CITY,STATE_PROVINCE,COUNTRY_ID) <span class="keyword">values</span> (<span class="number">2700</span>,<span class="string">'Schwanthalerstr. 7031'</span>,<span class="string">'80925'</span>,<span class="string">'Munich'</span>,<span class="string">'Bavaria'</span>,<span class="string">'DE'</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.LOCATIONS (LOCATION_ID,STREET_ADDRESS,POSTAL_CODE,CITY,STATE_PROVINCE,COUNTRY_ID) <span class="keyword">values</span> (<span class="number">2800</span>,<span class="string">'Rua Frei Caneca 1360 '</span>,<span class="string">'01307-002'</span>,<span class="string">'Sao Paulo'</span>,<span class="string">'Sao Paulo'</span>,<span class="string">'BR'</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.LOCATIONS (LOCATION_ID,STREET_ADDRESS,POSTAL_CODE,CITY,STATE_PROVINCE,COUNTRY_ID) <span class="keyword">values</span> (<span class="number">2900</span>,<span class="string">'20 Rue des Corps-Saints'</span>,<span class="string">'1730'</span>,<span class="string">'Geneva'</span>,<span class="string">'Geneve'</span>,<span class="string">'CH'</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.LOCATIONS (LOCATION_ID,STREET_ADDRESS,POSTAL_CODE,CITY,STATE_PROVINCE,COUNTRY_ID) <span class="keyword">values</span> (<span class="number">3000</span>,<span class="string">'Murtenstrasse 921'</span>,<span class="string">'3095'</span>,<span class="string">'Bern'</span>,<span class="string">'BE'</span>,<span class="string">'CH'</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.LOCATIONS (LOCATION_ID,STREET_ADDRESS,POSTAL_CODE,CITY,STATE_PROVINCE,COUNTRY_ID) <span class="keyword">values</span> (<span class="number">3100</span>,<span class="string">'Pieter Breughelstraat 837'</span>,<span class="string">'3029SK'</span>,<span class="string">'Utrecht'</span>,<span class="string">'Utrecht'</span>,<span class="string">'NL'</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.LOCATIONS (LOCATION_ID,STREET_ADDRESS,POSTAL_CODE,CITY,STATE_PROVINCE,COUNTRY_ID) <span class="keyword">values</span> (<span class="number">3200</span>,<span class="string">'05iano Escobedo 9991'</span>,<span class="string">'11932'</span>,<span class="string">'Mexico City'</span>,<span class="string">'Distrito Federal,'</span>,<span class="string">'MX'</span>);</span><br><span class="line">REM INSERTING into ZS.REGIONS</span><br><span class="line"><span class="keyword">SET</span> <span class="keyword">DEFINE</span> <span class="keyword">OFF</span>;</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.REGIONS (REGION_ID,REGION_NAME) <span class="keyword">values</span> (<span class="number">1</span>,<span class="string">'Europe'</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.REGIONS (REGION_ID,REGION_NAME) <span class="keyword">values</span> (<span class="number">2</span>,<span class="string">'Americas'</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.REGIONS (REGION_ID,REGION_NAME) <span class="keyword">values</span> (<span class="number">3</span>,<span class="string">'Asia'</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.REGIONS (REGION_ID,REGION_NAME) <span class="keyword">values</span> (<span class="number">4</span>,<span class="string">'Middle East and Africa'</span>);</span><br><span class="line">REM INSERTING into ZS.SAL_GRADES</span><br><span class="line"><span class="keyword">SET</span> <span class="keyword">DEFINE</span> <span class="keyword">OFF</span>;</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.SAL_GRADES (GRADE,MIN_SALARY,MAX_SALARY) <span class="keyword">values</span> (<span class="number">1</span>,<span class="number">0</span>,<span class="number">1000</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.SAL_GRADES (GRADE,MIN_SALARY,MAX_SALARY) <span class="keyword">values</span> (<span class="number">2</span>,<span class="number">1001</span>,<span class="number">2000</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.SAL_GRADES (GRADE,MIN_SALARY,MAX_SALARY) <span class="keyword">values</span> (<span class="number">3</span>,<span class="number">2001</span>,<span class="number">3000</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.SAL_GRADES (GRADE,MIN_SALARY,MAX_SALARY) <span class="keyword">values</span> (<span class="number">4</span>,<span class="number">3001</span>,<span class="number">4000</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.SAL_GRADES (GRADE,MIN_SALARY,MAX_SALARY) <span class="keyword">values</span> (<span class="number">5</span>,<span class="number">4001</span>,<span class="number">5000</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.SAL_GRADES (GRADE,MIN_SALARY,MAX_SALARY) <span class="keyword">values</span> (<span class="number">6</span>,<span class="number">5001</span>,<span class="number">6000</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.SAL_GRADES (GRADE,MIN_SALARY,MAX_SALARY) <span class="keyword">values</span> (<span class="number">7</span>,<span class="number">6001</span>,<span class="number">7000</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.SAL_GRADES (GRADE,MIN_SALARY,MAX_SALARY) <span class="keyword">values</span> (<span class="number">8</span>,<span class="number">7001</span>,<span class="number">8000</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.SAL_GRADES (GRADE,MIN_SALARY,MAX_SALARY) <span class="keyword">values</span> (<span class="number">9</span>,<span class="number">8001</span>,<span class="number">9000</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.SAL_GRADES (GRADE,MIN_SALARY,MAX_SALARY) <span class="keyword">values</span> (<span class="number">10</span>,<span class="number">9001</span>,<span class="number">10000</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.SAL_GRADES (GRADE,MIN_SALARY,MAX_SALARY) <span class="keyword">values</span> (<span class="number">11</span>,<span class="number">10001</span>,<span class="number">11000</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.SAL_GRADES (GRADE,MIN_SALARY,MAX_SALARY) <span class="keyword">values</span> (<span class="number">12</span>,<span class="number">11001</span>,<span class="number">12000</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.SAL_GRADES (GRADE,MIN_SALARY,MAX_SALARY) <span class="keyword">values</span> (<span class="number">13</span>,<span class="number">12001</span>,<span class="number">13000</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.SAL_GRADES (GRADE,MIN_SALARY,MAX_SALARY) <span class="keyword">values</span> (<span class="number">14</span>,<span class="number">13001</span>,<span class="number">14000</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.SAL_GRADES (GRADE,MIN_SALARY,MAX_SALARY) <span class="keyword">values</span> (<span class="number">15</span>,<span class="number">14001</span>,<span class="number">15000</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.SAL_GRADES (GRADE,MIN_SALARY,MAX_SALARY) <span class="keyword">values</span> (<span class="number">16</span>,<span class="number">15001</span>,<span class="number">16000</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.SAL_GRADES (GRADE,MIN_SALARY,MAX_SALARY) <span class="keyword">values</span> (<span class="number">17</span>,<span class="number">16001</span>,<span class="number">17000</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.SAL_GRADES (GRADE,MIN_SALARY,MAX_SALARY) <span class="keyword">values</span> (<span class="number">18</span>,<span class="number">17001</span>,<span class="number">18000</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.SAL_GRADES (GRADE,MIN_SALARY,MAX_SALARY) <span class="keyword">values</span> (<span class="number">19</span>,<span class="number">18001</span>,<span class="number">19000</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.SAL_GRADES (GRADE,MIN_SALARY,MAX_SALARY) <span class="keyword">values</span> (<span class="number">20</span>,<span class="number">19001</span>,<span class="number">20000</span>);</span><br><span class="line">REM INSERTING into ZS.SOURCE_EMP</span><br><span class="line"><span class="keyword">SET</span> <span class="keyword">DEFINE</span> <span class="keyword">OFF</span>;</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.SOURCE_EMP (EMPLOYEE_ID,LAST_NAME,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">100</span>,<span class="string">'john'</span>,<span class="number">10</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.SOURCE_EMP (EMPLOYEE_ID,LAST_NAME,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">110</span>,<span class="string">'smith'</span>,<span class="number">20</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.SOURCE_EMP (EMPLOYEE_ID,LAST_NAME,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">120</span>,<span class="string">'tom'</span>,<span class="number">30</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.SOURCE_EMP (EMPLOYEE_ID,LAST_NAME,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">100</span>,<span class="string">'marry'</span>,<span class="number">20</span>);</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">into</span> ZS.SOURCE_EMP (EMPLOYEE_ID,LAST_NAME,DEPARTMENT_ID) <span class="keyword">values</span> (<span class="number">20</span>,<span class="string">'jack'</span>,<span class="number">40</span>);</span><br><span class="line">REM INSERTING into ZS.TARGET_EMP</span><br><span class="line"><span class="keyword">SET</span> <span class="keyword">DEFINE</span> <span class="keyword">OFF</span>;</span><br><span class="line">REM INSERTING into ZS.USERS</span><br><span class="line"><span class="keyword">SET</span> <span class="keyword">DEFINE</span> <span class="keyword">OFF</span>;</span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"><span class="comment">--  DDL for Index JHIST_EMP_ID_ST_DATE_PK</span></span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">CREATE</span> <span class="keyword">UNIQUE</span> <span class="keyword">INDEX</span> <span class="string">"ZS"</span>.<span class="string">"JHIST_EMP_ID_ST_DATE_PK"</span> <span class="keyword">ON</span> <span class="string">"ZS"</span>.<span class="string">"JOB_HISTORY"</span> (<span class="string">"EMPLOYEE_ID"</span>, <span class="string">"START_DATE"</span>) </span><br><span class="line">  PCTFREE <span class="number">10</span> <span class="keyword">INITRANS</span> <span class="number">2</span> <span class="keyword">MAXTRANS</span> <span class="number">255</span> <span class="keyword">COMPUTE</span> <span class="keyword">STATISTICS</span> </span><br><span class="line">  <span class="keyword">STORAGE</span>(<span class="keyword">INITIAL</span> <span class="number">65536</span> <span class="keyword">NEXT</span> <span class="number">1048576</span> <span class="keyword">MINEXTENTS</span> <span class="number">1</span> <span class="keyword">MAXEXTENTS</span> <span class="number">2147483645</span></span><br><span class="line">  <span class="keyword">PCTINCREASE</span> <span class="number">0</span> <span class="keyword">FREELISTS</span> <span class="number">1</span> <span class="keyword">FREELIST</span> <span class="keyword">GROUPS</span> <span class="number">1</span></span><br><span class="line">  <span class="keyword">BUFFER_POOL</span> <span class="keyword">DEFAULT</span> <span class="keyword">FLASH_CACHE</span> <span class="keyword">DEFAULT</span> CELL_FLASH_CACHE <span class="keyword">DEFAULT</span>)</span><br><span class="line">  <span class="keyword">TABLESPACE</span> <span class="string">"USERS"</span> ;</span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"><span class="comment">--  Constraints for Table DEPT_SALARY_STAT</span></span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">"ZS"</span>.<span class="string">"DEPT_SALARY_STAT"</span> <span class="keyword">ADD</span> PRIMARY <span class="keyword">KEY</span> (<span class="string">"DEPARTMENT_ID"</span>)</span><br><span class="line">  <span class="keyword">USING</span> <span class="keyword">INDEX</span> PCTFREE <span class="number">10</span> <span class="keyword">INITRANS</span> <span class="number">2</span> <span class="keyword">MAXTRANS</span> <span class="number">255</span> </span><br><span class="line">  <span class="keyword">STORAGE</span>(<span class="keyword">INITIAL</span> <span class="number">65536</span> <span class="keyword">NEXT</span> <span class="number">1048576</span> <span class="keyword">MINEXTENTS</span> <span class="number">1</span> <span class="keyword">MAXEXTENTS</span> <span class="number">2147483645</span></span><br><span class="line">  <span class="keyword">PCTINCREASE</span> <span class="number">0</span> <span class="keyword">FREELISTS</span> <span class="number">1</span> <span class="keyword">FREELIST</span> <span class="keyword">GROUPS</span> <span class="number">1</span></span><br><span class="line">  <span class="keyword">BUFFER_POOL</span> <span class="keyword">DEFAULT</span> <span class="keyword">FLASH_CACHE</span> <span class="keyword">DEFAULT</span> CELL_FLASH_CACHE <span class="keyword">DEFAULT</span>)</span><br><span class="line">  <span class="keyword">TABLESPACE</span> <span class="string">"USERS"</span>  <span class="keyword">ENABLE</span>;</span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"><span class="comment">--  Constraints for Table EMP_20</span></span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">"ZS"</span>.<span class="string">"EMP_20"</span> <span class="keyword">MODIFY</span> (<span class="string">"JOB_ID"</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">ENABLE</span>);</span><br><span class="line">  <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">"ZS"</span>.<span class="string">"EMP_20"</span> <span class="keyword">MODIFY</span> (<span class="string">"HIRE_DATE"</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">ENABLE</span>);</span><br><span class="line">  <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">"ZS"</span>.<span class="string">"EMP_20"</span> <span class="keyword">MODIFY</span> (<span class="string">"EMAIL"</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">ENABLE</span>);</span><br><span class="line">  <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">"ZS"</span>.<span class="string">"EMP_20"</span> <span class="keyword">MODIFY</span> (<span class="string">"LAST_NAME"</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">ENABLE</span>);</span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"><span class="comment">--  Constraints for Table EMP_SAL</span></span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">"ZS"</span>.<span class="string">"EMP_SAL"</span> <span class="keyword">MODIFY</span> (<span class="string">"HIRE_DATE"</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">ENABLE</span>);</span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"><span class="comment">--  Constraints for Table SAL_GRADES</span></span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">"ZS"</span>.<span class="string">"SAL_GRADES"</span> <span class="keyword">ADD</span> PRIMARY <span class="keyword">KEY</span> (<span class="string">"GRADE"</span>)</span><br><span class="line">  <span class="keyword">USING</span> <span class="keyword">INDEX</span> PCTFREE <span class="number">10</span> <span class="keyword">INITRANS</span> <span class="number">2</span> <span class="keyword">MAXTRANS</span> <span class="number">255</span> <span class="keyword">COMPUTE</span> <span class="keyword">STATISTICS</span> </span><br><span class="line">  <span class="keyword">STORAGE</span>(<span class="keyword">INITIAL</span> <span class="number">65536</span> <span class="keyword">NEXT</span> <span class="number">1048576</span> <span class="keyword">MINEXTENTS</span> <span class="number">1</span> <span class="keyword">MAXEXTENTS</span> <span class="number">2147483645</span></span><br><span class="line">  <span class="keyword">PCTINCREASE</span> <span class="number">0</span> <span class="keyword">FREELISTS</span> <span class="number">1</span> <span class="keyword">FREELIST</span> <span class="keyword">GROUPS</span> <span class="number">1</span></span><br><span class="line">  <span class="keyword">BUFFER_POOL</span> <span class="keyword">DEFAULT</span> <span class="keyword">FLASH_CACHE</span> <span class="keyword">DEFAULT</span> CELL_FLASH_CACHE <span class="keyword">DEFAULT</span>)</span><br><span class="line">  <span class="keyword">TABLESPACE</span> <span class="string">"USERS"</span>  <span class="keyword">ENABLE</span>;</span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"><span class="comment">--  Constraints for Table LOCATIONS</span></span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">"ZS"</span>.<span class="string">"LOCATIONS"</span> <span class="keyword">MODIFY</span> (<span class="string">"CITY"</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">ENABLE</span>);</span><br><span class="line">  <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">"ZS"</span>.<span class="string">"LOCATIONS"</span> <span class="keyword">ADD</span> PRIMARY <span class="keyword">KEY</span> (<span class="string">"LOCATION_ID"</span>)</span><br><span class="line">  <span class="keyword">USING</span> <span class="keyword">INDEX</span> PCTFREE <span class="number">10</span> <span class="keyword">INITRANS</span> <span class="number">2</span> <span class="keyword">MAXTRANS</span> <span class="number">255</span> <span class="keyword">COMPUTE</span> <span class="keyword">STATISTICS</span> </span><br><span class="line">  <span class="keyword">STORAGE</span>(<span class="keyword">INITIAL</span> <span class="number">65536</span> <span class="keyword">NEXT</span> <span class="number">1048576</span> <span class="keyword">MINEXTENTS</span> <span class="number">1</span> <span class="keyword">MAXEXTENTS</span> <span class="number">2147483645</span></span><br><span class="line">  <span class="keyword">PCTINCREASE</span> <span class="number">0</span> <span class="keyword">FREELISTS</span> <span class="number">1</span> <span class="keyword">FREELIST</span> <span class="keyword">GROUPS</span> <span class="number">1</span></span><br><span class="line">  <span class="keyword">BUFFER_POOL</span> <span class="keyword">DEFAULT</span> <span class="keyword">FLASH_CACHE</span> <span class="keyword">DEFAULT</span> CELL_FLASH_CACHE <span class="keyword">DEFAULT</span>)</span><br><span class="line">  <span class="keyword">TABLESPACE</span> <span class="string">"USERS"</span>  <span class="keyword">ENABLE</span>;</span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"><span class="comment">--  Constraints for Table EMP_30</span></span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">"ZS"</span>.<span class="string">"EMP_30"</span> <span class="keyword">MODIFY</span> (<span class="string">"JOB_ID"</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">ENABLE</span>);</span><br><span class="line">  <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">"ZS"</span>.<span class="string">"EMP_30"</span> <span class="keyword">MODIFY</span> (<span class="string">"HIRE_DATE"</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">ENABLE</span>);</span><br><span class="line">  <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">"ZS"</span>.<span class="string">"EMP_30"</span> <span class="keyword">MODIFY</span> (<span class="string">"EMAIL"</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">ENABLE</span>);</span><br><span class="line">  <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">"ZS"</span>.<span class="string">"EMP_30"</span> <span class="keyword">MODIFY</span> (<span class="string">"LAST_NAME"</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">ENABLE</span>);</span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"><span class="comment">--  Constraints for Table EMP_OTHER</span></span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">"ZS"</span>.<span class="string">"EMP_OTHER"</span> <span class="keyword">MODIFY</span> (<span class="string">"JOB_ID"</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">ENABLE</span>);</span><br><span class="line">  <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">"ZS"</span>.<span class="string">"EMP_OTHER"</span> <span class="keyword">MODIFY</span> (<span class="string">"HIRE_DATE"</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">ENABLE</span>);</span><br><span class="line">  <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">"ZS"</span>.<span class="string">"EMP_OTHER"</span> <span class="keyword">MODIFY</span> (<span class="string">"EMAIL"</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">ENABLE</span>);</span><br><span class="line">  <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">"ZS"</span>.<span class="string">"EMP_OTHER"</span> <span class="keyword">MODIFY</span> (<span class="string">"LAST_NAME"</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">ENABLE</span>);</span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"><span class="comment">--  Constraints for Table EMP_10</span></span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">"ZS"</span>.<span class="string">"EMP_10"</span> <span class="keyword">MODIFY</span> (<span class="string">"JOB_ID"</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">ENABLE</span>);</span><br><span class="line">  <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">"ZS"</span>.<span class="string">"EMP_10"</span> <span class="keyword">MODIFY</span> (<span class="string">"HIRE_DATE"</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">ENABLE</span>);</span><br><span class="line">  <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">"ZS"</span>.<span class="string">"EMP_10"</span> <span class="keyword">MODIFY</span> (<span class="string">"EMAIL"</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">ENABLE</span>);</span><br><span class="line">  <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">"ZS"</span>.<span class="string">"EMP_10"</span> <span class="keyword">MODIFY</span> (<span class="string">"LAST_NAME"</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">ENABLE</span>);</span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"><span class="comment">--  Constraints for Table COUNTRIES</span></span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">"ZS"</span>.<span class="string">"COUNTRIES"</span> <span class="keyword">ADD</span> PRIMARY <span class="keyword">KEY</span> (<span class="string">"COUNTRY_ID"</span>)</span><br><span class="line">  <span class="keyword">USING</span> <span class="keyword">INDEX</span> PCTFREE <span class="number">10</span> <span class="keyword">INITRANS</span> <span class="number">2</span> <span class="keyword">MAXTRANS</span> <span class="number">255</span> </span><br><span class="line">  <span class="keyword">STORAGE</span>(<span class="keyword">INITIAL</span> <span class="number">65536</span> <span class="keyword">NEXT</span> <span class="number">1048576</span> <span class="keyword">MINEXTENTS</span> <span class="number">1</span> <span class="keyword">MAXEXTENTS</span> <span class="number">2147483645</span></span><br><span class="line">  <span class="keyword">PCTINCREASE</span> <span class="number">0</span> <span class="keyword">FREELISTS</span> <span class="number">1</span> <span class="keyword">FREELIST</span> <span class="keyword">GROUPS</span> <span class="number">1</span></span><br><span class="line">  <span class="keyword">BUFFER_POOL</span> <span class="keyword">DEFAULT</span> <span class="keyword">FLASH_CACHE</span> <span class="keyword">DEFAULT</span> CELL_FLASH_CACHE <span class="keyword">DEFAULT</span>)</span><br><span class="line">  <span class="keyword">TABLESPACE</span> <span class="string">"USERS"</span>  <span class="keyword">ENABLE</span>;</span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"><span class="comment">--  Constraints for Table JOB_HISTORY</span></span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">"ZS"</span>.<span class="string">"JOB_HISTORY"</span> <span class="keyword">MODIFY</span> (<span class="string">"EMPLOYEE_ID"</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">ENABLE</span>);</span><br><span class="line">  <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">"ZS"</span>.<span class="string">"JOB_HISTORY"</span> <span class="keyword">MODIFY</span> (<span class="string">"START_DATE"</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">ENABLE</span>);</span><br><span class="line">  <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">"ZS"</span>.<span class="string">"JOB_HISTORY"</span> <span class="keyword">MODIFY</span> (<span class="string">"END_DATE"</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">ENABLE</span>);</span><br><span class="line">  <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">"ZS"</span>.<span class="string">"JOB_HISTORY"</span> <span class="keyword">MODIFY</span> (<span class="string">"JOB_ID"</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">ENABLE</span>);</span><br><span class="line">  <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">"ZS"</span>.<span class="string">"JOB_HISTORY"</span> <span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> <span class="string">"JHIST_DATE_INTERVAL"</span> <span class="keyword">CHECK</span> (end_date &gt; start_date) <span class="keyword">ENABLE</span>;</span><br><span class="line">  <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">"ZS"</span>.<span class="string">"JOB_HISTORY"</span> <span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> <span class="string">"JHIST_EMP_ID_ST_DATE_PK"</span> PRIMARY <span class="keyword">KEY</span> (<span class="string">"EMPLOYEE_ID"</span>, <span class="string">"START_DATE"</span>)</span><br><span class="line">  <span class="keyword">USING</span> <span class="keyword">INDEX</span> PCTFREE <span class="number">10</span> <span class="keyword">INITRANS</span> <span class="number">2</span> <span class="keyword">MAXTRANS</span> <span class="number">255</span> <span class="keyword">COMPUTE</span> <span class="keyword">STATISTICS</span> </span><br><span class="line">  <span class="keyword">STORAGE</span>(<span class="keyword">INITIAL</span> <span class="number">65536</span> <span class="keyword">NEXT</span> <span class="number">1048576</span> <span class="keyword">MINEXTENTS</span> <span class="number">1</span> <span class="keyword">MAXEXTENTS</span> <span class="number">2147483645</span></span><br><span class="line">  <span class="keyword">PCTINCREASE</span> <span class="number">0</span> <span class="keyword">FREELISTS</span> <span class="number">1</span> <span class="keyword">FREELIST</span> <span class="keyword">GROUPS</span> <span class="number">1</span></span><br><span class="line">  <span class="keyword">BUFFER_POOL</span> <span class="keyword">DEFAULT</span> <span class="keyword">FLASH_CACHE</span> <span class="keyword">DEFAULT</span> CELL_FLASH_CACHE <span class="keyword">DEFAULT</span>)</span><br><span class="line">  <span class="keyword">TABLESPACE</span> <span class="string">"USERS"</span>  <span class="keyword">ENABLE</span>;</span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"><span class="comment">--  Constraints for Table EMPLOYEES</span></span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">"ZS"</span>.<span class="string">"EMPLOYEES"</span> <span class="keyword">MODIFY</span> (<span class="string">"LAST_NAME"</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">ENABLE</span>);</span><br><span class="line">  <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">"ZS"</span>.<span class="string">"EMPLOYEES"</span> <span class="keyword">MODIFY</span> (<span class="string">"EMAIL"</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">ENABLE</span>);</span><br><span class="line">  <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">"ZS"</span>.<span class="string">"EMPLOYEES"</span> <span class="keyword">MODIFY</span> (<span class="string">"HIRE_DATE"</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">ENABLE</span>);</span><br><span class="line">  <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">"ZS"</span>.<span class="string">"EMPLOYEES"</span> <span class="keyword">MODIFY</span> (<span class="string">"JOB_ID"</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">ENABLE</span>);</span><br><span class="line">  <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">"ZS"</span>.<span class="string">"EMPLOYEES"</span> <span class="keyword">ADD</span> <span class="keyword">CHECK</span> (salary &gt; <span class="number">0</span>) <span class="keyword">ENABLE</span>;</span><br><span class="line">  <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">"ZS"</span>.<span class="string">"EMPLOYEES"</span> <span class="keyword">ADD</span> PRIMARY <span class="keyword">KEY</span> (<span class="string">"EMPLOYEE_ID"</span>)</span><br><span class="line">  <span class="keyword">USING</span> <span class="keyword">INDEX</span> PCTFREE <span class="number">10</span> <span class="keyword">INITRANS</span> <span class="number">2</span> <span class="keyword">MAXTRANS</span> <span class="number">255</span> <span class="keyword">COMPUTE</span> <span class="keyword">STATISTICS</span> </span><br><span class="line">  <span class="keyword">STORAGE</span>(<span class="keyword">INITIAL</span> <span class="number">65536</span> <span class="keyword">NEXT</span> <span class="number">1048576</span> <span class="keyword">MINEXTENTS</span> <span class="number">1</span> <span class="keyword">MAXEXTENTS</span> <span class="number">2147483645</span></span><br><span class="line">  <span class="keyword">PCTINCREASE</span> <span class="number">0</span> <span class="keyword">FREELISTS</span> <span class="number">1</span> <span class="keyword">FREELIST</span> <span class="keyword">GROUPS</span> <span class="number">1</span></span><br><span class="line">  <span class="keyword">BUFFER_POOL</span> <span class="keyword">DEFAULT</span> <span class="keyword">FLASH_CACHE</span> <span class="keyword">DEFAULT</span> CELL_FLASH_CACHE <span class="keyword">DEFAULT</span>)</span><br><span class="line">  <span class="keyword">TABLESPACE</span> <span class="string">"USERS"</span>  <span class="keyword">ENABLE</span>;</span><br><span class="line">  <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">"ZS"</span>.<span class="string">"EMPLOYEES"</span> <span class="keyword">ADD</span> <span class="keyword">UNIQUE</span> (<span class="string">"EMAIL"</span>)</span><br><span class="line">  <span class="keyword">USING</span> <span class="keyword">INDEX</span> PCTFREE <span class="number">10</span> <span class="keyword">INITRANS</span> <span class="number">2</span> <span class="keyword">MAXTRANS</span> <span class="number">255</span> <span class="keyword">COMPUTE</span> <span class="keyword">STATISTICS</span> </span><br><span class="line">  <span class="keyword">STORAGE</span>(<span class="keyword">INITIAL</span> <span class="number">65536</span> <span class="keyword">NEXT</span> <span class="number">1048576</span> <span class="keyword">MINEXTENTS</span> <span class="number">1</span> <span class="keyword">MAXEXTENTS</span> <span class="number">2147483645</span></span><br><span class="line">  <span class="keyword">PCTINCREASE</span> <span class="number">0</span> <span class="keyword">FREELISTS</span> <span class="number">1</span> <span class="keyword">FREELIST</span> <span class="keyword">GROUPS</span> <span class="number">1</span></span><br><span class="line">  <span class="keyword">BUFFER_POOL</span> <span class="keyword">DEFAULT</span> <span class="keyword">FLASH_CACHE</span> <span class="keyword">DEFAULT</span> CELL_FLASH_CACHE <span class="keyword">DEFAULT</span>)</span><br><span class="line">  <span class="keyword">TABLESPACE</span> <span class="string">"USERS"</span>  <span class="keyword">ENABLE</span>;</span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"><span class="comment">--  Constraints for Table DEPARTMENTS</span></span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">"ZS"</span>.<span class="string">"DEPARTMENTS"</span> <span class="keyword">MODIFY</span> (<span class="string">"DEPARTMENT_NAME"</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">ENABLE</span>);</span><br><span class="line">  <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">"ZS"</span>.<span class="string">"DEPARTMENTS"</span> <span class="keyword">ADD</span> PRIMARY <span class="keyword">KEY</span> (<span class="string">"DEPARTMENT_ID"</span>)</span><br><span class="line">  <span class="keyword">USING</span> <span class="keyword">INDEX</span> PCTFREE <span class="number">10</span> <span class="keyword">INITRANS</span> <span class="number">2</span> <span class="keyword">MAXTRANS</span> <span class="number">255</span> <span class="keyword">COMPUTE</span> <span class="keyword">STATISTICS</span> </span><br><span class="line">  <span class="keyword">STORAGE</span>(<span class="keyword">INITIAL</span> <span class="number">65536</span> <span class="keyword">NEXT</span> <span class="number">1048576</span> <span class="keyword">MINEXTENTS</span> <span class="number">1</span> <span class="keyword">MAXEXTENTS</span> <span class="number">2147483645</span></span><br><span class="line">  <span class="keyword">PCTINCREASE</span> <span class="number">0</span> <span class="keyword">FREELISTS</span> <span class="number">1</span> <span class="keyword">FREELIST</span> <span class="keyword">GROUPS</span> <span class="number">1</span></span><br><span class="line">  <span class="keyword">BUFFER_POOL</span> <span class="keyword">DEFAULT</span> <span class="keyword">FLASH_CACHE</span> <span class="keyword">DEFAULT</span> CELL_FLASH_CACHE <span class="keyword">DEFAULT</span>)</span><br><span class="line">  <span class="keyword">TABLESPACE</span> <span class="string">"USERS"</span>  <span class="keyword">ENABLE</span>;</span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"><span class="comment">--  Constraints for Table USERS</span></span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">"ZS"</span>.<span class="string">"USERS"</span> <span class="keyword">MODIFY</span> (<span class="string">"PASSWORD"</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">ENABLE</span>);</span><br><span class="line">  <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">"ZS"</span>.<span class="string">"USERS"</span> <span class="keyword">ADD</span> PRIMARY <span class="keyword">KEY</span> (<span class="string">"USER_ID"</span>)</span><br><span class="line">  <span class="keyword">USING</span> <span class="keyword">INDEX</span> PCTFREE <span class="number">10</span> <span class="keyword">INITRANS</span> <span class="number">2</span> <span class="keyword">MAXTRANS</span> <span class="number">255</span> <span class="keyword">COMPUTE</span> <span class="keyword">STATISTICS</span> </span><br><span class="line">  <span class="keyword">TABLESPACE</span> <span class="string">"USERS"</span>  <span class="keyword">ENABLE</span>;</span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"><span class="comment">--  Constraints for Table REGIONS</span></span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">"ZS"</span>.<span class="string">"REGIONS"</span> <span class="keyword">ADD</span> PRIMARY <span class="keyword">KEY</span> (<span class="string">"REGION_ID"</span>)</span><br><span class="line">  <span class="keyword">USING</span> <span class="keyword">INDEX</span> PCTFREE <span class="number">10</span> <span class="keyword">INITRANS</span> <span class="number">2</span> <span class="keyword">MAXTRANS</span> <span class="number">255</span> <span class="keyword">COMPUTE</span> <span class="keyword">STATISTICS</span> </span><br><span class="line">  <span class="keyword">STORAGE</span>(<span class="keyword">INITIAL</span> <span class="number">65536</span> <span class="keyword">NEXT</span> <span class="number">1048576</span> <span class="keyword">MINEXTENTS</span> <span class="number">1</span> <span class="keyword">MAXEXTENTS</span> <span class="number">2147483645</span></span><br><span class="line">  <span class="keyword">PCTINCREASE</span> <span class="number">0</span> <span class="keyword">FREELISTS</span> <span class="number">1</span> <span class="keyword">FREELIST</span> <span class="keyword">GROUPS</span> <span class="number">1</span></span><br><span class="line">  <span class="keyword">BUFFER_POOL</span> <span class="keyword">DEFAULT</span> <span class="keyword">FLASH_CACHE</span> <span class="keyword">DEFAULT</span> CELL_FLASH_CACHE <span class="keyword">DEFAULT</span>)</span><br><span class="line">  <span class="keyword">TABLESPACE</span> <span class="string">"USERS"</span>  <span class="keyword">ENABLE</span>;</span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"><span class="comment">--  Constraints for Table JOBS</span></span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">"ZS"</span>.<span class="string">"JOBS"</span> <span class="keyword">MODIFY</span> (<span class="string">"JOB_TITLE"</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">ENABLE</span>);</span><br><span class="line">  <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">"ZS"</span>.<span class="string">"JOBS"</span> <span class="keyword">ADD</span> PRIMARY <span class="keyword">KEY</span> (<span class="string">"JOB_ID"</span>)</span><br><span class="line">  <span class="keyword">USING</span> <span class="keyword">INDEX</span> PCTFREE <span class="number">10</span> <span class="keyword">INITRANS</span> <span class="number">2</span> <span class="keyword">MAXTRANS</span> <span class="number">255</span> <span class="keyword">COMPUTE</span> <span class="keyword">STATISTICS</span> </span><br><span class="line">  <span class="keyword">STORAGE</span>(<span class="keyword">INITIAL</span> <span class="number">65536</span> <span class="keyword">NEXT</span> <span class="number">1048576</span> <span class="keyword">MINEXTENTS</span> <span class="number">1</span> <span class="keyword">MAXEXTENTS</span> <span class="number">2147483645</span></span><br><span class="line">  <span class="keyword">PCTINCREASE</span> <span class="number">0</span> <span class="keyword">FREELISTS</span> <span class="number">1</span> <span class="keyword">FREELIST</span> <span class="keyword">GROUPS</span> <span class="number">1</span></span><br><span class="line">  <span class="keyword">BUFFER_POOL</span> <span class="keyword">DEFAULT</span> <span class="keyword">FLASH_CACHE</span> <span class="keyword">DEFAULT</span> CELL_FLASH_CACHE <span class="keyword">DEFAULT</span>)</span><br><span class="line">  <span class="keyword">TABLESPACE</span> <span class="string">"USERS"</span>  <span class="keyword">ENABLE</span>;</span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"><span class="comment">--  Ref Constraints for Table COUNTRIES</span></span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">"ZS"</span>.<span class="string">"COUNTRIES"</span> <span class="keyword">ADD</span> <span class="keyword">FOREIGN</span> <span class="keyword">KEY</span> (<span class="string">"REGION_ID"</span>)</span><br><span class="line">  <span class="keyword">REFERENCES</span> <span class="string">"ZS"</span>.<span class="string">"REGIONS"</span> (<span class="string">"REGION_ID"</span>) <span class="keyword">ENABLE</span>;</span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"><span class="comment">--  Ref Constraints for Table DEPARTMENTS</span></span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">"ZS"</span>.<span class="string">"DEPARTMENTS"</span> <span class="keyword">ADD</span> <span class="keyword">FOREIGN</span> <span class="keyword">KEY</span> (<span class="string">"LOCATION_ID"</span>)</span><br><span class="line">  <span class="keyword">REFERENCES</span> <span class="string">"ZS"</span>.<span class="string">"LOCATIONS"</span> (<span class="string">"LOCATION_ID"</span>) <span class="keyword">ENABLE</span>;</span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"><span class="comment">--  Ref Constraints for Table EMPLOYEES</span></span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">"ZS"</span>.<span class="string">"EMPLOYEES"</span> <span class="keyword">ADD</span> <span class="keyword">FOREIGN</span> <span class="keyword">KEY</span> (<span class="string">"JOB_ID"</span>)</span><br><span class="line">  <span class="keyword">REFERENCES</span> <span class="string">"ZS"</span>.<span class="string">"JOBS"</span> (<span class="string">"JOB_ID"</span>) <span class="keyword">ENABLE</span>;</span><br><span class="line">  <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">"ZS"</span>.<span class="string">"EMPLOYEES"</span> <span class="keyword">ADD</span> <span class="keyword">FOREIGN</span> <span class="keyword">KEY</span> (<span class="string">"DEPARTMENT_ID"</span>)</span><br><span class="line">  <span class="keyword">REFERENCES</span> <span class="string">"ZS"</span>.<span class="string">"DEPARTMENTS"</span> (<span class="string">"DEPARTMENT_ID"</span>) <span class="keyword">ENABLE</span>;</span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"><span class="comment">--  Ref Constraints for Table JOB_HISTORY</span></span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">"ZS"</span>.<span class="string">"JOB_HISTORY"</span> <span class="keyword">ADD</span> <span class="keyword">FOREIGN</span> <span class="keyword">KEY</span> (<span class="string">"EMPLOYEE_ID"</span>)</span><br><span class="line">  <span class="keyword">REFERENCES</span> <span class="string">"ZS"</span>.<span class="string">"EMPLOYEES"</span> (<span class="string">"EMPLOYEE_ID"</span>) <span class="keyword">ENABLE</span>;</span><br><span class="line">  <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">"ZS"</span>.<span class="string">"JOB_HISTORY"</span> <span class="keyword">ADD</span> <span class="keyword">FOREIGN</span> <span class="keyword">KEY</span> (<span class="string">"JOB_ID"</span>)</span><br><span class="line">  <span class="keyword">REFERENCES</span> <span class="string">"ZS"</span>.<span class="string">"JOBS"</span> (<span class="string">"JOB_ID"</span>) <span class="keyword">ENABLE</span>;</span><br><span class="line">  <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">"ZS"</span>.<span class="string">"JOB_HISTORY"</span> <span class="keyword">ADD</span> <span class="keyword">FOREIGN</span> <span class="keyword">KEY</span> (<span class="string">"DEPARTMENT_ID"</span>)</span><br><span class="line">  <span class="keyword">REFERENCES</span> <span class="string">"ZS"</span>.<span class="string">"DEPARTMENTS"</span> (<span class="string">"DEPARTMENT_ID"</span>) <span class="keyword">ENABLE</span>;</span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"><span class="comment">--  Ref Constraints for Table LOCATIONS</span></span><br><span class="line"><span class="comment">--------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">"ZS"</span>.<span class="string">"LOCATIONS"</span> <span class="keyword">ADD</span> <span class="keyword">FOREIGN</span> <span class="keyword">KEY</span> (<span class="string">"COUNTRY_ID"</span>)</span><br><span class="line">  <span class="keyword">REFERENCES</span> <span class="string">"ZS"</span>.<span class="string">"COUNTRIES"</span> (<span class="string">"COUNTRY_ID"</span>) <span class="keyword">ENABLE</span>;</span><br></pre></td></tr></table></figure><h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><ul><li>第7章</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建表dept_salary_stat</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> dept_salary_stat</span><br><span class="line">  (</span><br><span class="line">    department_id <span class="built_in">NUMBER</span>(<span class="number">20</span>) PRIMARY <span class="keyword">KEY</span>,</span><br><span class="line">    max_salaey    <span class="built_in">NUMBER</span>(<span class="number">20</span>),</span><br><span class="line">    min_salary    <span class="built_in">NUMBER</span>(<span class="number">20</span>)</span><br><span class="line">  );</span><br><span class="line"><span class="comment">-- 统计各个部门的部门号、部门最高工资和部门最低工资， 并将统计结果写入表dept_salary_stat</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> dept_salary_stat</span><br><span class="line"><span class="keyword">SELECT</span> department_id,</span><br><span class="line">  <span class="keyword">MAX</span>(salary),</span><br><span class="line">  <span class="keyword">MIN</span>(salary)</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id;</span><br><span class="line"><span class="comment">-- 向employees表中插入一个员工信息，员工号位2019，员工姓名为wood，email为wood@neusoft.edu.cn</span></span><br><span class="line"><span class="comment">-- 其他信息与员工号位149的员工信息相同</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> employees</span><br><span class="line"><span class="keyword">SELECT</span> <span class="number">2019</span>,</span><br><span class="line">  first_name,</span><br><span class="line">  <span class="string">'wood'</span>,</span><br><span class="line">  <span class="string">'wood@neusoft.edu.cn'</span>,</span><br><span class="line">  phone_number,</span><br><span class="line">  hire_date,</span><br><span class="line">  job_id,</span><br><span class="line">  salary,</span><br><span class="line">  commission_pct,</span><br><span class="line">  manager_id,</span><br><span class="line">  department_id</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> employee_id=<span class="number">149</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 假设有两个表emp_sal和emp_mgr， 其定义分别为</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> emp_sal</span><br><span class="line"><span class="keyword">as</span> </span><br><span class="line"><span class="keyword">select</span> employee_id, hire_date, salary <span class="keyword">from</span> employees <span class="keyword">where</span> <span class="number">1</span>=<span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> emp_mgr </span><br><span class="line"><span class="keyword">as</span> </span><br><span class="line"><span class="keyword">select</span> employee_id, manager_id, salary <span class="keyword">from</span> employees <span class="keyword">where</span> <span class="number">1</span>=<span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 利用无条件表插入，查询employees表中工资高于8000元的员工信息并分别插入emp_sal和emp_mgr</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">all</span></span><br><span class="line"><span class="keyword">into</span> emp_sal <span class="keyword">values</span>(employee_id, hire_date, salary)</span><br><span class="line"><span class="keyword">into</span> emp_mgr <span class="keyword">values</span>(employee_id, manager_id, salary)</span><br><span class="line"><span class="keyword">select</span> employee_id, hire_date, manager_id, salary <span class="keyword">from</span> employees </span><br><span class="line"><span class="keyword">where</span> salary&gt;<span class="number">8000</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 将employees表中的员工信息按不同部门号分别复制到emp10，emp20，emp30和emp_other表中</span></span><br><span class="line"><span class="comment">-- 建表</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> emp_10 <span class="keyword">as</span> <span class="keyword">select</span> * <span class="keyword">from</span> employees <span class="keyword">where</span> <span class="number">1</span>=<span class="number">2</span>;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> emp_20 <span class="keyword">as</span> <span class="keyword">select</span> * <span class="keyword">from</span> employees <span class="keyword">where</span> <span class="number">1</span>=<span class="number">2</span>;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> emp_30 <span class="keyword">as</span> <span class="keyword">select</span> * <span class="keyword">from</span> employees <span class="keyword">where</span> <span class="number">1</span>=<span class="number">2</span>;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> emp_other <span class="keyword">as</span> <span class="keyword">select</span> * <span class="keyword">from</span> employees <span class="keyword">where</span> <span class="number">1</span>=<span class="number">2</span>;</span><br><span class="line"><span class="comment">-- 插入</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">first</span></span><br><span class="line"><span class="keyword">when</span> department_id=<span class="number">10</span> <span class="keyword">then</span> <span class="keyword">into</span> emp_10</span><br><span class="line"><span class="keyword">when</span> department_id=<span class="number">20</span> <span class="keyword">then</span> <span class="keyword">into</span> emp_20</span><br><span class="line"><span class="keyword">when</span> department_id=<span class="number">30</span> <span class="keyword">then</span> <span class="keyword">into</span> emp_30</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">into</span> emp_other</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> employees;</span><br><span class="line"><span class="comment">-- 查询</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp_10;</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp_20;</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp_30;</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp_other;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 将50号部门的员工工资设置为30号部门的平均工资加300元</span></span><br><span class="line"><span class="keyword">update</span> employees <span class="keyword">set</span> salary=<span class="number">300</span>+(<span class="keyword">select</span> <span class="keyword">avg</span>(salary) <span class="keyword">from</span> employees </span><br><span class="line"><span class="keyword">where</span> department_id=<span class="number">30</span>) <span class="keyword">where</span> department_id=<span class="number">50</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 现有表source_emp和target_emp，表中数据如下。利用source_emp表中的数据更新target表中的数据</span></span><br><span class="line"><span class="comment">-- 对target_emp表中存在的员工信息进行更新，对不存在的员工进行信息插入</span></span><br><span class="line"><span class="comment">--建表</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> source_emp(</span><br><span class="line">employee_id <span class="built_in">number</span>(<span class="number">20</span>),</span><br><span class="line">last_name varchar2(<span class="number">20</span>),</span><br><span class="line">department_id <span class="built_in">number</span>(<span class="number">20</span>)</span><br><span class="line">);</span><br><span class="line"><span class="comment">-- 插入数据</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> source_emp <span class="keyword">values</span>(<span class="number">100</span>, <span class="string">'john'</span>, <span class="number">10</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> source_emp <span class="keyword">values</span>(<span class="number">110</span>, <span class="string">'smith'</span>, <span class="number">20</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> source_emp <span class="keyword">values</span>(<span class="number">120</span>, <span class="string">'tom'</span>, <span class="number">30</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 建表</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> target_emp(</span><br><span class="line">employee_id <span class="built_in">number</span>(<span class="number">20</span>),</span><br><span class="line">last_name varchar2(<span class="number">20</span>),</span><br><span class="line">department_id <span class="built_in">number</span>(<span class="number">20</span>)</span><br><span class="line">);</span><br><span class="line"><span class="comment">-- 插入数据</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> source_emp <span class="keyword">values</span>(<span class="number">100</span>, <span class="string">'marry'</span>, <span class="number">20</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> source_emp <span class="keyword">values</span>(<span class="number">20</span>, <span class="string">'jack'</span>, <span class="number">40</span>);</span><br><span class="line"><span class="comment">-- merge语句执行更新操作还是插入操作</span></span><br><span class="line"><span class="keyword">merge</span> <span class="keyword">into</span> target_emp t <span class="keyword">using</span> source_emp s</span><br><span class="line"><span class="keyword">on</span> (t.employee_id=s.employee_id)</span><br><span class="line"><span class="keyword">when</span> <span class="keyword">matched</span> <span class="keyword">then</span> <span class="keyword">update</span> <span class="keyword">set</span></span><br><span class="line">t.last_name=s.last_name, t.department_id=s.department_id</span><br><span class="line"><span class="keyword">when</span> <span class="keyword">not</span> <span class="keyword">matched</span> <span class="keyword">then</span> <span class="keyword">insert</span> </span><br><span class="line"><span class="keyword">values</span>(s.employee_id, s.last_name, s.department_id);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询验证</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> target_emp;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 事务回滚</span></span><br><span class="line">  <span class="comment">-- 部分回滚事务</span></span><br><span class="line">  <span class="comment">-- 全部回滚事务</span></span><br><span class="line"><span class="comment">-- 如果只想取消事务中的部分操作，而不是取消全部操作，则可以在事务内部设置保存点</span></span><br><span class="line"><span class="comment">-- 将一个大的事务划分为若干个组成部分，这样就可以将事务回滚到指定的保存点</span></span><br><span class="line"><span class="comment">-- 可以使用savepoint语句设置保存点</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> departments <span class="keyword">values</span>(<span class="number">400</span>, <span class="string">'accounting'</span>, <span class="number">100</span>, <span class="number">1400</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> departments <span class="keyword">values</span>(<span class="number">410</span>, <span class="string">'accounting'</span>, <span class="number">120</span>, <span class="number">1500</span>);</span><br><span class="line"><span class="keyword">savepoint</span> a;</span><br><span class="line"><span class="keyword">update</span> departments <span class="keyword">set</span> location_id=<span class="number">1500</span> <span class="keyword">where</span> department_id=<span class="number">400</span>;</span><br><span class="line"><span class="keyword">savepoint</span> b;</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> departments <span class="keyword">values</span>(<span class="number">420</span>, <span class="string">'research'</span>, <span class="number">130</span>, <span class="number">1700</span>);</span><br><span class="line"><span class="comment">-- 在该事务提交之前，可以执行rollback命令全部或部分回滚事务中的操作。</span></span><br><span class="line"><span class="keyword">rollback</span> <span class="keyword">to</span> b; <span class="comment">-- 回滚最后一个insert操作</span></span><br><span class="line"><span class="keyword">rollback</span> <span class="keyword">to</span> a; <span class="comment">-- 回滚后面的insert操作和update操作</span></span><br><span class="line"><span class="keyword">rollback</span>; <span class="comment">-- 回滚全部操作</span></span><br></pre></td></tr></table></figure><ul><li>第9章</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 首先执行下面指令，输出语句正常使用</span></span><br><span class="line"><span class="keyword">set</span> serveroutput <span class="keyword">on</span>;</span><br><span class="line"><span class="comment">-- 例题9-4 查询109号员工的工资以及140号员工名与工资， 并输出</span></span><br><span class="line"><span class="keyword">declare</span></span><br><span class="line">  v_sal employees.salary%<span class="keyword">type</span>; </span><br><span class="line">  <span class="comment">-- 如果要定义一个类型与某个变量的数据类型或数据库中某个列</span></span><br><span class="line">  <span class="comment">-- 的数据类型一致（不知道该变量或列的数据类型）的变量可以用%type实现</span></span><br><span class="line">  v_emp employees%rowtype;</span><br><span class="line">  <span class="comment">--如果要定义一个与数据库中某个表结构一致的记录类型的变量可以使用%rowtype实现</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="keyword">select</span> salary <span class="keyword">into</span> v_sal <span class="keyword">from</span> employees <span class="keyword">where</span> employee_id=<span class="number">109</span>;</span><br><span class="line">  <span class="keyword">select</span> * <span class="keyword">into</span> v_emp <span class="keyword">from</span> employees <span class="keyword">where</span> employee_id=<span class="number">140</span>;</span><br><span class="line">  dbms_output.put_line(v_sal);</span><br><span class="line">  dbms_output.put_line(v_emp.first_name||v_emp.salary);</span><br><span class="line">  <span class="comment">-- || 这个符号  是字符串连接符</span></span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"><span class="comment">-- 分号;一定不能少</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 例题9-7 根据员工名或员工号查询员工信息</span></span><br><span class="line"><span class="keyword">declare</span> </span><br><span class="line">  v_emp employees%rowtype;</span><br><span class="line">  v_lname employees.last_name%type;</span><br><span class="line">  v_sal employees.salary%type;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="keyword">select</span> * <span class="keyword">into</span> v_emp <span class="keyword">from</span> employees <span class="keyword">where</span> last_name=<span class="string">'Bell'</span>;</span><br><span class="line">  dbms_output.put_line(v_emp.employee_id||' '||v_emp.salary);</span><br><span class="line">  <span class="keyword">select</span> last_name, salary <span class="keyword">into</span> v_lname, v_sal <span class="keyword">from</span> employees</span><br><span class="line">  <span class="keyword">where</span> employee_id=<span class="number">109</span>;</span><br><span class="line">  dbms_output.put_line(v_lname||' '||v_sal);</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 例题9-9 输入一个员工号， 修改该员工的工资。如果该员工位10号部门，则工资增加100元，</span></span><br><span class="line"><span class="comment">-- 若为20号部门，则工资增加140元，若为30号部门，则工资增加200元，否则增加300元</span></span><br><span class="line"><span class="keyword">declare</span></span><br><span class="line">  v_deptno employees.department_id%<span class="keyword">type</span>;</span><br><span class="line">  v_increment number(4);</span><br><span class="line">  v_empno employees.employee_id%type;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  v_empno:=&amp;x;  <span class="comment">-- := 是赋值， &amp;x弹出一个可以输入的对话框</span></span><br><span class="line">  <span class="keyword">select</span> department_id <span class="keyword">into</span> v_deptno <span class="keyword">from</span> employees <span class="keyword">where</span></span><br><span class="line">  employee_id=v_empno;</span><br><span class="line">  if v_deptno=10 then v_increment:=100;</span><br><span class="line">  elsif v_deptno=20 then v_increment:=140;</span><br><span class="line">  elsif v_deptno=30 then v_increment:=200;</span><br><span class="line">  else v_increment:=300;</span><br><span class="line">  <span class="keyword">end</span> <span class="keyword">if</span>;</span><br><span class="line">  <span class="keyword">update</span> employees <span class="keyword">set</span> salary=salary+v_increment</span><br><span class="line">  <span class="keyword">where</span> employee_id=v_empno;</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 例题9-12 利用where循环求1-100之间的偶数的和</span></span><br><span class="line"><span class="keyword">declare</span></span><br><span class="line">  v_counter binary_integer :=<span class="number">1</span>;</span><br><span class="line">  v_sum number :=0;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="keyword">while</span> v_counter&lt;=<span class="number">100</span> <span class="keyword">loop</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">mod</span>(v_counter,<span class="number">2</span>)=<span class="number">0</span> <span class="keyword">then</span></span><br><span class="line">      v_sum:=v_sum+v_counter;</span><br><span class="line">    <span class="keyword">end</span> <span class="keyword">if</span>;</span><br><span class="line">    v_counter:=v_counter+1;</span><br><span class="line">  <span class="keyword">end</span> <span class="keyword">loop</span>;</span><br><span class="line">  dbms_output.put_line(v_sum);</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 例题9-13 利用for循环求出1-100之间偶数的和</span></span><br><span class="line"><span class="keyword">declare</span></span><br><span class="line">  v_sum <span class="built_in">number</span> :=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="keyword">for</span> v_counter <span class="keyword">in</span> <span class="number">1.</span><span class="number">.100</span> <span class="keyword">loop</span> <span class="comment">-- 1..100代表 1 - 100的范围 包括1和100</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">mod</span>(v_counter, <span class="number">2</span>)=<span class="number">0</span> <span class="keyword">then</span></span><br><span class="line">      v_sum:=v_sum+v_counter;</span><br><span class="line">    <span class="keyword">end</span> <span class="keyword">if</span>;</span><br><span class="line">  <span class="keyword">end</span> <span class="keyword">loop</span>;</span><br><span class="line">  dbms_output.put_line(v_sum);</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- .. 范围 例子测试</span></span><br><span class="line"><span class="keyword">declare</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">1.</span><span class="number">.100</span> <span class="keyword">loop</span></span><br><span class="line">    dbms_output.put_line(i);</span><br><span class="line">  <span class="keyword">end</span> <span class="keyword">loop</span>;</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 编写一个PL/SQL语句块，输出所有比本部门平均工资高的员工信息</span></span><br><span class="line"><span class="comment">-- 下面的例子是错误的，未更改</span></span><br><span class="line"><span class="keyword">declare</span></span><br><span class="line">  v_emp employees%rowtype;</span><br><span class="line">  v_avg employees.salary%type;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="keyword">select</span> <span class="keyword">avg</span>(salary) <span class="keyword">into</span> v_avg <span class="keyword">from</span> employees <span class="keyword">where</span></span><br><span class="line">  department_id=<span class="number">20</span>;</span><br><span class="line">  <span class="keyword">select</span> * <span class="keyword">into</span> v_emp <span class="keyword">from</span> employees <span class="keyword">where</span></span><br><span class="line">  salary &gt; v_avg;</span><br><span class="line">  for i in 1..v_emp.count loop</span><br><span class="line">    dbms_output.put_line(v_emp(i).first_name);</span><br><span class="line">  <span class="keyword">end</span> <span class="keyword">loop</span>;</span><br><span class="line">  dbms_output.put_line(v_avg);</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure><!-- rebuild by neat -->]]></content>
      
      
      <categories>
          
          <category> oracle </category>
          
      </categories>
      
      
        <tags>
            
            <tag> oracle </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Docker学习之二</title>
      <link href="/2019/10/26/Docker%E5%AD%A6%E4%B9%A0%E4%B9%8B%E4%BA%8C/"/>
      <url>/2019/10/26/Docker%E5%AD%A6%E4%B9%A0%E4%B9%8B%E4%BA%8C/</url>
      
        <content type="html"><![CDATA[<!-- build time:Tue Dec 31 2019 09:54:11 GMT+0800 (CST) --><h1 id="Docker学习之二"><a href="#Docker学习之二" class="headerlink" title="Docker学习之二"></a>Docker学习之二</h1><h2 id="搭建本地私有仓库"><a href="#搭建本地私有仓库" class="headerlink" title="搭建本地私有仓库"></a>搭建本地私有仓库</h2><ol><li><p>使用registry镜像创建私有仓库</p><p>​ 默认情况下,仓库会被创建在容器的/var/lib/registry目录下. 可以通过-v参数将镜像文件存放在本地的指定路径. 例如下面的例子将上传的镜像放到/opt/data/registry目录:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 5000:5000 -v /opt/data/registry:/var/lib/registry registry:2</span><br></pre></td></tr></table></figure></li></ol><a id="more"></a><p>此时, 在本地将启动一个私有仓库服务, 监听端口为5000.</p><ol start="2"><li><p>管理私有仓库</p><p>在虚拟机上, 就查看虚拟机的ip地址, 为172.16.166.130:5000</p><ul><li><p>首先使用tag命令将镜像标记为172.16.166.130:5000/test(:TAG)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dokcer tag ubuntu:18.04 172.16.166.130:5000/<span class="built_in">test</span></span><br></pre></td></tr></table></figure></li><li><p>使用docker push 上传标记镜像</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker push 172.16.166.130:5000/<span class="built_in">test</span></span><br></pre></td></tr></table></figure></li><li><p>出现下面情况</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># docker push 172.16.166.130:5000/test</span></span><br><span class="line">The push refers to repository [172.16.166.130:5000/<span class="built_in">test</span>]</span><br><span class="line">Get https://172.16.166.130:5000/v2/: http: server gave HTTP response to HTTPS client</span><br></pre></td></tr></table></figure><p><code>修改daemon.json文件, 如下所示</code></p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">        <span class="attr">"registry-mirrors"</span>: [</span><br><span class="line">                <span class="string">"https://bji0ynbx.mirror.aliyuncs.com"</span>,</span><br><span class="line">                <span class="string">"https://registry.docker-cn.com"</span>,</span><br><span class="line">                <span class="string">"https://docker.mirrors.ustc.edu.cn"</span>,</span><br><span class="line">                <span class="string">"http://hub-mirror.c.163.com"</span></span><br><span class="line">                ],</span><br><span class="line">        "insecure-registries": ["172.16.166.130:5000"], //添加这里</span><br><span class="line">        "dns": ["8.8.8.8","8.8.4.4"]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>重新加载文件, 并重启docker</p><p><code>systemctl daemon-reload</code></p><p><code>systemctl restart docker</code></p><p>再次执行push命令</p><p><img src="https://s2.ax1x.com/2019/10/25/Kw1d8U.png" alt="Kw1d8U.png"></p></li></ul></li><li><p>下载已经上传的镜像</p><p>当我们使用另一台计算机pull镜像的时候也需要修改/etc/docker/daemon.json文件</p><p><code>&quot;insecure-registries&quot;: [&quot;172.16.166.130:5000]&quot;</code></p><ul><li><p>修改Docker daemon的启动参数, 添加如下参数, 表示信任这个私有仓库, 不进行安全证书检查:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DOCKER_OPTS=<span class="string">"--insecure-registry 172.16.166.130:5000"</span></span><br></pre></td></tr></table></figure><p><code>之后重启docker服务, 并从私有仓库中下载镜像到本地</code>:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull 172.16.166.130:5000/<span class="built_in">test</span></span><br></pre></td></tr></table></figure><p><img src="https://s2.ax1x.com/2019/10/25/Kw3YsH.png" alt></p></li></ul></li></ol><h2 id="docker安装lamp"><a href="#docker安装lamp" class="headerlink" title="docker安装lamp"></a>docker安装lamp</h2><p><strong>linux + apache2 + mysql + php</strong></p><h3 id="转载自-https-blog-csdn-net-a33130317-article-details-81304048"><a href="#转载自-https-blog-csdn-net-a33130317-article-details-81304048" class="headerlink" title="转载自:https://blog.csdn.net/a33130317/article/details/81304048"></a>转载自:<a href="https://blog.csdn.net/a33130317/article/details/81304048" target="_blank" rel="noopener"><a href="https://blog.csdn.net/a33130317/article/details/81304048" target="_blank" rel="noopener">https://blog.csdn.net/a33130317/article/details/81304048</a></a></h3><p>​ 当我们下载镜像的时候, 一定要到<a href="https://hub.docker.com/" target="_blank" rel="noopener">官网</a>查看一下详细信息, 例如当前我们下载的镜像, <code>mysql的默认root密码是Admin2015</code>, php版本是5.6,</p><p><img src="https://s2.ax1x.com/2019/10/25/Kw84HA.png" alt="Kw84HA.png"></p><ul><li><p>下载镜像</p><p><code>docker pull linode/lamp</code></p></li><li><p>建立docker卷</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker volume create lamp_www           <span class="comment"># apache的web根目录</span></span><br><span class="line">docker volume create lamp_apache_conf   <span class="comment"># apache的配置目录</span></span><br><span class="line">docker volume create lamp_mysql_conf    <span class="comment"># MySQL的配置目录</span></span><br><span class="line">docker volume create lamp_mysql_data    <span class="comment"># MySQL的数据目录</span></span><br></pre></td></tr></table></figure><blockquote><p>已经建立好的docker卷,在宿主机的目录为:</p><p>/var/lib/docker/volumes/</p></blockquote></li><li><p>启动镜像</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -it -p 80:80 -p 3306:3306 -v lamp_www:/var/www -v lamp_apache_conf:/etc/apache2 -v lamp_mysql_conf:/etc/mysql -v lamp_mysql_data:/var/lib/mysql --name lamp linode/lamp /bin/bash</span><br></pre></td></tr></table></figure><blockquote><p>按照官方镜像的说明,我们使用了-i和-t两个参数,直接进入到了容器内.</p><p>如果想退出容器,请不要使用exit或ctrl+d.这样会将容器直接关闭.</p><p>退出请使用ctrl + p , ctrl + q</p></blockquote></li><li><p>进入终端</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> -it lamp bash</span><br></pre></td></tr></table></figure></li><li><p>启动apache2和mysql</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">service apache2 start</span><br><span class="line">service mysql start</span><br><span class="line"># 可以通过netstat -pant 命令查看80和3306端口有没有开启成功</span><br></pre></td></tr></table></figure></li><li><p>设置mysql允许root远程登录,及设置root的密码</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root -p</span><br><span class="line"></span><br><span class="line"><span class="comment">#密码：Admin2015</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#修改root可远程登录：</span></span><br><span class="line"></span><br><span class="line">mysql&gt;use mysql;</span><br><span class="line"></span><br><span class="line">mysql&gt;update user <span class="built_in">set</span> host = <span class="string">'%'</span> <span class="built_in">where</span> user = <span class="string">'root'</span> and host=<span class="string">'127.0.0.1'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">#修改密码：</span></span><br><span class="line"></span><br><span class="line">mysql&gt;update user <span class="built_in">set</span> password=password(<span class="string">"your_password"</span>) <span class="built_in">where</span> user=<span class="string">'root'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">#刷新权限</span></span><br><span class="line"></span><br><span class="line">FLUSH PRIVILEGES;</span><br></pre></td></tr></table></figure></li><li><p>安装php扩展</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">apt-get update</span><br><span class="line"></span><br><span class="line">apt-get install -y php5-mysql</span><br><span class="line"></span><br><span class="line">apt-get install -y php5-gd</span><br><span class="line"></span><br><span class="line">...</span><br></pre></td></tr></table></figure></li><li><p>然后重启apache2:</p></li></ul><p><code>service apache2 restart</code></p><ul><li>再次确认mysql和apache2有没有安装成功：</li></ul><p><code>netstat -pant</code></p><ul><li>可以通过下面的命令查看服务器上有哪些php的扩展:</li></ul><p><code>apt-cache search php5-*</code></p><p><code>最后测试是否可用</code></p><h2 id="docker安装tutum-lamp镜像"><a href="#docker安装tutum-lamp镜像" class="headerlink" title="docker安装tutum/lamp镜像"></a>docker安装tutum/lamp镜像</h2><ol><li><p>运行镜像(会自动下载)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 80:80 -p 3306:3306</span><br></pre></td></tr></table></figure><p><code>容器启动之后, 打开浏览器, 访问demo页面.</code></p></li><li><p>部署自定义PHP应用</p><p>默认的应用启动了一个helloWorld应用</p><p>…</p></li></ol><!-- rebuild by neat -->]]></content>
      
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>模拟电梯系统（java）</title>
      <link href="/2019/10/25/%E6%A8%A1%E6%8B%9F%E7%94%B5%E6%A2%AF%E7%B3%BB%E7%BB%9F%EF%BC%88java%EF%BC%89/"/>
      <url>/2019/10/25/%E6%A8%A1%E6%8B%9F%E7%94%B5%E6%A2%AF%E7%B3%BB%E7%BB%9F%EF%BC%88java%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<!-- build time:Tue Dec 31 2019 09:54:11 GMT+0800 (CST) --><h2 id="一、项目介绍（四号宋体加粗）"><a href="#一、项目介绍（四号宋体加粗）" class="headerlink" title="一、项目介绍（四号宋体加粗）"></a><strong>一、项目介绍（四号宋体加粗）</strong></h2><p>​ 这个项目是模拟电梯运行的系统，一共12层，用户可以在每一层点击楼层，使电梯到达该楼层，并开门。电梯运行前会检查体重是否超重，如果超重，会提示。如果用户处于中间楼层，如果有向上的楼层和向下的楼层，系统会先判断第一个按的楼层与当前楼层相比较，如果大于当前楼层就先上后下，否则先下后上。</p><p><img src="https://s2.ax1x.com/2019/10/25/Ka2Lo6.png" alt="Ka2Lo6.png"></p><a id="more"></a><h2 id="二、项目需求分析（四号宋体加粗）"><a href="#二、项目需求分析（四号宋体加粗）" class="headerlink" title="二、项目需求分析（四号宋体加粗）"></a><strong>二、项目需求分析（四号宋体加粗）</strong></h2><ol><li><p>创建存储需要到达楼层输入集合ArrayList</p></li><li><p>获取集合中的最小值（min）和最大值（max）</p></li><li><p>向上走的函数 <strong>public</strong> <strong>void</strong> goTop(Integer layer)</p></li><li><p>向下走的函数 <strong>public void goDown(Integer layer)</strong></p></li><li><p>如果电梯向上走，传给向上的函数 max值</p></li><li><p>如果电梯向下走，传给向下的函数 min值</p></li><li><p>每次到达指定的楼层集合元素去除一个</p></li><li><p>当电梯向上或者向下完成之后，判断当前集合是否为空，如果为空结束，不为空，反方向运行电梯。</p></li></ol><h2 id="三、项目规划和设计实施（四号宋体加粗）"><a href="#三、项目规划和设计实施（四号宋体加粗）" class="headerlink" title="三、项目规划和设计实施（四号宋体加粗）"></a><strong>三、项目规划和设计实施（四号宋体加粗）</strong></h2><p><strong>3.1**</strong>项目设计规划（小四号宋体加粗）**</p><ol><li><p>public boolean isDigit(String str) 创建输入验证函数，保证输入的字符都是数字类型和指定范围的数字。</p></li><li><p>public void OverWeight()判断当前体重是否超重</p></li><li><p>向上走的函数 public void goTop(Integer layer)</p></li><li><p>向下走的函数 public void goDown(Integer layer)</p></li></ol><p>5.集合的去重</p><p><strong>3.2**</strong>实施方案**</p><p>​</p><ol><li><p>首先运行项目（运行main方法）</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> **<span class="keyword">throws</span>** Exception </span>&#123;</span><br><span class="line">   </span><br><span class="line">    <span class="keyword">new</span> Elevator().start();</span><br><span class="line">    </span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure></li></ol><p><img src="https://s2.ax1x.com/2019/10/25/Ka2vWD.png" alt="Ka2vWD.png"></p><p>​</p><ol start="2"><li>输入的验证（使用正则表达式对输入的字符进行验证）</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 正则表达式判断输入是否为数字</span></span><br><span class="line"><span class="comment">// @Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isDigit</span><span class="params">(String str)</span> </span>&#123;</span><br><span class="line">String regex = <span class="string">"^[0-9][0-2]?"</span>;</span><br><span class="line">Pattern p = Pattern.compile(regex);</span><br><span class="line"><span class="comment">// 获取matcher 对象</span></span><br><span class="line">Matcher matcher = p.matcher(str);</span><br><span class="line"><span class="keyword">return</span> matcher.matches();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://s2.ax1x.com/2019/10/25/KaRVfS.png" alt="KaRVfS.png"></p><p><img src="https://s2.ax1x.com/2019/10/25/KaReSg.png" alt="KaReSg.png"></p><ol start="3"><li>向上运行和向下运行</li></ol><p><img src="https://s2.ax1x.com/2019/10/25/KaRtl4.png" alt="KaRtl4.png"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">输入：</span><br><span class="line">2 4 11 12</span><br><span class="line">0</span><br><span class="line">---当前楼层: 9---</span><br><span class="line">---当前楼层: 8---</span><br><span class="line">---当前楼层: 7---</span><br><span class="line">---当前楼层: 6---</span><br><span class="line">---当前楼层: 5---</span><br><span class="line">---当前楼层: 4---</span><br><span class="line">---到达4楼, 开门!</span><br><span class="line">当前体重超重,无法关门</span><br><span class="line">---当前楼层: 3---</span><br><span class="line">---当前楼层: 2---</span><br><span class="line">---到达2楼, 开门!</span><br><span class="line">当前体重为: 628公斤</span><br><span class="line">---当前楼层: 2---</span><br><span class="line">---当前楼层: 3---</span><br><span class="line">---当前楼层: 4---</span><br><span class="line">---当前楼层: 5---</span><br><span class="line">---当前楼层: 6---</span><br><span class="line">---当前楼层: 7---</span><br><span class="line">---当前楼层: 8---</span><br><span class="line">---当前楼层: 9---</span><br><span class="line">---当前楼层: 10---</span><br><span class="line">---当前楼层: 11---</span><br><span class="line">---到达11楼, 开门!</span><br><span class="line">当前体重超重,无法关门</span><br><span class="line">---当前楼层: 12---</span><br><span class="line">---到达12楼, 开门!</span><br><span class="line">当前体重为: 152公斤</span><br></pre></td></tr></table></figure><h2 id="四、项目总结（四号宋体加粗）"><a href="#四、项目总结（四号宋体加粗）" class="headerlink" title="四、项目总结（四号宋体加粗）"></a><strong>四、项目总结（四号宋体加粗）</strong></h2><p>本次项目课程让我对集合的使用和正则表达式更加熟悉。集合工具类Collections，</p><p>// 集合去重</p><p><code>ArrayList layers = layers.stream().distinct().collect(Collectors.*toList*());</code></p><p>这个方法是我之前从未接触过的集合去重，虽然集合去重的方法有很多。对于正则表达式的使用，首先写匹配的字符串^[0-9][0-2]？匹配 以数字开头并且只有一位，第二位数字匹配0-2的数字，匹配1次或0次，然后创建Pattern对象<code>**Pattern p = Pattern.compile(regex)**;</code>，然后获取matcher对象 <code>Matcher matcher = p.matcher(str);</code>，也可以简写成<code>Pattern.matches(regex, input)，</code>返回值为布尔类型。</p><p><code>Integer.parseInt(str)</code>和<code>Integer.valueOf(str)</code>的区别，Integer.parseInt(str)是把字符串解析成int基本类型，<strong>Integer.valueOf(s)</strong>是把字符串解析成Integer对象类型，其实int就是Integer解包装，Integer就是int的包装，在jdk8中已经自动实现了自动解包装和自动包装，所以两种方式都能得到想要的整数值。</p><p>Integer.valueOf(s)多次解析相同的一个字符串时，得到的是Integer类型的对象，得到的对象有时是同一个对象，有时是不同的对象，要根据把s字符串解析的整数值的大小进行决定：如果s字符串对应的整数值在 -128<del>127之间，则解析出的Integer类型的对象是同一个对象；如果s字符串对应的整数值不在-128</del>127之间，则解析出的Integer类型的对象不是同一个对象。不管对象是否相等，对象中的value值是相等的。</p><h2 id="五、全部代码"><a href="#五、全部代码" class="headerlink" title="五、全部代码"></a>五、全部代码</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Collections;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">import</span> java.util.regex.Matcher;</span><br><span class="line"><span class="keyword">import</span> java.util.regex.Pattern;</span><br><span class="line"><span class="keyword">import</span> java.util.stream.Collectors;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Elevator</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 当前层数</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">int</span> currentLayer = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">int</span> currentWeight = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">private</span> List&lt;Integer&gt; layers = <span class="keyword">new</span> ArrayList&lt;Integer&gt;();;</span><br><span class="line"><span class="comment">// 电梯最大重量1000kg</span></span><br><span class="line"><span class="keyword">final</span> <span class="keyword">int</span> CAPACITY = <span class="number">1000</span>;</span><br><span class="line"><span class="comment">// 电梯最高层</span></span><br><span class="line"><span class="keyword">final</span> <span class="keyword">int</span> TOP_FLOOR = <span class="number">12</span>;</span><br><span class="line"><span class="comment">// 电梯最低层</span></span><br><span class="line"><span class="keyword">final</span> <span class="keyword">int</span> BTOTTOM_FLOOR = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">boolean</span> isFirst = <span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"><span class="keyword">new</span> Elevator().start();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">start</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">Scanner in = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line"></span><br><span class="line">String flag;</span><br><span class="line"><span class="keyword">boolean</span> isdigt = <span class="keyword">false</span>;</span><br><span class="line"><span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">System.out.println(<span class="string">"*****该电梯总楼层为12层， 第一层编号为第1层"</span>);</span><br><span class="line">System.out.println(<span class="string">"*****输入0 结束输入..."</span>);</span><br><span class="line">flag = <span class="keyword">null</span>;</span><br><span class="line">isFirst = <span class="keyword">true</span>;</span><br><span class="line"><span class="keyword">while</span> (!<span class="string">"0"</span>.equals(flag)) &#123;</span><br><span class="line">flag = in.next();</span><br><span class="line">isdigt = isDigit(flag);</span><br><span class="line"><span class="keyword">if</span> (isdigt) &#123;</span><br><span class="line"><span class="keyword">int</span> num = Integer.parseInt(flag);</span><br><span class="line"><span class="keyword">if</span> (num &lt; <span class="number">0</span> || num &gt; TOP_FLOOR) &#123;</span><br><span class="line">                        System.err.println(<span class="string">"输入有误,当前楼层最低1层, 最高12层."</span>);</span><br><span class="line">                        clear();</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;<span class="keyword">else</span> <span class="keyword">if</span> (num != <span class="number">0</span>)&#123;                    </span><br><span class="line">                    layers.add(num);</span><br><span class="line">                    &#125;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">System.err.println(<span class="string">"输入有误, 禁止输入0-12外的字符和数字"</span>);</span><br><span class="line">clear();</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 判断集合是否为空</span></span><br><span class="line"><span class="keyword">if</span> (layers.size() &gt; <span class="number">0</span>) &#123;</span><br><span class="line"><span class="comment">// 集合去重</span></span><br><span class="line">layers = layers.stream().distinct().collect(Collectors.toList());</span><br><span class="line"><span class="comment">// 去除集合中的最后一个元素</span></span><br><span class="line"><span class="comment">//layers.remove(layers.size() - 1);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 首先获取向上</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">int</span> min = Collections.min(layers);</span><br><span class="line"><span class="keyword">int</span> max = Collections.max(layers);</span><br><span class="line"><span class="keyword">if</span> (currentLayer &lt;= layers.get(<span class="number">0</span>)) &#123;</span><br><span class="line">goTop(max);</span><br><span class="line"><span class="keyword">if</span> (!layers.isEmpty()) &#123;</span><br><span class="line">goDown(min);</span><br><span class="line">&#125;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">goDown(min);</span><br><span class="line"><span class="keyword">if</span> (!layers.isEmpty()) &#123;</span><br><span class="line">goTop(max);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">System.err.println(<span class="string">"本次输入结束 "</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * Integer.parseInt(s)是把字符串解析成int基本类型，Integer.valueOf(s)</span></span><br><span class="line"><span class="comment"> * 是把字符串解析成Integer对象类型，其实int就是Integer解包装，Integer就是int的包装，</span></span><br><span class="line"><span class="comment"> * 在jdk8中已经自动实现了自动解包装和自动包装，所以两种方式都能得到想要的整数值。</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">goTop</span><span class="params">(Integer layer)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line"><span class="keyword">while</span> (currentLayer &lt;= layer) &#123;</span><br><span class="line">System.out.println(<span class="string">"---当前楼层: "</span> + currentLayer + <span class="string">"---"</span>);</span><br><span class="line">Thread.sleep(<span class="number">600</span>);</span><br><span class="line"><span class="keyword">if</span> (layers.contains(currentLayer)) &#123;</span><br><span class="line">System.err.println(<span class="string">"---到达"</span> + currentLayer + <span class="string">"楼, 开门!"</span>);</span><br><span class="line">layers.remove(Integer.valueOf(currentLayer));</span><br><span class="line">OverWeight();</span><br><span class="line">Thread.sleep(<span class="number">700</span>);</span><br><span class="line">&#125;</span><br><span class="line">currentLayer++;</span><br><span class="line">&#125;</span><br><span class="line">currentLayer--;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">goDown</span><span class="params">(Integer layer)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line"><span class="keyword">while</span> (currentLayer &gt;= layer) &#123;</span><br><span class="line">System.out.println(<span class="string">"---当前楼层: "</span> + currentLayer + <span class="string">"---"</span>);</span><br><span class="line">Thread.sleep(<span class="number">600</span>);</span><br><span class="line"><span class="keyword">if</span> (layers.contains(currentLayer)) &#123;</span><br><span class="line">System.err.println(<span class="string">"---到达"</span> + currentLayer + <span class="string">"楼, 开门!"</span>);</span><br><span class="line">layers.remove(Integer.valueOf(currentLayer));</span><br><span class="line">OverWeight();</span><br><span class="line">&#125;</span><br><span class="line">Thread.sleep(<span class="number">600</span>);</span><br><span class="line">currentLayer--;</span><br><span class="line">&#125;</span><br><span class="line">currentLayer++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">OverWeight</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">currentWeight = (<span class="keyword">int</span>) (Math.random() * <span class="number">1200</span>);</span><br><span class="line">Thread.sleep(<span class="number">600</span>);</span><br><span class="line"><span class="keyword">if</span> (currentWeight &gt; CAPACITY) &#123;</span><br><span class="line">System.err.println(<span class="string">"当前体重超重,无法关门"</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">System.out.println(<span class="string">"当前体重为: "</span> + currentWeight + <span class="string">"公斤"</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 正则表达式判断输入是否为数字</span></span><br><span class="line"><span class="comment">// @Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isDigit</span><span class="params">(String str)</span> </span>&#123;</span><br><span class="line">String regex = <span class="string">"^[0-9]&#123;1,2&#125;"</span>;</span><br><span class="line">Pattern p = Pattern.compile(regex);</span><br><span class="line"><span class="comment">// 获取matcher 对象</span></span><br><span class="line">Matcher matcher = p.matcher(str);</span><br><span class="line"><span class="keyword">return</span> matcher.matches();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">clear</span><span class="params">()</span></span>&#123;</span><br><span class="line">layers.clear();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><!-- rebuild by neat -->]]></content>
      
      
      <categories>
          
          <category> java基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring的属性注入</title>
      <link href="/2019/10/24/Spring%E7%9A%84%E5%B1%9E%E6%80%A7%E6%B3%A8%E5%85%A5/"/>
      <url>/2019/10/24/Spring%E7%9A%84%E5%B1%9E%E6%80%A7%E6%B3%A8%E5%85%A5/</url>
      
        <content type="html"><![CDATA[<!-- build time:Tue Dec 31 2019 09:54:11 GMT+0800 (CST) --><h2 id="基于xml文件的属性注入"><a href="#基于xml文件的属性注入" class="headerlink" title="基于xml文件的属性注入"></a>基于xml文件的属性注入</h2><h3 id="构造方法注入"><a href="#构造方法注入" class="headerlink" title="构造方法注入"></a>构造方法注入</h3><ul><li>具体参照setter注入<a id="more"></a><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    使用构造方法注入方式装配ConplexUser实例user1--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"user1"</span> <span class="attr">class</span>=<span class="string">"com.model.ComplexUser"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">index</span>=<span class="string">"0"</span> <span class="attr">value</span>=<span class="string">"张三"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">index</span>=<span class="string">"1"</span>&gt;</span>  <span class="comment">&lt;!--构造方法中参数的位置--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>唱歌<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>跳舞<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>爬山<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">index</span>=<span class="string">"2"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">map</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">"dalian"</span> <span class="attr">value</span>=<span class="string">"大连"</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">"beijing"</span> <span class="attr">value</span>=<span class="string">"北京"</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">"shanghai"</span> <span class="attr">value</span>=<span class="string">"上海"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">map</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">index</span>=<span class="string">"3"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>陈恒 100<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>陈恒 101<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>陈恒 102<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>aaa<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>bbb<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    使用属性的setter方法注入方式装配  complexUser实例2--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"user2"</span> <span class="attr">class</span>=<span class="string">"com.model.ComplexUser"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"uname"</span> <span class="attr">value</span>=<span class="string">"李四"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hobbyList"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>看书<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>学习spring<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"residenceMap"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">map</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">"dalian"</span> <span class="attr">value</span>=<span class="string">"大连"</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">"beijing"</span> <span class="attr">value</span>=<span class="string">"北京"</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">"shanghai"</span> <span class="attr">value</span>=<span class="string">"上海"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">map</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"aliasSet"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>陈恒 100<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>陈恒 101<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>陈恒 102<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"array"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>aaa<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>bbb<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="setter方法注入"><a href="#setter方法注入" class="headerlink" title="setter方法注入"></a>setter方法注入</h3><ul><li><p>Student.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.bean;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String sex;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Student</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Student</span><span class="params">(String name, String sex)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.sex = sex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getSex</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> sex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Student&#123;"</span> +</span><br><span class="line">                <span class="string">"name='"</span> + name + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", sex='"</span> + sex + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">'&#125;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSex</span><span class="params">(String sex)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.sex = sex;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>User.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.bean;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">    <span class="keyword">private</span> String sex;</span><br><span class="line">    <span class="keyword">private</span> Student student;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Student <span class="title">getStudent</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> student;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setStudent</span><span class="params">(Student student)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.student = student;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getSex</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> sex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSex</span><span class="params">(String sex)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.sex = sex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"User&#123;"</span> +</span><br><span class="line">                <span class="string">"name='"</span> + name + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", age="</span> + age +</span><br><span class="line">                <span class="string">", sex='"</span> + sex + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", student="</span> + student +</span><br><span class="line">                <span class="string">'&#125;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>applicationContext.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">https://www.springframework.org/schema/beans/spring-beans.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"student"</span> <span class="attr">class</span>=<span class="string">"cn.lacknb.bean.Student"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"张三"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"sex"</span> <span class="attr">value</span>=<span class="string">"男"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"user"</span> <span class="attr">class</span>=<span class="string">"cn.lacknb.bean.User"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"李老师"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"sex"</span> <span class="attr">value</span>=<span class="string">"女"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"age"</span> <span class="attr">value</span>=<span class="string">"12"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"student"</span> <span class="attr">ref</span>=<span class="string">"student"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>测试类 MyTest.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.lacknb.bean.Animals;</span><br><span class="line"><span class="keyword">import</span> cn.lacknb.bean.User;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ApplicationContext context = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"applicationContext.xml"</span>);</span><br><span class="line">        User user = (User) context.getBean(<span class="string">"user"</span>);</span><br><span class="line">        System.out.println(user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="域属性自动注入-autowire"><a href="#域属性自动注入-autowire" class="headerlink" title="域属性自动注入 autowire"></a>域属性自动注入 autowire</h3><ul><li><p>byName</p><ul><li>xml中的bean的id需要和实体类的属性名保持一致</li></ul></li><li><p>byType</p><ul><li>会根据类型查找， 如果出现两个相同类型会报错</li><li>如果出现需要查找实体类的子类， 也会报异常。</li></ul></li><li><p>例子：</p><ul><li><p>需要上面例子的两个实体类</p></li><li><p>Animals.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.bean;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Array;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Animals</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String[] colors;</span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; hobbyList;</span><br><span class="line">    <span class="keyword">private</span> Map&lt;String, String&gt; hobbyMap;</span><br><span class="line">    <span class="keyword">private</span> Set&lt;String&gt; hobbySet;</span><br><span class="line">    <span class="keyword">private</span> Properties hobbyProps;</span><br><span class="line">    <span class="keyword">private</span> User user;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">getUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUser</span><span class="params">(User user)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.user = user;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String[] getColors() &#123;</span><br><span class="line">        <span class="keyword">return</span> colors;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setColors</span><span class="params">(String[] colors)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.colors = colors;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">getHobbyList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> hobbyList;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setHobbyList</span><span class="params">(List&lt;String&gt; hobbyList)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.hobbyList = hobbyList;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Map&lt;String, String&gt; <span class="title">getHobbyMap</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> hobbyMap;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setHobbyMap</span><span class="params">(Map&lt;String, String&gt; hobbyMap)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.hobbyMap = hobbyMap;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Set&lt;String&gt; <span class="title">getHobbySet</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> hobbySet;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setHobbySet</span><span class="params">(Set&lt;String&gt; hobbySet)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.hobbySet = hobbySet;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Properties <span class="title">getHobbyProps</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> hobbyProps;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setHobbyProps</span><span class="params">(Properties hobbyProps)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.hobbyProps = hobbyProps;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Animals&#123;"</span> +</span><br><span class="line">                <span class="string">"name='"</span> + name + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", colors="</span> + Arrays.toString(colors) +</span><br><span class="line">                <span class="string">", hobbyList="</span> + hobbyList +</span><br><span class="line">                <span class="string">", hobbyMap="</span> + hobbyMap +</span><br><span class="line">                <span class="string">", hobbySet="</span> + hobbySet +</span><br><span class="line">                <span class="string">", hobbyProps="</span> + hobbyProps +</span><br><span class="line">                <span class="string">", user="</span> + user +</span><br><span class="line">                <span class="string">'&#125;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>xml配置文件</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">https://www.springframework.org/schema/beans/spring-beans.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"student"</span> <span class="attr">class</span>=<span class="string">"cn.lacknb.bean.Student"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"张三"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"sex"</span> <span class="attr">value</span>=<span class="string">"男"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"user"</span> <span class="attr">class</span>=<span class="string">"cn.lacknb.bean.User"</span> <span class="attr">autowire</span>=<span class="string">"byType"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"李老师"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"sex"</span> <span class="attr">value</span>=<span class="string">"女"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"age"</span> <span class="attr">value</span>=<span class="string">"12"</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--&lt;property name="student" ref="student"/&gt;--&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--       分界线        --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"animals"</span> <span class="attr">class</span>=<span class="string">"cn.lacknb.bean.Animals"</span> <span class="attr">autowire</span>=<span class="string">"byName"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"哈士奇"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"colors"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>红色<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>白色<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>蓝色<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hobbyList"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>吃骨头<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>发出叫声<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>吃狗食<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hobbyMap"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">map</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">"1"</span> <span class="attr">value</span>=<span class="string">"吃骨头"</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">"2"</span> <span class="attr">value</span>=<span class="string">"发出叫声"</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">"3"</span> <span class="attr">value</span>=<span class="string">"吃狗食"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">map</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hobbyProps"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">props</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">"1"</span>&gt;</span>吃骨头<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">"2"</span>&gt;</span>发出叫声<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">"3"</span>&gt;</span>吃狗食<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">props</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hobbySet"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>吃骨头<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>发出叫声<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>吃狗食<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2019/10/24/JG2k5RlPe1Fd7ic.png" alt="UTOOLS1571888929812.png"></p></li></ul></li></ul><h3 id="SPEL注入"><a href="#SPEL注入" class="headerlink" title="SPEL注入"></a>SPEL注入</h3><ul><li><p>随机数</p><p><code>&lt;property name=&quot;age&quot; value=&quot;#{T(java.lang.Math).random()*100}&quot; /&gt;</code></p><ul><li><p>例如将上面的user中的age为随机数</p><p><img src="https://s2.ax1x.com/2019/10/24/KN6RZ8.png" alt="KN6RZ8.png"></p><p><img src="https://s2.ax1x.com/2019/10/24/KNcVFe.png" alt="KNcVFe.png"></p></li></ul></li><li><p>获取实体类中的值 和 调用实体类中的方法</p><p><code>#{对象.属性}</code></p><p><code>#{对象.方法}</code></p></li><li><p>三目运算</p><p><code>#{user.age&gt;30?30:user.age}</code></p><blockquote><p>如果输入的值大于30， 就取30， 否则就取输入的值。</p></blockquote></li></ul><h1 id="基于注解的方式注入"><a href="#基于注解的方式注入" class="headerlink" title="基于注解的方式注入"></a>基于注解的方式注入</h1><blockquote><p>在实体类中使用</p></blockquote><ul><li><p>@Component(“组件的名字”)</p><ul><li>@Value(“属性值”)</li><li>@Autowired(“byName或者byType”) — 对象自动装配</li></ul></li><li><p>xml文件配置</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;context:component-scan base-package=&quot;cn.lacknb&quot;/&gt;  扫描指定包下的所有的类</span><br></pre></td></tr></table></figure></li></ul><h3 id="Component"><a href="#Component" class="headerlink" title="@Component"></a>@Component</h3><blockquote><p>该注解是一个泛化的概念, 仅仅表示一个组件对象 ( Bean ), 可以通过作用在如何层次上</p></blockquote><h3 id="Repository"><a href="#Repository" class="headerlink" title="@Repository"></a>@Repository</h3><blockquote><p>该注解用于将数据访问层 ( DAO ) 的类标识为Bean, 即注解数据访问层Bean, 其功能与@Component相同</p></blockquote><h3 id="Service"><a href="#Service" class="headerlink" title="@Service"></a>@Service</h3><blockquote><p>该注解用于标注一个业务逻辑组件类 ( Service层 ), 其功能与@Component相同</p></blockquote><h3 id="Controller"><a href="#Controller" class="headerlink" title="@Controller"></a>@Controller</h3><blockquote><p>该注解用于标注一个控制器组件类 ( Spring MVC 的Controller ), 其功能与@Component相同</p></blockquote><h3 id="Autowired"><a href="#Autowired" class="headerlink" title="@Autowired"></a>@Autowired</h3><ul><li>使用@Autowired时, 首先在容器查找对应类型的bean<ul><li>当查询结果刚好为一个时, 就将该bean装配给指定的数据</li><li>当查询结果不止一个时, @Autowired会根据名称来查找, 如果还是没有找到, 就会抛出异常.</li><li>当查询结果为空时, 会抛出异常, 可以使用@Autowired( required = false )解决.</li></ul></li></ul><h3 id="Resource"><a href="#Resource" class="headerlink" title="@Resource"></a>@Resource</h3><blockquote><p>​ 该注解与@Autowired的功能一样, 区别在于该注解默认是按照名称来装配注入的, 只有当找不到</p><p>与名称匹配的Bean时才会按照类型来装配注入; 而@Autowired默认是按照Bean类型进行装配的, 如果</p><p>想按照名称装配注入, 则需要和@Qualitier注解一起使用</p></blockquote><blockquote><p>​ @Resource注解有两个属性–name和type. name属性指定Bean实例名称, 即按照名称来装配注入;</p><p>type属性指定Bean类型, 即按照Bean的类型进行装配</p></blockquote><h3 id="Qualifier"><a href="#Qualifier" class="headerlink" title="@Qualifier"></a>@Qualifier</h3><blockquote><p>​ 该注解与@Autowired注解配合使用, 当@Autowired注解需要按照名称来装配注入时需要和该注解</p><p>一起使用, Bean的实例名称由@Qualitier注解的参数指定.</p></blockquote><p><code>在上面几个注解中, 虽然@Repository、@Service和@Controller等注解的功能与@Component注解相同, 但为了使类的标注更加气你(层次化), 在实际开发中推荐使用@Repository标注数据访问层(DAO层)、使用@Service标注业务逻辑层(Service层)、使用@Controller标注控制器层(控制层)</code></p><h3 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h3><ul><li><p>创建DAO层 — TestDao.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">TestDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>创建TestDaoImpl.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Repository;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Repository</span>(<span class="string">"testDao"</span>)</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 相当于@Repository, 但如果在service层中使用@Resource(name = "testDao"), testDao不能省略</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDaoImpl</span> <span class="keyword">implements</span> <span class="title">TestDao</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"testDao save"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>创建Service层 — TestService.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">TestService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>TestServiceImpl.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.lacknb.dao.TestDao;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.annotation.Resource;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span>(<span class="string">"testService"</span>)  <span class="comment">// 相当于@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestServiceImpl</span> <span class="keyword">implements</span> <span class="title">TestService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span>(name = <span class="string">"testDao"</span>)  <span class="comment">// 注意这里@Resource中参数不止一个, 所以不能直接写testDao</span></span><br><span class="line">    <span class="comment">// 相当于@Autowired, 只不过@Autowired默认按照Bean类型装配, Resource默认是按名称装配</span></span><br><span class="line">    <span class="keyword">private</span> TestDao testDao;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        testDao.save();</span><br><span class="line">        System.out.println(<span class="string">"testService save"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>创建Controller层 — TestController.java</p><p><code>当一个组件在某个扫描过程中被自动检测到时，会根据那个扫描器的BeanNameGenerator 策略生成它的bean名称。默认情况下，任何包含 name值的Spring“典型”注解 (@Component、@Repository、 @Service和@Controller) 会把那个名字 提供给相关的bean定义。如果这个注解不包含name值或是其他检测到的组件 (比如被自定义过滤器发现的)，默认bean名称生成器会返回小写开头的非限定(non-qualified)类名。</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.Controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.lacknb.service.TestService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span>  <span class="comment">// 这里可以自定义名称, 默认为这个类的名称, 小写开头 testController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> TestService testService;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span>  <span class="title">save</span><span class="params">()</span></span>&#123;</span><br><span class="line">        testService.save();</span><br><span class="line">        System.out.println(<span class="string">"testController save"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>配置注解</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    扫描指定包下的组件--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"cn.lacknb"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>创建测试类 TestMoreAnnotation.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.lacknb.Controller.TestController;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestMoreAnnotation</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ApplicationContext context = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"applicationContext.xml"</span>);</span><br><span class="line">        TestController controller = (TestController) context.getBean(<span class="string">"testController"</span>);  <span class="comment">// 默认是该类的类名testController, 也可以在注解中自定义</span></span><br><span class="line">        controller.save();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>运行结果</p><p><img src="https://s2.ax1x.com/2019/10/24/KUfE1e.png" alt="KUfE1e.png"></p></li></ul><!-- rebuild by neat -->]]></content>
      
      
      <categories>
          
          <category> spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>docker安装mysql</title>
      <link href="/2019/10/23/docker%E5%AE%89%E8%A3%85mysql/"/>
      <url>/2019/10/23/docker%E5%AE%89%E8%A3%85mysql/</url>
      
        <content type="html"><![CDATA[<!-- build time:Tue Dec 31 2019 09:54:11 GMT+0800 (CST) --><h2 id="docker安装mysql5-5"><a href="#docker安装mysql5-5" class="headerlink" title="docker安装mysql5.5"></a>docker安装mysql5.5</h2><p>原文来自菜鸟教程: <a href="https://www.runoob.com/docker/docker-install-mysql.html" target="_blank" rel="noopener"><a href="https://www.runoob.com/docker/docker-install-mysql.html" target="_blank" rel="noopener">https://www.runoob.com/docker/docker-install-mysql.html</a></a></p><ul><li><p>下载镜像</p><p><code>docker pull mysql:5.5</code></p></li><li><p>运行</p><a id="more"></a><p>MySQL(5.7.19)的默认配置文件是 /etc/mysql/my.cnf 文件。如果想要自定义配置，建议向 /etc/mysql/conf.d 目录中创建 .cnf 文件。新建的文件可以任意起名，只要保证后缀名是 cnf 即可。新建的文件中的配置项可以覆盖 /etc/mysql/my.cnf 中的配置项。</p><p>具体操作：</p><p><strong>首先需要创建将要映射到容器中的目录以及.cnf文件，然后再创建容器</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># pwd</span><br><span class="line">/opt</span><br><span class="line"># mkdir -p docker_v/mysql/conf</span><br><span class="line"># cd docker_v/mysql/conf</span><br><span class="line"># touch my.cnf</span><br><span class="line"># docker run -p 3306:3306 --name mysql -v /opt/docker_v/mysql/conf:/etc/mysql/conf.d -e MYSQL_ROOT_PASSWORD=123456 -d imageID</span><br></pre></td></tr></table></figure></li></ul><p>命令说明：</p><ul><li><strong>-p 3306:3306：</strong>将容器的3306端口映射到主机的3306端口</li><li><strong>-v /opt/docker_v/mysql/conf:/etc/mysql/conf.d：</strong>将主机/opt/docker_v/mysql/conf目录挂载到容器的/etc/mysql/conf.d</li><li><strong>-e MYSQL_ROOT_PASSWORD=123456：</strong>初始化root用户的密码</li><li><strong>-d:</strong> 后台运行容器，并返回容器ID</li><li><strong>imageID:</strong> mysql镜像ID</li></ul><h2 id="docker-安装-mysql-8-版本"><a href="#docker-安装-mysql-8-版本" class="headerlink" title="docker 安装 mysql 8 版本"></a><strong>docker 安装 mysql 8 版本</strong></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># docker 中下载 mysql</span><br><span class="line">docker pull mysql</span><br><span class="line"></span><br><span class="line">#启动</span><br><span class="line">docker run --name mysql -p 3306:3306 -e MYSQL_ROOT_PASSWORD=Lzslov123! -d mysql</span><br><span class="line"></span><br><span class="line">#进入容器</span><br><span class="line">docker exec -it mysql bash</span><br><span class="line"></span><br><span class="line">#登录mysql</span><br><span class="line">mysql -u root -p</span><br><span class="line">ALTER USER &apos;root&apos;@&apos;localhost&apos; IDENTIFIED BY &apos;Lzslov123!&apos;;</span><br><span class="line"></span><br><span class="line">#添加远程登录用户</span><br><span class="line">CREATE USER &apos;liaozesong&apos;@&apos;%&apos; IDENTIFIED WITH mysql_native_password BY &apos;Lzslov123!&apos;;</span><br><span class="line">GRANT ALL PRIVILEGES ON *.* TO &apos;liaozesong&apos;@&apos;%&apos;;</span><br></pre></td></tr></table></figure><h2 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h2><p><code>默认root用户是不能被远程的, 需要一下操作</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">允许root用户在任何地方进行远程登录，并具有所有库任何操作权限，具体操作如下：</span><br><span class="line">在本机先使用root用户登录mysql：</span><br><span class="line">mysql -u root -p&quot;youpassword&quot;</span><br><span class="line">进行授权操作：</span><br><span class="line">mysql&gt;GRANT ALL PRIVILEGES ON *.* TO &apos;root&apos;@&apos;%&apos; IDENTIFIED BY &apos;youpassword&apos; WITH GRANT OPTION;</span><br><span class="line">重载授权表：</span><br><span class="line">FLUSH PRIVILEGES;</span><br></pre></td></tr></table></figure><p><code>或者创建一个新用户, 为其赋予权限</code></p><ul><li><p>首先进入mysql容器<code>docker exec -it mysql bash</code></p></li><li><p>登录mysql的root用户<code>mysql -u root -p</code></p></li><li><p>创建用户<code>create user &#39;test&#39;@&#39;%&#39; identified by &#39;123456&#39;;</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql创建用户</span><br><span class="line"></span><br><span class="line">CREATE USER  &apos;user_name&apos;@&apos;host&apos;  IDENTIFIED BY  &apos;password&apos;；</span><br><span class="line"></span><br><span class="line">user_name：要创建用户的名字。</span><br><span class="line"></span><br><span class="line">host：表示要这个新创建的用户允许从哪台机登陆，如果只允许从本机登陆，则 填　‘localhost’ ，如果允许从远程登陆，则填 ‘%’</span><br><span class="line"></span><br><span class="line">password：新创建用户的登陆数据库密码，如果没密码可以不写。</span><br></pre></td></tr></table></figure></li><li><p>授予权限</p><p><code>grant all privileges on *.* to &#39;test&#39;@&#39;%&#39;;</code></p></li><li><p>然后就可以在电脑上测试连接了.</p></li></ul><!-- rebuild by neat -->]]></content>
      
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>mybatis注解开发（以及动态sql）</title>
      <link href="/2019/10/14/mybatis%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91%EF%BC%88%E4%BB%A5%E5%8F%8A%E5%8A%A8%E6%80%81sql%EF%BC%89/"/>
      <url>/2019/10/14/mybatis%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91%EF%BC%88%E4%BB%A5%E5%8F%8A%E5%8A%A8%E6%80%81sql%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<!-- build time:Tue Dec 31 2019 09:54:11 GMT+0800 (CST) --><h2 id="常用的注解"><a href="#常用的注解" class="headerlink" title="常用的注解"></a>常用的注解</h2><ul><li>@Select</li><li>@Insert</li><li>@Delete</li><li>@Update</li><li>@SelectKey(“statement = “select last_insert_id() 或者（@@identify） “, keyProperty = “id”, before = false, resultType = int.class) // 查询插入数据之后的, 当前主键的值<ul><li>statement SQL语句</li><li>keyProperty 将查询的结果封装到属性</li><li>before 如果为false ， 在插入之后， 进行查询， 否则， 在插入之前查询</li><li>resultType 将查询的结果封装成的类型</li></ul></li><li>@ResultMap</li><li>@Results</li><li>@Result<a id="more"></a></li></ul><h2 id="动态sql"><a href="#动态sql" class="headerlink" title="动态sql"></a>动态sql</h2><h3 id="通过自定义一个类-在方法中写动态sql-然后返回"><a href="#通过自定义一个类-在方法中写动态sql-然后返回" class="headerlink" title="通过自定义一个类, 在方法中写动态sql, 然后返回."></a>通过自定义一个类, 在方法中写动态sql, 然后返回.</h3><ul><li>@SelectProvider(type = MySqlProvider.class, method = 方法名)</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MySqlProvider</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">mysql01</span><span class="params">(Student student)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (student.getAge() == <span class="keyword">null</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"select * from student"</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"select * from user where age &gt; #&#123;age&#125;"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>模糊查询</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">mysql01</span><span class="params">(Student student)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span> (student.getName() != <span class="keyword">null</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"select * from student where name like '%' #&#123;name&#125; '%'"</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"select * from student"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>按照复合条件查询， 单个传输多个参数时，并且需要用@Param（“name” String name）， 需要用map去接收</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 模糊查询</span></span><br><span class="line">    <span class="meta">@SelectProvider</span>(type = MySqlUtils.class, method = <span class="string">"selectByName"</span>)</span><br><span class="line">    <span class="function">List&lt;Student&gt; <span class="title">selectByName</span><span class="params">(@Param(<span class="string">"name"</span>)</span> String name)</span>;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 当 传来的 是单个参数 或 多个参数时, 可以用map接收</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">selectByName</span><span class="params">(Map map)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (map.get(<span class="string">"name"</span>) != <span class="keyword">null</span> &amp;&amp; map.get(<span class="string">"name"</span>) != <span class="string">""</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"select * from student where sname like '%' #&#123;name&#125; '%'"</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"select * from student"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p><img src="https://s2.ax1x.com/2019/10/14/KpucOf.png" alt="KpucOf.png"></p><ul><li>@InsertProvider<ul><li>@DeleteProvider</li></ul></li><li>@UpdateProvider</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 添加数据 动态sql</span></span><br><span class="line">    <span class="meta">@UpdateProvider</span>(type = MySqlUtils.class, method = <span class="string">"studentUpdate"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">studentUpdate</span><span class="params">(Student student)</span></span>;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 修改数据 动态sql</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">studentUpdate</span><span class="params">(Student student)</span></span>&#123;</span><br><span class="line">    StringBuffer sql = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">    sql.append(<span class="string">"update student set sno = #&#123;sno&#125;"</span>);  <span class="comment">// 这里设置sno = #&#123;sno&#125;是为了更好的拼接sql语句, 不影响最后结果</span></span><br><span class="line">    <span class="keyword">if</span> (student.getSname() != <span class="string">""</span> &amp;&amp; student.getSname() != <span class="keyword">null</span>)&#123;</span><br><span class="line">        sql.append(<span class="string">", sname = #&#123;sname&#125;"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (student.getGender() != <span class="string">""</span> &amp;&amp; student.getGender() != <span class="keyword">null</span>)&#123;</span><br><span class="line">        sql.append(<span class="string">", gender = #&#123;gender&#125;"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (student.getSage() &gt; <span class="number">0</span>)&#123;</span><br><span class="line">        sql.append(<span class="string">", sage = #&#123;sage&#125;"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    sql.append(<span class="string">" where sno = #&#123;sno&#125;"</span>);</span><br><span class="line">    <span class="keyword">return</span> sql.toString();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="动态sql的另一种实现方式"><a href="#动态sql的另一种实现方式" class="headerlink" title="动态sql的另一种实现方式"></a>动态sql的另一种实现方式</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getUpdateSql03</span><span class="params">(Student student)</span></span>&#123;</span><br><span class="line">    <span class="comment">// mybatis提供好的sql类 </span></span><br><span class="line">    <span class="comment">// new SQL()表示创建一个SQL类的对象</span></span><br><span class="line">    <span class="comment">// new SQL()&#123;&#125;表示创建一个SQL类的子类对象， 只不过这个子类叫什么名字  不知道， 没有指定</span></span><br><span class="line">    <span class="comment">// 这种写法叫做 匿名内部类</span></span><br><span class="line">    String sql = <span class="keyword">new</span> SQL()&#123;</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">this</span>.UPDATE(<span class="string">"student"</span>);</span><br><span class="line">            <span class="keyword">this</span>.SET(<span class="string">"id = #&#123;id&#125;"</span>);</span><br><span class="line">            <span class="keyword">if</span> (student.getName != <span class="keyword">null</span> &amp;&amp; student.getName != <span class="string">""</span>)&#123;</span><br><span class="line">                <span class="keyword">this</span>.SET(<span class="string">"name = #&#123;name&#125;"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (student.getAge &gt; <span class="number">0</span>)&#123;</span><br><span class="line">                <span class="keyword">this</span>.SET(<span class="string">"age = #&#123;age&#125;"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (student.getScore &gt; <span class="number">0</span>)&#123;</span><br><span class="line">                <span class="keyword">this</span>.SET(<span class="string">"score = #&#123;score&#125;"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">this</span>.SET(<span class="string">"where id = #&#123;id&#125;"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;.toString();</span><br><span class="line">    <span class="keyword">return</span> sql;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>模糊查询 动态sql的另外一种方式</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 模糊查询 的另一种方式</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test03</span><span class="params">()</span></span>&#123;</span><br><span class="line">    StudentDao dao = session.getMapper(StudentDao.class);</span><br><span class="line">    List&lt;Student&gt; students = dao.selectByName01(<span class="string">"二"</span>);</span><br><span class="line">    <span class="keyword">for</span> (Student student : students)&#123;</span><br><span class="line">        System.out.println(student);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 模糊查询的另一种方式</span></span><br><span class="line"><span class="meta">@SelectProvider</span>(type = MySqlUtils.class, method = <span class="string">"selectByName01"</span>) <span class="comment">// 这里的selcetByName是 类MySqlUtils中的方法名.</span></span><br><span class="line">  </span><br><span class="line"><span class="function">List&lt;Student&gt; <span class="title">selectByName01</span><span class="params">(@Param(<span class="string">"name"</span>)</span> String name)</span>;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 动态sql的另外一种方式</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">selectByName01</span><span class="params">(Map map)</span></span>&#123;</span><br><span class="line">    <span class="keyword">final</span> String name = (String) map.get(<span class="string">"name"</span>);</span><br><span class="line">     String sql = <span class="keyword">new</span> SQL()&#123;</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">this</span>.SELECT(<span class="string">"*"</span>);</span><br><span class="line">            <span class="keyword">this</span>.FROM(<span class="string">"student"</span>);</span><br><span class="line">            <span class="keyword">if</span> (name != <span class="keyword">null</span> &amp;&amp; name != <span class="string">""</span>)&#123;</span><br><span class="line">                <span class="keyword">this</span>.WHERE(<span class="string">"sname like '%' #&#123;name&#125; '%'"</span>);  <span class="comment">// % 和#&#123;name&#125;之间的空格不能少</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;.toString();</span><br><span class="line">  </span><br><span class="line">     <span class="keyword">return</span> sql;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://s2.ax1x.com/2019/10/14/KpNSOJ.png" alt="KpNSOJ.png"></p></li></ul><!-- rebuild by neat -->]]></content>
      
      
      <categories>
          
          <category> mybatis </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mybatis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Deepin安装aria2实现百度云高速下载</title>
      <link href="/2019/10/11/Deepin%E5%AE%89%E8%A3%85aria2%E5%AE%9E%E7%8E%B0%E7%99%BE%E5%BA%A6%E4%BA%91%E9%AB%98%E9%80%9F%E4%B8%8B%E8%BD%BD/"/>
      <url>/2019/10/11/Deepin%E5%AE%89%E8%A3%85aria2%E5%AE%9E%E7%8E%B0%E7%99%BE%E5%BA%A6%E4%BA%91%E9%AB%98%E9%80%9F%E4%B8%8B%E8%BD%BD/</url>
      
        <content type="html"><![CDATA[<!-- build time:Tue Dec 31 2019 09:54:11 GMT+0800 (CST) --><h2 id="1-window用户可以使用pandown下载"><a href="#1-window用户可以使用pandown下载" class="headerlink" title="1. window用户可以使用pandown下载"></a>1. window用户可以使用pandown下载</h2><ul><li><a href="http://www.pandownload.com/" target="_blank" rel="noopener">点击跳转到官网</a><ul><li>有window版本</li><li>网页版</li><li>安卓版</li></ul></li></ul><blockquote><p>一般在我们使用百度云链接中baidu后面加上wp, 即可解析高速下载网址</p><p>例如: <a href="https://pan.baidu.com/s/1zjev-MwHpRUzBtEGTpqb-w" target="_blank" rel="noopener">https://pan.baidu.com/s/1zjev-MwHpRUzBtEGTpqb-w</a> 提取码:q736</p><p>修改之后: <a href="https://pan.baiduwp.com/s/1zjev-MwHpRUzBtEGTpqb-w" target="_blank" rel="noopener">https://pan.baiduwp.com/s/1zjev-MwHpRUzBtEGTpqb-w</a> 提取码:q736</p></blockquote><a id="more"></a><p><img src="https://s2.ax1x.com/2019/10/11/uqRdP0.png" alt="uqRdP0.png"></p><p><img src="https://s2.ax1x.com/2019/10/11/uqRsr4.png" alt="uqRsr4.png"></p><h2 id="2-deepin和Ubuntu安装aria2"><a href="#2-deepin和Ubuntu安装aria2" class="headerlink" title="2. deepin和Ubuntu安装aria2"></a>2. deepin和Ubuntu安装aria2</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install aria2</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir /etc/aria2    <span class="comment">#新建文件夹  </span></span><br><span class="line">sudo touch /etc/aria2/aria2.session    <span class="comment">#新建session文件</span></span><br><span class="line">sudo chmod 777 /etc/aria2/aria2.session    <span class="comment">#设置aria2.session可写 </span></span><br><span class="line">sudo vi /etc/aria2/aria2.conf    <span class="comment">#创建配置文件</span></span><br></pre></td></tr></table></figure><ul><li>aria2.conf文件配置<ul><li>dir - 文件的保存路径 (需要我们修改一下)</li><li>默认端口是: 6800</li></ul></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"># 文件的保存路径(可使用绝对路径或相对路径), 默认: 当前启动位置</span><br><span class="line">dir=/media/nianshao/59D5FCE97201B8A71/download02</span><br><span class="line"># NTFS建议使用falloc, EXT3/4建议trunc, MAC 下需要注释此项</span><br><span class="line">#file-allocation=none</span><br><span class="line"># 断点续传</span><br><span class="line">continue=true</span><br><span class="line"> </span><br><span class="line">## 下载连接相关 ##</span><br><span class="line"> </span><br><span class="line"># 最大同时下载任务数, 运行时可修改, 默认:5</span><br><span class="line">max-concurrent-downloads=300</span><br><span class="line"># 同一服务器连接数, 添加时可指定, 默认:1</span><br><span class="line">max-connection-per-server=15</span><br><span class="line"># 最小文件分片大小, 添加时可指定, 取值范围1M -1024M, 默认:20M</span><br><span class="line"># 假定size=10M, 文件为20MiB 则使用两个来源下载; 文件为15MiB 则使用一个来源下载</span><br><span class="line">min-split-size=10M</span><br><span class="line"># 单个任务最大线程数, 添加时可指定, 默认:5</span><br><span class="line">split=50</span><br><span class="line"># 整体下载速度限制, 运行时可修改, 默认:0</span><br><span class="line">#max-overall-download-limit=0</span><br><span class="line"># 单个任务下载速度限制, 默认:0</span><br><span class="line">#max-download-limit=0</span><br><span class="line"># 整体上传速度限制, 运行时可修改, 默认:0</span><br><span class="line">#max-overall-upload-limit=0</span><br><span class="line"># 单个任务上传速度限制, 默认:0</span><br><span class="line">#max-upload-limit=0</span><br><span class="line"># 禁用IPv6, 默认:false</span><br><span class="line">disable-ipv6=false</span><br><span class="line"> </span><br><span class="line">## 进度保存相关 ##</span><br><span class="line"> </span><br><span class="line"># 从会话文件中读取下载任务</span><br><span class="line">input-file=/etc/aria2/aria2.session</span><br><span class="line"># 在Aria2退出时保存`错误/未完成`下载任务到会话文件</span><br><span class="line">save-session=/etc/aria2/aria2.session</span><br><span class="line"># 定时保存会话, 0为退出时才保存, 需1.16.1以上版本, 默认:0</span><br><span class="line">save-session-interval=10</span><br><span class="line"> </span><br><span class="line">## RPC相关设置 ##</span><br><span class="line"> </span><br><span class="line"># 启用RPC, 默认:false</span><br><span class="line">enable-rpc=true</span><br><span class="line"># 允许所有来源, 默认:false</span><br><span class="line">rpc-allow-origin-all=true</span><br><span class="line"># 允许非外部访问, 默认:false</span><br><span class="line">rpc-listen-all=true</span><br><span class="line"># 事件轮询方式, 取值:[epoll, kqueue, port, poll, select], 不同系统默认值不同</span><br><span class="line">#event-poll=select</span><br><span class="line"># RPC监听端口, 端口被占用时可以修改, 默认:6800</span><br><span class="line">rpc-listen-port=6800</span><br><span class="line"># 设置的RPC授权令牌, v1.18.4新增功能, 取代 --rpc-user 和 --rpc-passwd 选项</span><br><span class="line">rpc-secret=123456</span><br><span class="line"># 设置的RPC访问用户名, 此选项新版已废弃, 建议改用 --rpc-secret 选项</span><br><span class="line">#rpc-user=&lt;USER&gt;</span><br><span class="line"># 设置的RPC访问密码, 此选项新版已废弃, 建议改用 --rpc-secret 选项</span><br><span class="line">#rpc-passwd=123456</span><br><span class="line"> </span><br><span class="line">## BT/PT下载相关 ##</span><br><span class="line"> </span><br><span class="line"># 当下载的是一个种子(以.torrent结尾)时, 自动开始BT任务, 默认:true</span><br><span class="line">follow-torrent=true</span><br><span class="line"># BT监听端口, 当端口被屏蔽时使用, 默认:6881-6999</span><br><span class="line">listen-port=51413</span><br><span class="line"># 单个种子最大连接数, 默认:55</span><br><span class="line">#bt-max-peers=55</span><br><span class="line"># 打开DHT功能, PT需要禁用, 默认:true</span><br><span class="line">enable-dht=true</span><br><span class="line"># 打开IPv6 DHT功能, PT需要禁用</span><br><span class="line">enable-dht6=true</span><br><span class="line"># DHT网络监听端口, 默认:6881-6999</span><br><span class="line">#dht-listen-port=6881-6999</span><br><span class="line"># 本地节点查找, PT需要禁用, 默认:false</span><br><span class="line">bt-enable-lpd=true</span><br><span class="line"># 种子交换, PT需要禁用, 默认:true</span><br><span class="line">enable-peer-exchange=true</span><br><span class="line"># 每个种子限速, 对少种的PT很有用, 默认:50K</span><br><span class="line">#bt-request-peer-speed-limit=50K</span><br><span class="line"># 客户端伪装, PT需要</span><br><span class="line">peer-id-prefix=-TR2770-</span><br><span class="line">user-agent=Transmission/2.77</span><br><span class="line"># 当种子的分享率达到这个数时, 自动停止做种, 0为一直做种, 默认:1.0</span><br><span class="line">seed-ratio=0</span><br><span class="line"># 强制保存会话, 即使任务已经完成, 默认:false</span><br><span class="line"># 较新的版本开启后会在任务完成后依然保留.aria2文件</span><br><span class="line">force-save=true</span><br><span class="line"># BT校验相关, 默认:true</span><br><span class="line">#bt-hash-check-seed=true</span><br><span class="line"># 继续之前的BT任务时, 无需再次校验, 默认:false</span><br><span class="line">bt-seed-unverified=true</span><br><span class="line"># 保存磁力链接元数据为种子文件(.torrent文件), 默认:false</span><br><span class="line">bt-save-metadata=true</span><br><span class="line">daemon=true</span><br></pre></td></tr></table></figure><ul><li>启动aria2</li></ul><p><code>sudo aria2c --conf-path=/etc/aria2/aria2.conf</code></p><ul><li>如果没有提示错误，按ctrl+c停止运行命令，转为后台运行：</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo aria2c --conf-path=/etc/aria2/aria2.conf -D</span><br></pre></td></tr></table></figure><h2 id="Aria2-AriaNg客户端谷歌插件下载"><a href="#Aria2-AriaNg客户端谷歌插件下载" class="headerlink" title="Aria2-AriaNg客户端谷歌插件下载"></a>Aria2-AriaNg客户端谷歌插件下载</h2><p><strong>.可使用”Aria2-AriaNg客户端”</strong></p><p>*<em>下载链接：<a href="https://www.lanzous.com/b928310/" target="_blank" rel="noopener">https://www.lanzous.com/b928310/</a> *</em></p><p><strong>64位系统安装AriaNg.x64、32位系统安装AriaNg.x86或 安装QQ浏览器Aria2扩展组件</strong></p><p><strong>在“应用中心”搜索 “Aria2”在搜索到的“ Aria2 for Chrome ” 点击“立即安装”</strong></p><p><strong>就能安装好“**</strong> Aria2 for Chrome ”扩展组件**</p><p><strong>引用文章:</strong> <a href="https://blog.csdn.net/crazycui/article/details/52205908" target="_blank" rel="noopener">CSDN, 点击跳转</a></p><p>*<em>windows使用ariac吾爱破解论坛相关帖子: *</em></p><ul><li><a href="https://www.52pojie.cn/thread-1025572-1-1.html" target="_blank" rel="noopener"><a href="https://www.52pojie.cn/thread-1025572-1-1.html" target="_blank" rel="noopener">https://www.52pojie.cn/thread-1025572-1-1.html</a></a></li><li><a href="https://www.52pojie.cn/thread-1028273-1-1.html" target="_blank" rel="noopener"><a href="https://www.52pojie.cn/thread-1028273-1-1.html" target="_blank" rel="noopener">https://www.52pojie.cn/thread-1028273-1-1.html</a></a></li></ul><!-- rebuild by neat -->]]></content>
      
      
      <categories>
          
          <category> 高速下载相关 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 百度云 </tag>
            
            <tag> 高速下载 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title> mybatis单表的嵌套查询</title>
      <link href="/2019/10/10/mybatis%E5%8D%95%E8%A1%A8%E7%9A%84%E5%B5%8C%E5%A5%97%E6%9F%A5%E8%AF%A2/"/>
      <url>/2019/10/10/mybatis%E5%8D%95%E8%A1%A8%E7%9A%84%E5%B5%8C%E5%A5%97%E6%9F%A5%E8%AF%A2/</url>
      
        <content type="html"><![CDATA[<!-- build time:Tue Dec 31 2019 09:54:11 GMT+0800 (CST) --><h2 id="数据库备份文件"><a href="#数据库备份文件" class="headerlink" title="数据库备份文件"></a>数据库备份文件</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SET</span> FOREIGN_KEY_CHECKS=<span class="number">0</span>;</span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Table structure for `newslabel`</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> <span class="string">`newslabel`</span>;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`newslabel`</span> (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">int</span>(<span class="number">5</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  <span class="string">`name`</span> <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`pid`</span> <span class="built_in">int</span>(<span class="number">5</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> AUTO_INCREMENT=<span class="number">11</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Records of newslabel</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`newslabel`</span> <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'体育新闻'</span>, <span class="string">'0'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`newslabel`</span> <span class="keyword">VALUES</span> (<span class="string">'2'</span>, <span class="string">'娱乐新闻'</span>, <span class="string">'0'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`newslabel`</span> <span class="keyword">VALUES</span> (<span class="string">'3'</span>, <span class="string">'NBA'</span>, <span class="string">'1'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`newslabel`</span> <span class="keyword">VALUES</span> (<span class="string">'4'</span>, <span class="string">'CBA'</span>, <span class="string">'1'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`newslabel`</span> <span class="keyword">VALUES</span> (<span class="string">'5'</span>, <span class="string">'火箭'</span>, <span class="string">'3'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`newslabel`</span> <span class="keyword">VALUES</span> (<span class="string">'6'</span>, <span class="string">'湖人'</span>, <span class="string">'3'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`newslabel`</span> <span class="keyword">VALUES</span> (<span class="string">'7'</span>, <span class="string">'青岛金星'</span>, <span class="string">'4'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`newslabel`</span> <span class="keyword">VALUES</span> (<span class="string">'8'</span>, <span class="string">'浙江广厦'</span>, <span class="string">'4'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`newslabel`</span> <span class="keyword">VALUES</span> (<span class="string">'9'</span>, <span class="string">'港台明星'</span>, <span class="string">'2'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`newslabel`</span> <span class="keyword">VALUES</span> (<span class="string">'10'</span>, <span class="string">'内地影视'</span>, <span class="string">'2'</span>);</span><br></pre></td></tr></table></figure><a id="more"></a><table><thead><tr><th align="center">id</th><th align="center">name</th><th align="center">pid</th></tr></thead><tbody><tr><td align="center">1</td><td align="center">体育新闻</td><td align="center">0</td></tr><tr><td align="center">2</td><td align="center">娱乐新闻</td><td align="center">0</td></tr><tr><td align="center">3</td><td align="center">NBA</td><td align="center">1</td></tr><tr><td align="center">4</td><td align="center">CBA</td><td align="center">1</td></tr><tr><td align="center">5</td><td align="center">火箭</td><td align="center">3</td></tr><tr><td align="center">6</td><td align="center">湖人</td><td align="center">3</td></tr><tr><td align="center">7</td><td align="center">青岛金星</td><td align="center">4</td></tr><tr><td align="center">8</td><td align="center">浙江广厦</td><td align="center">4</td></tr><tr><td align="center">9</td><td align="center">港台明星</td><td align="center">2</td></tr><tr><td align="center">10</td><td align="center">内地明星</td><td align="center">2</td></tr></tbody></table><h2 id="父栏目-gt-子栏目-gt-孙栏目-gt-…"><a href="#父栏目-gt-子栏目-gt-孙栏目-gt-…" class="headerlink" title="父栏目-&gt; 子栏目 -&gt; 孙栏目 -&gt; …"></a>父栏目-&gt; 子栏目 -&gt; 孙栏目 -&gt; …</h2><p><strong>数据库查询思路:</strong></p><blockquote><p>首先查询父栏目 例如: 体育新闻,</p><p>select * from newslabel where id = 1</p><p>找到体育新闻, 然后用体育新闻的id查询</p><p>select * from newslabel where pid = #{id}</p><p>取结果集的id再次作为条件查询</p><p>select * from neswslabel where pid = #{id}</p><p>反复这样, 直到再也不到结果 结束</p></blockquote><h3 id="创建maven项目"><a href="#创建maven项目" class="headerlink" title="创建maven项目"></a>创建maven项目</h3><ul><li>pom依赖</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.mybatis/mybatis --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- https://mvnrepository.com/artifact/mysql/mysql-connector-java --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.47<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- https://mvnrepository.com/artifact/log4j/log4j --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.17<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>数据库连接配置文件</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE configuration</span></span><br><span class="line"><span class="meta">        PUBLIC "-//mybatis.org//DTD Config 3.0//EN"</span></span><br><span class="line"><span class="meta">        "http://mybatis.org/dtd/mybatis-3-config.dtd"&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--注册属性文件--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span> <span class="attr">resource</span>=<span class="string">"jdbc.properties"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--定义别名--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--给指定类型定义别名--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--&lt;typeAlias type="com.abc.beans.Student" alias="Student"/&gt;--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--给指定包中所有实体类指定别名，别名默认就是该类的简单类名--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">"com.abc.beans"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--可以配置多个environment--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">"mySql"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">"mySql"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">"JDBC"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">"POOLED"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driver"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.driver&#125;"</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.url&#125;"</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.username&#125;"</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.password&#125;"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--&lt;environment id="Orcale"&gt;</span></span><br><span class="line"><span class="comment">            &lt;transactionManager type="JDBC"/&gt;</span></span><br><span class="line"><span class="comment">            &lt;dataSource type="POOLED"&gt;</span></span><br><span class="line"><span class="comment">                &lt;property name="driver" value="com.mysql.jdbc.Driver"/&gt;</span></span><br><span class="line"><span class="comment">                &lt;property name="url" value="jdbc:mysql:///test"/&gt;</span></span><br><span class="line"><span class="comment">                &lt;property name="username" value="root"/&gt;</span></span><br><span class="line"><span class="comment">                &lt;property name="password" value="12345678"/&gt;</span></span><br><span class="line"><span class="comment">            &lt;/dataSource&gt;</span></span><br><span class="line"><span class="comment">        &lt;/environment&gt;--&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--注册映射文件--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--resource配置映射文件--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--&lt;mapper resource="com/abc/dao/IStudentDao.xml"/&gt;--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--url可以注册本地磁盘上的映射文件（不在项目路径下的文件）--&gt;</span></span><br><span class="line">       <span class="comment">&lt;!-- &lt;mapper url="file:///e:/mapper.xml"/&gt;--&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        使用下面的注册方式需要满足以下三点要求：</span></span><br><span class="line"><span class="comment">        1) 映射文件要与Dao接口在同一个包下</span></span><br><span class="line"><span class="comment">        2) 映射文件名要与Dao接口的简单类名相同</span></span><br><span class="line"><span class="comment">        3) 映射文件的&lt;mapper/&gt;标签的namespace属性值为Dao接口的全限定性类名</span></span><br><span class="line"><span class="comment">        满足以上三个条件，那么这里的class属性值就可以填写Dao接口的全限定性类名</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--&lt;mapper class="com.abc.dao.IStudentDao"/&gt;--&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">            使用下面的注册方式需要满足以下四点要求：</span></span><br><span class="line"><span class="comment">        1) 映射文件要与Dao接口在同一个包下</span></span><br><span class="line"><span class="comment">        2) 映射文件名要与Dao接口的简单类名相同</span></span><br><span class="line"><span class="comment">        3) 映射文件的&lt;mapper/&gt;标签的namespace属性值为Dao接口的全限定性类名</span></span><br><span class="line"><span class="comment">        4) 使用动态Mapper</span></span><br><span class="line"><span class="comment">            满足以上四个条件，那么这里的name属性值就可以填写Dao接口所在的包名</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">"com.abc.dao"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>日志显示配置文件log4j.properties</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">##define an appender named console</span><br><span class="line">log4j.appender.console=org.apache.log4j.ConsoleAppender</span><br><span class="line">#The Target value is System.out or System.err</span><br><span class="line">log4j.appender.console.Target=System.out</span><br><span class="line">#set the layout type of the apperder</span><br><span class="line">log4j.appender.console.layout=org.apache.log4j.PatternLayout</span><br><span class="line">#set the layout format pattern</span><br><span class="line">log4j.appender.console.layout.ConversionPattern=[%-5p] %m%n</span><br><span class="line"></span><br><span class="line">##define a logger</span><br><span class="line">#log4j.rootLogger=TRACE,console</span><br><span class="line">log4j.logger.com.abc.dao.INewslabelDao=debug,console</span><br></pre></td></tr></table></figure><ul><li>实体类Newslabel.java</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.abc.beans;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jdk.nashorn.internal.objects.annotations.Setter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * company: www.abc.com</span></span><br><span class="line"><span class="comment"> * Author: Administrator</span></span><br><span class="line"><span class="comment"> * Create Data: 2019/9/25 0025</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//以一方为主，关联属性定义到一方</span></span><br><span class="line">    <span class="comment">//作为一方</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Newslabel</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//关联属性</span></span><br><span class="line">    <span class="keyword">private</span> Set&lt;Newslabel&gt; children;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Newslabel</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Newslabel</span><span class="params">(String name, Set&lt;Newslabel&gt; children)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.children = children;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Set&lt;Newslabel&gt; <span class="title">getChildren</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> children;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setChildren</span><span class="params">(Set&lt;Newslabel&gt; children)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.children = children;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Newslabel&#123;"</span> +</span><br><span class="line">                <span class="string">"id="</span> + id +</span><br><span class="line">                <span class="string">", name='"</span> + name + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", children="</span> + children +</span><br><span class="line">                <span class="string">'&#125;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>查询的接口INewslabelDao.java</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.abc.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.abc.beans.Newslabel;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * company: www.abc.com</span></span><br><span class="line"><span class="comment"> * Author: Administrator</span></span><br><span class="line"><span class="comment"> * Create Data: 2019/9/25 0025</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">INewslabelDao</span> </span>&#123;</span><br><span class="line">    <span class="function">Newslabel <span class="title">selectNewslabelById</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>映射文件INewslabelDao.xml</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE mapper</span></span><br><span class="line"><span class="meta">        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"</span></span><br><span class="line"><span class="meta">        "http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"com.abc.dao.INewslabelDao"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--查询栏目及其子孙栏目的信息--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--多表单独查询--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectNewslabeByParent"</span> <span class="attr">resultMap</span>=<span class="string">"newlabelMap"</span>&gt;</span></span><br><span class="line">        select id,name from newslabel where pid = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"newlabelMap"</span> <span class="attr">type</span>=<span class="string">"Newslabel"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">"id"</span> <span class="attr">property</span>=<span class="string">"id"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"name"</span> <span class="attr">property</span>=<span class="string">"name"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">"children"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">ofType</span>=<span class="string">"Newslabel"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">select</span>=<span class="string">"selectNewslabeByParent"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">column</span>=<span class="string">"id"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectNewslabelById"</span> <span class="attr">resultMap</span>=<span class="string">"newlabelMap"</span>&gt;</span></span><br><span class="line">        select id,name from newslabel where id = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>工具类MyBatisUtils.java</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.abc.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.io.Resources;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyBatisUtil</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> SqlSessionFactory factory = <span class="keyword">null</span>;</span><br><span class="line">    <span class="comment">//SqlSessionFactory是重量级组件，把它定义为单例对象</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> SqlSession <span class="title">getSqlSession</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (factory == <span class="keyword">null</span>)&#123;</span><br><span class="line">            factory = <span class="keyword">new</span> SqlSessionFactoryBuilder().build(Resources.getResourceAsStream(<span class="string">"mybatis.xml"</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> factory.openSession();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>测试类MyTest.java</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.abc;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.junit.Assert.assertTrue;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.abc.beans.Newslabel;</span><br><span class="line"><span class="keyword">import</span> com.abc.dao.INewslabelDao;</span><br><span class="line"><span class="keyword">import</span> com.abc.utils.MyBatisUtil;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.junit.After;</span><br><span class="line"><span class="keyword">import</span> org.junit.Before;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyTest</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Rigorous Test :-)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    SqlSession session = <span class="keyword">null</span>;</span><br><span class="line">    INewslabelDao newslabelDao = <span class="keyword">null</span>;</span><br><span class="line">    <span class="meta">@Before</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">before</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        session = MyBatisUtil.getSqlSession();</span><br><span class="line">        newslabelDao = session.getMapper(INewslabelDao.class);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@After</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">after</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (session != <span class="keyword">null</span>)&#123;</span><br><span class="line">            session.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//查询栏目及其子孙栏目的信息</span></span><br><span class="line">    <span class="comment">//多表单独查询</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test01</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Newslabel newslabel = newslabelDao.selectNewslabelById(<span class="number">1</span>);</span><br><span class="line">        System.out.println(newslabel);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="运行结果"><a href="#运行结果" class="headerlink" title="运行结果"></a>运行结果</h3><p><img src="https://s2.ax1x.com/2019/10/10/u7kZz8.png" alt="u7kZz8.png"></p><h2 id="只查询子孙栏目"><a href="#只查询子孙栏目" class="headerlink" title="只查询子孙栏目"></a>只查询子孙栏目</h2><blockquote><p>以上代码不变, 变的是映射配置文件</p><p>互相嵌套, 直接通过pid查询</p></blockquote><ul><li>INewslabelDao.xml</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE mapper</span></span><br><span class="line"><span class="meta">        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"</span></span><br><span class="line"><span class="meta">        "http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"com.abc.dao.INewslabelDao"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--查询栏目的子孙栏目的信息--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--多表单独查询--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectNewslabelByParent"</span> <span class="attr">resultMap</span>=<span class="string">"newlabelMap"</span>&gt;</span></span><br><span class="line">        select id,name from newslabel where pid = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"newlabelMap"</span> <span class="attr">type</span>=<span class="string">"Newslabel"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">"id"</span> <span class="attr">property</span>=<span class="string">"id"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"name"</span> <span class="attr">property</span>=<span class="string">"name"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">"children"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">ofType</span>=<span class="string">"Newslabel"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">select</span>=<span class="string">"selectNewslabelByParent"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">column</span>=<span class="string">"id"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="孙栏目-gt-子栏目-gt-父栏目"><a href="#孙栏目-gt-子栏目-gt-父栏目" class="headerlink" title="孙栏目 -&gt; 子栏目 -&gt; 父栏目"></a>孙栏目 -&gt; 子栏目 -&gt; 父栏目</h2><ul><li>将实体类中的children 换成Newslabel parent</li><li>映射文件INewslabelDao.xml<ul><li>因为是父栏目不再是一个集合, 使用association</li></ul></li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE mapper</span></span><br><span class="line"><span class="meta">        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"</span></span><br><span class="line"><span class="meta">        "http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"com.abc.dao.INewslabelDao"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--查询栏目及其父辈栏目的信息--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--多表单独查询--&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--&lt;select id="selectNewslabelByChild" resultMap="newslabelMap"&gt;</span></span><br><span class="line"><span class="comment">        select id,name,pid from newslabel where id = #&#123;xx&#125;</span></span><br><span class="line"><span class="comment">    &lt;/select&gt;--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"newslabelMap"</span> <span class="attr">type</span>=<span class="string">"Newslabel"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">"id"</span> <span class="attr">property</span>=<span class="string">"id"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"name"</span> <span class="attr">property</span>=<span class="string">"name"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">"parent"</span></span></span><br><span class="line"><span class="tag">                     <span class="attr">javaType</span>=<span class="string">"Newslabel"</span></span></span><br><span class="line"><span class="tag">                     <span class="attr">select</span>=<span class="string">"selectNewslabelById"</span></span></span><br><span class="line"><span class="tag">                     <span class="attr">column</span>=<span class="string">"pid"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectNewslabelById"</span> <span class="attr">resultMap</span>=<span class="string">"newslabelMap"</span>&gt;</span></span><br><span class="line">        select id,name,pid from newslabel where id=#&#123;xx&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>数据库查询思路:</strong></p><blockquote><p>首先查询一个孙栏目通过id,</p><p>select * from newslabel where id = #{id}</p><p>然后找到它pid作为条件, 进行查询</p><p>select * from newslabel where id = #{pid}</p><p>然后一直这样…..查询</p></blockquote><h3 id="运行结果-1"><a href="#运行结果-1" class="headerlink" title="运行结果"></a>运行结果</h3><p><img src="https://s2.ax1x.com/2019/10/10/u7ZJAJ.png" alt="u7ZJAJ.png"></p><!-- rebuild by neat -->]]></content>
      
      
      <categories>
          
          <category> mybatis </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mybatis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>docker学习的入门</title>
      <link href="/2019/10/09/docker%E5%AD%A6%E4%B9%A0%E7%9A%84%E5%85%A5%E9%97%A8/"/>
      <url>/2019/10/09/docker%E5%AD%A6%E4%B9%A0%E7%9A%84%E5%85%A5%E9%97%A8/</url>
      
        <content type="html"><![CDATA[<!-- build time:Tue Dec 31 2019 09:54:11 GMT+0800 (CST) --><p><strong>部分内容摘自:</strong> &lt; Docker技术入门与实践第3版 &gt;</p><h2 id="核心概念"><a href="#核心概念" class="headerlink" title="核心概念"></a>核心概念</h2><h3 id="Docker镜像"><a href="#Docker镜像" class="headerlink" title="Docker镜像"></a>Docker镜像</h3><p><code>Docker镜像类似于虚拟机镜像 ,可以将它理解为一个只读的模板</code></p><blockquote><pre><code>例如,一个镜像可以包含一个基本的操作系统环境,里面仅安装了Apache(或用户需要的其他软件).可以把它称为 一个Apache镜像.镜像是创建Docker容器的基础.通过版本管理和增量的文件系统,Docker提供了一套十分简单的机制来创建和更新现有的镜像,用户甚至可以从上网上下载一个已经做好的应用镜像, 并直接使用.</code></pre></blockquote><a id="more"></a><ul><li>docker image + 命令<ul><li>build 从Dockerfile构建一个镜像</li><li>history 显示图镜像的历史信息</li><li>import 从tarball导入内容以创建文件系统镜像</li><li>inspect 显示镜像的详细信息</li><li>ls 镜像列表</li><li>pull 从远程仓库下载镜像到本地</li><li>push 将镜像上传到远程仓库</li><li>prune 批量删除镜像</li><li>rm 输出一个或多个镜像</li><li>save 保存一个或多个镜像<ul><li>docker image save nieubuntu:latest -o docker_ubuntu.tar.gz 导出镜像成压缩包</li></ul></li><li>load 导入镜像<ul><li>docker image load -i docker_ubuntu.tar.gz</li></ul></li><li>tag 创建一个镜像标签<ul><li>docker image tag 镜像id 镜像名:标签</li></ul></li></ul></li></ul><h3 id="Docker容器"><a href="#Docker容器" class="headerlink" title="Docker容器"></a>Docker容器</h3><p><code>Docker容器类似于一个轻量级的沙箱, Docker利用容器来运行和隔离应用.</code></p><blockquote><pre><code>容器是从镜像创建的应用运行实例. 它可以启动, 开始, 停止, 删除, 而这些容器都是彼此相互隔离的, 互不可见的.可以把容器开看作一个简易版的Linux系统环境(包括root用户权限, 进程空间, 用户空间和网络空间等)以及运行在其中的应用程序打包而成的盒子.</code></pre></blockquote><h3 id="Docker仓库"><a href="#Docker仓库" class="headerlink" title="Docker仓库"></a>Docker仓库</h3><p><code>Docker仓库类似于代码仓库, 是Docker集中存放镜像文件的场所.</code></p><blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&gt;有时候我们会将Docker仓库和仓库注册服务器(Registry)混为一谈, 并不严格区分. 实际上, 仓库注册服务器是存放仓库的地方, 其上往往存放着许多个仓库. 每个仓库集中存放某一类镜像, 往往包括多个镜像文件, 通过不同的标签(tag)来进行区分. 例如存放Ubuntu操作系统镜像仓库,  被称为Ubuntu仓库, 其中可能包括16.04, 18.04等不同版本的镜像. </span><br><span class="line">&gt;</span><br><span class="line">&gt;根据所存储的镜像公开分享与否, Docker仓库可以分为公开仓库(Public), 和私有仓库(Private)两种形式.</span><br><span class="line">&gt;</span><br><span class="line">&gt;目前最大的公开仓库是官方提供的Docker Hub, 其中存放者数量庞大的镜像供用户下载. 国内不少云服务器提供商(如 腾讯云, 阿里云等) 也提供了仓库 的本地源, 可以提供稳定的国内访问.</span><br><span class="line">&gt;</span><br><span class="line">&gt;当然, 用户如果不希望公开分享自己的镜像文件, Docker也支持用户在本地网络内创建一个只能自己访问的私有仓库.</span><br><span class="line">&gt;</span><br><span class="line">&gt;当用户创建了自己的镜像之后就可以使用push命令将它上传到指定的公有或者私有仓库. 这样用户下次在另外一台机器上 使用该镜像时, 只需要将其从仓库上pull下来就可以了.</span><br><span class="line">&gt;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><h2 id="Docker的安装"><a href="#Docker的安装" class="headerlink" title="Docker的安装"></a>Docker的安装</h2><ul><li><a href="http://www.lacknb.cn/2019/09/14/%E5%AE%89%E8%A3%85Docker/">Deepin安装Docker</a></li><li><a href="http://www.lacknb.cn/2019/10/09/CentOS%E5%AE%89%E8%A3%85Dokcer/">CentOS安装Dokce</a></li></ul><h2 id="容器的特点"><a href="#容器的特点" class="headerlink" title="容器的特点"></a>容器的特点</h2><blockquote><p>容器: 共用宿主机内核,容器的第一个进程直接运行服务,损耗少,启动快,性能高.</p></blockquote><blockquote><p>容器虚拟化: 不需要硬件的支持. 不需要模拟硬件, 共用宿主机的内核, 启动时间秒级(没有开机启动的流程)</p></blockquote><p>*<em>总结: *</em></p><ol><li>与宿主机使用同一个内核,性能损耗小</li><li>不需要指令级模拟</li><li>容器可以在CPU核心的本地运行命令, 不需要任何专门的解释机制</li></ol><h2 id="开机自启"><a href="#开机自启" class="headerlink" title="开机自启"></a>开机自启</h2><ul><li>systemctl enable docker</li></ul><h3 id="docker开启命令"><a href="#docker开启命令" class="headerlink" title="docker开启命令"></a>docker开启命令</h3><ul><li>systemctl start docker</li><li>service docker start</li></ul><h3 id="docker关闭命令"><a href="#docker关闭命令" class="headerlink" title="docker关闭命令"></a>docker关闭命令</h3><ul><li>systemctl stop docker</li><li>service docker stop</li></ul><h2 id="管理镜像"><a href="#管理镜像" class="headerlink" title="管理镜像"></a>管理镜像</h2><ul><li>搜索镜像<ul><li>docker search 镜像名字<ul><li>eg: docker search nginx</li></ul></li></ul></li><li>下载镜像<ul><li>docker pull 镜像名字<ul><li>docker pull nginx</li></ul></li></ul></li><li>删除镜像<ul><li>docker image rm 镜像名字</li><li>docker image rmi 镜像名字<ul><li>支持选项包括<ul><li>-f , -force : 强制删除镜像, 即使有容器依赖它;</li><li>-no-prune : 不要清理未带标签的父镜像</li></ul></li></ul></li></ul></li><li>查看镜像信息<ul><li>docker inspect 镜像名字</li></ul></li><li>使用tag命令添加镜像标签(类似于链接的作用, 或者说快捷方式)<ul><li>docker tag 镜像名字:原来的标签名 自定义镜像名:自定义标签名<ul><li>例如: docker tag ubuntu:18.04 myubuntu:latest</li></ul></li></ul></li></ul><h2 id="运行镜像"><a href="#运行镜像" class="headerlink" title="运行镜像"></a>运行镜像</h2><ul><li><p>docker run -d -p 80:80 nginx:latest</p><ul><li>run (创建并运行一个容器)</li><li>-d 放在后台运行</li><li>-p 端口映射<ul><li>前面的80是宿主机的端口</li><li>后面的80是容器的端口</li></ul></li><li>nginx docker镜像的名字</li></ul></li><li><p>docker run -it –name centos6 centos:6.9 /bin/bash</p><ul><li>-it 分配交互式的终端</li><li>–name 指定容器的名字</li><li>/bin/sh 覆盖容器的初始命令 (不填了话, 就默认执行容器的初始命令 )</li></ul></li></ul><ul><li><p>启动容器</p><ul><li><code>docker run imahe_name</code></li><li>docker run -it image_name CMD</li><li><code>docker run === docker create + docker start</code></li></ul></li><li><p>停止容器</p><ul><li><code>docker stop 容器id</code></li></ul></li><li><p>杀死容器</p><ul><li>docker kill 容器名字</li></ul></li><li><p>查看容器列表</p><ul><li><code>docker ps</code> 查看当前正在运行的容器 或者(docker container ls)</li><li><code>docker ps -a</code>查看所有状态的容器 或者(docker container ls -a)</li></ul></li><li><p>进入容器(目的, 调试, 排错)</p><ul><li><strong>docker exec</strong> -it 容器id或容器名字 /bin/bash (/bin/sh)<ul><li>会分配一个新的终端tty</li></ul></li><li>docker attach 容器id<ul><li>使用同一个终端</li></ul></li><li>nsenter (安装yum install -y util-linux 已弃用)</li></ul></li><li><p>查看所有容器的id</p><ul><li>`docker ps -a -q</li></ul></li><li><p>删除所有容器</p><ul><li><code>docker rm 倒引号 docker ps -a -q 倒引号</code></li></ul></li><li><p>当我们在容器终端时, 我们退出容器, 并让容器在后台运行</p><p><code>我们可以使用docker attach 容器id返回容器</code></p><ul><li>直接输入 exit</li><li>快捷键 <code>ctrl + p, ctrl + q</code>,</li></ul></li><li><p>查看最新使用过的容器</p><ul><li>docker ps -a l</li></ul></li><li><p>退出容器</p><ul><li><code>ctrl + d</code></li></ul></li></ul><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p><code>docker容器内的第一个进程(初始命令)必须一直处于前台运行状态,否则这个容器, 就会处于退出状态!</code></p><h2 id="apt-get仓库换成国内镜像源"><a href="#apt-get仓库换成国内镜像源" class="headerlink" title="apt-get仓库换成国内镜像源"></a>apt-get仓库换成国内镜像源</h2><ul><li><p>换成中科院的</p><ul><li><p>1、原文件备份</p><p><code>sudo cp /etc/apt/sources.list /etc/apt/sources.list.bak</code></p><p>2、编辑源列表文件</p><p><code>sudo vim /etc/apt/sources.list</code></p><p>3、将原来的列表删除，添加如下内容（中科大镜像源）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">deb http://mirrors.ustc.edu.cn/ubuntu/ xenial main restricted universe multiverse</span><br><span class="line">deb http://mirrors.ustc.edu.cn/ubuntu/ xenial-security main restricted universe multiverse</span><br><span class="line">deb http://mirrors.ustc.edu.cn/ubuntu/ xenial-updates main restricted universe multiverse</span><br><span class="line">deb http://mirrors.ustc.edu.cn/ubuntu/ xenial-proposed main restricted universe multiverse</span><br><span class="line">deb http://mirrors.ustc.edu.cn/ubuntu/ xenial-backports main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.ustc.edu.cn/ubuntu/ xenial main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.ustc.edu.cn/ubuntu/ xenial-security main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.ustc.edu.cn/ubuntu/ xenial-updates main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.ustc.edu.cn/ubuntu/ xenial-proposed main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.ustc.edu.cn/ubuntu/ xenial-backports main restricted universe multiverse</span><br></pre></td></tr></table></figure><ol start="4"><li>运行 sudo ape-get update</li></ol></li></ul></li></ul><h2 id="容器的网络访问"><a href="#容器的网络访问" class="headerlink" title="容器的网络访问"></a>容器的网络访问</h2><p>电脑-pc —&gt; 虚拟机 —&gt; docker容器(多个)</p><p>端口映射</p><ul><li>指定映射(docker 会自动添加一条iptables规则来实现端口映射)<ul><li>-p hostPort:containerPort</li><li>-p ip:hostPort:containerPort 多个容器都想使用80端口</li><li>-p ip::containerPort(随机端口)</li><li>-p hostPort:containerPort:udp<ul><li>默认都是tcp,</li></ul></li><li>-p 81:80 -p 443:443 可以指定多个 -p</li></ul></li><li>随机映射<ul><li>docker run -p (随机端口)</li></ul></li></ul><h2 id="容器的数据卷挂载"><a href="#容器的数据卷挂载" class="headerlink" title="容器的数据卷挂载"></a>容器的数据卷挂载</h2><blockquote><p>-v 卷名:/data</p><p>-v /src(宿主机的目录):/dist(容器的目录)</p></blockquote><ul><li>docker run -d -p 80:80 –volume(或者 -v ) /opt/nginx:/usr/share/nginx/html<ul><li>/usr/share/nginx/html是nginx容器中默认的站点目录, 将这个目录挂载到当前主机的/opt/nginx目录下</li></ul></li><li>数据卷容器<ul><li>–volumes-from (跟某一个已经存在的容器挂载相同的卷)</li></ul></li><li>多端口多站点nginx<ul><li><img src="https://s2.ax1x.com/2019/10/16/KF62RS.png" alt="KF62RS.png"></li><li>进容器创建.conf文件, 自定义server{***}</li></ul></li></ul><h2 id="查看当前linux是什么版本的"><a href="#查看当前linux是什么版本的" class="headerlink" title="查看当前linux是什么版本的"></a>查看当前linux是什么版本的</h2><ul><li><code>cat /etc/os-release</code></li></ul><h2 id="手动制作镜像"><a href="#手动制作镜像" class="headerlink" title="手动制作镜像"></a>手动制作镜像</h2><ul><li>启动一个基本的容器<ul><li><code>docker run -it -p 22:22 centos:6.9 /bin/bash</code></li></ul></li><li>修改root密码 <code>echo &#39;123456&#39;|passwd --stdin root</code></li><li>安装ssh<ul><li>yum install openssh-server -y</li><li>service sshd restart (start)</li></ul></li><li>docker container commit 容器id centos6.9_ssh:v1</li><li>测试镜像功能<ul><li><code>docker run -it -d -p 22:22 centos6.9_ssh:v1 /usr/sbin/sshd -D</code></li><li>宿主机 ssh 连接, 测试是否连接成功</li></ul></li></ul><h2 id="手动制作一个支持ssh-nginx的镜像"><a href="#手动制作一个支持ssh-nginx的镜像" class="headerlink" title="手动制作一个支持ssh+nginx的镜像"></a>手动制作一个支持ssh+nginx的镜像</h2><ul><li><code>docker run -it -d -p 80:80 -p 22:22 --name nginx_ssh centos6.9_ssh:v1 /bin/bash</code></li><li>安装nginx<ul><li>首先配置repo<ul><li><code>curl -o /etc/yum.repos.d/CentOs-Base.repo http://mirrors.aliyun.com/repo/Centos-6.repo</code></li><li><code>curl -o /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-6.repo</code></li></ul></li><li>启动nginx<ul><li>service start nginx</li></ul></li></ul></li><li>使用docker container commit id xxxx</li></ul><h2 id="开机自启-1"><a href="#开机自启-1" class="headerlink" title="开机自启"></a>开机自启</h2><ul><li>systemctl enable docker</li></ul><h3 id="docker开启命令-1"><a href="#docker开启命令-1" class="headerlink" title="docker开启命令"></a>docker开启命令</h3><ul><li>systemctl start docker</li><li>service docker start</li></ul><h3 id="docker关闭命令-1"><a href="#docker关闭命令-1" class="headerlink" title="docker关闭命令"></a>docker关闭命令</h3><ul><li>systemctl stop docker</li><li>service docker stop</li></ul><!-- rebuild by neat -->]]></content>
      
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CentOS安装Dokcer</title>
      <link href="/2019/10/09/CentOS%E5%AE%89%E8%A3%85Dokcer/"/>
      <url>/2019/10/09/CentOS%E5%AE%89%E8%A3%85Dokcer/</url>
      
        <content type="html"><![CDATA[<!-- build time:Tue Dec 31 2019 09:54:11 GMT+0800 (CST) --><h2 id="原文链接-点击跳转"><a href="#原文链接-点击跳转" class="headerlink" title="原文链接,点击跳转"></a><a href="https://www.cnblogs.com/yufeng218/p/8370670.html" target="_blank" rel="noopener">原文链接,点击跳转</a></h2><p>Docker从1.13版本之后采用时间线的方式作为版本号，分为社区版CE和企业版EE。</p><p>社区版是免费提供给个人开发者和小型团体使用的，企业版会提供额外的收费服务，比如经过官方测试认证过的基础设施、容器、插件等。</p><p>社区版按照stable和edge两种方式发布，每个季度更新stable版本，如17.06，17.09；每个月份更新edge版本，如17.09，17.10。</p><h2 id="一、安装docker"><a href="#一、安装docker" class="headerlink" title="一、安装docker"></a>一、安装docker</h2><p>1、Docker 要求 CentOS 系统的内核版本高于 3.10 ，查看本页面的前提条件来验证你的CentOS 版本是否支持 Docker 。</p><p>通过 <strong>uname -r</strong> 命令查看你当前的内核版本</p><a id="more"></a><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ uname -r</span><br></pre></td></tr></table></figure><p>2、使用 <code>root</code> 权限登录 Centos。确保 yum 包更新到最新。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo yum update</span><br></pre></td></tr></table></figure><p>3、卸载旧版本(如果安装过旧版本的话)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo yum remove docker  docker-common docker-selinux docker-engine</span><br></pre></td></tr></table></figure><p>4、安装需要的软件包， yum-util 提供yum-config-manager功能，另外两个是devicemapper驱动依赖的</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo yum install -y yum-utils device-mapper-persistent-data lvm2</span><br></pre></td></tr></table></figure><p>5、设置yum源</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo</span><br></pre></td></tr></table></figure><p><img src="https://s2.ax1x.com/2019/10/09/uIksN6.png" alt="img"></p><p>6、可以查看所有仓库中所有docker版本，并选择特定版本安装</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yum list docker-ce --showduplicates | sort -r</span><br></pre></td></tr></table></figure><p><img src="https://s2.ax1x.com/2019/10/09/uIkIEt.png" alt="img"></p><p>7、安装docker</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo yum install docker-ce  #由于repo中默认只开启stable仓库，故这里安装的是最新稳定版17.12.0</span><br><span class="line">$ sudo yum install &lt;FQPN&gt;  # 例如：sudo yum install docker-ce-17.12.0.ce</span><br></pre></td></tr></table></figure><p><img src="https://s2.ax1x.com/2019/10/09/uIkXuj.png" alt="img"></p><p>8、启动并加入开机启动</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo systemctl start docker</span><br><span class="line">$ sudo systemctl enable docker</span><br></pre></td></tr></table></figure><p>9、验证安装是否成功(有client和service两部分表示docker安装启动都成功了)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker version</span><br></pre></td></tr></table></figure><p><img src="https://s2.ax1x.com/2019/10/09/uIkjDs.png" alt="img"></p><h2 id="二、问题"><a href="#二、问题" class="headerlink" title="二、问题"></a>二、问题</h2><p>1、因为之前已经安装过旧版本的docker，在安装的时候报错如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Transaction check error:</span><br><span class="line">  file /usr/bin/docker from install of docker-ce-17.12.0.ce-1.el7.centos.x86_64 conflicts with file from package docker-common-2:1.12.6-68.gitec8512b.el7.centos.x86_64</span><br><span class="line">  file /usr/bin/docker-containerd from install of docker-ce-17.12.0.ce-1.el7.centos.x86_64 conflicts with file from package docker-common-2:1.12.6-68.gitec8512b.el7.centos.x86_64</span><br><span class="line">  file /usr/bin/docker-containerd-shim from install of docker-ce-17.12.0.ce-1.el7.centos.x86_64 conflicts with file from package docker-common-2:1.12.6-68.gitec8512b.el7.centos.x86_64</span><br><span class="line">  file /usr/bin/dockerd from install of docker-ce-17.12.0.ce-1.el7.centos.x86_64 conflicts with file from package docker-common-2:1.12.6-68.gitec8512b.el7.centos.x86_64</span><br></pre></td></tr></table></figure><p>2、卸载旧版本的包</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo yum erase docker-common-2:1.12.6-68.gitec8512b.el7.centos.x86_64</span><br></pre></td></tr></table></figure><p><img src="https://s2.ax1x.com/2019/10/09/uIAP8U.png" alt="img"></p><p>3、再次安装docker</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo yum install docker-ce</span><br></pre></td></tr></table></figure><h2 id="更换镜像源"><a href="#更换镜像源" class="headerlink" title="更换镜像源"></a>更换镜像源</h2><p><strong>请移步</strong>: <a href="https://www.lacknb.cn/2019/09/14/%E5%AE%89%E8%A3%85Docker/">点击跳转</a></p><!-- rebuild by neat -->]]></content>
      
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>linux常用命令</title>
      <link href="/2019/10/09/linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"/>
      <url>/2019/10/09/linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<!-- build time:Tue Dec 31 2019 09:54:11 GMT+0800 (CST) --><h1 id="linux常用命令"><a href="#linux常用命令" class="headerlink" title="linux常用命令"></a>linux常用命令</h1><h2 id="多个linux服务器之间的免密登录"><a href="#多个linux服务器之间的免密登录" class="headerlink" title="多个linux服务器之间的免密登录"></a>多个linux服务器之间的免密登录</h2><p>*<em>三台服务器如下: *</em></p><table><thead><tr><th align="center">IP</th><th align="center">Release</th><th align="center">Hostname</th></tr></thead><tbody><tr><td align="center">192.168.100.1</td><td align="center">centos</td><td align="center">server-01</td></tr><tr><td align="center">192.168.100.2</td><td align="center">centos</td><td align="center">server-02</td></tr><tr><td align="center">192.168.100.3</td><td align="center">centos</td><td align="center">server-03</td></tr></tbody></table><blockquote><p>实现server-01免密登录server-02和server-03</p></blockquote><a id="more"></a><ol><li><p>在服务器server-01中运行指令, 然后一路回车即可.</p><p>指令:</p><figure class="highlight plain"><figcaption><span>-i</span><a href="/root/.ssh/id_rsa.pub">root@192.168.100.2```</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">```bash</span><br><span class="line">root@server-01:/#  ssh-keygen -t rsa</span><br><span class="line"></span><br><span class="line">Generating public/private rsa key pair.</span><br><span class="line">Enter file in which to save the key (/root/.ssh/id_rsa):  #回车代表无需密码登录</span><br><span class="line"></span><br><span class="line">Enter passphrase (empty for no passphrase):  #回车</span><br><span class="line"></span><br><span class="line">Enter same passphrase again: </span><br><span class="line">#回车</span><br><span class="line"></span><br><span class="line">Your identification has been saved in /root/.ssh/id_rsa. #私匙</span><br><span class="line">Your public key has been saved in /root/.ssh/id_rsa.pub. #公匙</span><br><span class="line"></span><br><span class="line">The key fingerprint is:</span><br><span class="line">SHA256:*************************************** root@localhost.localdomain</span><br><span class="line">The key&apos;s randomart image is:</span><br><span class="line">+---[RSA 2048]----+</span><br><span class="line">|o.**o.           |</span><br><span class="line">|=. ==.           |</span><br><span class="line">|==++.= +         |</span><br><span class="line">|o.=.+ B          |</span><br><span class="line">|oo ... .S        |</span><br><span class="line">|oo.. . .         |</span><br><span class="line">|+.o.  .          |</span><br><span class="line">|BE++             |</span><br><span class="line">|OO+..            |</span><br><span class="line">+----[SHA256]-----+</span><br><span class="line"></span><br><span class="line">root@server-01:/#  ssh-copy-id -i /root/.ssh/id_rsa.pub root@192.168.100.2</span><br><span class="line"></span><br><span class="line">/usr/bin/ssh-copy-id: INFO: Source of key(s) to be installed: &quot;/root/.ssh/id_rsa.pub&quot;</span><br><span class="line">The authenticity of host &apos;192.168.100.2 (192.168.100.2)&apos; can&apos;t be established.</span><br><span class="line">ECDSA key fingerprint is SHA256:t3gHkrI7nBW2HNoRoD/9CYAIk1a4DDZ8LybenqXukms.</span><br><span class="line">ECDSA key fingerprint is MD5:d2:11:22:73:ba:e7:67:ad:80:e6:c0:53:32:a6:2e:94.</span><br><span class="line">Are you sure you want to continue connecting (yes/no)?  yes</span><br><span class="line">#这里直接回答 yes</span><br><span class="line"></span><br><span class="line">/usr/bin/ssh-copy-id: INFO: attempting to log in with the new key(s), to filter out any that are already installed</span><br><span class="line">/usr/bin/ssh-copy-id: INFO: 1 key(s) remain to be installed -- if you are prompted now it is to install the new keys</span><br><span class="line">root@192.168.100.2&apos;s password:  # 这里输入server-02的root密码</span><br><span class="line"></span><br><span class="line">Number of key(s) added: 1</span><br><span class="line"></span><br><span class="line">Now try logging into the machine, with:   &quot;ssh &apos;root@192.168.100.2&apos;&quot;</span><br><span class="line">and check to make sure that only the key(s) you wanted were added.</span><br></pre></td></tr></table></figure><p></p></li></ol><blockquote><p>连接另外一台操作也是一样的</p><p>ssh-copy-id -i /root/.ssh/id_rsa.pub <a href="mailto:root@192.168.100.3" target="_blank" rel="noopener">root@192.168.100.3</a></p><p>后续操作也是一样的….</p></blockquote><h2 id="linux之间传输文件"><a href="#linux之间传输文件" class="headerlink" title="linux之间传输文件"></a>linux之间传输文件</h2><ul><li>scp指令</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">scp 本机文件 服务器地址@root:服务器的路径</span><br><span class="line"><span class="comment"># 例如, 将douyu.py上传到服务器中/usr/local/python的路径下</span></span><br><span class="line">scp ./douyu.py 192.168.100.2:/usr/<span class="built_in">local</span>/python/</span><br></pre></td></tr></table></figure><h2 id="查看正在运行的任务"><a href="#查看正在运行的任务" class="headerlink" title="查看正在运行的任务"></a>查看正在运行的任务</h2><ul><li>ps<ul><li>ps -ef|grep 任务名 // 搜索正在执行任务, -ef 显示详细信息</li><li>ps -A 显示当前所有正在运行的任务</li></ul></li><li>tail 尾部</li><li>head 头部<ul><li>ps -ef|tail -5 取最后5个正在运行的任务</li><li>ps -ef|head -5 取前4个正在运行的任务</li></ul></li><li>netstat -tnlp 查看当前正在使用的端口号</li></ul><h2 id="screen命令-使任务在服务器退出之后保持运行"><a href="#screen命令-使任务在服务器退出之后保持运行" class="headerlink" title="screen命令, 使任务在服务器退出之后保持运行"></a>screen命令, 使任务在服务器退出之后保持运行</h2><p><strong>安装命令</strong>:</p><figure class="highlight plain"><figcaption><span>install screen -y ```</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">```bash</span><br><span class="line">[root@localhost /]# rpm -qa|grep screen</span><br><span class="line">screen-4.1.0-0.25.20120314git3c2946.el7.x86_64</span><br><span class="line"># 显示这个, 则已经安装成功</span><br></pre></td></tr></table></figure><ul><li>创建一个名字叫happy的会话<ul><li><code>screen -S happy</code></li></ul></li><li>查看已有会话<ul><li><code>screen -ls</code></li></ul></li><li>连接会话<ul><li><code>screen -r happy</code></li></ul></li><li>保存当前会话,并退出<ul><li>第一种方式<ul><li><code>screen -d 会话的名字</code></li></ul></li><li>第二种方式<ul><li><code>ctrl + a</code></li><li><code>ctrl + d</code></li></ul></li></ul></li></ul><h2 id="centos的防火墙的开启与关闭"><a href="#centos的防火墙的开启与关闭" class="headerlink" title="centos的防火墙的开启与关闭"></a>centos的防火墙的开启与关闭</h2><ul><li><p>开启端口</p><p><code>firewall-cmd --zone=public --add-port=80/tcp --permanent</code></p></li><li><p>查询端口号80 是否开启：</p><p><code>firewall-cmd --query-port=80/tcp</code></p></li><li><p>重启防火墙：</p><p><code>firewall-cmd --reload</code></p></li><li><p>查询有哪些端口是开启的:</p><p><code>firewall-cmd --list-port</code></p></li></ul><p>命令含义：</p><p>–add-port=80/tcp #添加端口，格式为：端口/通讯协议<br>–permanent #永久生效，没有此参数重启后失效</p><p>关闭firewall：</p><p><code>systemctl stop firewalld.service #停止firewall</code></p><p><code>systemctl disable firewalld.service #禁止firewall开机启动</code></p><h2 id="apt-get-update报错"><a href="#apt-get-update报错" class="headerlink" title="apt-get update报错"></a>apt-get update报错</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">W: Unknown Multi-Arch type &apos;no&apos; for package &apos;compiz-core&apos;x</span><br><span class="line">W: Unknown Multi-Arch type &apos;no&apos; for package &apos;compiz-gnome&apos;</span><br><span class="line">W: Ignoring Provides line with DepCompareOp for package xserver-xorg</span><br><span class="line">W: Ignoring Provides line with DepCompareOp for package php-math-biginteger</span><br><span class="line">W: Ignoring Provides line with DepCompareOp for package pypy-cffi</span><br><span class="line">W: Ignoring Provides line with DepCompareOp for package pypy-cffi-backend-api-max</span><br><span class="line">W: Ignoring Provides line with DepCompareOp for package pypy-cffi-backend-api-min</span><br><span class="line">W: You may want to run apt-get update to correct these problems</span><br></pre></td></tr></table></figure><p>解决方法: <code>apt-get install -f apt</code></p><!-- rebuild by neat -->]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Maven入门学习</title>
      <link href="/2019/10/08/Maven%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0/"/>
      <url>/2019/10/08/Maven%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<!-- build time:Tue Dec 31 2019 09:54:11 GMT+0800 (CST) --><h2 id="Maven简介"><a href="#Maven简介" class="headerlink" title="Maven简介"></a>Maven简介</h2><p>​ Apeache Maven是一种纯Java编写的、开源的、跨平台的、标准化的、基于项目对象模型。</p><p>​ 跨平台：跨os平台、跨IDE(集成开发环境)平台。例如：在Eclipse上写的项目如果要导入到idea中，比较麻烦，而直接使用maven项目，十分顺利。</p><p>​ 标准化：项目构建标准化、项目结构标准化。</p><p>​ 用户画像：更多的属性组成用户画像。比如：你在一个平台上使用的时间越长，这个平台就会根据大数据更加了解你。</p><a id="more"></a><h2 id="Maven工作原理"><a href="#Maven工作原理" class="headerlink" title="Maven工作原理"></a>Maven工作原理</h2><p><img src="https://s2.ax1x.com/2019/10/08/uWcbJx.png" alt="uWcbJx.png"></p><p><img src="https://s2.ax1x.com/2019/10/08/uWRfQf.png" alt="uWRfQf.png"></p><ul><li>Dependency代表依赖：在引入依赖时，先在本地库中查找，如果没有在向上一层寻找，直至找到，再返回到本地的仓库。如果第二次再使用时，直接在本地仓库就可以找到。在公司中，如果一个同事下载好了，会保存到公司的局域网中，会节约带宽。</li><li>防火墙：一般就是对ip和端口号的规则的集合，符合规则或者不负责就可以过或者不能过。</li></ul><h2 id="Maven的安装配置"><a href="#Maven的安装配置" class="headerlink" title="Maven的安装配置"></a>Maven的安装配置</h2><ul><li>maven下载: <a href="http://maven.apache.org/download.cgi" target="_blank" rel="noopener"><a href="http://maven.apache.org/download.cgi" target="_blank" rel="noopener">http://maven.apache.org/download.cgi</a></a></li><li>配置环境变量MAVEN_HOME</li><li>修改conf/settings.xml配置文件,<ul><li>换成国内镜像</li><li>自定义默认代码仓库的位置</li></ul></li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mirror</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span>&gt;</span>alimaven<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>central<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>aliyun maven<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.aliyun.com/nexus/content/repositories/central/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">localRepository</span>&gt;</span>/media/nianshao/59D5FCE97201B8A75/java/repository<span class="tag">&lt;/<span class="name">localRepository</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>maven测试命令<ul><li>mvn help:system</li></ul></li></ul><h2 id="Maven的项目结构"><a href="#Maven的项目结构" class="headerlink" title="Maven的项目结构"></a>Maven的项目结构</h2><p><img src="https://s2.ax1x.com/2019/10/08/uW2Oqe.png" alt="uW2Oqe.png"></p><h2 id="package包的命名"><a href="#package包的命名" class="headerlink" title="package包的命名"></a>package包的命名</h2><p><strong>一个项目中的包的名称一般可以分为四到五级：</strong></p><ul><li>第一级：甲方公司域名的倒序，或开发方公司域名的倒序。为了保证项目在全球是唯一的。例如，cn.edu.aynu</li><li>第二级：项目名称，为了保证项目在甲方公司中的唯一性。例如，cn.edu.aynu.sms。</li><li>第三级：项目模块名称，为了保证在当前项目中资源的唯一性。例如，cn.edu.aynu.sms.aaa.bbb.ccc</li><li>第四级：功能顶层包，为了区分各种资源的功能，例如，cn.edu.aynu.sms.aaa.bbb.ccc.service cn.edu.aynu.sms.aaa.bbb.ccc.dao</li><li>第五级：impl包，用于存放接口实现类，例如，cn.edu.aynu.sms.aaa.bbb.ccc.service.impl</li></ul><h2 id="Maven的构建命令"><a href="#Maven的构建命令" class="headerlink" title="Maven的构建命令"></a>Maven的构建命令</h2><ul><li><p>mvn compile</p><ul><li>编译项目</li></ul></li><li><p>mvn test</p><ul><li>test目录测试</li></ul></li><li><p>mvn clean</p><ul><li>清除已经编译过的代码, 即target目录</li></ul><p><strong>组合命令:</strong></p></li><li><p>mvn clean test</p></li><li><p>mvn clean package</p><ul><li>打包</li><li>· 将编译好的代码打包成为可发布的格式，如 JAR，WAR</li></ul></li><li><p>mvn clean install</p><ul><li>安装到本地仓库</li><li>· 将包安装至本地仓库，以让其它项目依赖</li></ul></li></ul><h2 id="Maven的生命周期"><a href="#Maven的生命周期" class="headerlink" title="Maven的生命周期"></a>Maven的生命周期</h2><h3 id="Maven的生命周期与项目生命周期"><a href="#Maven的生命周期与项目生命周期" class="headerlink" title="Maven的生命周期与项目生命周期"></a>Maven的生命周期与项目生命周期</h3><p>​ 一个项目的构建过程需要经历被编译、被测试、被打包、被发布等生命阶段。这些项目生命阶段的构建是由谁完成的呢？是由Maven生命周期的各个阶段完成的。</p><p>​ Maven只所以非常强大的一个重要的原因是，它拥有十分完善的生命周期模型(Lifecycle)。Maven的生命周期是对所有项目的构建过程进行的抽象和统一，包含了项目的清理、初始化、编译、测试、打包、集成测试、验证、部署和站点生成等几乎所有的构建步骤。所以，Maven的生命周期是用于管理项目生命周期的。</p><p>​ Maven有三套相互独立的生命周期，分别是Clean、Default和Site，分别用于完成三类完全不同的任务。每个生命周期又包含多个生命阶段（Phase），这些生命阶段是有时间先后顺序的。即后面的阶段的执行，必定是执行过了前面的阶段。</p><h3 id="Default生命周期"><a href="#Default生命周期" class="headerlink" title="Default生命周期"></a>Default生命周期</h3><pre><code>Default生命周期是Maven最重要的生命周期，用于构建项目，其中定义了构建项目时所需要执行的所有阶段。下面列出了比较重要和常用的阶段。</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">validate</span><br><span class="line">generate-sources</span><br><span class="line">process-sources</span><br><span class="line">generate-resources</span><br><span class="line">process-resources   复制并处理资源文件，至目标目录，准备打包</span><br><span class="line">compile   编译项目的源代码</span><br><span class="line">process-classes</span><br><span class="line">generate-test-sources</span><br><span class="line">process-test-sources</span><br><span class="line">generate-test-resources</span><br><span class="line">process-test-resources   复制并处理资源文件，至目标测试目录</span><br><span class="line">test-compile   编译测试源代码</span><br><span class="line">process-test-classes</span><br><span class="line">test   使用合适的单元测试框架运行测试。这些测试代码不会被打包或部署</span><br><span class="line">prepare-package</span><br><span class="line">package   将编译好的代码打包成为可发布的格式，如 JAR，WAR</span><br><span class="line">pre-integration-test</span><br><span class="line">integration-test</span><br><span class="line">post-integration-test</span><br><span class="line">verify</span><br><span class="line">install   将包安装至本地仓库，以让其它项目依赖</span><br><span class="line">deploy   将最终的包复制到远程的仓库，以让其它开发人员与项目共享</span><br></pre></td></tr></table></figure><h3 id="Clean生命周期"><a href="#Clean生命周期" class="headerlink" title="Clean生命周期"></a>Clean生命周期</h3><p>​ Clean生命周期用于清除之前指令执行结果 。其包含三个生命阶段。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pre-clean   执行一些需要在clean之前完成的工作</span><br><span class="line">clean   移除所有上一次构建生成的文件</span><br><span class="line">post-clean   执行一些需要在clean之后立刻完成的工作</span><br></pre></td></tr></table></figure><h3 id="Site生命周期"><a href="#Site生命周期" class="headerlink" title="Site生命周期"></a>Site生命周期</h3><p>​ Site生命周期用于建立和发布项目站点。其包含四个生命阶段。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pre-site   执行一些需要在生成站点文档之前完成的工作</span><br><span class="line">site   生成项目的站点文档</span><br><span class="line">post-site   执行一些需要在生成站点文档之后完成的工作，并且为部署做准备</span><br><span class="line">site-deploy   将生成的站点文档部署到特定的服务器上</span><br></pre></td></tr></table></figure><h2 id="项目依赖管理"><a href="#项目依赖管理" class="headerlink" title="项目依赖管理"></a>项目依赖管理</h2><h3 id="直接依赖与间接依赖"><a href="#直接依赖与间接依赖" class="headerlink" title="直接依赖与间接依赖"></a>直接依赖与间接依赖</h3><h3 id="以来传递"><a href="#以来传递" class="headerlink" title="以来传递"></a>以来传递</h3><h3 id="jar包分类"><a href="#jar包分类" class="headerlink" title="jar包分类"></a>jar包分类</h3><h4 id="（1）编译、运行、打包时均不需要的Jar包"><a href="#（1）编译、运行、打包时均不需要的Jar包" class="headerlink" title="（1）编译、运行、打包时均不需要的Jar包"></a><strong>（1）编译、运行、打包时均不需要的Jar包</strong></h4><h4 id="（2）编译、运行时需要，但打包时不需要的Jar包"><a href="#（2）编译、运行时需要，但打包时不需要的Jar包" class="headerlink" title="（2）编译、运行时需要，但打包时不需要的Jar包"></a><strong>（2）编译、运行时需要，但打包时不需要的Jar包</strong></h4><h4 id="（3）编译时不需要，但运行、打包时需要的Jar包"><a href="#（3）编译时不需要，但运行、打包时需要的Jar包" class="headerlink" title="（3）编译时不需要，但运行、打包时需要的Jar包"></a><strong>（3）编译时不需要，但运行、打包时需要的Jar包</strong></h4><h4 id="（4）编译、运行、打包时均需要的Jar包"><a href="#（4）编译、运行、打包时均需要的Jar包" class="headerlink" title="（4）编译、运行、打包时均需要的Jar包"></a><strong>（4）编译、运行、打包时均需要的Jar包</strong></h4><h3 id="依赖传递范围的设定"><a href="#依赖传递范围的设定" class="headerlink" title="依赖传递范围的设定"></a>依赖传递范围的设定</h3><h4 id="（1）test"><a href="#（1）test" class="headerlink" title="（1）test"></a><strong>（1）test</strong></h4><h4 id="（2）provided"><a href="#（2）provided" class="headerlink" title="（2）provided"></a><strong>（2）provided</strong></h4><h4 id="（3）runtime"><a href="#（3）runtime" class="headerlink" title="（3）runtime"></a><strong>（3）runtime</strong></h4><h4 id="（4）-compile"><a href="#（4）-compile" class="headerlink" title="（4）**compile**"></a><strong>（4）**</strong>compile**</h4><h4 id="（5）system"><a href="#（5）system" class="headerlink" title="（5）system"></a><strong>（5）system</strong></h4><ul><li>&lt;systemPath&gt;${basedir}/lib/xxx.jar&lt;/systemPath&gt;</li></ul><h4 id="（6）import"><a href="#（6）import" class="headerlink" title="（6）import"></a><strong>（6）import</strong></h4><h3 id="可选依赖与排除依赖"><a href="#可选依赖与排除依赖" class="headerlink" title="可选依赖与排除依赖"></a>可选依赖与排除依赖</h3><h3 id="依赖冲突"><a href="#依赖冲突" class="headerlink" title="依赖冲突"></a>依赖冲突</h3><h3 id="直接依赖冲突"><a href="#直接依赖冲突" class="headerlink" title="直接依赖冲突"></a>直接依赖冲突</h3><h3 id="统一管理版本号"><a href="#统一管理版本号" class="headerlink" title="统一管理版本号"></a>统一管理版本号</h3><h3 id="依赖的继承"><a href="#依赖的继承" class="headerlink" title="依赖的继承"></a>依赖的继承</h3><h3 id="直接继承"><a href="#直接继承" class="headerlink" title="直接继承"></a>直接继承</h3><h3 id="可选继承"><a href="#可选继承" class="headerlink" title="可选继承"></a>可选继承</h3><h3 id="聚合"><a href="#聚合" class="headerlink" title="聚合"></a>聚合</h3><h3 id="具有可选依赖的聚合父工程"><a href="#具有可选依赖的聚合父工程" class="headerlink" title="具有可选依赖的聚合父工程"></a>具有可选依赖的聚合父工程</h3><!-- rebuild by neat -->]]></content>
      
      
      <categories>
          
          <category> maven </category>
          
      </categories>
      
      
        <tags>
            
            <tag> maven </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>mybatis多对一、一对多查询</title>
      <link href="/2019/09/23/mybatis%E5%A4%9A%E5%AF%B9%E4%B8%80%E3%80%81%E4%B8%80%E5%AF%B9%E5%A4%9A%E6%9F%A5%E8%AF%A2/"/>
      <url>/2019/09/23/mybatis%E5%A4%9A%E5%AF%B9%E4%B8%80%E3%80%81%E4%B8%80%E5%AF%B9%E5%A4%9A%E6%9F%A5%E8%AF%A2/</url>
      
        <content type="html"><![CDATA[<!-- build time:Tue Dec 31 2019 09:54:11 GMT+0800 (CST) --><h2 id="数据库备份文件"><a href="#数据库备份文件" class="headerlink" title="数据库备份文件"></a>数据库备份文件</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> <span class="string">`user`</span>;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`user`</span> (</span><br><span class="line">  <span class="string">`uid`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`uname`</span> <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`usex`</span> <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`uid`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8mb4;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Records of user</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`user`</span> <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'张三'</span>, <span class="string">'男'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`user`</span> <span class="keyword">VALUES</span> (<span class="string">'2'</span>, <span class="string">'李四'</span>, <span class="string">'男'</span>);</span><br></pre></td></tr></table></figure><a id="more"></a><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> <span class="string">`friend`</span>;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`friend`</span> (</span><br><span class="line">  <span class="string">`friend_id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`friend_name`</span> <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`friend_sex`</span> <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`user_id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`friend_id`</span>),</span><br><span class="line">  <span class="keyword">KEY</span> <span class="string">`fk`</span> (<span class="string">`user_id`</span>),</span><br><span class="line">  <span class="keyword">CONSTRAINT</span> <span class="string">`fk`</span> <span class="keyword">FOREIGN</span> <span class="keyword">KEY</span> (<span class="string">`user_id`</span>) <span class="keyword">REFERENCES</span> <span class="string">`user`</span> (<span class="string">`uid`</span>) <span class="keyword">ON</span> <span class="keyword">DELETE</span> <span class="keyword">CASCADE</span></span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8mb4;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Records of friend</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`friend`</span> <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'小明'</span>, <span class="string">'男'</span>, <span class="string">'1'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`friend`</span> <span class="keyword">VALUES</span> (<span class="string">'2'</span>, <span class="string">'小红'</span>, <span class="string">'女'</span>, <span class="string">'1'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`friend`</span> <span class="keyword">VALUES</span> (<span class="string">'3'</span>, <span class="string">'小兰'</span>, <span class="string">'女'</span>, <span class="string">'2'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`friend`</span> <span class="keyword">VALUES</span> (<span class="string">'4'</span>, <span class="string">'小光'</span>, <span class="string">'男'</span>, <span class="string">'1'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`friend`</span> <span class="keyword">VALUES</span> (<span class="string">'5'</span>, <span class="string">'小天'</span>, <span class="string">'男'</span>, <span class="string">'2'</span>);</span><br></pre></td></tr></table></figure><h2 id="maven创建项目"><a href="#maven创建项目" class="headerlink" title="maven创建项目"></a>maven创建项目</h2><ul><li>依赖jar包</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.43<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.17<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-log4j12<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.7.25<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--      &lt;scope&gt;test&lt;/scope&gt;--&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-logging<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-logging<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="一对多查询"><a href="#一对多查询" class="headerlink" title="一对多查询"></a>一对多查询</h2><ul><li>详细代码请到码云查看</li><li><a href="https://gitee.com/gitsilence/mybatis_learning" target="_blank" rel="noopener">点次跳转代码仓库</a></li></ul><h2 id="多对一查询"><a href="#多对一查询" class="headerlink" title="多对一查询"></a>多对一查询</h2><ul><li>User.java</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.beans;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer uid;</span><br><span class="line">    <span class="keyword">private</span> String uname;</span><br><span class="line">    <span class="keyword">private</span> String usex;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">(String uname, String usex)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.uname = uname;</span><br><span class="line">        <span class="keyword">this</span>.usex = usex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getUid</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> uid;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUid</span><span class="params">(Integer uid)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.uid = uid;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getUname</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> uname;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUname</span><span class="params">(String uname)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.uname = uname;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getUsex</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> usex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUsex</span><span class="params">(String usex)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.usex = usex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"User&#123;"</span> +</span><br><span class="line">                <span class="string">"uid="</span> + uid +</span><br><span class="line">                <span class="string">", uname='"</span> + uname + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", usex='"</span> + usex + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">'&#125;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>Friend.java</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.beans;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Friend</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer friend_id;</span><br><span class="line">    <span class="keyword">private</span> String friend_name;</span><br><span class="line">    <span class="keyword">private</span> String friend_sex;</span><br><span class="line">    <span class="keyword">private</span> Integer user_id;</span><br><span class="line">    <span class="keyword">private</span> User user;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Friend</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Friend</span><span class="params">(String friend_name, String friend_sex, Integer user_id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.friend_name = friend_name;</span><br><span class="line">        <span class="keyword">this</span>.friend_sex = friend_sex;</span><br><span class="line">        <span class="keyword">this</span>.user_id = user_id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getFriend_id</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> friend_id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setFriend_id</span><span class="params">(Integer friend_id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.friend_id = friend_id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getFriend_name</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> friend_name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setFriend_name</span><span class="params">(String friend_name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.friend_name = friend_name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getFriend_sex</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> friend_sex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setFriend_sex</span><span class="params">(String friend_sex)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.friend_sex = friend_sex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getUser_id</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> user_id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUser_id</span><span class="params">(Integer user_id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.user_id = user_id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">getUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUser</span><span class="params">(User user)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.user = user;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Friend&#123;"</span> +</span><br><span class="line">                <span class="string">"friend_id="</span> + friend_id +</span><br><span class="line">                <span class="string">", friend_name='"</span> + friend_name + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", friend_sex='"</span> + friend_sex + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", user_id="</span> + user_id +</span><br><span class="line">                <span class="string">", user="</span> + user +</span><br><span class="line">                <span class="string">'&#125;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>IFriendDao.java</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.lacknb.beans.Friend;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IFriendDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function">List&lt;Friend&gt; <span class="title">selectFriend</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>mapper.xml</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE mapper</span></span><br><span class="line"><span class="meta">        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"</span></span><br><span class="line"><span class="meta">        "http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"cn.lacknb.dao.IFriendDao"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectById"</span> <span class="attr">resultType</span>=<span class="string">"cn.lacknb.beans.User"</span>&gt;</span></span><br><span class="line">        select * from user where uid = #&#123;uid&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"friendMap"</span> <span class="attr">type</span>=<span class="string">"cn.lacknb.beans.Friend"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">"id"</span> <span class="attr">property</span>=<span class="string">"id"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"friend_name"</span> <span class="attr">property</span>=<span class="string">"friend_name"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"friend_sex"</span> <span class="attr">property</span>=<span class="string">"friend_sex"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"user_id"</span> <span class="attr">property</span>=<span class="string">"user_id"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">"user"</span> <span class="attr">javaType</span>=<span class="string">"cn.lacknb.beans.User"</span> <span class="attr">column</span>=<span class="string">"user_id"</span> <span class="attr">select</span>=<span class="string">"selectById"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    多对一--&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectFriend"</span> <span class="attr">resultMap</span>=<span class="string">"friendMap"</span>&gt;</span></span><br><span class="line">        select * from friend</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>其他代码不变</li></ul><!-- rebuild by neat -->]]></content>
      
      
      <categories>
          
          <category> mybatis </category>
          
      </categories>
      
      
        <tags>
            
            <tag>  mybatis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>maven创建spring入门项目</title>
      <link href="/2019/09/21/maven%E5%88%9B%E5%BB%BAspring%E5%85%A5%E9%97%A8%E9%A1%B9%E7%9B%AE/"/>
      <url>/2019/09/21/maven%E5%88%9B%E5%BB%BAspring%E5%85%A5%E9%97%A8%E9%A1%B9%E7%9B%AE/</url>
      
        <content type="html"><![CDATA[<!-- build time:Tue Dec 31 2019 09:54:11 GMT+0800 (CST) --><h2 id="导入依赖jar包-使用的是org-spring-framewok-5-1-5-RELEASE"><a href="#导入依赖jar包-使用的是org-spring-framewok-5-1-5-RELEASE" class="headerlink" title="导入依赖jar包, 使用的是org.spring.framewok 5.1.5 RELEASE"></a>导入依赖jar包, 使用的是org.spring.framewok 5.1.5 RELEASE</h2><ul><li>pom.xm文件的dependencies<a id="more"></a><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">  <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--      &lt;scope&gt;test&lt;/scope&gt;--&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-core --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-beans --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-beans<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-context --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-expression<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    第三方jar--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-logging<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-logging<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="创建xml文件-beans-xml"><a href="#创建xml文件-beans-xml" class="headerlink" title="创建xml文件, beans.xml"></a>创建xml文件, beans.xml</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"</span></span></span><br><span class="line"><span class="tag"><span class="string">          http://www.springframework.org/schema/beans                         http://www.springframework.org/schema/beans/spring-beans.xsd"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- bean definitions here --&gt;</span></span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="创建接口"><a href="#创建接口" class="headerlink" title="创建接口"></a>创建接口</h2><ul><li>DoSomething.java</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.iml;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">DoSomething</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">delete</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">find</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>创建实现类DoImpl.java</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.spring;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.lacknb.iml.DoSomething;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DoImpl</span> <span class="keyword">implements</span> <span class="title">DoSomething</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"添加成功"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"删除成功"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">find</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"查询成功"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"修改成功"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 传统方式</span></span><br><span class="line"><span class="comment">//        DoSomething doing = new DoImpl();</span></span><br><span class="line"><span class="comment">//        doing.add();</span></span><br><span class="line"><span class="comment">//        doing.delete();</span></span><br><span class="line">        <span class="comment">// spring方式</span></span><br><span class="line">        <span class="comment">// 加载容器</span></span><br><span class="line">        ApplicationContext context = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"xml/beans.xml"</span>);</span><br><span class="line">        DoImpl doing = (DoImpl) context.getBean(<span class="string">"dosomething"</span>);</span><br><span class="line">        doing.find();</span><br><span class="line">        doing.update();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><!-- rebuild by neat -->]]></content>
      
      
      <categories>
          
          <category> spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> maven </tag>
            
            <tag> spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>linux服务器和tomcat部署</title>
      <link href="/2019/09/21/linux%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%92%8Ctomcat%E9%83%A8%E7%BD%B2/"/>
      <url>/2019/09/21/linux%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%92%8Ctomcat%E9%83%A8%E7%BD%B2/</url>
      
        <content type="html"><![CDATA[<!-- build time:Tue Dec 31 2019 09:54:11 GMT+0800 (CST) --><h2 id="Centos-解决Tomcat-Manager-App无法访问问题"><a href="#Centos-解决Tomcat-Manager-App无法访问问题" class="headerlink" title="Centos 解决Tomcat Manager App无法访问问题"></a>Centos 解决Tomcat Manager App无法访问问题</h2><p>以前在使用Windows中安装Tomcat时，只需要配置Tomcat目录下/conf/tomcat-user.xml文件就可以，在文件中增加以下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;role rolename=&quot;admin&quot;/&gt;</span><br><span class="line">&lt;role rolename=&quot;admin-gui&quot;/&gt;</span><br><span class="line">&lt;role rolename=&quot;admin-script&quot;/&gt;</span><br><span class="line">&lt;role rolename=&quot;manager&quot;/&gt;</span><br><span class="line">&lt;role rolename=&quot;manager-gui&quot;/&gt;</span><br><span class="line">&lt;role rolename=&quot;manager-script&quot;/&gt;</span><br><span class="line">&lt;role rolename=&quot;manager-jmx&quot;/&gt;</span><br><span class="line">&lt;role rolename=&quot;manager-status&quot;/&gt;</span><br><span class="line">&lt;user username=&quot;admin&quot; password=&quot;admin&quot; roles=&quot;admin,admin-gui,admin-script,manager,manager-gui,manager-script,manager-jmx,manager-status&quot;/&gt;</span><br></pre></td></tr></table></figure><a id="more"></a><p>添加以上内容，并重启Tomcat之后，就可以，但在Centos中添加了内容，重启之后，发现还是无法访问，还是展示错误提示，又经过N久，查了很多资料，发现还有一项需要配置的。</p><p>就是在Tomcat目录下/conf/Catalina/localhost/下创建 manager.xml，并在文件中添加以下内容：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;Context privileged=&quot;true&quot; antiResourceLocking=&quot;false&quot;   </span><br><span class="line">         docBase=&quot;$&#123;catalina.home&#125;/webapps/manager&quot;&gt;  </span><br><span class="line">    &lt;Valve className=&quot;org.apache.catalina.valves.RemoteAddrValve&quot; allow=&quot;^.*$&quot; /&gt;  </span><br><span class="line">&lt;/Context&gt;</span><br></pre></td></tr></table></figure><p>完成以上内容之后， 并重启Tomcat之后生，发现Manager App就可以正确访问，展示正常的内容了。</p><h2 id="将maven项目部署到Linux服务器"><a href="#将maven项目部署到Linux服务器" class="headerlink" title="将maven项目部署到Linux服务器"></a>将maven项目部署到Linux服务器</h2><ul><li>在pom.xml配置tomcat插件</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 配置Tomcat插件 --&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.tomcat.maven<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>tomcat7-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                   <span class="tag">&lt;<span class="name">port</span>&gt;</span>80<span class="tag">&lt;/<span class="name">port</span>&gt;</span></span><br><span class="line">                   <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://服务器地址:端口号/manager/text<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">                   <span class="tag">&lt;<span class="name">username</span>&gt;</span>conf/tomcat-users.xml中的账号<span class="tag">&lt;/<span class="name">username</span>&gt;</span></span><br><span class="line">                   <span class="tag">&lt;<span class="name">password</span>&gt;</span>服务器tomcat密码<span class="tag">&lt;/<span class="name">password</span>&gt;</span></span><br><span class="line">                   <span class="tag">&lt;<span class="name">path</span>&gt;</span>/<span class="tag">&lt;/<span class="name">path</span>&gt;</span></span><br><span class="line">                   <span class="tag">&lt;<span class="name">update</span>&gt;</span>true<span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>maven命令<ul><li>mvn tomcat7:deploy 这是第一次上传的时候</li><li>mvn tomcat7:redeploy 以后需要修改项目的时候,使用这个.</li></ul></li></ul><h2 id="linux后台任务"><a href="#linux后台任务" class="headerlink" title="linux后台任务"></a>linux后台任务</h2><p>fg、bg、jobs、&amp;、ctrl + z都是跟系统任务有关的，虽然现在基本上不怎么需要用到这些命令，但学会了也是很实用的<br>一。&amp; 最经常被用到<br>这个用在一个命令的最后，可以把这个命令放到后台执行<br>二。ctrl + z<br>可以将一个正在前台执行的命令放到后台，并且暂停<br>三。jobs<br>查看当前有多少在后台运行的命令<br>四。fg<br>将后台中的命令调至前台继续运行<br>如果后台中有多个命令，可以用 fg %jobnumber将选中的命令调出，%jobnumber是通过jobs命令查到的后台正在执行的命令的序号(不是pid)<br>五。bg<br>将一个在后台暂停的命令，变成继续执行<br>如果后台中有多个命令，可以用bg %jobnumber将选中的命令调出，%jobnumber是通过jobs命令查到的后台正在执行的命令的序号(不是pid)</p><p><strong>#</strong>Linux下使用Shell命令控制任务Jobs执行</p><p>下列命令可以用来操纵进程任务：<br>ps 列出系统中正在运行的进程；<br>kill 发送信号给一个或多个进程（经常用来杀死一个进程）；<br>jobs 列出当前shell环境中已启动的任务状态，若未指定jobsid，则显示所有活动的任务状态信息；如果报告了一个任务的终止(即任务的状态被标记为Terminated)，shell 从当前的shell环境已知的列表中删除任务的进程标识；<br>bg 将进程搬到后台运行（Background）；<br>fg 将进程搬到前台运行（Foreground）；<br>将job转移到后台运行<br>如果你经常在X图形下工作，你可能有这样的经历：通过终端命令运行一个GUI程序，GUI界面出来了，但是你的终端还停留在原地，你不能在shell中继续执行其他命令了，除非将GUI程序关掉。<br>为了使程序执行后终端还能继续接受命令，你可以将进程移到后台运行，使用如下命令运行程序： #假设要运行xmms<br>$xmms &amp;<br>这样打开xmms后，终端的提示又回来了。现在xmms在后台运行着呢；但万一你运行程序时忘记使用“&amp;”了，又不想重新执行；你可以先使用ctrl+z挂起程序，然后敲入bg命令，这样程序就在后台继续运行了。<br>概念：当前任务<br>如果后台的任务号有2个，[1],[2]；如果当第一个后台任务顺利执行完毕，第二个后台任务还在执行中时，当前任务便会自动变成后台任务号码“[2]”的后台任务。所以可以得出一点，即当前任务是会变动的。当用户输入“fg”、“bg”和“stop”等命令时，如果不加任何引号，则所变动的均是当前任务。<br>察看jobs<br>使用jobs或ps命令可以察看正在执行的jobs。<br>jobs命令执行的结果，＋表示是一个当前的作业，减号表是是一个当前作业之后的一个作业，jobs -l选项可显示所有任务的PID,jobs的状态可以是running, stopped, Terminated,但是如果任务被终止了（kill），shell 从当前的shell环境已知的列表中删除任务的进程标识；也就是说，jobs命令显示的是当前shell环境中所起的后台正在运行或者被挂起的任务信息；<br>进程的挂起<br>后台进程的挂起：<br>在solaris中通过stop命令执行，通过jobs命令查看job号(假设为num)，然后执行stop %num；<br>在redhat中，不存在stop命令，可通过执行命令kill -stop PID，将进程挂起；<br>当要重新执行当前被挂起的任务时，通过bg %num 即可将挂起的job的状态由stopped改为running，仍在后台执行；当需要改为在前台执行时，执行命令fg %num即可；<br>前台进程的挂起：<br>ctrl+Z;<br>进程的终止<br>后台进程的终止：<br>方法一：<br>通过jobs命令查看job号（假设为num），然后执行kill %num<br>方法二：<br>通过ps命令查看job的进程号（PID，假设为pid），然后执行kill pid<br>前台进程的终止：<br>ctrl+c<br>kill的其他作用<br>kill除了可以终止进程，还能给进程发送其它信号，使用kill -l 可以察看kill支持的信号。<br>SIGTERM是不带参数时kill发送的信号，意思是要进程终止运行，但执行与否还得看进程是否支持。如果进程还没有终止，可以使用kill -SIGKILL pid，这是由内核来终止进程，进程不能监听这个信号。</p><p>===================</p><p>Unix/Linux下一般想让某个程序在后台运行，很多都是使用 &amp; 在程序结尾来让程序自动运行。比如我们要运行mysql在后台：</p><p>/usr/local/mysql/bin/mysqld_safe –user=mysql &amp;</p><p>但是我们很多程序并不象mysqld一样可以做成守护进程，可能我们的程序只是普通程序而已，一般这种程序即使使用 &amp; 结尾，如果终端关闭，那么程序也会被关闭。为了能够后台运行，我们需要使用nohup这个命令，比如我们有个start.sh需要在后台运行，并且希望在后台能够一直运行，那么就使用nohup：</p><figure class="highlight plain"><figcaption><span>/root/start.sh &```</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">在shell中回车后提示：</span><br><span class="line"></span><br><span class="line">[~]$ appending output to nohup.out</span><br><span class="line"></span><br><span class="line">原程序的的标准输出被自动改向到当前目录下的nohup.out文件，起到了log的作用。</span><br><span class="line"></span><br><span class="line">但是有时候在这一步会有问题，当把终端关闭后，进程会自动被关闭，察看nohup.out可以看到在关闭终端瞬间服务自动关闭。</span><br><span class="line"></span><br><span class="line">咨询红旗Linux工程师后，他也不得其解，在我的终端上执行后，他启动的进程竟然在关闭终端后依然运行。</span><br><span class="line"></span><br><span class="line">在第二遍给我演示时，我才发现我和他操作终端时的一个细节不同：他是在当shell中提示了nohup成功后还需要按终端上键盘任意键退回到shell输入命令窗口，然后通过在shell中输入exit来退出终端；而我是每次在nohup执行成功后直接点关闭程序按钮关闭终端.。所以这时候会断掉该命令所对应的session，导致nohup对应的进程被通知需要一起shutdown。</span><br><span class="line"></span><br><span class="line">这个细节有人和我一样没注意到，所以在这儿记录一下了。</span><br><span class="line"></span><br><span class="line">附：nohup命令参考</span><br><span class="line"></span><br><span class="line">nohup 命令</span><br><span class="line"></span><br><span class="line">　　用途：不挂断地运行命令。</span><br><span class="line"></span><br><span class="line">　　语法：nohup Command [ Arg ... ] [　&amp; ]</span><br><span class="line"></span><br><span class="line">　　描述：nohup 命令运行由 Command 参数和任何相关的 Arg 参数指定的命令，忽略所有挂断（SIGHUP）信号。在注销后使用 nohup 命令运行后台中的程序。要运行后台中的 nohup 命令，添加 &amp; （ 表示&quot;and&quot;的符号）到命令的尾部。</span><br><span class="line"></span><br><span class="line">　　无论是否将 nohup 命令的输出重定向到终端，输出都将附加到当前目录的 nohup.out 文件中。如果当前目录的 nohup.out 文件不可写，输出重定向到 $HOME/nohup.out 文件中。如果没有文件能创建或打开以用于追加，那么 Command 参数指定的命令不可调用。如果标准错误是一个终端，那么把指定的命令写给标准错误的所有输出作为标准输出重定向到相同的文件描述符。</span><br><span class="line"></span><br><span class="line">　　退出状态：该命令返回下列出口值：</span><br><span class="line"></span><br><span class="line">　　126 可以查找但不能调用 Command 参数指定的命令。</span><br><span class="line"></span><br><span class="line">　　127 nohup 命令发生错误或不能查找由 Command 参数指定的命令。</span><br><span class="line"></span><br><span class="line">　　否则，nohup 命令的退出状态是 Command 参数指定命令的退出状态。</span><br><span class="line"></span><br><span class="line">　　nohup命令及其输出文件</span><br><span class="line"></span><br><span class="line">　　nohup命令：如果你正在运行一个进程，而且你觉得在退出帐户时该进程还不会结束，那么可以使用nohup命令。该命令可以在你退出帐户/关闭终端之后继续运行相应的进程。nohup就是不挂起的意思( n ohang up)。</span><br><span class="line"></span><br><span class="line">　　该命令的一般形式为：nohup command &amp;</span><br><span class="line"></span><br><span class="line">　　使用nohup命令提交作业</span><br><span class="line"></span><br><span class="line">　　如果使用nohup命令提交作业，那么在缺省情况下该作业的所有输出都被重定向到一个名为nohup.out的文件中，除非另外指定了输出文件：</span><br><span class="line"></span><br><span class="line">　　nohup command &gt; myout.file 2&gt;&amp;1 &amp;</span><br><span class="line"></span><br><span class="line">　　在上面的例子中，输出被重定向到myout.file文件中。</span><br><span class="line"></span><br><span class="line">　　使用 jobs 查看任务。</span><br><span class="line"></span><br><span class="line">　　使用 fg %n　关闭。</span><br><span class="line"></span><br><span class="line">　　另外有两个常用的ftp工具ncftpget和ncftpput，可以实现后台的ftp上传和下载，这样就可以利用这些命令在后台上传和下载文件了。</span><br><span class="line"></span><br><span class="line">简单而有用的nohup命令在UNIX/LINUX中，普通进程用&amp;符号放到后台运行，如果启动该程序的控制台logout，则该进程随即终止。</span><br><span class="line"></span><br><span class="line">　　要实现守护进程，一种方法是按守护进程的规则去编程（本站有文章介绍过），比较麻烦；另一种方法是仍然用普通方法编程，然后用nohup命令启动程序：</span><br><span class="line"></span><br><span class="line">　　nohup＜程序名＞&amp;</span><br><span class="line"></span><br><span class="line">　　则控制台logout后，进程仍然继续运行，起到守护进程的作用（虽然它不是严格意义上的守护进程）。</span><br><span class="line"></span><br><span class="line">　　使用nohup命令后，原程序的的标准输出被自动改向到当前目录下的nohup.out文件，起到了log的作用，实现了完整的守护进程功能。</span><br><span class="line"></span><br><span class="line">　　ygwu @ 2005年04月18日 上午10:03</span><br><span class="line"></span><br><span class="line">　　For example：</span><br><span class="line"></span><br><span class="line">　　如何远程启动WebLogic服务?</span><br><span class="line"></span><br><span class="line">　　用telnet远程控制服务器，远程启动WEBLOGIC服务，启动后关闭telnet，WebLogic服务也跟着停止，这是因为使用telnet启动的进程会随着telnet进程的关闭而关闭。所以我们可以使用一些UNIX下的命令来做到不关闭。</span><br><span class="line"></span><br><span class="line">　　使用如下命令：</span><br><span class="line"></span><br><span class="line">　　```nohup startWeblogic.sh&amp;</span><br></pre></td></tr></table></figure><p>如果想要监控标准输出可以使用：</p><p></p><figure class="highlight plain"><figcaption><span>-f nohup.out```</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">　　当在后台运行了程序的时候，可以用jobs命令来查看后台作业的状态。在有多个后台程序时，要使用来参数的fg命令将不同序号的后台作业切换到前台上运行。</span><br><span class="line"></span><br><span class="line">　　当用户启动一个进程的时候，这个进程是运行在前台，使用与相应控制终端相联系的标准输入、输出进行输入和输出。即使将进程的输入输出重定向，并将进程放在后台执行，进程仍然和当前终端设备有关系。正因为如此，在当前的登录会话结束时，控制终端设备将和登录进程相脱离，那么系统就向所有与这个终端相联系的进程发送SIGHUP的信号，通知进程线路已经挂起了，如果程序没有接管这个信号的处理，那么缺省的反应是进程结束。因此普通的程序并不能真正脱离登录会话而运行进程，为了使得在系统登录后还可以正常执行，只有使用命令nohup来启动相应程序。</span><br><span class="line"></span><br><span class="line">　　使用命令nohup当然可以启动这样的程序，但nohup启动的程序在进程执行完毕就退出，而常见的一些服务进程通常永久的运行在后台，不向屏幕输出结果。在Unix中这些永久的后台进程称为守护进程（daemon）。守护进程通常从系统启动时自动开始执行，系统关闭时才停止。</span><br><span class="line"></span><br><span class="line">　　在守护进程中，最重要的一个是超级守护进程inetd，这个进程接管了大部分网络服务，但并不是对每个服务都自己进行处理，而是依据连接请求，启动不同的服务程序与客户机打交道。inetd支持网络服务种类在它的设置文件/etc/inet.conf中定义。inet.conf文件中的每一行就对应一个端口地址，当inetd接受到连接这个端口的连接请求时，就启动相应的进程进行处理。使用inetd的好处是系统不必启动很多守护进程，从而节约了系统资源，然而使用inetd启动守护进程相应反应会迟缓一些，不适合用于被密集访问的服务进程</span><br><span class="line"></span><br><span class="line">## centos的防火墙的开启与关闭</span><br><span class="line"></span><br><span class="line">开启端口</span><br><span class="line"></span><br><span class="line">```[root@centos7 ~]# firewall-cmd --zone=public --add-port=80/tcp --permanent</span><br></pre></td></tr></table></figure><p></p><p>查询端口号80 是否开启：</p><figure class="highlight plain"><figcaption><span>~]# firewall-cmd --query-port</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">重启防火墙：</span><br><span class="line"></span><br><span class="line">```[root@centos7 ~]# firewall-cmd --reload</span><br></pre></td></tr></table></figure><p>查询有哪些端口是开启的:</p><p><code>[root@centos7 ~]# firewall-cmd --list-port</code></p><p>命令含义：</p><p>–zone #作用域<br>–add-port=80/tcp #添加端口，格式为：端口/通讯协议<br>–permanent #永久生效，没有此参数重启后失效</p><p>关闭firewall：</p><p>systemctl stop firewalld.service #停止firewall</p><p>systemctl disable firewalld.service #禁止firewall开机启动</p><!-- rebuild by neat -->]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
          <category> tomcat </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> tomcat </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>图解MySQL 内连接、外连接、左连接、右连接、全连接……太多了</title>
      <link href="/2019/09/15/%E5%9B%BE%E8%A7%A3MySQL-%E5%86%85%E8%BF%9E%E6%8E%A5%E3%80%81%E5%A4%96%E8%BF%9E%E6%8E%A5%E3%80%81%E5%B7%A6%E8%BF%9E%E6%8E%A5%E3%80%81%E5%8F%B3%E8%BF%9E%E6%8E%A5%E3%80%81%E5%85%A8%E8%BF%9E%E6%8E%A5%E2%80%A6%E2%80%A6%E5%A4%AA%E5%A4%9A%E4%BA%86/"/>
      <url>/2019/09/15/%E5%9B%BE%E8%A7%A3MySQL-%E5%86%85%E8%BF%9E%E6%8E%A5%E3%80%81%E5%A4%96%E8%BF%9E%E6%8E%A5%E3%80%81%E5%B7%A6%E8%BF%9E%E6%8E%A5%E3%80%81%E5%8F%B3%E8%BF%9E%E6%8E%A5%E3%80%81%E5%85%A8%E8%BF%9E%E6%8E%A5%E2%80%A6%E2%80%A6%E5%A4%AA%E5%A4%9A%E4%BA%86/</url>
      
        <content type="html"><![CDATA[<!-- build time:Tue Dec 31 2019 09:54:11 GMT+0800 (CST) --><h2 id="左内连接"><a href="#左内连接" class="headerlink" title="左内连接"></a>左内连接</h2><h2 id="左外连接"><a href="#左外连接" class="headerlink" title="左外连接"></a>左外连接</h2><p><a href="https://blog.csdn.net/plg17/article/details/78758593" target="_blank" rel="noopener">点击跳转到CSDN</a></p><!-- rebuild by neat -->]]></content>
      
      
      <categories>
          
          <category> mysql </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Deepin安装Docker</title>
      <link href="/2019/09/14/%E5%AE%89%E8%A3%85Docker/"/>
      <url>/2019/09/14/%E5%AE%89%E8%A3%85Docker/</url>
      
        <content type="html"><![CDATA[<!-- build time:Tue Dec 31 2019 09:54:11 GMT+0800 (CST) --><h1 id="Deepin安装docker"><a href="#Deepin安装docker" class="headerlink" title="Deepin安装docker"></a>Deepin安装docker</h1><p>​ 安装curl</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install curl libcurl3 libcurl3-dev</span><br></pre></td></tr></table></figure><p>​ 获取docker并安装</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl -fsSL https://get.docker.com -o get-docker.sh</span><br><span class="line"></span><br><span class="line">sudo sh get-docker.sh</span><br></pre></td></tr></table></figure><a id="more"></a><p>​ 安装完成查看docker版本</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker -v</span><br></pre></td></tr></table></figure><p>​ 确认安装成功后执行这条命令，重启后就可以不用sudo直接使用docker命令了</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo usermod -aG docker  你的用户名</span><br></pre></td></tr></table></figure><p>​ 更换docker镜像源（阿里云）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo gedit /etc/docker/daemon.json</span><br></pre></td></tr></table></figure><p>​ 将以下配置信息copy到编辑器中</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">&quot;registry-mirrors&quot;: [</span><br><span class="line">&quot;https://kfwkfulq.mirror.aliyuncs.com&quot;,</span><br><span class="line">&quot;https://2lqq34jg.mirror.aliyuncs.com&quot;,</span><br><span class="line">&quot;https://pee6w651.mirror.aliyuncs.com&quot;,</span><br><span class="line">&quot;https://registry.docker-cn.com&quot;,</span><br><span class="line">&quot;http://hub-mirror.c.163.com&quot;</span><br><span class="line">],</span><br><span class="line">&quot;dns&quot;: [&quot;8.8.8.8&quot;,&quot;8.8.4.4&quot;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>by Loki.C</p><h1 id="修改镜像的默认下载位置"><a href="#修改镜像的默认下载位置" class="headerlink" title="修改镜像的默认下载位置"></a>修改镜像的默认下载位置</h1><p>默认情况下docker的存放位置为: <code>/var/lib/docker</code>，一般根下分区我们不会给太大。所以这个时候我们要考虑挂载大分区到 <code>/var/lib/docker</code>，具体的操作步骤如下：</p><ol><li>停掉 Docker</li><li>拷贝 Docker 文件到目录 <code>cp -r /var/lib/docker/* /mnt/</code></li><li>删除 Docker 原始目录 <code>rm -rf /var/lib/docker</code></li><li>挂载分区为 Docker 目录：<code>mount /dev/vdb1 /var/lib/docker</code></li><li>启动 Docker，使用 <code>docker ps</code> 和 <code>docker images</code> 确定迁移成功</li></ol><!-- rebuild by neat -->]]></content>
      
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MyBatis的动态SQL</title>
      <link href="/2019/09/11/MyBatis%E7%9A%84%E5%8A%A8%E6%80%81SQL/"/>
      <url>/2019/09/11/MyBatis%E7%9A%84%E5%8A%A8%E6%80%81SQL/</url>
      
        <content type="html"><![CDATA[<!-- build time:Tue Dec 31 2019 09:54:11 GMT+0800 (CST) --><h1 id="动态SQL"><a href="#动态SQL" class="headerlink" title="动态SQL"></a>动态SQL</h1><h2 id="lt-if-gt-元素"><a href="#lt-if-gt-元素" class="headerlink" title="&lt; if &gt;元素"></a>&lt; if &gt;元素</h2><ul><li><blockquote><p>通过对姓名的模糊搜索，使用if判断姓名是否为空，如果为空，则是查询所有用户</p></blockquote></li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    使用if元素根据条件动态查询用户信息--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectUserByIf"</span> <span class="attr">resultType</span>=<span class="string">"cn.test.beans.MyUser"</span> <span class="attr">parameterType</span>=<span class="string">"cn.test.beans.MyUser"</span>&gt;</span></span><br><span class="line">        select * from user where 1 = 1</span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"uname != null and uname != ''"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 这里是根据姓名模糊查找 --&gt;</span></span><br><span class="line">            and uname like concat('%', #&#123;uname&#125;, '%')</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- concat()函数， 将多个字符串连接成一个字符串 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="lt-choose-gt-、-lt-when-gt-、-lt-otherwise-gt-元素"><a href="#lt-choose-gt-、-lt-when-gt-、-lt-otherwise-gt-元素" class="headerlink" title="&lt; choose &gt;、&lt; when &gt;、&lt; otherwise&gt;元素"></a>&lt; choose &gt;、&lt; when &gt;、&lt; otherwise&gt;元素</h2><blockquote><p>有的时候不想用到所有的条件语句，而只想从中择取一二，针对这种情况，MyBatis提供了&lt;choose&gt;元素，它有点像java中的switch语句。</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    使用choose、when、otherwise元素根据条件动态查询用户信息--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectUserByChoose"</span> <span class="attr">resultType</span>=<span class="string">"cn.test.beans.MyUser"</span> <span class="attr">parameterType</span>=<span class="string">"cn.test.beans.MyUser"</span>&gt;</span></span><br><span class="line">        select * from user where 1 = 1</span><br><span class="line">        <span class="tag">&lt;<span class="name">choose</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">"uname != null and uname != ''"</span>&gt;</span></span><br><span class="line">                and uname like concat('%', #&#123;uname&#125;, '%')</span><br><span class="line">            <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">"usex != null and usex != ''"</span>&gt;</span></span><br><span class="line">                and usex = #&#123;usex&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">otherwise</span>&gt;</span></span><br><span class="line">                and uid &gt; 10</span><br><span class="line">            <span class="tag">&lt;/<span class="name">otherwise</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">choose</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://s2.ax1x.com/2019/09/11/nwCCc9.png" alt></p><h2 id="lt-trim-gt-、-lt-where-gt-、-lt-set-gt-元素"><a href="#lt-trim-gt-、-lt-where-gt-、-lt-set-gt-元素" class="headerlink" title="&lt; trim&gt;、&lt; where&gt;、&lt; set&gt;元素"></a>&lt; trim&gt;、&lt; where&gt;、&lt; set&gt;元素</h2><ul><li>&lt; trim&gt;元素<ul><li>&lt; trim&gt;元素的主要功能是可以在自己包含的内容前加上某些前缀，也可以是在其后加上某些后缀，与之对应的属性是prefix和suffix; 可以把包含内容的首部某些内容覆盖，即忽略，也可以把尾部的某些内容覆盖，对应的属性是prefixOverrides和suffixOverrides。正因为&lt;trim&gt;元素有这样的功能，所以也可以非常简单地利用&lt; trim&gt;来代替&lt; where&gt;元素的个功能。</li></ul></li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    使用trim元素根据条件动态查询用户信息--&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectUserByTrim"</span> <span class="attr">resultType</span>=<span class="string">"cn.test.beans.MyUser"</span> <span class="attr">parameterType</span>=<span class="string">"cn.test.beans.MyUser"</span>&gt;</span></span><br><span class="line">        select * from user</span><br><span class="line">        <span class="tag">&lt;<span class="name">trim</span> <span class="attr">prefix</span>=<span class="string">"where"</span> <span class="attr">prefixOverrides</span>=<span class="string">"and | or"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"uname != null and uname != ''"</span>&gt;</span></span><br><span class="line">                and uname like concat('%', #&#123;uname&#125;, '%')</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"usex != null and usex != ''"</span>&gt;</span></span><br><span class="line">                and usex = #&#123;usex&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">trim</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://s2.ax1x.com/2019/09/11/nwPOiT.png" alt></p><ul><li>&lt; where&gt;元素<ul><li>&lt; where&gt;元素的作用是会在写入&lt; where&gt;元素的地方输出一个where语句，另一个好处是不需要考虑&lt; where&gt;元素里面的条件输出是什么样子的，MyBatis将智能处理。如果所有的条件都不满足，那么MyBatis就会查出所有的记录，如果输出是以and开头的，MyBatis会把地一个and忽略，当然如果是以or开头的，MyBatis也会把它忽略; 此外，在&lt; where&gt;元素中不需要考虑空格的问题，MyBatis将智能加上。</li></ul></li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    使用where元素根据条件动态查询用户信息--&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectUserByWhere"</span> <span class="attr">resultType</span>=<span class="string">"cn.test.beans.MyUser"</span> <span class="attr">parameterType</span>=<span class="string">"cn.test.beans.MyUser"</span>&gt;</span></span><br><span class="line">        select * from user</span><br><span class="line">        <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"uname != null and uname != ''"</span>&gt;</span></span><br><span class="line">                and uname like concat('%', #&#123;uname&#125;, '%')</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"usex != null and usex != ''"</span>&gt;</span></span><br><span class="line">                and usex = #&#123;usex&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>运行结果和sql语句同上</strong></p><ul><li>&lt; set&gt;元素<ul><li>在动态update语句中可以使用&lt; set&gt;元素动态更新序列。</li></ul></li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    使用set元素动态修改一个用户--&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">"updateUserBySet"</span> <span class="attr">parameterType</span>=<span class="string">"cn.test.beans.MyUser"</span>&gt;</span></span><br><span class="line">        update user</span><br><span class="line">        <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"uname != null"</span>&gt;</span></span><br><span class="line">                uname = #&#123;uname&#125;, <span class="comment">&lt;!--这里的逗号不能少--&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"usex != null"</span>&gt;</span></span><br><span class="line">                usex = #&#123;usex&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">        where uid = #&#123;uid&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://s2.ax1x.com/2019/09/11/nwEjKg.png" alt></p><ul><li>&lt; foreach&gt;元素<ul><li>&lt; foreach&gt;元素主要用 在构建in条件中，它可以在SQL语句中迭代一个集合。&lt; foreach&gt;元素的属性有item、index、collection、open、separator、close、。item表示集合中每个元素进行迭代时的别名，index指定一个名字，用于表示在迭代过程中每次迭代到的位置，open表示该语句以什么开始，separator表示在每次进行迭代之间以什么符号作为间隔符，close表示以什么结束。在使用&lt; foreach&gt;元素时，最关键、最容易出错的是collection属性，该属性是必选的，但在不同情况下该属性的值是不一样的，主要有一下三种情况：<ul><li>如果传入的是单参数且参数类型是一个List，collection属性值为list</li><li>如果传入的是单参数且参数类型是一个array数组，collection属性值为array</li><li>如果传入的参数是多个，需要把它们封装成一个Map，当然单参数也可以封装成Map。Map的key是参数名， collection属性值是传入的List或Array对象在自己封装的Map中的key</li></ul></li></ul></li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    使用foreach元素查询用户信息--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectUserByForeach"</span> <span class="attr">resultType</span>=<span class="string">"cn.test.beans.MyUser"</span> <span class="attr">parameterType</span>=<span class="string">"List"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        select * from user where uid in</span><br><span class="line">        <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">"list"</span> <span class="attr">item</span>=<span class="string">"item"</span> <span class="attr">index</span>=<span class="string">"index"</span> <span class="attr">open</span>=<span class="string">"("</span> <span class="attr">separator</span>=<span class="string">","</span> <span class="attr">close</span>=<span class="string">")"</span>&gt;</span></span><br><span class="line">            #&#123;item&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://s2.ax1x.com/2019/09/11/nweOxK.png" alt></p><p><img src="https://s2.ax1x.com/2019/09/11/nwmUo9.png" alt></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用foreach元素查询用户信息</span></span><br><span class="line">List&lt;Integer&gt; listId = <span class="keyword">new</span> ArrayList&lt;Integer&gt;();</span><br><span class="line">listId.add(<span class="number">34</span>);</span><br><span class="line">listId.add(<span class="number">37</span>);</span><br><span class="line">listId.add(<span class="number">39</span>);</span><br><span class="line">List&lt;MyUser&gt; listByForeach = dao.selectUserByForeach(listId);</span><br><span class="line">System.out.println(<span class="string">"foreach元素==============="</span>);</span><br><span class="line"><span class="keyword">for</span> (MyUser myUser : listByForeach)&#123;</span><br><span class="line">    System.out.println(myUser);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="lt-bind-gt-元素"><a href="#lt-bind-gt-元素" class="headerlink" title="&lt; bind&gt;元素"></a>&lt; bind&gt;元素</h2><ul><li>在进行模糊查询时，如果使用”${}”拼接字符串，则无法防止SQL注入问题; 如果使用字符串拼接函数或连接符号，但不同数据库的拼接函数或连接符号不同，例如Mysql的concat()函数、Oracle的连接符号“||”, 这样SQL映射文件就需要根据不同的数据库提供不同的实现，显然比较麻烦，且不利于代码的移植。幸运的是，MyBatis提供了&lt; bind&gt;元素来解决这一问题。</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    使用bind元素进行模糊查询--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectUserByBind"</span> <span class="attr">resultType</span>=<span class="string">"cn.test.beans.MyUser"</span> <span class="attr">parameterType</span>=<span class="string">"cn.test.beans.MyUser"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--bind中的uname是cn.test.beans.MyUser的属性名 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bind</span> <span class="attr">name</span>=<span class="string">"paran_uname"</span> <span class="attr">value</span>=<span class="string">"'%' + uname + '%'"</span>/&gt;</span></span><br><span class="line">        select * from user where uname like #&#123;paran_uname&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://s2.ax1x.com/2019/09/11/nwnNX8.png" alt></p><!-- rebuild by neat -->]]></content>
      
      
      <categories>
          
          <category> mybatis </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mybatis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Git笔记</title>
      <link href="/2019/09/11/Git%E7%AC%94%E8%AE%B0/"/>
      <url>/2019/09/11/Git%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<!-- build time:Tue Dec 31 2019 09:54:11 GMT+0800 (CST) --><h1 id="Git笔记"><a href="#Git笔记" class="headerlink" title="Git笔记"></a>Git笔记</h1><p><strong>工作区（写代码）—&gt; git add 暂存区（临时存储） —&gt; git commit 本地库（历史版本）</strong></p><h2 id="初始化-git-init"><a href="#初始化-git-init" class="headerlink" title="初始化 git init"></a>初始化 git init</h2><ul><li>会生成 .git隐藏目录<ul><li><img src="https://s2.ax1x.com/2019/09/10/naSAmT.png" alt></li></ul></li></ul><h2 id="形式-设置签名"><a href="#形式-设置签名" class="headerlink" title="形式 (设置签名)"></a>形式 (设置签名)</h2><ol><li><p>用户名：</p></li><li><p>Email地址：</p></li><li><p>作用：</p><a id="more"></a><ol><li>区分不同开发人员的身份</li></ol></li><li><p>辨析：</p><ol><li>这里设置的签名和登录远程库（代码托管中心）的帐号、密码 没有任何关系</li></ol></li><li><p>命令：</p><ol><li><p>项目级别/仓库级别：</p><ol><li>仅在当前本地库范围内有效<ol><li>git config user.name xxx</li><li>git config user.email <a href="mailto:xxx@xx.com" target="_blank" rel="noopener">xxx@xx.com</a></li></ol></li></ol></li><li><p>系统用户级别：</p><ol><li><p>登录当前操作系统的用户范围</p><ol><li><p>git config –global user.name xxx</p></li><li><p>git config –global user.email <a href="mailto:xxx@xx.com" target="_blank" rel="noopener">xxx@xx.com</a></p></li><li><p><img src="https://s2.ax1x.com/2019/09/10/na98Fe.png" alt></p></li></ol></li></ol></li></ol></li></ol><ol start="3"><li><p>优先级：</p><ol><li>就近原则：项目级别优先于系统级别，二者都有时采用项目级别的签名</li><li>如果只有系统用户级别的签名，就以系统用户级别的签名为准<ol><li>二者都没有 是不允许的</li></ol></li></ol></li><li><p>设置之后的值就会显示 在config文件中. /.git/config</p><ol><li><img src="https://s2.ax1x.com/2019/09/10/napqZ8.png" alt></li></ol></li></ol><h2 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h2><ul><li>git status 状态查看操作<ul><li>查看工作区、暂存区状态</li></ul></li></ul><blockquote><p>在vim 编辑器中 : set nu 显示行号。 如果提交的时候 用的nano编辑器，可以在config文件中，在core中后面添加 editor=vim 即可使用vim编辑器了。</p></blockquote><ul><li><p>添加操作</p><ul><li>git add filename</li><li>将工作去的 “新建/修改” 添加到暂存区</li></ul></li><li><p>git commit 提交到仓库</p><ul><li><p>将暂存区的内容提交到本地库</p></li><li><p><img src="https://s2.ax1x.com/2019/09/10/nakmbq.png" alt></p></li></ul></li></ul><ul><li>git commit -m “需要附加的信息” 文件名</li></ul><h2 id="怎么实现版本的前进与后退"><a href="#怎么实现版本的前进与后退" class="headerlink" title="怎么实现版本的前进与后退"></a>怎么实现版本的前进与后退</h2><blockquote><p>*<em>git log *</em>查看历史版本</p></blockquote><ul><li>多屏显示控制方式：<ul><li>空格向下翻页</li><li>b向上翻页</li><li>q退出</li></ul></li></ul><p><img src="https://s2.ax1x.com/2019/09/10/naVZKH.png" alt></p><ul><li>git log –pretty=oneline</li><li>git log –oneline<ul><li>只显示当前使用版本的 以后的旧版本</li></ul></li><li>git reflog</li></ul><h2 id="前进后退"><a href="#前进后退" class="headerlink" title="前进后退"></a>前进后退</h2><ul><li>HEAD - &gt; 的移动</li><li>基于索引值的操作<ul><li>git reset –hard hash索引值<ul><li><img src="https://s2.ax1x.com/2019/09/10/naeEBd.png" alt></li></ul></li></ul></li><li>使用^符号进行操作（只能后退）<ul><li>git reset –hard HEAD^ （回退一个版本）</li><li>git reset –hard HEAD^^^ （回退三个版本）</li></ul></li><li>使用~符号进行操作 （也是只能后退的）<ul><li>git reset –hard HEAD~3 （回退三个版本）</li><li>~n 就是后退n步</li></ul></li></ul><hr><h2 id="reset命令的三个参数对比"><a href="#reset命令的三个参数对比" class="headerlink" title="reset命令的三个参数对比"></a>reset命令的三个参数对比</h2><ul><li>–soft参数<ul><li>仅仅在本地库移动HEAD指针</li></ul></li><li>–mixed参数<ul><li>在本地库移动HEAD指针</li><li>重置暂存区</li></ul></li><li>–hard参数<ul><li>在本地库移动HEAD指针</li><li>重置暂存区</li><li>重置工作区</li></ul></li></ul><h2 id="删除文件找回"><a href="#删除文件找回" class="headerlink" title="删除文件找回"></a>删除文件找回</h2><ul><li>前提： 删除前，文件存在时的状态提交到了本地库</li><li>操作：git reset –hard 指针位置<ul><li>删除操作已经提交到本地库： 指针位置指向历史记录</li><li>删除操作未提交到本地库： 指针位置使用HEAD</li></ul></li></ul><h2 id="比较文件差异"><a href="#比较文件差异" class="headerlink" title="比较文件差异"></a>比较文件差异</h2><ul><li>git diff [文件名]<ul><li>将工作区中的文件和暂存区进行比较</li></ul></li><li>git diff [本地库中历史版本]..[文件名]<ul><li>将工作区中的文件和本地库历史记录比较</li></ul></li><li>不带文件名比较多个文件</li></ul><h1 id="分支管理"><a href="#分支管理" class="headerlink" title="分支管理"></a>分支管理</h1><ul><li>Master</li></ul><!-- rebuild by neat -->]]></content>
      
      
      <categories>
          
          <category> git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mybatis使用注解入门案例</title>
      <link href="/2019/09/06/Mybatis%E4%BD%BF%E7%94%A8%E6%B3%A8%E8%A7%A3%E5%85%A5%E9%97%A8%E6%A1%88%E4%BE%8B/"/>
      <url>/2019/09/06/Mybatis%E4%BD%BF%E7%94%A8%E6%B3%A8%E8%A7%A3%E5%85%A5%E9%97%A8%E6%A1%88%E4%BE%8B/</url>
      
        <content type="html"><![CDATA[<!-- build time:Tue Dec 31 2019 09:54:11 GMT+0800 (CST) --><hr><h1 id="创建Maven工程"><a href="#创建Maven工程" class="headerlink" title="创建Maven工程"></a>创建Maven工程</h1><ul><li><p>数据库另一个文章的、<a href="http://gitsilence.gitee.io:4000/2019/09/01/Untitled/#%E9%85%8D%E7%BD%AEpow-xml" target="_blank" rel="noopener">点击进入</a></p></li><li><p>目录结构如图所示<img src="https://s2.ax1x.com/2019/09/06/nMFqpD.png" alt></p><ul><li>在resources中创建包的时候，不要直接创建com.config.xml, 正确方式应该是：　com/config/xml</li></ul></li><li><p>pow.xml的配置、　<a href="http://gitsilence.gitee.io:4000/2019/09/01/Untitled/#%E9%85%8D%E7%BD%AEpow-xml" target="_blank" rel="noopener">点击进入</a></p></li><li><p><strong>使用注解方式，不需要创建Mapper.xml, 忘了删除了…</strong></p><a id="more"></a></li><li><p>实体类User.java</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.beans;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String uname;</span><br><span class="line">    <span class="keyword">private</span> String usex;</span><br><span class="line">    <span class="keyword">private</span> Integer uid;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getUname</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> uname;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUname</span><span class="params">(String uname)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.uname = uname;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getUsex</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> usex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUsex</span><span class="params">(String usex)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.usex = usex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getUid</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> uid;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUid</span><span class="params">(Integer uid)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.uid = uid;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"User&#123;"</span> +</span><br><span class="line">                <span class="string">"uname='"</span> + uname + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", usex='"</span> + usex + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", uid="</span> + uid +</span><br><span class="line">                <span class="string">'&#125;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>创建接口IUserDao.java</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.lacknb.beans.User;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Select;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IUserDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Select</span>(<span class="string">"select * from user"</span>)</span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">findAll</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>创建测试类</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.mybatis02;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.lacknb.beans.User;</span><br><span class="line"><span class="keyword">import</span> cn.lacknb.dao.IUserDao;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.io.Resources;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MapperTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 读取配置文件</span></span><br><span class="line">        InputStream config = Resources.getResourceAsStream(<span class="string">"com/config/xml/mybatis-config.xml"</span>);</span><br><span class="line">        <span class="comment">// 创建SqlSessionFactory</span></span><br><span class="line">        SqlSessionFactoryBuilder builder = <span class="keyword">new</span> SqlSessionFactoryBuilder();</span><br><span class="line">        SqlSessionFactory factory = builder.build(config);</span><br><span class="line">        <span class="comment">// 使用工厂类生产SqlSession对象</span></span><br><span class="line">        SqlSession session = factory.openSession();</span><br><span class="line">        <span class="comment">// 使用Sqlsession创建Dao接口的代理对象</span></span><br><span class="line">        IUserDao dao = session.getMapper(IUserDao.class);</span><br><span class="line">        <span class="comment">// 使用代理对象执行方法</span></span><br><span class="line">        List&lt;User&gt; users = dao.findAll();</span><br><span class="line">        <span class="keyword">for</span> (User user: users)&#123;</span><br><span class="line">            System.out.println(user);</span><br><span class="line">        &#125;</span><br><span class="line">        session.close();</span><br><span class="line">        config.close();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>mybatis-config.xml文件</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE configuration</span></span><br><span class="line"><span class="meta">        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"</span></span><br><span class="line"><span class="meta">        "http://mybatis.org/dtd/mybatis-3-config.dtd"&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--    配置环境--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">"development"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--       配置mysql的环境， 和default保持一致--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">"development"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--           配置事务的类型　ＪＤＢＣ  --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">"JDBC"</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            配置数据源（连接池）--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">"POOLED"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driver"</span> <span class="attr">value</span>=<span class="string">"com.mysql.jdbc.Driver"</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"jdbc:mysql://localhost:3306/mybatis?characterEncoding=utf8"</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"root"</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"root"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--        映射文件的位置--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;mapper resource="com/config/xml/Mapper.xml"/&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        使用注解的方式--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">class</span>=<span class="string">"cn.lacknb.dao.IUserDao"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>显示日志文件log4j.properties</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># global logging configuration</span><br><span class="line">log4j.rootLogger=ERROR, stdout</span><br><span class="line"># Mybatis logging configuration...</span><br><span class="line"># 将包com.mybatis下的日志等级设为DEBUG</span><br><span class="line">log4j.logger.com.mybatis=DEBUG</span><br><span class="line"># Console output ...</span><br><span class="line">log4j.appender.stdout=org.apache.log4j.ConsoleAppender</span><br><span class="line">log4j.appender.stdout.layout=org.apache.log4j.PatternLayout</span><br><span class="line"></span><br><span class="line">log4j.appender.stdout.layout.ConversionPattern=%5p [%t] - %m%n</span><br></pre></td></tr></table></figure><!-- rebuild by neat -->]]></content>
      
      
      <categories>
          
          <category> mybatis </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mybatis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MybatisUtils工具类</title>
      <link href="/2019/09/06/MybatisUtils%E5%B7%A5%E5%85%B7%E7%B1%BB/"/>
      <url>/2019/09/06/MybatisUtils%E5%B7%A5%E5%85%B7%E7%B1%BB/</url>
      
        <content type="html"><![CDATA[<!-- build time:Tue Dec 31 2019 09:54:11 GMT+0800 (CST) --><h1 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h1><ul><li><blockquote><h2 id="SqlSession"><a href="#SqlSession" class="headerlink" title="SqlSession"></a>SqlSession</h2><p>每个线程都应该有它自己的 SqlSession 实例。<strong>SqlSession 的实例不是线程安全的</strong>，因此是不能被共享的，所以它的最佳的作用域是请求或方法作用域。<strong>绝对不能将 SqlSession 实例的引用放在一个类的静态域</strong>，甚至一个类的实例变量也不行。 也绝不能将 SqlSession 实例的引用放在任何类型的托管作用域中，比如 Servlet 框架中的 HttpSession。 如果你现在正在使用一种 Web 框架，要考虑 SqlSession 放在一个和 HTTP 请求对象相似的作用域中。 换句话说，每次收到的 HTTP 请求，就可以打开一个 SqlSession，返回一个响应，就关闭它。 这个关闭操作是很重要的，你应该把这个关闭操作放到 finally 块中以确保每次都能执行关闭。</p></blockquote></li></ul><p><a href="http://gitsilence.gitee.io/2019/09/05/Mybatis%E4%B8%80%E4%BA%9B%E7%BB%86%E8%8A%82%E8%AF%A6%E8%A7%A3-%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0/" target="_blank" rel="noopener">Mybatis一些细节详解-持续更新</a></p><a id="more"></a><h2 id="MybatisUtils-java"><a href="#MybatisUtils-java" class="headerlink" title="MybatisUtils.java"></a>MybatisUtils.java</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.mybatis.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.io.Resources;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MybatisUtils</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> SqlSessionFactory factory;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            InputStream in = Resources.getResourceAsStream(<span class="string">"mybatis-config.xml"</span>);</span><br><span class="line">            factory = <span class="keyword">new</span> SqlSessionFactoryBuilder().build(in);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> SqlSession <span class="title">getSession</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> factory.openSession();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><!-- rebuild by neat -->]]></content>
      
      
      <categories>
          
          <category> mybatis </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mybatis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mybatis一些细节详解[持续更新]</title>
      <link href="/2019/09/05/Mybatis%E4%B8%80%E4%BA%9B%E7%BB%86%E8%8A%82%E8%AF%A6%E8%A7%A3-%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0/"/>
      <url>/2019/09/05/Mybatis%E4%B8%80%E4%BA%9B%E7%BB%86%E8%8A%82%E8%AF%A6%E8%A7%A3-%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0/</url>
      
        <content type="html"><![CDATA[<!-- build time:Tue Dec 31 2019 09:54:11 GMT+0800 (CST) --><h2 id="原文来自mybatis官网，点此进入"><a href="#原文来自mybatis官网，点此进入" class="headerlink" title="原文来自mybatis官网，点此进入"></a><a href="http://www.mybatis.org/mybatis-3/zh/getting-started.html" target="_blank" rel="noopener">原文来自mybatis官网，点此进入</a></h2><h1 id="mybatis中的命名解析"><a href="#mybatis中的命名解析" class="headerlink" title="mybatis中的命名解析"></a>mybatis中的命名解析</h1><p><strong>为了减少输入量，MyBatis中，命名空间(Namespaces)的作用并不大，是可选的。但现在，随着命名空间越发重要，你必须指定命名空间</strong></p><p><strong><em>命名空间的作用有两个，一个是利用更长的完全限定名来将不同的语句隔离开来，同时也实现了你上面见到的接口绑定。就算你觉得暂时用不到接口绑定，你也应该遵循这里的规定，以防哪天你改变了注意。长远看来,只要将命名空间置于合适的Java包命名空间之中，你的代码会变得更加整洁，也有利于你更方便地使用Mybatis。</em></strong></p><a id="more"></a><p>*<em>命名解析: *</em>　为了减少输入量，MyBatis对所有的命名配置元素（包括语句，结果映射，缓存等）使用如下的命名解析规则。</p><ul><li><p>完全限定名 (比如　“com.mypackage.MyMapper.selectAllThings”)将被直接用于查找及使用。</p></li><li><p>短名称　(比如　“selectAllThings”)如果全局唯一也可以作为一个单独的引用。如果不唯一，有两个或两个以上的相同名称（比如　“com.foo.selectAllThings” 和　“com.bar.selectAllThings”, 那么使用时就会产生”短名称不唯一”的错误，这种情况下就必须使用完全限定名。</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.mybatis.example;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">BlogMapper</span> </span>&#123;</span><br><span class="line">  <span class="meta">@Select</span>(<span class="string">"SELECT * FROM blog WHERE id = #&#123;id&#125;"</span>)</span><br><span class="line">  <span class="function">Blog <span class="title">selectBlog</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><blockquote><p>使用注解来映射简单语句会使代码显得更加简洁，然而对于稍微复杂一点的语句，Java 注解就力不从心了，并且会显得更加混乱。<br>因此，如果你需要完成很复杂的事情，那么最好使用 XML 来映射语句。选择何种方式来配置映射，以及认为映射语句定义的一致性是否重要，这些完全取决于你和你的团队。 换句话说，永远不要拘泥于一种方式，你可以很轻松的在基于注解和 XML 的语句映射方式间自由移植和切换。</p></blockquote></li></ul><h1 id="作用域（Scope）和生命周期"><a href="#作用域（Scope）和生命周期" class="headerlink" title="作用域（Scope）和生命周期"></a>作用域（Scope）和生命周期</h1><p>理解我们目前已经讨论过的不同作用域和生命周期类是至关重要的，因为错误的使用会导致非常严重的并发问题。</p><hr><p>提示 对象生命周期和依赖注入框架</p><p>依赖注入框架可以创建线程安全的、基于事务的 SqlSession 和映射器，并将它们直接注入到你的 bean 中，因此可以直接忽略它们的生命周期。 如果对如何通过依赖注入框架来使用 MyBatis 感兴趣，可以研究一下 MyBatis-Spring 或 MyBatis-Guice 两个子项目。</p><hr><h2 id="SqlSessionFactoryBuilder"><a href="#SqlSessionFactoryBuilder" class="headerlink" title="SqlSessionFactoryBuilder"></a>SqlSessionFactoryBuilder</h2><p>这个类可以被实例化、使用和丢弃，一旦创建了 SqlSessionFactory，就不再需要它了。 因此 SqlSessionFactoryBuilder 实例的最佳作用域是方法作用域（也就是局部方法变量）。 你可以重用 SqlSessionFactoryBuilder 来创建多个 SqlSessionFactory 实例，但是最好还是不要让其一直存在，以保证所有的 XML 解析资源可以被释放给更重要的事情。</p><h2 id="SqlSessionFactory"><a href="#SqlSessionFactory" class="headerlink" title="SqlSessionFactory"></a>SqlSessionFactory</h2><p>SqlSessionFactory 一旦被创建就应该在应用的运行期间一直存在，没有任何理由丢弃它或重新创建另一个实例。 使用 SqlSessionFactory 的最佳实践是在应用运行期间不要重复创建多次，多次重建 SqlSessionFactory 被视为一种代码“坏味道（bad smell）”。因此 SqlSessionFactory 的最佳作用域是应用作用域。 有很多方法可以做到，最简单的就是使用单例模式或者静态单例模式。</p><h2 id="SqlSession"><a href="#SqlSession" class="headerlink" title="SqlSession"></a>SqlSession</h2><p>每个线程都应该有它自己的 SqlSession 实例。SqlSession 的实例不是线程安全的，因此是不能被共享的，所以它的最佳的作用域是请求或方法作用域。 绝对不能将 SqlSession 实例的引用放在一个类的静态域，甚至一个类的实例变量也不行。 也绝不能将 SqlSession 实例的引用放在任何类型的托管作用域中，比如 Servlet 框架中的 HttpSession。 如果你现在正在使用一种 Web 框架，要考虑 SqlSession 放在一个和 HTTP 请求对象相似的作用域中。 换句话说，每次收到的 HTTP 请求，就可以打开一个 SqlSession，返回一个响应，就关闭它。 这个关闭操作是很重要的，你应该把这个关闭操作放到 finally 块中以确保每次都能执行关闭。 下面的示例就是一个确保 SqlSession 关闭的标准模式：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> (SqlSession session = sqlSessionFactory.openSession()) &#123;</span><br><span class="line">  <span class="comment">// 你的应用逻辑代码</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在你的所有的代码中一致地使用这种模式来保证所有数据库资源都能被正确地关闭。</p><h2 id="映射器实例"><a href="#映射器实例" class="headerlink" title="映射器实例"></a>映射器实例</h2><p>映射器是一些由你创建的、绑定你映射的语句的接口。映射器接口的实例是从 SqlSession 中获得的。因此从技术层面讲，任何映射器实例的最大作用域是和请求它们的 SqlSession 相同的。尽管如此，映射器实例的最佳作用域是方法作用域。 也就是说，映射器实例应该在调用它们的方法中被请求，用过之后即可丢弃。 并不需要显式地关闭映射器实例，尽管在整个请求作用域保持映射器实例也不会有什么问题，但是你很快会发现，像 SqlSession 一样，在这个作用域上管理太多的资源的话会难于控制。 为了避免这种复杂性，最好把映射器放在方法作用域内。下面的示例就展示了这个实践：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> (SqlSession session = sqlSessionFactory.openSession()) &#123;</span><br><span class="line">  BlogMapper mapper = session.getMapper(BlogMapper.class);</span><br><span class="line">  <span class="comment">// 你的应用逻辑代码</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Resource属性、url属性、uri属性"><a href="#Resource属性、url属性、uri属性" class="headerlink" title="Resource属性、url属性、uri属性"></a>Resource属性、url属性、uri属性</h2><ul><li><p>resource属性：</p><ul><li>常用的，用于指定配置文件的位置，是按照类路径的写法来写，并且必须存在于类路径下。</li></ul></li><li><p>url属性：</p><ul><li><p>是要求按照Url的写法来写地址</p></li><li><p>URL: Uniform Resource Locator 统一资源定位符。它是可以唯一标识一个资源的位置。‘</p></li><li><p>例如写法：</p><ul><li><properties url="file:///media/nianshao/59D5FCE97201B8A7/java/apache-maven-3.6.1/conf/settings.xml"></properties></li></ul></li></ul></li></ul><ul><li><p>它的写法：</p><ul><li><a href="http://localhost:8080/mybatis/demo01Servlet" target="_blank" rel="noopener">http://localhost:8080/mybatis/demo01Servlet</a></li><li>协议 主机 端口 URI</li></ul></li></ul><ul><li>URI： Uniform Resource Identifier 统一资源标识符。它是在应用中可以唯一定位一个资源的。</li></ul><!-- rebuild by neat -->]]></content>
      
      
      <categories>
          
          <category> mybatis </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mybatis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>scrapy爬52古装网高清壁纸并下载</title>
      <link href="/2019/08/26/scrapy%E7%88%AC52%E5%8F%A4%E8%A3%85%E7%BD%91%E9%AB%98%E6%B8%85%E5%A3%81%E7%BA%B8%E5%B9%B6%E4%B8%8B%E8%BD%BD/"/>
      <url>/2019/08/26/scrapy%E7%88%AC52%E5%8F%A4%E8%A3%85%E7%BD%91%E9%AB%98%E6%B8%85%E5%A3%81%E7%BA%B8%E5%B9%B6%E4%B8%8B%E8%BD%BD/</url>
      
        <content type="html"><![CDATA[<!-- build time:Tue Dec 31 2019 09:54:11 GMT+0800 (CST) --><h2 id="1-创建项目"><a href="#1-创建项目" class="headerlink" title="1. 创建项目"></a>1. 创建项目</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建爬虫项目</span></span><br><span class="line">scrapy startproject GuzhuangWallpaper</span><br><span class="line"></span><br><span class="line"><span class="comment"># 进入爬虫项目的目录，生成爬虫文件(模板)</span></span><br><span class="line">scrapy genspider guzhuang www.52guzhuang.com</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="2-setting文件的配置"><a href="#2-setting文件的配置" class="headerlink" title="2. setting文件的配置"></a>2. setting文件的配置</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Scrapy settings for GuzhuangWallpaper project</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># For simplicity, this file contains only settings considered important or</span></span><br><span class="line"><span class="comment"># commonly used. You can find more settings consulting the documentation:</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#     https://doc.scrapy.org/en/latest/topics/settings.html</span></span><br><span class="line"><span class="comment">#     https://doc.scrapy.org/en/latest/topics/downloader-middleware.html</span></span><br><span class="line"><span class="comment">#     https://doc.scrapy.org/en/latest/topics/spider-middleware.html</span></span><br><span class="line"></span><br><span class="line">BOT_NAME = <span class="string">'GuzhuangWallpaper'</span></span><br><span class="line"></span><br><span class="line">SPIDER_MODULES = [<span class="string">'GuzhuangWallpaper.spiders'</span>]</span><br><span class="line">NEWSPIDER_MODULE = <span class="string">'GuzhuangWallpaper.spiders'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Crawl responsibly by identifying yourself (and your website) on the user-agent</span></span><br><span class="line">USER_AGENT = <span class="string">'User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.86 Safari/537.36'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Obey robots.txt rules</span></span><br><span class="line">ROBOTSTXT_OBEY = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">LOG_LEVEL = <span class="string">'WARNING'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置下载参数</span></span><br><span class="line"><span class="comment"># FILES_STORE = "D:"  # 文件的存储路径</span></span><br><span class="line">IMAGES_STORE = <span class="string">"/media/nianshao/59D5FCE97201B8A7/download02/古装壁纸"</span>  <span class="comment"># 图片的存储路径</span></span><br><span class="line"><span class="comment"># 避免下载最近90天已经下载过的文件内容</span></span><br><span class="line">FILES_EXPIRES = <span class="number">90</span></span><br><span class="line"><span class="comment"># 避免下载最近90天已经下载过的图像内容</span></span><br><span class="line">IMAGES_EXPIRES = <span class="number">0</span></span><br><span class="line"><span class="comment"># 设置图片缩略图</span></span><br><span class="line">IMAGES_THUMBS = &#123;</span><br><span class="line">    <span class="string">'small'</span>: (<span class="number">50</span>, <span class="number">50</span>),</span><br><span class="line">    <span class="string">'big'</span>: (<span class="number">250</span>, <span class="number">250</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">#该字段的值为xxxItem中定义的存储图片链接的img_urls字段</span></span><br><span class="line">IMAGES_URLS_FIELD = <span class="string">"img_urls"</span></span><br><span class="line"><span class="comment"># 该字段的值为xxxItem中定义的存储图片信息的imgages字段</span></span><br><span class="line">IMAGES_RESULT_FIELD = <span class="string">"images"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 图片过滤器，最小高度和宽度，低于此尺寸不下载</span></span><br><span class="line">IMAGES_MIN_HEIGHT = <span class="number">110</span></span><br><span class="line">IMAGES_MIN_WIDTH = <span class="number">110</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Configure maximum concurrent requests performed by Scrapy (default: 16)</span></span><br><span class="line"><span class="comment">#CONCURRENT_REQUESTS = 32</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Configure a delay for requests for the same website (default: 0)</span></span><br><span class="line"><span class="comment"># See https://doc.scrapy.org/en/latest/topics/settings.html#download-delay</span></span><br><span class="line"><span class="comment"># See also autothrottle settings and docs</span></span><br><span class="line"><span class="comment">#DOWNLOAD_DELAY = 3</span></span><br><span class="line"><span class="comment"># The download delay setting will honor only one of:</span></span><br><span class="line"><span class="comment">#CONCURRENT_REQUESTS_PER_DOMAIN = 16</span></span><br><span class="line"><span class="comment">#CONCURRENT_REQUESTS_PER_IP = 16</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Disable cookies (enabled by default)</span></span><br><span class="line"><span class="comment">#COOKIES_ENABLED = False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Disable Telnet Console (enabled by default)</span></span><br><span class="line"><span class="comment">#TELNETCONSOLE_ENABLED = False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Override the default request headers:</span></span><br><span class="line">DEFAULT_REQUEST_HEADERS = &#123;</span><br><span class="line">  <span class="string">'Accept'</span>: <span class="string">'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8'</span>,</span><br><span class="line">  <span class="string">'Accept-Language'</span>: <span class="string">'en'</span>,</span><br><span class="line">  <span class="string">'Referer'</span>: <span class="string">'http://www.52guzhuang.com/forum-59-2.html'</span>,</span><br><span class="line">    <span class="string">'Cookie'</span>: <span class="string">'8ZxE_2132_saltkey=It2jtbtX; 8ZxE_2132_lastvisit=1566439893; bdshare_firstime=1566443802012; 8ZxE_2132_atarget=1; security_session_verify=27962fc0952df38b5fd0b1dd5d5b4097; ZDEDebuggerPresent=php,phtml,php3; Qs_lvt_192466=1566443795%2C1566632328; 8ZxE_2132_visitedfid=59D45; 8ZxE_2132_st_t=0%7C1566645295%7C7bc18059531f8726ac78d0664c62a87a; 8ZxE_2132_forum_lastvisit=D_45_1566643250D_59_1566645295; 8ZxE_2132_viewid=tid_58630; 8ZxE_2132_st_p=0%7C1566645504%7C2616708e5e9e0d761d5c513cf26d362a; 8ZxE_2132_sendmail=1; Qs_pv_192466=220429305054871900%2C4055271188718522400%2C577107211184728000%2C1215782351179700500%2C3219074084875213300; 8ZxE_2132_lastact=1566645606%09forum.php%09ajax'</span>,</span><br><span class="line">    <span class="string">'Host'</span>: <span class="string">'www.52guzhuang.com'</span>,</span><br><span class="line">    <span class="string">'Pragma'</span>: <span class="string">'no-cache'</span>,</span><br><span class="line">    <span class="string">'Upgrade-Insecure-Requests'</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">'User-Agent'</span>: <span class="string">'Opera/9.80 (Windows NT 6.0) Presto/2.12.388 Version/12.14'</span>,</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># Enable or disable spider middlewares</span></span><br><span class="line"><span class="comment"># See https://doc.scrapy.org/en/latest/topics/spider-middleware.html</span></span><br><span class="line"><span class="comment">#SPIDER_MIDDLEWARES = &#123;</span></span><br><span class="line"><span class="comment">#    'GuzhuangWallpaper.middlewares.GuzhuangwallpaperSpiderMiddleware': 543,</span></span><br><span class="line"><span class="comment">#&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Enable or disable downloader middlewares</span></span><br><span class="line"><span class="comment"># See https://doc.scrapy.org/en/latest/topics/downloader-middleware.html</span></span><br><span class="line"><span class="comment">#DOWNLOADER_MIDDLEWARES = &#123;</span></span><br><span class="line"><span class="comment">#    'GuzhuangWallpaper.middlewares.GuzhuangwallpaperDownloaderMiddleware': 543,</span></span><br><span class="line"><span class="comment">#&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Enable or disable extensions</span></span><br><span class="line"><span class="comment"># See https://doc.scrapy.org/en/latest/topics/extensions.html</span></span><br><span class="line"><span class="comment">#EXTENSIONS = &#123;</span></span><br><span class="line"><span class="comment">#    'scrapy.extensions.telnet.TelnetConsole': None,</span></span><br><span class="line"><span class="comment">#&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Configure item pipelines</span></span><br><span class="line"><span class="comment"># See https://doc.scrapy.org/en/latest/topics/item-pipeline.html</span></span><br><span class="line">ITEM_PIPELINES = &#123;</span><br><span class="line">   <span class="string">'scrapy.pipelines.images.ImagesPipeline'</span>: <span class="number">1</span>,</span><br><span class="line">   <span class="string">'GuzhuangWallpaper.pipelines.GuzhuangwallpaperPipeline'</span>: <span class="number">300</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># Enable and configure the AutoThrottle extension (disabled by default)</span></span><br><span class="line"><span class="comment"># See https://doc.scrapy.org/en/latest/topics/autothrottle.html</span></span><br><span class="line"><span class="comment">#AUTOTHROTTLE_ENABLED = True</span></span><br><span class="line"><span class="comment"># The initial download delay</span></span><br><span class="line"><span class="comment">#AUTOTHROTTLE_START_DELAY = 5</span></span><br><span class="line"><span class="comment"># The maximum download delay to be set in case of high latencies</span></span><br><span class="line"><span class="comment">#AUTOTHROTTLE_MAX_DELAY = 60</span></span><br><span class="line"><span class="comment"># The average number of requests Scrapy should be sending in parallel to</span></span><br><span class="line"><span class="comment"># each remote server</span></span><br><span class="line"><span class="comment">#AUTOTHROTTLE_TARGET_CONCURRENCY = 1.0</span></span><br><span class="line"><span class="comment"># Enable showing throttling stats for every response received:</span></span><br><span class="line"><span class="comment">#AUTOTHROTTLE_DEBUG = False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Enable and configure HTTP caching (disabled by default)</span></span><br><span class="line"><span class="comment"># See https://doc.scrapy.org/en/latest/topics/downloader-middleware.html#httpcache-middleware-settings</span></span><br><span class="line"><span class="comment">#HTTPCACHE_ENABLED = True</span></span><br><span class="line"><span class="comment">#HTTPCACHE_EXPIRATION_SECS = 0</span></span><br><span class="line"><span class="comment">#HTTPCACHE_DIR = 'httpcache'</span></span><br><span class="line"><span class="comment">#HTTPCACHE_IGNORE_HTTP_CODES = []</span></span><br><span class="line"><span class="comment">#HTTPCACHE_STORAGE = 'scrapy.extensions.httpcache.FilesystemCacheStorage'</span></span><br></pre></td></tr></table></figure><h2 id="3-爬虫文件的编写"><a href="#3-爬虫文件的编写" class="headerlink" title="3. 爬虫文件的编写"></a>3. 爬虫文件的编写</h2><blockquote><ul><li><strong>items.py</strong></li></ul></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Define here the models for your scraped items</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># See documentation in:</span></span><br><span class="line"><span class="comment"># https://doc.scrapy.org/en/latest/topics/items.html</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GuzhuangwallpaperItem</span><span class="params">(scrapy.Item)</span>:</span></span><br><span class="line">    <span class="comment"># define the fields for your item here like:</span></span><br><span class="line">    <span class="comment"># name = scrapy.Field()</span></span><br><span class="line">    img_urls = scrapy.Field()  <span class="comment"># 固定字段 与 setting中的一致</span></span><br></pre></td></tr></table></figure><blockquote><ul><li><strong>pipelines.py</strong></li></ul></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Define your item pipelines here</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Don't forget to add your pipeline to the ITEM_PIPELINES setting</span></span><br><span class="line"><span class="comment"># See: https://doc.scrapy.org/en/latest/topics/item-pipeline.html</span></span><br><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"><span class="keyword">from</span> scrapy.exceptions <span class="keyword">import</span> DropItem</span><br><span class="line"><span class="keyword">from</span> scrapy.pipelines.images <span class="keyword">import</span> ImagesPipeline  <span class="comment"># 内置的图片通道</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GuzhuangwallpaperPipeline</span><span class="params">(ImagesPipeline)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">item_completed</span><span class="params">(self, results, item, info)</span>:</span></span><br><span class="line">        image_path = [x[<span class="string">'path'</span>] <span class="keyword">for</span> ok, x <span class="keyword">in</span> results <span class="keyword">if</span> ok]</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> image_path:</span><br><span class="line">            <span class="keyword">raise</span> DropItem(<span class="string">'Item contains no images'</span>)</span><br><span class="line">        item[<span class="string">'image_paths'</span>] = image_path</span><br><span class="line">        <span class="keyword">return</span> item</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">process_item</span><span class="params">(self, item, spider)</span>:</span></span><br><span class="line">        print(<span class="string">"正在下载"</span>, item[<span class="string">'img_urls'</span>])</span><br><span class="line"></span><br><span class="line">        <span class="keyword">pass</span></span><br></pre></td></tr></table></figure><blockquote><ul><li><strong>guzhuang.py</strong></li></ul></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"><span class="keyword">from</span> ..items <span class="keyword">import</span> GuzhuangwallpaperItem</span><br><span class="line"><span class="keyword">from</span> time <span class="keyword">import</span> sleep</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GuzhuangSpider</span><span class="params">(scrapy.Spider)</span>:</span></span><br><span class="line">    name = <span class="string">'guzhuang'</span></span><br><span class="line">    allowed_domains = [<span class="string">'www.52guzhuang.com'</span>]</span><br><span class="line">    start_urls = [<span class="string">'http://www.52guzhuang.com/forum-59-1.html'</span>]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.base_url = <span class="string">"http://www.52guzhuang.com/"</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">parse</span><span class="params">(self, response)</span>:</span></span><br><span class="line">        urls = response.xpath(<span class="string">'//div[@class="v-meta-title"]/a[1]/@href'</span>).extract()</span><br><span class="line">        <span class="keyword">for</span> url <span class="keyword">in</span> urls:</span><br><span class="line">            <span class="keyword">yield</span> scrapy.Request(url, callback=self.get_picture, )</span><br><span class="line">            <span class="comment"># break</span></span><br><span class="line">            <span class="comment"># sleep(1)</span></span><br><span class="line">        <span class="comment"># next_page = response.xpath('//a[@class="nxt"]/text()[last()]').extract_first()</span></span><br><span class="line">        <span class="comment"># if next_page == '下一页':</span></span><br><span class="line">        <span class="comment">#     href = response.xpath('//a[@class="nxt"]/@href[last()]').extract_first()</span></span><br><span class="line">        <span class="comment">#     yield scrapy.Request(self.base_url + href, callback=self.parse, )</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_picture</span><span class="params">(self, response)</span>:</span></span><br><span class="line">        item = GuzhuangwallpaperItem()</span><br><span class="line">        img_urls = response.xpath(<span class="string">'//img[@class="zoom"]/@file'</span>).extract()</span><br><span class="line">        next_page = response.xpath(<span class="string">'//div[@class="pg"]/a[last()]/text()'</span>).extract_first()</span><br><span class="line">        <span class="keyword">for</span> url <span class="keyword">in</span> img_urls:</span><br><span class="line">            item[<span class="string">'img_urls'</span>] = [self.base_url + url]</span><br><span class="line">            print(url)</span><br><span class="line">            <span class="keyword">yield</span> item</span><br><span class="line">        <span class="keyword">if</span> next_page == <span class="string">'下一页'</span>:</span><br><span class="line">            href = response.xpath(<span class="string">'//div[@class="pg"]/a[last()]/@href'</span>).extract_first()</span><br><span class="line">            pic_url = self.base_url + href</span><br><span class="line">            <span class="keyword">yield</span> scrapy.Request(pic_url, callback=self.get_picture)</span><br><span class="line">            <span class="comment"># sleep(1)</span></span><br></pre></td></tr></table></figure><h2 id="4-运行爬虫"><a href="#4-运行爬虫" class="headerlink" title="4. 运行爬虫"></a>4. 运行爬虫</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scrapy crawl guzhuang</span><br></pre></td></tr></table></figure><!-- rebuild by neat -->]]></content>
      
      
      <categories>
          
          <category> 爬虫 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 爬虫 </tag>
            
            <tag> scrapy </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ognl表达式和值栈</title>
      <link href="/2019/08/20/ognl%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%92%8C%E5%80%BC%E6%A0%88/"/>
      <url>/2019/08/20/ognl%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%92%8C%E5%80%BC%E6%A0%88/</url>
      
        <content type="html"><![CDATA[<!-- build time:Tue Dec 31 2019 09:54:11 GMT+0800 (CST) --><hr><h1 id="OGNL表达式"><a href="#OGNL表达式" class="headerlink" title="OGNL表达式"></a>OGNL表达式</h1><ul><li>OGNL的全称是对象图导航语言，使用这种表达式语言，可以通过某种表达式语法，存取Java对象任意属性，调用Java对象的方法，同时能够自动实现必要的类型转换。</li></ul><ul><li><ul><li>如果把表达式看作是一个带有语义的字符串，那么OGNL无疑成为这个语义字符串与Java对象之间的沟通的桥梁。</li></ul></li></ul><a id="more"></a><h5 id="Struts默认的表达式语言就是OGNL，它具有以下特点："><a href="#Struts默认的表达式语言就是OGNL，它具有以下特点：" class="headerlink" title="Struts默认的表达式语言就是OGNL，它具有以下特点："></a>Struts默认的表达式语言就是OGNL，它具有以下特点：</h5><ul><li><blockquote><p>支持对象方法调用。例如： objName.methodName()。</p></blockquote></li><li><blockquote><p>支持类静态方法调用和值访问，表达式的格式为@类全名(包含包路径)@方法名(值名)。例如：　@java.lang.String@format(‘foo %s’, ‘bar’)。</p></blockquote></li><li><blockquote><p>支持赋值操作和表达式关联。例如： price = 100, discount = 0.8, 在方法calculatePrice()中进行乘法计算会返回80。</p></blockquote></li><li><blockquote><p>访问OGNL上下文(ognl Context) 和　ActionContext。</p></blockquote></li><li><blockquote><p>操作集合对象。</p></blockquote></li><li><blockquote><p>ognl的操作实际上就是围绕着ognl结构的三个要素而进行的，分别是表达式、根对象、上下文环境，　下面分别讲解这三个要素。</p></blockquote></li></ul><h3 id="1-表达式"><a href="#1-表达式" class="headerlink" title="1. 表达式"></a>1. 表达式</h3><ul><li><blockquote><p>ognl的getValue()方法中有两个参数：　第一个参数是是表达式。表达式是整个ognl的核心，ognl会根据表达式去对象中取值。所有ognl操作都针对表达式解析后进行的。它表明了此次ognl操作要　“做什么”。表达式就是一个带有语法含义的字符串，这个字符串规定了操作的类型和操作的内容。ognl支持大量的表达式语法，不仅支持这种　“链式”　对象访问路径，还支持在表达式中进行简单的运算。</p></blockquote></li></ul><hr><h3 id="2-根对象（ROOT）"><a href="#2-根对象（ROOT）" class="headerlink" title="2. 根对象（ROOT）"></a>2. 根对象（ROOT）</h3><ul><li><blockquote><p>OGNL的getValue()方法中的第二个参数就是Root对象，Root对象可以理解为OGNL的操作对象，表达式规定了　“做什么”，　而Root对象则规定了　“对谁操作”。OGNL称为对象图导航语言，所谓对象图，即以任意一个对象为根，通过OGNL可以访问这个对象关联的其他对象。</p></blockquote></li></ul><hr><h3 id="3-Context对象"><a href="#3-Context对象" class="headerlink" title="3. Context对象"></a>3. Context对象</h3><ul><li><blockquote><p>实际上OGNL的取值还需要一个上下文环境。设置了Root对象，OGNL可以对Root对象进行取值或写值等操作，Root对象所在环境就是OGNL的上下文环境（Context）。上下文环境规定了OGNL的操作　“在哪里进行”。上下文环境Context是一个Map类型的对象，在表达式中访问Context对象，需要使用 “#” 号加上对象名称, 即　“＃对象名称”　的形式。</p></blockquote></li></ul><h3 id="例子："><a href="#例子：" class="headerlink" title="例子："></a>例子：</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.ognl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> ognl.Ognl;</span><br><span class="line"><span class="keyword">import</span> ognl.OgnlException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestOgnlContext</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> OgnlException </span>&#123;</span><br><span class="line">        User user = <span class="keyword">new</span> User();</span><br><span class="line">        Group g = <span class="keyword">new</span> Group();</span><br><span class="line">        Branch b = <span class="keyword">new</span> Branch();</span><br><span class="line">        b.setBranchId(<span class="string">"test"</span>);</span><br><span class="line">        g.setBranch(b);</span><br><span class="line">        user.setGroup(g);</span><br><span class="line">        <span class="comment">// 用java来导航访问</span></span><br><span class="line">        System.out.println(<span class="string">"java方式－"</span> + user.getGroup().getBranch().getBranchId());</span><br><span class="line">        <span class="comment">// 利用OGNL表达式访问</span></span><br><span class="line">        System.out.println(<span class="string">"OGNＬ方式－"</span> + Ognl.getValue(<span class="string">"group.branch.branchId"</span>, user));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 设置user对象的username的属性值为itcast</span></span><br><span class="line">        user.setUsername(<span class="string">"itcast"</span>);</span><br><span class="line">        <span class="comment">// 创建context对象</span></span><br><span class="line">        Map context = <span class="keyword">new</span> HashMap();</span><br><span class="line">        <span class="comment">// 将user对象放入context对象中</span></span><br><span class="line">        context.put(<span class="string">"u"</span>, user);</span><br><span class="line">        <span class="comment">// 输出使用OGNL表达式获取context对象中的user对象的username值</span></span><br><span class="line">        System.out.println(<span class="string">"获取context中数据结果为-"</span> + Ognl.getValue(<span class="string">"#u.username"</span>, context, user));</span><br><span class="line">        System.out.println(<span class="string">"获取context中对象结果为-"</span> + Ognl.getValue(<span class="string">"#u.group.branch.branchId"</span>, context, user));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><blockquote><p>输出结果</p></blockquote></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">java方式－test</span><br><span class="line">OGNＬ方式－test</span><br><span class="line">获取context中数据结果为-itcast</span><br><span class="line">获取context中对象结果为-test</span><br></pre></td></tr></table></figure><!-- rebuild by neat -->]]></content>
      
      
      <categories>
          
          <category> struts2 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> struts2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Struts2的拦截器</title>
      <link href="/2019/08/17/Struts2%E7%9A%84%E6%8B%A6%E6%88%AA%E5%99%A8%E6%A0%88/"/>
      <url>/2019/08/17/Struts2%E7%9A%84%E6%8B%A6%E6%88%AA%E5%99%A8%E6%A0%88/</url>
      
        <content type="html"><![CDATA[<!-- build time:Tue Dec 31 2019 09:54:11 GMT+0800 (CST) --><hr><p>拦截器：</p><pre><code>拦截器链　和　拦截器栈</code></pre><hr><hr><h3 id="拦截器的工作原理："><a href="#拦截器的工作原理：" class="headerlink" title="拦截器的工作原理："></a>拦截器的工作原理：</h3><pre><code>通常情况下，拦截器都是以代理的方式调用的，它在一个action执行前后进行拦截围绕着Action和Result的执行而执行首先执行Action配置的拦截器，在Action与Result执行之后，拦截器会再次执行（与先前调用的顺序相反），在此链式执行的过程中，每一个拦截器在执行execute方法之前都可以直接返回。</code></pre><hr><a id="more"></a><h3 id="拦截器"><a href="#拦截器" class="headerlink" title="拦截器"></a>拦截器</h3><pre><code>    要想要让拦截器起作用，首先要对它进行配置。拦截器的配置在struts.xml文件中完成的，它通常以&lt;interceptor&gt;标签开头，以&lt;/interceptor&gt;标签结束。定义拦截器的语法如下：</code></pre><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">interceptor</span> <span class="attr">name</span>=<span class="string">"interceptorName"</span> <span class="attr">class</span>=<span class="string">"interceptorClass"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">"paramName"</span>&gt;</span>paramValue<span class="tag">&lt;/<span class="name">param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">interceptor</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><ul><li>上述语法格式中，name属性用来指定拦截器的名称，class属性用于指定<br>拦截器的实现类。有时，在定义拦截器时需要传入的参数，这时需要使用<br>param标签，其中name属性用来指定参数的名称，paramValue表示参数的值</li></ul></blockquote><hr><h3 id="拦截器栈"><a href="#拦截器栈" class="headerlink" title="拦截器栈"></a>拦截器栈</h3><pre><code>在实际开发中，经常需要在Action执行前同时执行多个拦截动作，如用户登录检查  、登录日志记录及权限检查等，这时，可以把多个拦截器组成一个拦截器栈。在  使用时，可以将栈内的多个拦截器当成一个整体来引用。当拦截器栈被附加到一  个Action时，在执行Action之前必须执行拦截器栈中的每一个拦截器。</code></pre><blockquote><ul><li>定义拦截器使用<interceptors>元素和<interceptor-stack>子元素<br>当配置多个拦截器时，需要使用<interceptor-ref>元素来指定多个拦截器<br>配置语法如下:</interceptor-ref></interceptor-stack></interceptors></li></ul></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">interceptors</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">interceptor-stack</span> <span class="attr">name</span>=<span class="string">"interceptorStackName"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">interceptor-ref</span> <span class="attr">name</span>=<span class="string">"interceptorName"</span>&gt;</span><span class="tag">&lt;/<span class="name">interceptor-ref</span>&gt;</span></span><br><span class="line">        ....</span><br><span class="line">      <span class="tag">&lt;/<span class="name">interceptor-stack</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">interceptors</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><ul><li>在上述语法中，interceptorStackName值表示配置的拦截器栈的名称<br>interceptorName值表示拦截器的名称。除此之外，在一个拦截器栈中还可以<br>包括另一个拦截器栈。代码如下：</li></ul></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">"default"</span> <span class="attr">namespace</span>=<span class="string">"/"</span> <span class="attr">extends</span>=<span class="string">"struts-default"</span> &gt;</span></span><br><span class="line">  <span class="comment">&lt;!--声明拦截器--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">interceptors</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">interceptor</span> <span class="attr">name</span>=<span class="string">"interceptor1"</span> <span class="attr">class</span>=<span class="string">"interceptorClass"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">interceptor</span> <span class="attr">name</span>=<span class="string">"interceptor2"</span> <span class="attr">class</span>=<span class="string">"interceptorClass"</span> /&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--定义一个拦截器栈myStack，该拦截器栈中包括两个拦截器和一个拦截器栈--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">interceptor-stack</span> <span class="attr">name</span>=<span class="string">"myStack"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">interceptor-ref</span> <span class="attr">name</span>=<span class="string">"defaultStack"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">interceptor-ref</span> <span class="attr">name</span>=<span class="string">"interceptor1"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">interceptor-ref</span> <span class="attr">name</span>=<span class="string">"interceptor1"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">interceptor-stack</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">interceptors</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">package</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><ul><li>在上述代码中，定义的拦截器栈是myStack，在myStack栈中，除了引用两个<br>自定义的拦截器interceptor1和interceptor2外，还引用了一个内置拦截器栈<br>defalultStack，这个拦截器是必须要引入的。</li></ul></blockquote><h3 id="默认拦截器"><a href="#默认拦截器" class="headerlink" title="默认拦截器"></a>默认拦截器</h3><blockquote><ul><li>如果想对一个包下的action使用相同的拦截器，则需要为该包中的每一个<br>action都重复指定同一个拦截器，这样写过于繁琐。这时，可以使用默认拦截<br>器，默认拦截器可以对其指定的包中所有的action都能起到拦截的作用。一<br>旦为某一个包指定了默认拦截器，并且该包中的action未显式地指定拦截器<br>则会使用默认拦截器。反之，<strong>若此包中的action中显式地指出了某个拦截器<br>，则该默认拦截器将会被屏蔽。此时，如果还想使用默认拦截器，则需要用<br>户手动配置该默认拦截器的引用。</strong></li></ul></blockquote><blockquote><ul><li>配置默认拦截器需要使用<default-interceptor-ref>元素，此元素为<br><package>元素的子元素。其语法如下</package></default-interceptor-ref></li></ul></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">default-interceptor-ref</span> <span class="attr">name</span>=<span class="string">"拦截器(栈)的名称"</span> /&gt;</span></span><br></pre></td></tr></table></figure><blockquote><ul><li>上述语法格式中，name属性的值必须是已存在的拦截器或拦截器栈的<br>名称。下面用该语法格式配置一个默认拦截器，示例代码如下：</li></ul></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">"default"</span> <span class="attr">namespace</span>=<span class="string">"/"</span> <span class="attr">extends</span>=<span class="string">"struts-default"</span> &gt;</span></span><br><span class="line">  <span class="comment">&lt;!--声明拦截器--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">interceptors</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">interceptor</span> <span class="attr">name</span>=<span class="string">"interceptor1"</span> <span class="attr">class</span>=<span class="string">"interceptorClass"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">interceptor</span> <span class="attr">name</span>=<span class="string">"interceptor2"</span> <span class="attr">class</span>=<span class="string">"interceptorClass"</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--定义一个配置默认拦截器栈myStack，该拦截器栈包含两个拦截器和一个拦截器栈--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">interceptor-stack</span> <span class="attr">name</span>=<span class="string">"myStack"</span> &gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">interceptor-ref</span> <span class="attr">name</span>=<span class="string">"interceptor1"</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">interceptor-ref</span> <span class="attr">name</span>=<span class="string">"interceptor2"</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">interceptor-ref</span> <span class="attr">name</span>=<span class="string">"defaultStack"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">interceptor-stack</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 配置包下的默认配置器，既可以是拦截器，也可以是拦截器栈--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">default-interceptor-ref</span> <span class="attr">name</span>=<span class="string">"myStack"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">action</span> <span class="attr">name</span>=<span class="string">"login"</span> <span class="attr">class</span>=<span class="string">"cn.itcast.action.LoginAction"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">result</span> <span class="attr">name</span>=<span class="string">"input"</span>&gt;</span>/login.jsp<span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">action</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">interceptors</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">package</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><ul><li>在上面代码中，指定了包下面的的默认拦截器为一个拦截器栈，该拦截器<br>栈将会作于包下所有的action。</li></ul></blockquote><p><strong>注意</strong>：　每一个包下只能定义一个默认拦截器，如果需要多个拦截器作为默<br>认拦截器，则可以将这些拦截器定义为一个拦截器栈，再将这个拦截器作为默认<br>默认拦截器即可。</p><h3 id="自定义拦截器"><a href="#自定义拦截器" class="headerlink" title="自定义拦截器"></a>自定义拦截器</h3><h4 id="实现自定义拦截器"><a href="#实现自定义拦截器" class="headerlink" title="实现自定义拦截器"></a><em>实现自定义拦截器</em></h4><pre><code>在程序开发过程中，如果需要开发自己的拦截器类，就需要直接或间接地实现      com.opensymphony.xwork2.interceptor.Interceptor接口，具体代码如下:</code></pre><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Interceptor</span> <span class="keyword">extends</span> <span class="title">Serializable</span></span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function">String <span class="title">interceptor</span><span class="params">(ActionInvocation invocation)</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>该接口提供了一下三个方法。</p><blockquote><ul><li>void init(): 该方法在拦截器被创建之后会立即被调用，它在拦截器的生命<br>周期内只能被调用一次。可以在该方法对相关资源进行必要的初始化。</li></ul></blockquote><blockquote><ul><li>void destroy(): 该方法和init()方法相对应，在拦截器实例被销毁之前，将<br>调用该方法来释放与拦截器相关的资源。它在拦截器的生命周期内也只被调用一次</li></ul></blockquote><blockquote><ul><li>String interceptor(ActionInvocation invocation) throws Exception:<br>该方法是拦截器的核心方法，用来添加真正执行拦截工作的代码，实现具体的拦截<br>操作。它返回一个字符串作为逻辑视图，系统根据返回的字符串跳转到对应的视图<br>资源。每拦截一个动作请求，该方法就会被调用一次。该方法的ActionInvocation<br>参数包含了被拦截的Action的引用，可以通过该参数的invoke()方法，将控制权交<br>给下一个拦截器或者转给Action的execute()方法。</li></ul></blockquote><ul><li>如果需要自定义的拦截器，只需要实现Interceptor接口的三个方法即可。然而在<br>实际开发过程中，除了实现Interceptor接口可以自定义拦截器外，更常用的一种<br>方式是继承抽象拦截类AbstractInterceptor。该类实现了Interceptor接口，并且<br>提供了init()方法和destroy()方法的空实现。使用时，可以直接继承该抽象类，而并不用实现那些不必要的方法。拦截器类AbstractInterceptor中定义的方法如下所示：</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">AbstractInterceptor</span> <span class="keyword">implements</span> <span class="title">Interceptor</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> String <span class="title">interceptor</span><span class="params">(ActionInvocation invocation)</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>从上述代码中可以看出，AbstractInterceptor类已经实现了Interceptor接口的<br>所有方法，一般情况下，只需继承AbstractInterceptor类，实现interceptor()方法<br>就可以创建自定义拦截器。</li></ul><blockquote><ul><li>只有当自定义拦截器<strong><em>需要打开系统资源时</em></strong>，才需要<strong><em>覆盖AbstractInterceptor类<br>的init()方法和destroy()方法。</em></strong>与实现Interceptor接口相比，继承AbstractInte-rceptor类的方法更为简单。</li></ul></blockquote><!-- rebuild by neat -->]]></content>
      
      
      <categories>
          
          <category> struts2 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Struts2的执行流程分析</title>
      <link href="/2019/08/04/Struts2%E7%9A%84%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B%E5%88%86%E6%9E%90/"/>
      <url>/2019/08/04/Struts2%E7%9A%84%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B%E5%88%86%E6%9E%90/</url>
      
        <content type="html"><![CDATA[<!-- build time:Tue Dec 31 2019 09:54:11 GMT+0800 (CST) --><hr><h3 id="Struts介绍"><a href="#Struts介绍" class="headerlink" title="Struts介绍"></a>Struts介绍</h3><pre><code>    Struts2是一个基于MVC设计模式的Web应用框架，它本质上相当于一个servlet，在MVC设计模式中，Struts2作为控制器(Controller)立模型与视图的数据交互。Struts 2是Struts的下一代产品，是在 struts 1和WebWork的技术基础上进行了合并的全新的Struts 2框架。其全新的Struts 2的体系结构与Struts 1的体系结构差别巨大。Struts 2以WebWork为核心，采用拦截器的机制来处理用户的请求，这样的设计也使得业务逻辑控制器能够与ServletAPI完全脱离开，所以Struts 2可以理解为WebWork的更新产品。虽然从Struts 1到Struts 2有着太大的变化，但是相对于WebWork，Struts 2的变化很小。</code></pre><a id="more"></a><hr><h3 id="执行流程分析"><a href="#执行流程分析" class="headerlink" title="执行流程分析"></a>执行流程分析</h3><blockquote><ol><li>浏览器发送一个请求(HttpServletRequest)</li><li>程序会调用StrutsPrepareAndExcuteFilter, 然后询问ActionMapper请求是否需要调用某个Action</li><li>如果ActionMapper决定调用某个Action，StrutsPrepareAndExcuteFilter会把请求的处理交给ActionProxy.</li><li>ActionProxy通过配置管理器(Configuration Manager)从配置文件(struts.xml)中读取框架的配置信息，从而找到需要调用的Action类</li><li>ActionProxy会创建一个ActionInvocation的实例。</li></ol></blockquote><blockquote><ol start="6"><li>ActionInvocation使用命名模式来调用Action，在调用Action前，会依次调用所有配置的拦截器(Intercepter1、Intercepter2、…)。</li><li>一旦Action执行完，返回结果字符串，ActionInvocation就会负责查找结果字符串对应的result，然后执行这个result。通常情况下result会调用一些模板(JSP等)来呈现页面.</li><li>产生的result信息返回给ActionInvocation，此过程中拦截器会被再次执行(顺序与Action执行之前相反).</li><li>产生一个HttpServletResponse的响应行为，通过SrutsPrepareAndExecuteFilter反馈给客户端</li></ol></blockquote><h3 id="xml配置信息模板"><a href="#xml配置信息模板" class="headerlink" title="xml配置信息模板"></a>xml配置信息模板</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE struts PUBLIC</span></span><br><span class="line"><span class="meta">        "-//Apache Software Foundation//DTD Struts Configuration 2.5//EN"</span></span><br><span class="line"><span class="meta">        "http://struts.apache.org/dtds/struts-2.5.dtd"&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">struts</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">"hello"</span> <span class="attr">namespace</span>=<span class="string">"/"</span> <span class="attr">extends</span>=<span class="string">"struts-default"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">action</span> <span class="attr">name</span>=<span class="string">"HelloAction"</span> <span class="attr">class</span>=<span class="string">"cn.lacknb.TestAction"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">name</span>=<span class="string">"success"</span>&gt;</span>/success.jsp<span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">action</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">package</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">struts</span>&gt;</span></span><br></pre></td></tr></table></figure><!-- rebuild by neat -->]]></content>
      
      
      <categories>
          
          <category> struts2 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> struts2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring入门学习</title>
      <link href="/2019/07/20/Spring%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0/"/>
      <url>/2019/07/20/Spring%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<!-- build time:Tue Dec 31 2019 09:54:11 GMT+0800 (CST) --><hr><hr><h2 id="1-编写流程"><a href="#1-编写流程" class="headerlink" title="1. 编写流程"></a>1. 编写流程</h2><blockquote><ul><li>下载Spring的开发包<br>下载地址： <a href="https://repo.spring.io/libs-release-local/org/springframework/spring/" title="Spring开发包下载" target="_blank" rel="noopener">点击跳转</a></li><li>导入Spring的jar包</li></ul></blockquote><a id="more"></a><blockquote><ul><li>配置Spring的核心xml文件</li><li>在程序中读取Spring的配置文件来获取Bean【Bean其实就是一个new好的对象】</li></ul></blockquote><p><strong><em>spring-core-5.0.2.RELEASE.jar</em></strong></p><pre><code>包含Spring框架基本的核心工具类，Spring其他组件都要使用这个包里的类，是其他组件的核心</code></pre><p><strong><em>spring-beans-5.0.2.RELEASE.jar</em></strong></p><pre><code>所有应用都要用到的，它包含访问配置文件、创建和管理Bean，以及进行Inversion of Control(Ioc)/Dependency Injection(DI)操作相关的所有类</code></pre><p><strong><em>spring-context-5.0.2.RELEASE.jar</em></strong></p><pre><code>Spring提供在基础IoC功能上的扩展服务，此外还提供许多企业级服务的支持，如邮件服务、任务调度、JNDI定位、EJB集成、远程访问、缓存以及各种视图层框架的封装等。</code></pre><p><strong><em>spring-expression-5.0.2.RELEASE.jar</em></strong></p><pre><code>Spring表达式语言</code></pre><p><strong><em>commons-logging-1.2.jar</em></strong></p><pre><code>第三方的，主要用于处理日志</code></pre><blockquote><ul><li>写个配置文件beans.xml 在src根目录下 模板在下面</li></ul></blockquote><pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;  &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;         xsi:schemaLocation=&quot;          http://www.springframework.org/schema/beans                         http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;   &lt;!-- bean definitions here --&gt;&lt;/beans&gt;</code></pre><h3 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h3><blockquote><ul><li>创建一个UserService接口</li></ul></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.spring;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><ul><li>创建一个实现类实现add方法 UserImpl</li></ul></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.spring;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserImpl</span> <span class="keyword">implements</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"添加用户...."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 以前的运行方式</span></span><br><span class="line">        <span class="comment">//UserService add = new UserImpl();</span></span><br><span class="line">       <span class="comment">// add.add();</span></span><br><span class="line">        <span class="comment">// 现在的运行方式</span></span><br><span class="line">        <span class="comment">// 使用UserService方式从spring容器中获取</span></span><br><span class="line">        <span class="comment">// 1. 加载配置文件beans.xml 内部就会创建对象</span></span><br><span class="line">        ApplicationContext context = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"beans.xml"</span>);</span><br><span class="line">        <span class="comment">// 2. 从spring容器获取UserService对象</span></span><br><span class="line">        UserImpl add = (UserImpl) context.getBean(<span class="string">"userService"</span>);  </span><br><span class="line">        <span class="comment">// 这里的字符串是beans.xml文件中的id</span></span><br><span class="line">        add.add();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><ul><li>beans.xml文件的配置</li></ul></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</span><br><span class="line">       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">       xsi:schemaLocation=&quot;</span><br><span class="line">http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt; &lt;!-- bean definitions here --&gt;</span><br><span class="line">    &lt;!-- bean in here --&gt;</span><br><span class="line">    &lt;bean id=&quot;userService&quot; class=&quot;com.spring.UserImpl&quot;&gt;&lt;/bean&gt;</span><br><span class="line">&lt;/beans&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">spring内部创建对象的原理：</span><br><span class="line">1. 解析xml文件，获取类名、id属性</span><br><span class="line">2. 通过反射，用类型创建对象</span><br><span class="line">3. 给创建的对象赋值</span><br></pre></td></tr></table></figure><h3 id="加载spring容器的三种方式"><a href="#加载spring容器的三种方式" class="headerlink" title="加载spring容器的三种方式"></a>加载spring容器的三种方式</h3><blockquote><ol><li>类路径获得配置文件</li></ol></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ApplicationContext context = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"beans.xml"</span>);</span><br><span class="line"><span class="comment">// 如果是放在包内</span></span><br><span class="line"><span class="comment">// new ClassPathXmlApplicationContext("com/spring/beans.xml")</span></span><br></pre></td></tr></table></figure><blockquote><ol start="2"><li>文件系统路径获得配置文件</li></ol></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ApplicationContext context = <span class="keyword">new</span> FileSystemXmlApplicationContext(<span class="string">"</span></span><br><span class="line"><span class="string">/home/nianshao/IdeaProjects/Test02/SpringTest01/src/beans.xml</span></span><br><span class="line"><span class="string">"</span>)</span><br></pre></td></tr></table></figure><blockquote><ol start="3"><li>使用BeanFactory(了解)</li></ol></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">String path = <span class="string">"/home/nianshao/IdeaProjects/Test02/SpringTest01/src/beans.xml"</span>;</span><br><span class="line">BeanFactory factory = <span class="keyword">new</span> XmlBeanFactory(<span class="keyword">new</span> FileSystemResource(path));</span><br><span class="line">UserImpl add = (UserImpl) factory.getBean(<span class="string">"userService"</span>);</span><br></pre></td></tr></table></figure><h4 id="多配置文件的使用"><a href="#多配置文件的使用" class="headerlink" title="多配置文件的使用"></a>多配置文件的使用</h4><blockquote><ul><li>当开发的项目较大时，使用一个spring配置文件是比较复杂的<br>其中可能具有几千行的配置信息，在其中查找某一个Bean对象的配<br>置是非常困难的。所以在spring中可以定义多个配置文件，将一类<br>配置放在一个文件中。<br>例如：</li></ul></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ApplicationContext context = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="keyword">new</span> String[]&#123;<span class="string">"applicationContext.xml"</span>, <span class="string">"applicationContext-part2.xml"</span>&#125;);</span><br></pre></td></tr></table></figure><h3 id="BeanFactory与Application对比"><a href="#BeanFactory与Application对比" class="headerlink" title="BeanFactory与Application对比"></a>BeanFactory与Application对比</h3><blockquote><ul><li>BeanFactory采取延迟加载，第一次getBean时才会初始化Bean</li><li>ApplicationContext采用即时加载，是对BeanFactory的扩展，<br>提供了更多的功能</li></ul></blockquote><pre><code>* 国际化处理* 事件传递* Bean自动装配* 各种不同应用层的Context实现</code></pre><h3 id="装配Bean的三种方式，-所谓的装配Bean就是在xml文件中写一个bean标签"><a href="#装配Bean的三种方式，-所谓的装配Bean就是在xml文件中写一个bean标签" class="headerlink" title="装配Bean的三种方式， 所谓的装配Bean就是在xml文件中写一个bean标签"></a>装配Bean的三种方式， 所谓的装配Bean就是在xml文件中写一个bean标签</h3><ul><li><p>构造方法实例化Bean</p><ul><li><p>创建BeanClass.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.instance;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BeanClass</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String message;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BeanClass</span><span class="params">()</span></span>&#123;</span><br><span class="line">        message = <span class="string">"构造方法实例化"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BeanClass</span><span class="params">(String s)</span></span>&#123;</span><br><span class="line">        message = s;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>编辑配置文件</p><p><code>&lt;!-- 构造方法实例化Bean--&gt; &lt;bean id=&quot;constructorInstance&quot; class=&quot;cn.lacknb.instance.BeanClass&quot; /&gt;</code></p></li></ul></li><li><p>静态工厂方法实例化Bean</p><ul><li><p>创建BeanStaticFactory.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.instance;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BeanStaticFactory</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> BeanClass beanInstance = <span class="keyword">new</span> BeanClass(<span class="string">"调用静态工厂方法实例化Bean"</span>);</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> BeanClass <span class="title">createInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> beanInstance;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>编辑配置文件</p><p><code>&lt;!-- 静态工厂实例化--&gt; &lt;bean id=&quot;staticFactoryInstance&quot; class=&quot;cn.lacknb.instance.BeanStaticFactory&quot; factory-method=&quot;createInstance&quot;/&gt;</code></p></li></ul></li><li><p>测试实例工厂方法实例化Bean</p><ul><li><p>创建BeanInstanceFactory.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.instance;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BeanInstanceFactory</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> BeanClass <span class="title">createBeanClassInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> BeanClass(<span class="string">"调用实例工厂方法实例化Bean"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>编辑配置文件</p><p><code>&lt;!-- 配置工厂--&gt; &lt;bean id=&quot;myFactory&quot; class=&quot;cn.lacknb.instance.BeanInstanceFactory&quot;/&gt;&lt;!-- 使用factory-bean属性指定配置工厂,使用factory-method属性指定使用工厂中的哪个方法实例化Bean--&gt; &lt;bean id=&quot;instanceFactoryInstance&quot; factory-bean=&quot;myFactory&quot; factory-method=&quot;createBeanClassInstance&quot; /&gt;</code></p></li></ul></li></ul><p><strong>xml文件汇总:</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/beans/spring-beans.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    构造方法实例化Bean--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"constructorInstance"</span> <span class="attr">class</span>=<span class="string">"cn.lacknb.instance.BeanClass"</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    静态工厂实例化--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"staticFactoryInstance"</span> <span class="attr">class</span>=<span class="string">"cn.lacknb.instance.BeanStaticFactory"</span> <span class="attr">factory-method</span>=<span class="string">"createInstance"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    配置工厂--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"myFactory"</span> <span class="attr">class</span>=<span class="string">"cn.lacknb.instance.BeanInstanceFactory"</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    使用factory-bean属性指定配置工厂,使用factory-method属性指定使用工厂中的哪个方法实例化Bean--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"instanceFactoryInstance"</span> <span class="attr">factory-bean</span>=<span class="string">"myFactory"</span> <span class="attr">factory-method</span>=<span class="string">"createBeanClassInstance"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>测试类汇总:</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lacknb.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.lacknb.instance.BeanClass;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestInstance</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 初始化Spring容器 ApplicationContext, 加载配置文件</span></span><br><span class="line">        ApplicationContext context = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"xml/beans01.xml"</span>);</span><br><span class="line">        <span class="comment">// 测试构造方法 实例化bean</span></span><br><span class="line">        BeanClass b1 = (BeanClass) context.getBean(<span class="string">"constructorInstance"</span>);</span><br><span class="line">        System.out.println(b1 + b1.message);</span><br><span class="line">        <span class="comment">// 测试静态工厂方法实例化Bean</span></span><br><span class="line">        BeanClass b2 = (BeanClass) context.getBean(<span class="string">"staticFactoryInstance"</span>);</span><br><span class="line">        System.out.println(b2 + b2.message);</span><br><span class="line">        <span class="comment">// 测试实例工厂方法实例化Bean</span></span><br><span class="line">        BeanClass b3 = (BeanClass) context.getBean(<span class="string">"instanceFactoryInstance"</span>);</span><br><span class="line">        System.out.println(b3 + b3.message);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>运行结果:</strong></p><p><img src="https://s2.ax1x.com/2019/10/17/KEhm5Q.png" alt="KEhm5Q.png"></p><h2 id="Bean的生命周期"><a href="#Bean的生命周期" class="headerlink" title="Bean的生命周期"></a>Bean的生命周期</h2><pre><code>1. instantiate bean对象实例化2. populate properties封装属性3. 如果Bean实现BeanNameAware 执行setBeanName4. 如果Bean实现BeanFactoryAware 执行setBeanFactory， 获取容器5. 如果存在类实现BeanPostProcessor (后处理Bean)，执行postProcessBeforeInitialization6. 如果Bean实现InitializingBean 执行afterPropertiesSet7. 调用&lt;bean init-method=&quot;init&quot;&gt;执行初始化方法init8. 如果存在类实现BeanPostProcessor(处理bean), 执行postProcessAfterInitialization 执行业务处理  9. 如果Bean实现DisposableBean执行destroy方法  10. 调用&lt;bean destroy-method=&quot;cusomerDestroy&quot;&gt; 指定销毁方法customerDestroy</code></pre><!-- rebuild by neat -->]]></content>
      
      
      <categories>
          
          <category> spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> spring </tag>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>scrapy爬虫项目的创建和设置</title>
      <link href="/2019/07/20/scrapy%E7%88%AC%E8%99%AB%E9%A1%B9%E7%9B%AE%E7%9A%84%E5%88%9B%E5%BB%BA%E5%92%8C%E8%AE%BE%E7%BD%AE/"/>
      <url>/2019/07/20/scrapy%E7%88%AC%E8%99%AB%E9%A1%B9%E7%9B%AE%E7%9A%84%E5%88%9B%E5%BB%BA%E5%92%8C%E8%AE%BE%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<!-- build time:Tue Dec 31 2019 09:54:11 GMT+0800 (CST) --><h1 id="scrapy爬虫项目的创建基本设置"><a href="#scrapy爬虫项目的创建基本设置" class="headerlink" title="scrapy爬虫项目的创建基本设置"></a>scrapy爬虫项目的创建基本设置</h1><h3 id="一、-创建指令"><a href="#一、-创建指令" class="headerlink" title="一、 创建指令"></a>一、 创建指令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$: scrapy startproject 项目名</span><br><span class="line"><span class="comment"># 例如</span></span><br><span class="line">$: scrapy startproject MySpider</span><br></pre></td></tr></table></figure><a id="more"></a><blockquote><ul><li>cd 项目名</li></ul></blockquote><pre><code>进入爬虫项目的目录生成爬虫文件（模板）</code></pre><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$: scrapy genspider 爬虫名字 爬虫的网址</span><br><span class="line"><span class="comment"># 例如</span></span><br><span class="line">$: scrapy genspider <span class="built_in">test</span> baidu.com</span><br></pre></td></tr></table></figure><h3 id="二、-setting文件的设置"><a href="#二、-setting文件的设置" class="headerlink" title="二、 setting文件的设置"></a>二、 setting文件的设置</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 这里是是否准守爬虫规则， 默认是True， 将这里改成False</span></span><br><span class="line"><span class="comment"># Obey robots.txt rules</span></span><br><span class="line">ROBOTSTXT_OBEY = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置控制台日志的显示，等级低于warning的日志信息，就不会显示出来</span></span><br><span class="line">LOG_LEVEL = <span class="string">'WARNING'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># headers取消注释， 还有UA标识</span></span><br><span class="line">DEFAULT_REQUEST_HEADERS = &#123;</span><br><span class="line">   <span class="string">'Accept'</span>: <span class="string">'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8'</span>,</span><br><span class="line">   <span class="string">'Accept-Language'</span>: <span class="string">'en'</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">USER_AGENT = <span class="string">'maoyan (+http://www.yourdomain.com)'</span></span><br><span class="line"><span class="comment"># 将其中的内容换成浏览器标识</span></span><br></pre></td></tr></table></figure><h4 id="下面是爬取并下载一个网站的高清壁纸的setting文件"><a href="#下面是爬取并下载一个网站的高清壁纸的setting文件" class="headerlink" title="下面是爬取并下载一个网站的高清壁纸的setting文件"></a>下面是爬取并下载一个网站的高清壁纸的setting文件</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Scrapy settings for wallpaper project</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># For simplicity, this file contains only settings considered important or</span></span><br><span class="line"><span class="comment"># commonly used. You can find more settings consulting the documentation:</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#     https://doc.scrapy.org/en/latest/topics/settings.html</span></span><br><span class="line"><span class="comment">#     https://doc.scrapy.org/en/latest/topics/downloader-middleware.html</span></span><br><span class="line"><span class="comment">#     https://doc.scrapy.org/en/latest/topics/spider-middleware.html</span></span><br><span class="line"></span><br><span class="line">BOT_NAME = <span class="string">'wallpaper'</span></span><br><span class="line"></span><br><span class="line">SPIDER_MODULES = [<span class="string">'wallpaper.spiders'</span>]</span><br><span class="line">NEWSPIDER_MODULE = <span class="string">'wallpaper.spiders'</span></span><br><span class="line"></span><br><span class="line">LOG_LEVEL = <span class="string">"WARNING"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Crawl responsibly by identifying yourself (and your website) on the user-agent</span></span><br><span class="line">USER_AGENT = <span class="string">'Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/55.0.2883.87 Safari/537.36'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Obey robots.txt rules</span></span><br><span class="line">ROBOTSTXT_OBEY = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Configure maximum concurrent requests performed by Scrapy (default: 16)</span></span><br><span class="line"><span class="comment"># CONCURRENT_REQUESTS = 32</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Configure a delay for requests for the same website (default: 0)</span></span><br><span class="line"><span class="comment"># See https://doc.scrapy.org/en/latest/topics/settings.html#download-delay</span></span><br><span class="line"><span class="comment"># See also autothrottle settings and docs</span></span><br><span class="line"><span class="comment"># DOWNLOAD_DELAY = 3</span></span><br><span class="line"><span class="comment"># The download delay setting will honor only one of:</span></span><br><span class="line"><span class="comment"># CONCURRENT_REQUESTS_PER_DOMAIN = 16</span></span><br><span class="line"><span class="comment"># CONCURRENT_REQUESTS_PER_IP = 16</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Disable cookies (enabled by default)</span></span><br><span class="line"><span class="comment"># COOKIES_ENABLED = False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Disable Telnet Console (enabled by default)</span></span><br><span class="line"><span class="comment"># TELNETCONSOLE_ENABLED = False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Override the default request headers:</span></span><br><span class="line">DEFAULT_REQUEST_HEADERS = &#123;</span><br><span class="line">    <span class="string">'Accept'</span>: <span class="string">'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8'</span>,</span><br><span class="line">    <span class="string">'Accept-Language'</span>: <span class="string">'en'</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># Enable or disable spider middlewares</span></span><br><span class="line"><span class="comment"># See https://doc.scrapy.org/en/latest/topics/spider-middleware.html</span></span><br><span class="line"><span class="comment"># SPIDER_MIDDLEWARES = &#123;</span></span><br><span class="line"><span class="comment">#    'wallpaper.middlewares.WallpaperSpiderMiddleware': 543,</span></span><br><span class="line"><span class="comment"># &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Enable or disable downloader middlewares</span></span><br><span class="line"><span class="comment"># See https://doc.scrapy.org/en/latest/topics/downloader-middleware.html</span></span><br><span class="line"><span class="comment"># DOWNLOADER_MIDDLEWARES = &#123;</span></span><br><span class="line"><span class="comment">#    'wallpaper.middlewares.WallpaperDownloaderMiddleware': 543,</span></span><br><span class="line"><span class="comment"># &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Enable or disable extensions</span></span><br><span class="line"><span class="comment"># See https://doc.scrapy.org/en/latest/topics/extensions.html</span></span><br><span class="line"><span class="comment"># EXTENSIONS = &#123;</span></span><br><span class="line"><span class="comment">#    'scrapy.extensions.telnet.TelnetConsole': None,</span></span><br><span class="line"><span class="comment"># &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Configure item pipelines</span></span><br><span class="line"><span class="comment"># See https://doc.scrapy.org/en/latest/topics/item-pipeline.html</span></span><br><span class="line">ITEM_PIPELINES = &#123;</span><br><span class="line">    <span class="string">'scrapy.pipelines.images.ImagesPipeline'</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="comment"># 'scrapy.pipelines.files.FilesPipeline': 2,</span></span><br><span class="line">    <span class="string">'wallpaper.pipelines.WallpaperPipeline'</span>: <span class="number">300</span>,</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># 设置下载参数</span></span><br><span class="line"><span class="comment"># FILES_STORE = "D:"  # 文件的存储路径</span></span><br><span class="line">IMAGES_STORE = <span class="string">"D:/images"</span>  <span class="comment"># 图片的存储路径</span></span><br><span class="line"><span class="comment"># 避免下载最近90天已经下载过的文件内容</span></span><br><span class="line">FILES_EXPIRES = <span class="number">90</span></span><br><span class="line"><span class="comment"># 避免下载最近90天已经下载过的图像内容</span></span><br><span class="line">IMAGES_EXPIRES = <span class="number">0</span></span><br><span class="line"><span class="comment"># 设置图片缩略图</span></span><br><span class="line">IMAGES_THUMBS = &#123;</span><br><span class="line">    <span class="string">'small'</span>: (<span class="number">50</span>, <span class="number">50</span>),</span><br><span class="line">    <span class="string">'big'</span>: (<span class="number">250</span>, <span class="number">250</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">#该字段的值为xxxItem中定义的存储图片链接的img_urls字段</span></span><br><span class="line">IMAGES_URLS_FIELD = <span class="string">"img_urls"</span></span><br><span class="line"><span class="comment"># 该字段的值为xxxItem中定义的存储图片信息的imgages字段</span></span><br><span class="line">IMAGES_RESULT_FIELD = <span class="string">"images"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 图片过滤器，最小高度和宽度，低于此尺寸不下载</span></span><br><span class="line">IMAGES_MIN_HEIGHT = <span class="number">110</span></span><br><span class="line">IMAGES_MIN_WIDTH = <span class="number">110</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Enable and configure the AutoThrottle extension (disabled by default)</span></span><br><span class="line"><span class="comment"># See https://doc.scrapy.org/en/latest/topics/autothrottle.html</span></span><br><span class="line"><span class="comment"># AUTOTHROTTLE_ENABLED = True</span></span><br><span class="line"><span class="comment"># The initial download delay</span></span><br><span class="line"><span class="comment"># AUTOTHROTTLE_START_DELAY = 5</span></span><br><span class="line"><span class="comment"># The maximum download delay to be set in case of high latencies</span></span><br><span class="line"><span class="comment"># AUTOTHROTTLE_MAX_DELAY = 60</span></span><br><span class="line"><span class="comment"># The average number of requests Scrapy should be sending in parallel to</span></span><br><span class="line"><span class="comment"># each remote server</span></span><br><span class="line"><span class="comment"># AUTOTHROTTLE_TARGET_CONCURRENCY = 1.0</span></span><br><span class="line"><span class="comment"># Enable showing throttling stats for every response received:</span></span><br><span class="line"><span class="comment"># AUTOTHROTTLE_DEBUG = False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Enable and configure HTTP caching (disabled by default)</span></span><br><span class="line"><span class="comment"># See https://doc.scrapy.org/en/latest/topics/downloader-middleware.html#httpcache-middleware-settings</span></span><br><span class="line"><span class="comment"># HTTPCACHE_ENABLED = True</span></span><br><span class="line"><span class="comment"># HTTPCACHE_EXPIRATION_SECS = 0</span></span><br><span class="line"><span class="comment"># HTTPCACHE_DIR = 'httpcache'</span></span><br><span class="line"><span class="comment"># HTTPCACHE_IGNORE_HTTP_CODES = []</span></span><br><span class="line"><span class="comment"># HTTPCACHE_STORAGE = 'scrapy.extensions.httpcache.FilesystemCacheStorage'</span></span><br></pre></td></tr></table></figure><!-- rebuild by neat -->]]></content>
      
      
      <categories>
          
          <category> 爬虫 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 爬虫 </tag>
            
            <tag> scrapy </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2019年7月20日</title>
      <link href="/2019/07/20/2019%E5%B9%B47%E6%9C%8820%E6%97%A5/"/>
      <url>/2019/07/20/2019%E5%B9%B47%E6%9C%8820%E6%97%A5/</url>
      
        <content type="html"><![CDATA[<!-- build time:Tue Dec 31 2019 09:54:11 GMT+0800 (CST) --><p>title: 2019年7月20日开始我的博客<br>date:<br>tags: [开始, 创建博客]<br>categories: 起始站</p><hr><h1 id="2019年7月20开始博客之旅"><a href="#2019年7月20开始博客之旅" class="headerlink" title="2019年7月20开始博客之旅"></a>2019年7月20开始博客之旅</h1><a id="more"></a><pre><code>2019年7月20日开始我的博客之旅，记录下平时学习的笔记和一些出现的问题，方便日后的使用。</code></pre><h5 id="python高亮的代码显示"><a href="#python高亮的代码显示" class="headerlink" title="python高亮的代码显示"></a>python高亮的代码显示</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">say_hello</span><span class="params">()</span>:</span></span><br><span class="line">print(<span class="string">'hello world'</span>)</span><br><span class="line">    </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">say_hello()</span><br></pre></td></tr></table></figure><h5 id="Java代码的高亮显示"><a href="#Java代码的高亮显示" class="headerlink" title="Java代码的高亮显示"></a>Java代码的高亮显示</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span></span>&#123;</span><br><span class="line">     <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String [] args)</span></span>&#123;</span><br><span class="line">     System.out.println(<span class="string">"Hello World"</span>);</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><h5 id="JavaScript代码显示"><a href="#JavaScript代码显示" class="headerlink" title="JavaScript代码显示"></a>JavaScript代码显示</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">HelloWorld</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   alert(<span class="string">"Hello World"</span>)</span><br><span class="line">   &#125;</span><br><span class="line">   $(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   HelloWorld()</span><br><span class="line">   &#125;)</span><br></pre></td></tr></table></figure><!-- rebuild by neat -->]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
